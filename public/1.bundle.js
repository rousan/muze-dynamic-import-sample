(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{7:function(t,e,n){window,t.exports=function(t){function e(e){for(var n,i,a=e[0],o=e[1],c=0,u=[];c<a.length;c++)i=a[c],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);for(l&&l(e);u.length;)u.shift()()}var n={},r={0:0},i={},a={119:function(){return{"./datamodel_wasm.js":{__wbindgen_json_serialize:function(t,e){return n[118].exports.c(t,e)},__wbindgen_object_drop_ref:function(t){return n[118].exports.d(t)},__wbindgen_throw:function(t,e){return n[118].exports.e(t,e)}}}}};function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var c=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=c);var u,s=document.createElement("script");s.charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=function(t){return o.p+""+t+".muze.js"}(t);var l=new Error;u=function(e){s.onerror=s.onload=null,clearTimeout(f);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,n[1](l)}r[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:s})}),12e4);s.onerror=s.onload=u,document.head.appendChild(s)}return({1:[119]}[t]||[]).forEach((function(t){var n=i[t];if(n)e.push(n);else{var r,c=a[t](),u=fetch(o.p+""+{119:"341e1b3b9989f4c51bcd"}[t]+".module.wasm");r=c instanceof Promise&&"function"==typeof WebAssembly.compileStreaming?Promise.all([WebAssembly.compileStreaming(u),c]).then((function(t){return WebAssembly.instantiate(t[0],t[1])})):"function"==typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(u,c):u.then((function(t){return t.arrayBuffer()})).then((function(t){return WebAssembly.instantiate(t,c)})),e.push(i[t]=r.then((function(e){return o.w[t]=(e.instance||e).exports})))}})),Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t},o.w={};var c=window.webpackJsonpmuze=window.webpackJsonpmuze||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var s=0;s<c.length;s++)e(c[s]);var l=u;return o(o.s=112)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(83),i=n(84),a=n(44),o=n(85);t.exports=function(t){return r(t)||i(t)||a(t)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(46);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(28).default,i=n(21);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(80),i=n(81),a=n(44),o=n(82);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(88);function i(e,n,a){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},t.exports.default=t.exports,t.exports.__esModule=!0),i(e,n,a||e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(72),i=n(73),a=n(43),o=n(74);t.exports=function(t){return r(t)||i(t)||a(t)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(49);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(31).default,i=n(27);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(66),i=n(67),a=n(38),o=n(68);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(102),i=n(103),a=n(38),o=n(104);t.exports=function(t){return r(t)||i(t)||a(t)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},,function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},,function(t,e,n){var r=n(75),i=n(76),a=n(43),o=n(77);t.exports=function(t,e){return r(t)||i(t,e)||a(t,e)||o()},t.exports.default=t.exports,t.exports.__esModule=!0},,function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){},function(t,e,n){var r=n(46),i=n(86);function a(e,n,o){return i()?(t.exports=a=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=a=function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a},t.exports.default=t.exports,t.exports.__esModule=!0),a.apply(null,arguments)}t.exports=a,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(109);function i(e,n,a){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},t.exports.default=t.exports,t.exports.__esModule=!0),i(e,n,a||e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},,,function(t,e,n){t.exports=n(69)},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,n(e)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){t.exports=n(79)},function(t,e,n){var r=n(39);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){(function(e){var n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,c="object"==typeof e&&e&&e.Object===Object&&e,u="object"==typeof self&&self&&self.Object===Object&&self,s=c||u||Function("return this")(),l=Object.prototype.toString,f=Math.max,h=Math.min,d=function(){return s.Date.now()};function p(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==l.call(t)}(t))return NaN;if(p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(n,"");var c=i.test(t);return c||a.test(t)?o(t.slice(2),c?2:8):r.test(t)?NaN:+t}t.exports=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return p(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),function(t,e,n){var r,i,a,o,c,u,s=0,l=!1,v=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function m(e){var n=r,a=i;return r=i=void 0,s=e,o=t.apply(a,n)}function b(t){return s=t,c=setTimeout(_,e),l?m(t):o}function x(t){var n=t-u;return void 0===u||n>=e||n<0||v&&t-s>=a}function _(){var t=d();if(x(t))return w(t);c=setTimeout(_,function(t){var n=e-(t-u);return v?h(n,a-(t-s)):n}(t))}function w(t){return c=void 0,y&&r?m(t):(r=i=void 0,o)}function k(){var t=d(),n=x(t);if(r=arguments,i=this,u=t,n){if(void 0===c)return b(u);if(v)return c=setTimeout(_,e),m(u)}return void 0===c&&(c=setTimeout(_,e)),o}return e=g(e)||0,p(n)&&(l=!!n.leading,a=(v="maxWait"in n)?f(g(n.maxWait)||0,e):a,y="trailing"in n?!!n.trailing:y),k.cancel=function(){void 0!==c&&clearTimeout(c),s=0,r=u=i=c=void 0},k.flush=function(){return void 0===c?o:w(d())},k}(t,e,{leading:r,maxWait:e,trailing:i})}}).call(this,n(70))},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(42);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(45);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){},function(t,e){},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,n(e,r)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e,n,r,i,a,o){try{var c=t[a](o),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function c(t){n(o,i,a,c,u,"next",t)}function u(t){n(o,i,a,c,u,"throw",t)}c(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function n(t,e,n,r,i,a,o){try{var c=t[a](o),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=t.apply(e,r);function c(t){n(o,i,a,c,u,"next",t)}function u(t){n(o,i,a,c,u,"throw",t)}c(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(41),i=n(71);function a(e,n,o){return i()?(t.exports=a=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=a=function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a},t.exports.default=t.exports,t.exports.__esModule=!0),a.apply(null,arguments)}t.exports=a,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(41);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(23).default,i=n(78);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){window,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e){t.forEach((function(t){null!=t&&(e[t]=1)}))},a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._set={},i(e,this._set)}return r(t,[{key:"append",value:function(t){return i(t,this._set),this}},{key:"toArray",value:function(){return Object.keys(this._set)}}],[{key:"difference",value:function(e,n){var r=void 0,i=[],a=e._set,o=n._set;for(r in a)({}).hasOwnProperty.call(a,r)&&(r in o||i.push(r));return new t(i)}}]),t}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var s=function(t){if("object"===(void 0===t?"undefined":c(t))){if(null===t)return!1;if("[object Object]"===Object.prototype.toString.call(t))return"Object"===(t.constructor.toString().match(/^function (.*)\(\)/m)||[])[1]}return!1},l="undefined"==typeof window?{}:window,f=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame||function(t){setTimeout(t,16)},h=function t(){return t.__lastTime===(new Date).getTime()?t.__lastTime.toString()+(t.__id++).toString():(t.__id=0,(t.__lastTime=(new Date).getTime()).toString()+(t.__id++).toString())},d=function(t){var e=[];return t.forEach((function(t){return e.push.apply(e,u(t))})),e},p=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return{dependencies:e.slice(0,e.length-1),fn:e[e.length-1]}},g=function(t){var e=[],n={};return t.forEach((function(t){return n[t.qualifiedName]=-1})),function t(r){r.forEach((function(r){var i,a=void 0,o=void 0,c=void 0;(i=r.qualifiedName)in n?-1!==(a=n[i])&&a!==e.length-1&&(o=e.slice(0,a),c=e.slice(a+1),e=o.concat(c),c.forEach((function(t,e){return n[t.qualifiedName]=e+o.length})),n[i]=e.push(r)-1):n[i]=e.push(r)-1,t(r.outgoingEdges)}))}(t),e},v=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r={};return e.forEach((function(t){Object.assign(r,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t.name,t.value))})),r},y=function(t){return t.value},m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fn=e,this.dep=[]}return o(t,[{key:"addDependencies",value:function(){var t;return(t=this.dep).push.apply(t,arguments),this}},{key:"getDependencies",value:function(){return this.dep}},{key:"get",value:function(){return this.fn}}]),t}(),b=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function x(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var _=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},this.name=e,this.qualifiedName=n,this.edges=[],this.outgoingEdges=[],this._seed=null,this.requireResolve=!0,this.retriever=r.retriever,this.history=[],this.resolver=null,this.electricEdges=[]}return b(t,[{key:"addDependencies",value:function(){for(var t,e=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=this.edges).push.apply(t,r),r.forEach((function(t){return t.outgoingEdges.push(e)})),this}},{key:"addElectricNode",value:function(t){return this.electricEdges.push(t),this}},{key:"resolve",value:function(){return this.seed=this.resolver.apply(this,x(this.retrieveDetails())),this.history.push(this.seed),this.requireResolve=!1,this}},{key:"retrieveDetails",value:function(){return 0===this.edges.length?[{name:this.name,qualifiedName:this.qualifiedName,value:this.seed}]:this.retriever.apply(this,x(this.edges.map((function(t){return t.qualifiedName}))))}},{key:"repeatHead",value:function(){var t=this.history,e=t[t.length-1];return 0===t.length||t.push(e),this}},{key:"flush",value:function(){var t=this.history,e=t[t.length-1];return t.length=0,t.push(e),this}},{key:"isRoot",value:function(){return null===this.name}},{key:"seed",get:function(){return this._seed},set:function(t){return this._seed=t,this.requireResolve=!0,this}}]),t}(),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edges=[],this.listeners={nextFrame:[],currentFrame:[]}}return w(t,[{key:"addEdges",value:function(){var t;return(t=this.edges).push.apply(t,arguments),this}},{key:"regListenerForCurrFrame",value:function(t){var e=this,n=this.listeners.currentFrame,r=n.push(function(t,e){var n=function(){e.apply(void 0,u(t.map((function(t){var e=t.history,n=e.length-1;return[e[n-1<0?0:n-1],e[n]]}))))};return n.__id=h(),n}(this.edges,t))-1;return function(){e.listeners.currentFrame=n.filter((function(t,e){return e!==r}))}}},{key:"regListenerForNextFrame",value:function(t){var e=this,n=this.listeners.nextFrame,r=n.push(function(t,e){var n=function(){e.apply(void 0,u(t.map((function(t){var e=t.history;return[e[0],e[e.length-1]]}))))};return n.__id=h(),n}(this.edges,t))-1;return function(){e.listeners.nextFrame=n.filter((function(t,e){return e!==r}))}}},{key:"hasNextFrameListener",value:function(){return!!this.listeners.nextFrame.length}}]),t}(),S=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function M(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var E=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.qualifiedNodeMap={},this.retriever=function(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map((function(e){var n=t[e];return{name:n.name,qualifiedName:n.qualifiedName,value:n.seed}}))}}(this.qualifiedNodeMap),this.root=new _(null,null,{retriever:this.retriever}),this.root.resolver=v,this._wholeSet=null,this._propagate=!0,this.propagationOverride={currentFrameListeners:!1,nextFrameListeners:!1},this._schedule=function(t){var e=[],n=null;return t=t&&"function"==typeof t&&t||function(){},function(r,i){[].push.apply(e,r),null===n&&(n=f((function(){var r=e.slice(0);e.length=0,n=null,function(t){return t.reduce((function(t,e){return e.__id in t.map||(t.map[e.__id]=1,t.unique.push(e)),t}),{map:{},unique:[]}).unique}(r).forEach((function(t){return t()})),t(i)})))}}((function(t){var n=void 0;for(n in t.flushTarget){if(!{}.hasOwnProperty.call(e.qualifiedNodeMap,n))return;e.qualifiedNodeMap[n].flush()}}))}return S(t,[{key:"createNodesFrom",value:function(t,e){var n=void 0,r=void 0,i=this.qualifiedNodeMap,o=this.root,c=this.retriever;return function t(e,r,a){var u=void 0,l=void 0,f=void 0,h=void 0;for(u in e)if({}.hasOwnProperty.call(e,u))if(h=new _(u,l=""+r+u,{retriever:c}),i[l]=h,void 0!==(f=a.perv)?f.addDependencies(h):o.addDependencies(h),s(n=e[u]))t(n,""+r+u+".",{perv:h}),h.resolver=v;else if(n instanceof m){var d;h.resolver=n.get(),(d=h).addDependencies.apply(d,M(n.getDependencies().map((function(t){return i[t]}))))}else h.resolver=y,h.seed=n}(t,null===e?"":e+".",{perv:i[e]}),this._wholeSet=new a(Object.keys(this.qualifiedNodeMap)),(r=this.constructor.getResolvedList(o).concat(o).filter((function(t){return t.requireResolve}))).forEach((function(t){return t.resolve()})),g(r).forEach((function(t){return t.resolve()})),this}},{key:"getNodeValue",value:function(t){if(t in this.qualifiedNodeMap)return this.qualifiedNodeMap[t].seed}},{key:"createElectricNodeOf",value:function(t,e){var n,r=this,i=t.map((function(t){return r.qualifiedNodeMap[t]})),a=(n=new k).addEdges.apply(n,M(i));return i.forEach((function(t){return t.addElectricNode(a)})),a["regListenerFor"+e.type](e.fn)}},{key:"update",value:function(t){var e=void 0,n=void 0,r=[],i=t.map((function(t){return t[0].seed=t[1],t[0]}));i.forEach((function(t){return t.resolve()}));var o=!0,c=!1,u=void 0;try{for(var s,l=d(i.map((function(t){return t.electricEdges})))[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var f=s.value;r.push(f)}}catch(t){c=!0,u=t}finally{try{!o&&l.return&&l.return()}finally{if(c)throw u}}if(e=new a(i.map((function(t){return t.qualifiedName}))),!this._propagate)return this.__execUniqueElectricEdges(r),this._propagate=!0,this;(n=g(i)).forEach((function(t){return t.resolve()})),e.append(n.map((function(t){return t.qualifiedName})));var h=!0,p=!1,v=void 0;try{for(var y,m=d(n.map((function(t){return t.electricEdges})))[Symbol.iterator]();!(h=(y=m.next()).done);h=!0){var b=y.value;r.push(b)}}catch(t){p=!0,v=t}finally{try{!h&&m.return&&m.return()}finally{if(p)throw v}}return this.__execUniqueElectricEdges(Array.from(new Set(r)),e),this}},{key:"__execUniqueElectricEdges",value:function(t,e){var n=this,r=[],i=[];return e&&a.difference(this._wholeSet,e).toArray().forEach((function(t){return n.qualifiedNodeMap[t].repeatHead()})),t.forEach((function(t){r.push.apply(r,M(t.listeners.currentFrame))})),t.forEach((function(t){i.push.apply(i,M(t.listeners.nextFrame))})),!this.propagationOverride.currentFrameListeners&&r.forEach((function(t){return t()})),!this.propagationOverride.nextFrameListeners&&this._schedule(i,{flushTarget:e}),this.resetPropagationOverride(),this}},{key:"resetNodeValue",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.map((function(e){return t.qualifiedNodeMap[e]})).map((function(t){return[t,t.seed]}));return this.update(i),this}},{key:"stopPropagation",value:function(){return this._propagate=!1,this}},{key:"resetPropagationOverride",value:function(){return this.propagationOverride.currentFrameListeners=!1,this.propagationOverride.nextFrameListeners=!1,this}},{key:"setPropagationOverride",value:function(t){return this.propagationOverride[t+"Listeners"]=!0,this}},{key:"getNodeFromQualifiedName",value:function(t){return this.qualifiedNodeMap[t]}}],[{key:"getResolvedList",value:function(t){var e=[];return function t(e,n,r){var i=void 0;e.edges.forEach((function(e){t(e,n,r)})),e.isRoot()||(i=e.qualifiedName)in r||(n.push(e),r[i]=1)}(t,e,{}),e}}]),t}(),O=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function C(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._graph=new E,this._lockFlag=!1,this._reqQ=[]}return O(t,[{key:"append",value:function(){var t=void 0,e=void 0;return 1===arguments.length?(t=null,e=arguments.length<=0?void 0:arguments[0]):(t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1]),this._addPropInModel(t,e),this}},{key:"calculatedProp",value:function(){var t,e,n,r=void 0,i=void 0,a=void 0;return arguments.length>2?(i=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2]):(i=null,r=arguments.length<=0?void 0:arguments[0],a=arguments.length<=1?void 0:arguments[1]),e=a(p),(t=n=new m(e.fn)).addDependencies.apply(t,C(e.dependencies)),this._addPropInModel(i,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},r,n)),this}},{key:"_addPropInModel",value:function(t,e){return this._graph.createNodesFrom(e,t),this}},{key:"on",value:function(t,e,n){var r,i=t instanceof Array?t:[t],a=this._graph.createElectricNodeOf(i,{type:"CurrFrame",fn:e});return n&&(r=this._graph.stopPropagation().setPropagationOverride("nextFrame")).resetNodeValue.apply(r,C(t)),a}},{key:"next",value:function(t,e,n){var r,i=t instanceof Array?t:[t],a=this._graph.createElectricNodeOf(i,{type:"NextFrame",fn:e});return n&&(r=this._graph.stopPropagation().setPropagationOverride("currentFrame")).resetNodeValue.apply(r,C(t)),a}},{key:"lock",value:function(){return this._lockFlag=!0,this._reqQ.length=0,this}},{key:"unlock",value:function(){return this._lockFlag=!1,this.setProp(this._reqQ),this._reqQ.length=0,this}},{key:"prop",value:function(){var t,e=void 0,n=void 0;switch(t=arguments.length){case 1:e=arguments.length<=0?void 0:arguments[0];break;case 2:e=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1];break;default:return this}return 2===t?(this._lockFlag?this._reqQ.push([e,n]):this.setProp([[e,n]]),this):this._graph.getNodeValue(e)}},{key:"setProp",value:function(t){var e=this;return 0===t.length||this._graph.update(t.map((function(t){return[e._graph.getNodeFromQualifiedName(t[0]),t[1]]}))),this}},{key:"graph",value:function(){return this._graph}},{key:"serialize",value:function(){return this._graph.root.seed}}],[{key:"create",value:function(e){return(new t)._addPropInModel(null,e)}}]),t}();e.default=A}])},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t.exports.default=t.exports,t.exports.__esModule=!0,n.apply(this,arguments)}t.exports=n,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){},function(t){t.exports=JSON.parse('{"name":"muze","private":true,"version":"3.0.0-alpha-2","description":"Composable visualisation library for web with a data-first approach","homepage":"https://muzejs.org","author":"Muzejs.org (https://muzejs.org/)","license":"MIT","contributors":[{"name":"Akash Ghoswami","email":"akashgoswami90s@gmail.com"},{"name":"Ranajit Banerjee","email":"ranajit.113124@gmail.com","url":"https://github.com/ranajitbanerjee"},{"name":"Mridul Meharia","email":"mehariamridul@gmail.com","url":"https://github.com/mridulmeh"},{"name":"Subhash Haldar"},{"name":"Sandeep Acharya"},{"name":"Rousan Ali","email":"rousanali786@gmail.com","url":"https://rousan.io"},{"name":"Ujjal Kumar Dutta","email":"duttaujjal143@gmail.com"}],"main":"src/index.js","keywords":["muze","svg","vector","graphics","data-visualization","visualization","renderer","fusioncharts","relational","algebra","relation"],"repository":{"type":"git","url":"https://github.com/chartshq/muze"},"dependencies":{"@babel/runtime":"^7.10.2","@chartshq/layout":"^1.0.0","@chartshq/muze-firebolt":"^1.0.0","@chartshq/muze-legend":"^1.0.0","@chartshq/visual-cell":"^1.0.0","@chartshq/visual-group":"^1.0.0","@chartshq/visual-layer":"^1.0.0","@chartshq/visual-unit":"^1.0.0","muze-utils":"^1.0.0"}}')},function(t,e,n){var r=n(49),i=n(101);function a(e,n,o){return i()?(t.exports=a=Reflect.construct,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=a=function(t,e,n){var i=[null];i.push.apply(i,e);var a=new(Function.bind.apply(t,i));return n&&r(a,n.prototype),a},t.exports.default=t.exports,t.exports.__esModule=!0),a.apply(null,arguments)}t.exports=a,t.exports.default=t.exports,t.exports.__esModule=!0},,,,,,function(t,e,n){var r=/(^|[/\\])(muze\.js)([?#].*)?$/gi;""===n.p&&(n.p=function(){var t,e,n=window.document.getElementsByTagName("script"),i=n.length;for(e=0;e<i;e+=1)if(null!=(t=n[e].getAttribute("src"))&&null!==t.match(r))return t.replace(r,"$1");return""}())},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){c=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=x(o,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};p[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(S([])));v&&v!==e&&n.call(v,i)&&(p=v);var y=d.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,c){var u=s(t[i],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,c)}))}c(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=y.constructor=d,d.constructor=h,h.displayName=c(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),c(y,o,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(42);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){c=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof f?e:f,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(t,e,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return{value:void 0,done:!0}}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var c=x(o,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function h(){}function d(){}var p={};p[i]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(S([])));v&&v!==e&&n.call(v,i)&&(p=v);var y=d.prototype=f.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,a){function o(){return new e((function(r,o){!function r(i,a,o,c){var u=s(t[i],t,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,o,c)}),(function(t){r("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return r("throw",t,o,c)}))}c(u.arg)}(i,a,r,o)}))}return r=r?r.then(o,o):o()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return h.prototype=y.constructor=d,d.constructor=h,h.displayName=c(d,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new b(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},m(y),c(y,o,"Generator"),y[i]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){var n=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null!=n){var r,i,a=[],o=!0,c=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){c=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(c)throw i}}return a}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(45);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){},function(t,e,n){var r=n(1);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){var r=n(39);t.exports=function(t){if(Array.isArray(t))return r(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){var r=n(10);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"SCALES",(function(){return ft}));var i={};n.r(i),n.d(i,"scaleLinear",(function(){return yn})),n.d(i,"scaleThreshold",(function(){return Dn})),n.d(i,"scaleLog",(function(){return En})),n.d(i,"scalePow",(function(){return Cn})),n.d(i,"scaleIdentity",(function(){return mn})),n.d(i,"scaleOrdinal",(function(){return Kt})),n.d(i,"scaleSequential",(function(){return ia})),n.d(i,"scaleQuantize",(function(){return Pn})),n.d(i,"scaleQuantile",(function(){return An})),n.d(i,"schemeCategory10",(function(){return Hi})),n.d(i,"schemeCategory20",(function(){return Vi})),n.d(i,"schemeCategory20b",(function(){return Wi})),n.d(i,"scaleBand",(function(){return Qt})),n.d(i,"scaleTime",(function(){return Bi}));var a={};n.r(a),n.d(a,"schemeDark2",(function(){return oa})),n.d(a,"schemePaired",(function(){return ca})),n.d(a,"schemeAccent",(function(){return ua})),n.d(a,"schemePastel1",(function(){return sa})),n.d(a,"schemePastel2",(function(){return la})),n.d(a,"schemeSet1",(function(){return fa})),n.d(a,"schemeSet2",(function(){return ha})),n.d(a,"schemeSet3",(function(){return da})),n.d(a,"schemeBlues",(function(){return ga})),n.d(a,"schemeBrBG",(function(){return ya})),n.d(a,"schemePRGn",(function(){return ba})),n.d(a,"schemePiYG",(function(){return _a})),n.d(a,"interpolateBrBG",(function(){return ma})),n.d(a,"interpolatePRGn",(function(){return xa})),n.d(a,"interpolatePiYG",(function(){return wa})),n.d(a,"interpolatePuOr",(function(){return ka})),n.d(a,"interpolateRdBu",(function(){return Sa})),n.d(a,"interpolateRdGy",(function(){return Ma})),n.d(a,"interpolateRdYlBu",(function(){return Ea})),n.d(a,"interpolateRdYlGn",(function(){return Oa})),n.d(a,"interpolateSpectral",(function(){return Ca})),n.d(a,"interpolateBlues",(function(){return va})),n.d(a,"interpolateGreens",(function(){return Aa})),n.d(a,"interpolateGreys",(function(){return Pa})),n.d(a,"interpolateOranges",(function(){return Da})),n.d(a,"interpolatePurples",(function(){return Ra})),n.d(a,"interpolateReds",(function(){return Ia})),n.d(a,"interpolateViridis",(function(){return Na})),n.d(a,"interpolateInferno",(function(){return ja})),n.d(a,"interpolateMagma",(function(){return Fa})),n.d(a,"interpolatePlasma",(function(){return La})),n.d(a,"interpolateWarm",(function(){return Ba})),n.d(a,"interpolateCool",(function(){return za})),n.d(a,"interpolateCubehelixDefault",(function(){return Va})),n.d(a,"interpolateBuGn",(function(){return Ua})),n.d(a,"interpolateBuPu",(function(){return Ga})),n.d(a,"interpolateGnBu",(function(){return qa})),n.d(a,"interpolateOrRd",(function(){return Ya})),n.d(a,"interpolatePuBuGn",(function(){return Xa})),n.d(a,"interpolatePuBu",(function(){return $a})),n.d(a,"interpolatePuRd",(function(){return Ka})),n.d(a,"interpolateRdPu",(function(){return Qa})),n.d(a,"interpolateYlGnBu",(function(){return Za})),n.d(a,"interpolateYlGn",(function(){return Ja})),n.d(a,"interpolateYlOrBr",(function(){return to})),n.d(a,"interpolateYlOrRd",(function(){return eo})),n.d(a,"interpolateRainbow",(function(){return Wa}));var o={};n.r(o),n.d(o,"UNIT_GLOBAL_NAMESPACE",(function(){return no})),n.d(o,"UNIT_LOCAL_NAMESPACE",(function(){return ro})),n.d(o,"LAYER_LOCAL_NAMESPACE",(function(){return io})),n.d(o,"LAYER_GLOBAL_NAMESPACE",(function(){return ao})),n.d(o,"GROUP_GLOBAL_NAMESPACE",(function(){return oo})),n.d(o,"GROUP_LOCAL_NAMESPACE",(function(){return co})),n.d(o,"CANVAS_LOCAL_NAMESPACE",(function(){return uo})),n.d(o,"CANVAS_GLOBAL_NAMESPACE",(function(){return so})),n.d(o,"VIRTUAL_SCROLLING_NAMESPACE",(function(){return lo}));var c={};n.r(c),n.d(c,"resolveFieldView",(function(){return dt})),n.d(c,"getDataStore",(function(){return xt})),n.d(c,"DataStore",(function(){return bt})),n.d(c,"DataModel",(function(){return ot})),n.d(c,"ID_FIELD_NAME",(function(){return pt})),n.d(c,"DUMMY_FIELD_NAME",(function(){return gt})),n.d(c,"ReservedFields",(function(){return ut})),n.d(c,"CommonProps",(function(){return st})),n.d(c,"COORD_TYPES",(function(){return lt})),n.d(c,"STATE_NAMESPACES",(function(){return o})),n.d(c,"scales",(function(){return i})),n.d(c,"colorSchemes",(function(){return a})),n.d(c,"CONSTANTS",(function(){return r})),n.d(c,"intersectAny",(function(){return uf})),n.d(c,"deepEquals",(function(){return pf})),n.d(c,"getNearestValue",(function(){return Rs})),n.d(c,"getValueParser",(function(){return ql})),n.d(c,"transformColor",(function(){return lf})),n.d(c,"transformColors",(function(){return sl})),n.d(c,"detectColor",(function(){return bl})),n.d(c,"hslToRgb",(function(){return pl})),n.d(c,"rgbToHsv",(function(){return gl})),n.d(c,"hexToHsv",(function(){return yl})),n.d(c,"hsvToRgb",(function(){return vl})),n.d(c,"hslaToRgb",(function(){return ml})),n.d(c,"escapeHTML",(function(){return El})),n.d(c,"angleToRadian",(function(){return rl})),n.d(c,"generateGetterSetters",(function(){return qs})),n.d(c,"getArraySum",(function(){return Ys})),n.d(c,"ERROR_MSG",(function(){return Zs})),n.d(c,"interpolator",(function(){return al})),n.d(c,"colorInterpolator",(function(){return cl})),n.d(c,"numberInterpolator",(function(){return ol})),n.d(c,"piecewiseInterpolator",(function(){return ll})),n.d(c,"reqAnimFrame",(function(){return Ts})),n.d(c,"cancelAnimFrame",(function(){return Ns})),n.d(c,"nextAnimFrame",(function(){return Gl})),n.d(c,"getMax",(function(){return bs})),n.d(c,"getMin",(function(){return xs})),n.d(c,"getDomainFromData",(function(){return _s})),n.d(c,"getUniqueId",(function(){return gs})),n.d(c,"mergeRecursive",(function(){return Js})),n.d(c,"unionDomain",(function(){return ks})),n.d(c,"multiFieldUnionDomain",(function(){return Ms})),n.d(c,"unionExtendDomainDiff",(function(){return Ss})),n.d(c,"replaceCSSPrefix",(function(){return il})),n.d(c,"symbolFns",(function(){return Es})),n.d(c,"defaultValue",(function(){return zs})),n.d(c,"easeFns",(function(){return Os})),n.d(c,"clone",(function(){return vs})),n.d(c,"interpolateArray",(function(){return el})),n.d(c,"getMinPoint",(function(){return As})),n.d(c,"getMaxPoint",(function(){return Ps})),n.d(c,"getClosestIndexOf",(function(){return Ds})),n.d(c,"registerListeners",(function(){return Sl})),n.d(c,"Voronoi",(function(){return Vs})),n.d(c,"checkExistence",(function(){return ys})),n.d(c,"sanitizeIP",(function(){return ms})),n.d(c,"getMinDiff",(function(){return Ls})),n.d(c,"capitalizeFirst",(function(){return Fs})),n.d(c,"getWindow",(function(){return Is})),n.d(c,"getQualifiedClassName",(function(){return Bs})),n.d(c,"getDependencyOrder",(function(){return Hs})),n.d(c,"objectIterator",(function(){return Ws})),n.d(c,"intSanitizer",(function(){return Gs})),n.d(c,"enableChainedTransaction",(function(){return Ks})),n.d(c,"isHTMLElem",(function(){return Qs})),n.d(c,"isEqual",(function(){return $s})),n.d(c,"isSimpleObject",(function(){return ps})),n.d(c,"nextFrame",(function(){return nl})),n.d(c,"getObjProp",(function(){return Us})),n.d(c,"getDataModelFromIdentifiers",(function(){return kl})),n.d(c,"getDataModelFromRange",(function(){return _l})),n.d(c,"transposeArray",(function(){return Ol})),n.d(c,"toArray",(function(){return Cl})),n.d(c,"extendsClass",(function(){return Al})),n.d(c,"assembleModelFromIdentifiers",(function(){return xl})),n.d(c,"isValidValue",(function(){return Ml})),n.d(c,"nestCollection",(function(){return Tl})),n.d(c,"stack",(function(){return Il})),n.d(c,"getSymbol",(function(){return Pl})),n.d(c,"Scales",(function(){return Ll})),n.d(c,"Path",(function(){return Bl})),n.d(c,"Symbols",(function(){return jl})),n.d(c,"pathInterpolators",(function(){return Fl})),n.d(c,"hslInterpolator",(function(){return ul})),n.d(c,"getSmallestDiff",(function(){return zl})),n.d(c,"require",(function(){return Ul})),n.d(c,"formatTemporal",(function(){return Vl})),n.d(c,"timeFormats",(function(){return Hl})),n.d(c,"createSelection",(function(){return tl})),n.d(c,"retrieveNearestGroupByReducers",(function(){return Yl})),n.d(c,"retrieveFieldDisplayName",(function(){return Xl})),n.d(c,"sanitizeDomainWhenEqual",(function(){return ws})),n.d(c,"sortCategoricalData",(function(){return $l})),n.d(c,"sortNumericData",(function(){return Kl})),n.d(c,"sortCategoricalField",(function(){return Zl})),n.d(c,"sortContinuousField",(function(){return ef})),n.d(c,"intersect",(function(){return nf})),n.d(c,"partition",(function(){return af})),n.d(c,"mix",(function(){return of})),n.d(c,"componentRegistry",(function(){return cf})),n.d(c,"getArrayDiff",(function(){return Nl})),n.d(c,"difference",(function(){return rf})),n.d(c,"getArrayIndexMap",(function(){return wl})),n.d(c,"arraysEqual",(function(){return Xs})),n.d(c,"getReadableTicks",(function(){return sf})),n.d(c,"unique",(function(){return js})),n.d(c,"getQueryFromTarget",(function(){return hf})),n.d(c,"pointWithinCircle",(function(){return ff})),n.d(c,"getIndexMap",(function(){return df})),n.d(c,"d3Hsl",(function(){return Oe})),n.d(c,"d3Transpose",(function(){return Yu})),n.d(c,"getNormalizedFieldName",(function(){return gf})),n.d(c,"extractKeyValues",(function(){return vf})),n.d(c,"extractExcludingKeyValues",(function(){return yf})),n.d(c,"numericAsc",(function(){return mf})),n.d(c,"numericDesc",(function(){return bf})),n.d(c,"d3Difference",(function(){return $u})),n.d(c,"d3Sum",(function(){return Ku})),n.d(c,"perfCalculator",(function(){return xf})),n.d(c,"selectElement",(function(){return hp})),n.d(c,"makeElement",(function(){return dp})),n.d(c,"applyStyle",(function(){return pp})),n.d(c,"addClass",(function(){return mp})),n.d(c,"removeClass",(function(){return bp})),n.d(c,"appendElement",(function(){return gp})),n.d(c,"setAttrs",(function(){return yp})),n.d(c,"setStyles",(function(){return xp})),n.d(c,"createElement",(function(){return Ep})),n.d(c,"createElements",(function(){return _p})),n.d(c,"clipElement",(function(){return wp})),n.d(c,"getElementsByClassName",(function(){return kp})),n.d(c,"getMousePos",(function(){return Sp})),n.d(c,"getEvent",(function(){return Op})),n.d(c,"getD3Drag",(function(){return Cp})),n.d(c,"getSmartComputedStyle",(function(){return Ap})),n.d(c,"getClientPoint",(function(){return Mp})),n.d(c,"hasTouch",(function(){return Pp})),n.d(c,"Store",(function(){return Tp})),n.d(c,"transactor",(function(){return Np})),n.d(c,"timeMillisecond",(function(){return nr})),n.d(c,"timeSecond",(function(){return tr})),n.d(c,"timeMinute",(function(){return Zn})),n.d(c,"timeHour",(function(){return Kn})),n.d(c,"timeDay",(function(){return Xn})),n.d(c,"timeWeek",(function(){return zn})),n.d(c,"timeMonth",(function(){return Ln})),n.d(c,"timeYear",(function(){return Fn})),n.d(c,"Smartlabel",(function(){return eg})),n.d(c,"dataSelect",(function(){return is})),n.d(c,"LifeCycleManager",(function(){return sg})),n.d(c,"RTree",(function(){return Po})),n.d(c,"throttle",(function(){return B.a}));var u={};n.r(u),n.d(u,"CLASSPREFIX",(function(){return Sg})),n.d(u,"STACK",(function(){return Mg})),n.d(u,"GROUP",(function(){return Eg})),n.d(u,"IDENTITY",(function(){return Og})),n.d(u,"ANGLE",(function(){return Cg})),n.d(u,"RADIUS",(function(){return Ag})),n.d(u,"SIZE",(function(){return Pg})),n.d(u,"COLOR",(function(){return Dg})),n.d(u,"SHAPE",(function(){return Rg})),n.d(u,"TEXT",(function(){return Ig})),n.d(u,"DETAIL",(function(){return Tg})),n.d(u,"OUTER_RADIUS_VALUE",(function(){return Ng})),n.d(u,"TEXT_ANCHOR_MIDDLE",(function(){return Fg})),n.d(u,"ENCODING",(function(){return jg})),n.d(u,"STROKE_DASHARRAY",(function(){return Lg})),n.d(u,"ASCENDING",(function(){return Bg})),n.d(u,"AGG_FN_SUM",(function(){return zg})),n.d(u,"AREA_LAYER",(function(){return Hg})),n.d(u,"ARC_LAYER",(function(){return Wg})),n.d(u,"LINE_LAYER",(function(){return Vg})),n.d(u,"TEXT_LAYER",(function(){return Ug})),n.d(u,"POINT_LAYER",(function(){return Gg})),n.d(u,"BAR_LAYER",(function(){return qg})),n.d(u,"TICK_LAYER",(function(){return Yg})),n.d(u,"SIMPLE_LAYER",(function(){return Xg})),n.d(u,"BASE_LAYER",(function(){return $g})),n.d(u,"LEFT",(function(){return Kg})),n.d(u,"RIGHT",(function(){return Qg})),n.d(u,"CENTER",(function(){return Zg}));var s={};n.r(s),n.d(s,"BOTTOM",(function(){return iv})),n.d(s,"TOP",(function(){return av})),n.d(s,"LEFT",(function(){return ov})),n.d(s,"RIGHT",(function(){return cv})),n.d(s,"AXIS_X",(function(){return uv})),n.d(s,"AXIS_Y",(function(){return sv})),n.d(s,"axisOrientationMap",(function(){return lv}));var l={};n.r(l),n.d(l,"LINEAR",(function(){return fv})),n.d(l,"BAND",(function(){return hv})),n.d(l,"TIME",(function(){return dv})),n.d(l,"COLOR",(function(){return pv})),n.d(l,"ORDINAL",(function(){return gv})),n.d(l,"QUANTIZE",(function(){return vv})),n.d(l,"QUANTILE",(function(){return yv})),n.d(l,"LOG",(function(){return mv})),n.d(l,"POW",(function(){return bv})),n.d(l,"IDENTITY",(function(){return xv})),n.d(l,"SEQUENTIAL",(function(){return _v})),n.d(l,"THRESHOLD",(function(){return wv}));var f={};n.r(f),n.d(f,"X",(function(){return cm})),n.d(f,"Y",(function(){return um})),n.d(f,"WIDTH",(function(){return sm})),n.d(f,"HEIGHT",(function(){return lm})),n.d(f,"MEASUREMENT",(function(){return fm})),n.d(f,"CONFIG",(function(){return hm})),n.d(f,"MIN_UNIT_WIDTH",(function(){return dm})),n.d(f,"MIN_UNIT_HEIGHT",(function(){return pm})),n.d(f,"DIMENSIONS",(function(){return gm})),n.d(f,"MEASURES",(function(){return vm})),n.d(f,"DIMENSION",(function(){return ym})),n.d(f,"MEASURE",(function(){return mm})),n.d(f,"CONTINUOUS",(function(){return bm})),n.d(f,"BINNED",(function(){return xm})),n.d(f,"PIVOT",(function(){return _m})),n.d(f,"FORMAT",(function(){return wm})),n.d(f,"MOUNT",(function(){return km})),n.d(f,"HAS_DATA_UPDATED",(function(){return Sm})),n.d(f,"ROWS",(function(){return Mm})),n.d(f,"COLUMNS",(function(){return Em})),n.d(f,"DATA",(function(){return Om})),n.d(f,"COL",(function(){return Cm})),n.d(f,"ROW",(function(){return Am})),n.d(f,"COLUMN",(function(){return Pm})),n.d(f,"COLOR",(function(){return Dm})),n.d(f,"SHAPE",(function(){return Rm})),n.d(f,"SIZE",(function(){return Im})),n.d(f,"DETAIL",(function(){return Tm})),n.d(f,"LAYERS",(function(){return Nm})),n.d(f,"TRANSFORM",(function(){return Fm})),n.d(f,"ORDINAL",(function(){return jm})),n.d(f,"LINEAR",(function(){return Lm})),n.d(f,"LEFT",(function(){return Bm})),n.d(f,"RIGHT",(function(){return zm})),n.d(f,"TOP",(function(){return Hm})),n.d(f,"BOTTOM",(function(){return Wm})),n.d(f,"RETINAL",(function(){return Vm})),n.d(f,"CELL",(function(){return Um})),n.d(f,"X_AXES",(function(){return Gm})),n.d(f,"Y_AXES",(function(){return qm})),n.d(f,"ENTRY_CELLS",(function(){return Ym})),n.d(f,"INITIALIZED",(function(){return Xm})),n.d(f,"EXIT_CELLS",(function(){return $m})),n.d(f,"AXIS",(function(){return Km})),n.d(f,"UNIT",(function(){return Qm})),n.d(f,"UPDATED",(function(){return Zm})),n.d(f,"BEFORE_UPDATE",(function(){return Jm})),n.d(f,"VALUE_MATRIX",(function(){return tb})),n.d(f,"FACET_HEADERS",(function(){return eb})),n.d(f,"RADIUS",(function(){return nb})),n.d(f,"ANGLE",(function(){return rb})),n.d(f,"ANGLE0",(function(){return ib})),n.d(f,"ARC",(function(){return ab})),n.d(f,"CATEGORICAL",(function(){return ob})),n.d(f,"TEMPORAL",(function(){return cb})),n.d(f,"BAR",(function(){return ub})),n.d(f,"LINE",(function(){return sb})),n.d(f,"POINT",(function(){return lb})),n.d(f,"PRIMARY",(function(){return fb})),n.d(f,"SECONDARY",(function(){return hb})),n.d(f,"BOTH",(function(){return db})),n.d(f,"INTERACTION",(function(){return pb})),n.d(f,"GRID_LINES",(function(){return gb})),n.d(f,"GRID_BANDS",(function(){return vb})),n.d(f,"HEADER",(function(){return yb})),n.d(f,"ROW_FACET_HEADER",(function(){return mb})),n.d(f,"COLUMN_FACET_HEADER",(function(){return bb})),n.d(f,"FACET",(function(){return xb})),n.d(f,"TABLE",(function(){return _b})),n.d(f,"DEFAULT",(function(){return wb})),n.d(f,"ASCENDING",(function(){return kb})),n.d(f,"DESCENDING",(function(){return Sb})),n.d(f,"DARK",(function(){return Mb})),n.d(f,"NONE",(function(){return Eb})),n.d(f,"NORMAL",(function(){return Ob})),n.d(f,"DARKER",(function(){return Cb})),n.d(f,"DEFAULT_BANDWIDTH_ARC_MARK",(function(){return Ab})),n.d(f,"MUZE_CLASSNAME_PREFIX",(function(){return Pb}));var h={};n.r(h),n.d(h,"transformColor",(function(){return Ub})),n.d(h,"retrieveEncodingInf",(function(){return Gb})),n.d(h,"encodingFieldInfRetriever",(function(){return qb})),n.d(h,"transformData",(function(){return Yb})),n.d(h,"getIndividualClassName",(function(){return Xb})),n.d(h,"dataNormalizers",(function(){return $b})),n.d(h,"getNormalizedData",(function(){return Kb})),n.d(h,"domainCalculator",(function(){return Qb})),n.d(h,"attachDataToVoronoi",(function(){return Jb})),n.d(h,"updateStyle",(function(){return tx})),n.d(h,"animateGroup",(function(){return ex})),n.d(h,"positionPoints",(function(){return nx})),n.d(h,"getGroupSpan",(function(){return rx})),n.d(h,"getPlotMeasurement",(function(){return ix})),n.d(h,"renderLayer",(function(){return ax})),n.d(h,"resolveInvalidTransformType",(function(){return ox})),n.d(h,"getValidTransform",(function(){return cx})),n.d(h,"getValidTransformForAggFn",(function(){return ux})),n.d(h,"getMarkId",(function(){return sx})),n.d(h,"resolveEncodingValues",(function(){return lx})),n.d(h,"getColorMetaInf",(function(){return fx})),n.d(h,"toCartesianCoordinates",(function(){return px})),n.d(h,"sortData",(function(){return yx})),n.d(h,"getBoundBoxes",(function(){return mx})),n.d(h,"getDataFromEvent",(function(){return bx})),n.d(h,"getDisconnectedPoints",(function(){return xx}));var d={};n.r(d),n.d(d,"DRAG",(function(){return Mx})),n.d(d,"HOVER",(function(){return Ex})),n.d(d,"SELECTIONDRAG",(function(){return Ox})),n.d(d,"CLICK",(function(){return Cx})),n.d(d,"LONGTOUCH",(function(){return Ax})),n.d(d,"TOUCHDRAG",(function(){return Px})),n.d(d,"ALL_ACTIONS",(function(){return Dx}));var p={};n.r(p),n.d(p,"BRUSH",(function(){return e_})),n.d(p,"HIGHLIGHT",(function(){return n_})),n.d(p,"TOOLTIP",(function(){return r_})),n.d(p,"FILTER",(function(){return i_})),n.d(p,"SELECT",(function(){return a_}));var g={};n.r(g),n.d(g,"HighlightBeahviour",(function(){return o_})),n.d(g,"BrushBehaviour",(function(){return c_})),n.d(g,"FilterBehaviour",(function(){return u_})),n.d(g,"SelectBehaviour",(function(){return l_}));var v={};n.r(v),n.d(v,"ANCHORS",(function(){return g_})),n.d(v,"BRUSH_ANCHORS",(function(){return y_})),n.d(v,"PERSISTENT_ANCHORS",(function(){return m_})),n.d(v,"FILTER",(function(){return b_})),n.d(v,"HIGHLIGHTER",(function(){return x_})),n.d(v,"CROSSLINE",(function(){return __})),n.d(v,"TOOLTIP",(function(){return v_})),n.d(v,"FRAGMENTED_TOOLTIP",(function(){return w_})),n.d(v,"AXIS_LABEL_HIGHLIGHTER",(function(){return k_}));var y={};n.r(y),n.d(y,"SelectionBox",(function(){return A_})),n.d(y,"Tooltip",(function(){return K_})),n.d(y,"FragmentedTooltip",(function(){return Q_})),n.d(y,"Crossline",(function(){return Z_})),n.d(y,"FilterEffect",(function(){return J_})),n.d(y,"AxisLabelHighLighter",(function(){return tw}));var m={};n.r(m),n.d(m,"prepareDrawingInf",(function(){return Ik})),n.d(m,"pointTranslators",(function(){return Tk})),n.d(m,"CENTER",(function(){return Nk})),n.d(m,"INSIDE",(function(){return Fk})),n.d(m,"OUTSIDE",(function(){return jk})),n.d(m,"getStrokeWidthByPosition",(function(){return Lk}));var b={};n.r(b),n.d(b,"AREA_LAYER",(function(){return kS})),n.d(b,"ARC_LAYER",(function(){return SS})),n.d(b,"LINE_LAYER",(function(){return MS})),n.d(b,"TEXT_LAYER",(function(){return ES})),n.d(b,"POINT_LAYER",(function(){return OS})),n.d(b,"BAR_LAYER",(function(){return CS})),n.d(b,"TICK_LAYER",(function(){return AS})),n.d(b,"SIMPLE_LAYER",(function(){return PS})),n.d(b,"BASE_LAYER",(function(){return DS}));var x={};n.r(x),n.d(x,"DATA",(function(){return TS})),n.d(x,"CONFIG",(function(){return NS})),n.d(x,"MEASUREMENT",(function(){return FS})),n.d(x,"DOMAIN",(function(){return jS})),n.d(x,"MOUNT",(function(){return LS}));var _={};n.r(_),n.d(_,"PROPS",(function(){return x})),n.d(_,"LAYER_TYPES",(function(){return b})),n.d(_,"CONSTANTS",(function(){return u}));var w={};n.r(w),n.d(w,"getDimensionMeasureMap",(function(){return WS})),n.d(w,"transformDataModels",(function(){return VS})),n.d(w,"getLayerFromDef",(function(){return US})),n.d(w,"resolveEncodingTransform",(function(){return GS})),n.d(w,"sanitizeLayerDef",(function(){return qS})),n.d(w,"attachDataToLayers",(function(){return YS})),n.d(w,"attachAxisToLayers",(function(){return XS})),n.d(w,"getLayerAxisIndex",(function(){return eM})),n.d(w,"unionDomainFromLayers",(function(){return nM})),n.d(w,"renderLayers",(function(){return rM})),n.d(w,"getNearestDimensionalValue",(function(){return iM})),n.d(w,"getLayersBy",(function(){return aM})),n.d(w,"removeLayersBy",(function(){return oM})),n.d(w,"createSideEffectGroup",(function(){return cM})),n.d(w,"createRenderPromise",(function(){return uM})),n.d(w,"getRadiusRange",(function(){return sM})),n.d(w,"setAxisRange",(function(){return lM})),n.d(w,"createTrackerElement",(function(){return fM}));var k={};n.r(k),n.d(k,"CONFIG",(function(){return hM})),n.d(k,"DATA",(function(){return dM})),n.d(k,"AXES",(function(){return pM})),n.d(k,"LAYERDEFS",(function(){return gM})),n.d(k,"WIDTH",(function(){return vM})),n.d(k,"HEIGHT",(function(){return yM})),n.d(k,"MOUNT",(function(){return mM})),n.d(k,"TRANSFORM",(function(){return bM})),n.d(k,"TRANSFORMEDDATA",(function(){return xM})),n.d(k,"DATADOMAIN",(function(){return _M})),n.d(k,"FIELDS",(function(){return wM})),n.d(k,"LAYERS",(function(){return kM})),n.d(k,"DOMAIN",(function(){return SM}));var S={};n.r(S),n.d(S,"CLASSPREFIX",(function(){return MM})),n.d(S,"IDFIELD",(function(){return EM})),n.d(S,"GRID_LINE_PARENT_GROUP_CLASS",(function(){return OM})),n.d(S,"GRID_BAND_PARENT_GROUP_CLASS",(function(){return CM})),n.d(S,"GRID_PARENT_GROUP",(function(){return AM})),n.d(S,"BAND",(function(){return PM})),n.d(S,"TICK",(function(){return DM})),n.d(S,"GRID_BAND",(function(){return RM})),n.d(S,"GRID_LINE",(function(){return IM})),n.d(S,"CONSOLIDATED",(function(){return TM})),n.d(S,"FRAGMENTED",(function(){return NM})),n.d(S,"FACET_BY_FIELDS",(function(){return FM})),n.d(S,"RETINAL_FIELDS",(function(){return jM})),n.d(S,"PARENT_ALIAS",(function(){return LM})),n.d(S,"LAYERS",(function(){return BM})),n.d(S,"CACHED_DATA",(function(){return zM})),n.d(S,"STORE",(function(){return HM}));var M={};n.r(M),n.d(M,"REACTIVE_PROPS",(function(){return k})),n.d(M,"CONSTANTS",(function(){return S}));var E={};n.r(E),n.d(E,"hasContinuousAxis",(function(){return EE})),n.d(E,"extractUnitConfig",(function(){return OE})),n.d(E,"hasOneField",(function(){return CE})),n.d(E,"getHeaderText",(function(){return AE})),n.d(E,"headerCreator",(function(){return PE})),n.d(E,"sanitizeCheck",(function(){return DE})),n.d(E,"resolveFacetHeaderFormatter",(function(){return RE})),n.d(E,"findInGroup",(function(){return IE})),n.d(E,"getAxisType",(function(){return TE})),n.d(E,"getEncoder",(function(){return NE})),n.d(E,"getHeaderAxisFrom",(function(){return FE})),n.d(E,"getBorders",(function(){return jE})),n.d(E,"getFieldsFromSuppliedLayers",(function(){return LE})),n.d(E,"extractFields",(function(){return BE})),n.d(E,"groupFacetKeys",(function(){return zE})),n.d(E,"transformDataModel",(function(){return HE}));var O={};n.r(O),n.d(O,"getAdjustedDomain",(function(){return XO})),n.d(O,"setRetinalFieldsInLayer",(function(){return $O})),n.d(O,"getDefaultMark",(function(){return KO})),n.d(O,"createRetinalAxis",(function(){return QO})),n.d(O,"getIndex",(function(){return ZO})),n.d(O,"getLayerConfFromFields",(function(){return JO})),n.d(O,"resolveAxisConfig",(function(){return tC})),n.d(O,"getSortingConfig",(function(){return eC}));var C={};n.r(C),n.d(C,"VisualEncoder",(function(){return VE})),n.d(C,"CartesianEncoder",(function(){return rC})),n.d(C,"RetinalEncoder",(function(){return iC}));var A={};n.r(A),n.d(A,"SelectBehaviour",(function(){return PC}));var P={};n.r(P),n.d(P,"SelectionBox",(function(){return ZC})),n.d(P,"LegendHighlighter",(function(){return tA})),n.d(P,"LegendMarker",(function(){return cA}));var D={};n.r(D),n.d(D,"share",(function(){return UA})),n.d(D,"html",(function(){return qA})),n(65);var R=n(16),I=n.n(R),T=n(50),N=n.n(T),F=n(35),j=n.n(F),L=n(40),B=n.n(L),z=n(51),H=n.n(z),W=n(52),V=n.n(W),U=n(11),G=n.n(U),q=n(25),Y=n.n(q),X=n(19),$=n.n(X),K=n(20),Q=n.n(K),Z=n(53),J=n.n(Z),tt=n(54),et=n.n(tt),nt=n(36),rt=n.n(nt),it=n(37),at=n.n(it),ot={onReady:function(){return function(t,e,n,r){return new(n||(n=Promise))((function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function c(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}u((r=r.apply(t,e||[])).next())}))}(void 0,void 0,void 0,(function(){return function(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}(this,(function(t){switch(t.label){case 0:return"undefined"!=typeof window&&void 0!==n.p&&""===n.p&&(n.p=function(){var t,e,n=/(^|[\/\\])(datamodel\.js)([\?#].*)?$/gi,r=window.document.getElementsByTagName("script"),i=r.length;for(e=0;e<i;e+=1)if(null!=(t=r[e].getAttribute("src"))&&null!==t.match(n))return t.replace(n,"$1");return""}()),[4,n.e(1).then(n.bind(null,138))];case 1:return[2,t.sent().default]}}))}))}},ct=function(){function t(){$()(this,t)}return Q()(t,[{key:"getData",value:function(){throw new Error("Method not implemented")}},{key:"getSchema",value:function(){throw new Error("Method not implemented")}},{key:"select",value:function(){throw new Error("Method not implemented")}},{key:"groupBy",value:function(){throw new Error("Method not implemented")}},{key:"project",value:function(){throw new Error("Method not implemented")}},{key:"sort",value:function(){throw new Error("Method not implemented")}},{key:"splitByRow",value:function(){throw new Error("Method not implemented")}},{key:"splitByColumn",value:function(){throw new Error("Method not implemented")}}],[{key:"loadData",value:function(){throw new Error("Method not implemented")}}]),t}(),ut={ROW_ID:"__id__",MEASURE_NAMES:"__measure_names__"},st={ACTION_INF:"actionInf",ON_LAYER_DRAW:"onLayerDraw",MATRIX_CREATED:"matrixCreated"},lt={POLAR:"polar",CARTESIAN:"cartesian"},ft={DISCRETE:"discrete",CONTINUOUS:"continuous"},ht=function(t){return function(t){for(;t;){var e=t.getParent();if(!e)break;t=e}return t}(t.model).getPropagationCriterias()},dt=function(t){return t.subtype()===ft.CONTINUOUS||"temporal"===t.subtype()?ft.CONTINUOUS:ft.DISCRETE},pt="__id__",gt="8bc7333f_a088_4b34_b02a_b5a6064f9b85";function vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var yt=ft.DISCRETE,mt=ft.CONTINUOUS,bt=function(t){J()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt()(t);if(e){var i=rt()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return et()(this,n)}}(n);function n(t){var r;$()(this,n);var i=(r=e.call(this)).constructor.DataModel();return r._model=t instanceof i?t:new i(t),r._fieldsConfig=null,r.propagationState=new Map,r._propagationListeners=[],r._id=r.model.id(),r}return Q()(n,[{key:"model",get:function(){return this._model}},{key:"getField",value:function(t){return this.model.getField(t)}},{key:"getFieldData",value:function(t){return this.model.getField(t).data()}},{key:"select",value:function(){var t,e=this,n=(t=this.model).select.apply(t,arguments);return n instanceof Array?n.map((function(t){return e.clone(t)})):this.clone(n)}},{key:"groupBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.model.groupBy(t,e);return this.clone(n)}},{key:"sort",value:function(t){var e=this.model._context._fieldMap,n=t.reduce((function(t,n){var r=Y()(n,2),i=r[0],a=r[1],o=void 0===a?"asc":a;return void 0===e.get(i)?t:[].concat(G()(t),[[i,o]])}),[]);if(!n.length)return this;var r=this.model.sort(n);return this.clone(r)}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.start,n=t.end,r=t.fieldMeta,i=this.model.getData(e,n,r),a=i.data,o=i.schema;if(t.excludeFields){var c=a,u=o;return t.excludeFields.forEach((function(t){var e=u.findIndex((function(e){return e.name===t}));c=c.map((function(t){return t.filter((function(t,n){return n!==e}))})),u=u.filter((function(t,n){return n!==e}))})),{data:c,schema:u}}return{data:a,schema:o}}},{key:"isEmpty",value:function(){return!this.model.getDataMeta().rows}},{key:"isDimension",value:function(t){var e=this.getField(t);return e&&"dimension"===e.type()}},{key:"isMeasure",value:function(t){var e=this.getField(t);return e&&"measure"===e.type()}},{key:"isTemporal",value:function(t){var e=this.getField(t);return e&&"temporal"===e.subtype()}},{key:"isCategorical",value:function(t){var e=this.getField(t);return e&&"categorical"===e.subtype()}},{key:"isFieldPresent",value:function(t){return!!this.getField(t)}},{key:"removeChild",value:function(t){this.model.removeChild(t.model)}},{key:"getSchema",value:function(){return this.model.getSchema()}},{key:"getValueAtIndex",value:function(t,e){var n=this.getField(t);return n?n.data()[e]:null}},{key:"getFormattedValueAtIndex",value:function(t,e){return this.getField(t).data()[e]}},{key:"getFieldNames",value:function(){return this.getSchema().map((function(t){return t.name}))}},{key:"getFieldIndex",value:function(t){return t&&this.isFieldPresent(t)?this.model._context._fieldMap.get(t).index:null}},{key:"getRowsCount",value:function(){return this.model.getDataMeta().rows}},{key:"getDimensions",value:function(){return this.getSchema().filter((function(t){return"dimension"===t.type})).map((function(t){return t.name}))}},{key:"hasOneValue",value:function(){for(var t=this,e=!1,r=this.getFieldNames(),i=function(i,a){if(e=r.some((function(e){var r=t.getValueAtIndex(e,i);return!(!r||n.isInvalid(r))&&r})))return"break"},a=0,o=this.getRowsCount();a<o&&!e&&"break"!==i(a);a++);return e}},{key:"dispose",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.removeCriteria({dm:this}),this.model.dispose(t)}},{key:"project",value:function(t){var e=this,n=G()(new Set(t.filter((function(t){return e.getField(t)})))),r=this.model.project(n);return this.clone(r)}},{key:"calculateVariable",value:function(){var t,e=(t=this.model).calculateVariable.apply(t,arguments);return this.clone(e)}},{key:"clone",value:function(t){return new this.constructor(t)}},{key:"getSubtype",value:function(t){var e=this.getField(t);return e?e.subtype():null}},{key:"getMeasures",value:function(){return this.getSchema().filter((function(t){return"measure"===t.type&&t.name!==ut.ROW_ID})).map((function(t){return t.name}))}},{key:"splitByRow",value:function(t){var e=this;return this.model.splitByRow(t).map((function(t){return e.clone(t)}))}},{key:"splitByColumn",value:function(t,e){var n=this,r=[];return(t=t.length?t:[[]]).forEach((function(t){r.push(n.project(V()(Array,G()(new Set([].concat(G()(t),G()(e)))))))})),r}},{key:"getQueryFromIds",value:function(t,e){var r=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3?arguments[3]:void 0,o=this.getUidMap(),c=[],u={},s=this.isTemporal(e[0]);if(a){var l=[];return e.forEach((function(e){var n=t[e];l.push({field:e,value:n[0],operator:"gte"},{field:e,value:n[1],operator:"lte"})})),{conditions:l,operator:"and"}}if(1===e.length&&i&&!s){var f=t.map((function(t){var i=r.getFormattedValueAtIndex(e[0],o[t]);return n.isInvalid(i)&&(i=n.getActualValue(i)),i}));return{operator:"in",field:e[0],value:f}}return t.forEach((function(t){var a=[];if(i){var s="";if(e.forEach((function(e){var i=r.getFormattedValueAtIndex(e,o[t]);n.isInvalid(i)&&(i=n.getActualValue(i)),a.push({field:e,operator:"eq",value:i}),s+=i})),u[s])return;u[s]=!0}else a.push({field:e[0],operator:"eq",value:t});c.push({conditions:a,operator:"and"})})),{conditions:c,operator:"or"}}},{key:"saveCriteria",value:function(t){var e=t.propQuery,n=t.payload,r=n.propagationSourceId,i=n.sourceAction,a="".concat(i,"-").concat(r);return ht(this).set(a,{propQuery:e,payload:n,targetDms:t.targetDms,dm:this}),this}},{key:"removeCriteria",value:function(t){var e,n=ht(this),r=Object.keys(t),i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return vt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(n);try{var a=function(){var i=Y()(e.value,2),a=i[0],o=i[1];r.every((function(e){return o.payload[e]===t[e]}))&&n.delete(a)};for(i.s();!(e=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}},{key:"getAllQueriesExcept",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=[],r=Object.keys(t),i=[];return e.forEach((function(e){r.length&&r.every((function(n){return e.payload[n]===t[n]}))||(n.push({criteria:e.propQuery,dm:e.dm.model,fields:e.payload.fields}),i.push.apply(i,G()(e.targetDms)))})),{propInf:n,targetDms:i}}},{key:"getCombinedQuery",value:function(t,e){var n=this,r=!1,i=t.payload,a=t.propQuery,o=t.save,c=[];if(o)a?(this.saveCriteria(t),r=!0):(this.removeCriteria({propagationSourceId:i.propagationSourceId,sourceAction:i.sourceAction}),r=!1);else if(!a)return[{propInf:[{criteria:null,fields:[]}]}];var u={criteria:t.propQuery,dm:this.model,fields:t.payload.fields},s=[],l=[];if(e.forEach((function(t){if(t.payload.propagationSourceId!==i.propagationSourceId){var a=n.getAllQueriesExcept({propagationSourceId:t.payload.propagationSourceId},e);a.targetDms=new Set(t.targetDms),a.exclude=!1,!r&&a.propInf.push(u),c.push(a),s.push({criteria:t.propQuery,dm:t.dm.model,fields:t.payload.fields}),l.push(a.targetDms)}})),r||!e.size)c.push({propInf:[].concat(s,[u]),targetDms:new Set(l.map((function(t){return G()(t)})).flat()),exclude:!0});else{var f=this.getAllQueriesExcept({},e),h=t.targetDms;f.propInf.push(u),f.targetDms=new Set([].concat(G()(h),G()(f.targetDms))),f.exclude=!0,c.push({propInf:[u].concat(s),targetDms:new Set(h),exclude:!1},f)}return c}},{key:"propagate",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.fields||(e.fields=this.getDimensions());var i=ht(this),a=e.fields,o=e.interpolated,c={propQuery:t?r.isQuery?t:o?this.getFilterRangeQuery(t):this.getQueryFromIds(t,a,r.resolveId):null,payload:e,targetDms:r.targetDms,save:r.save},u=this.getCombinedQuery(c,i);return u.forEach((function(t){var r=t.propInf,i=t.targetDms,a=void 0===i?new Set:i,o=t.exclude,u=Object.assign({},c,{targetDms:a,exclude:o,propagationId:e.sourceAction});r.length&&n.model.propagate(r,u)})),this}},{key:"getFilterRangeQuery",value:function(t){var e=this;return{operator:"and",conditions:Object.keys(t).map((function(n){return{conditions:e.isCategorical(n)?[{field:n,value:t[n],operator:"in"}]:(t[n][0]instanceof Array?t[n]:[t[n]]).map((function(t){return{conditions:[{field:n,operator:"gte",value:t[0]},{field:n,operator:"lte",value:t[1]}],operator:"and"}})),operator:"or"}}))}}},{key:"onPropagation",value:function(t){var e=this;return this._propagationListeners.push(t),this.model.unsubscribePropagationListeners().onPropagation((function(t,n){var r;e._propagationListeners.length&&(t?(r=e.clone(t),e.removeChild(r)):r=null,r&&(r._propagation=!0),e._propagationListeners.forEach((function(t){return t(r,n)})))})),this}},{key:"unsubscribe",value:function(t){return t&&(this._propagationListeners=this._propagationListeners.filter((function(e){return e!==t}))),this}},{key:"getDerivations",value:function(){return this.model.getDerivations()}},{key:"getAncestorDerivations",value:function(){var t=this.model.getParent();return t?t.getDerivations():[]}},{key:"getUids",value:function(){return this.model.getField(pt).data()}},{key:"getTemporalFields",value:function(){return this.getSchema().filter((function(t){return"temporal"===t.subtype})).map((function(t){return t.name}))}},{key:"getUidMap",value:function(){if(this._uidMap)return this._uidMap;var t=this.getUids();return this._uidMap=t.reduce((function(t,e,n){return t[e]=n,t}),{}),this._uidMap}},{key:"getDomain",value:function(t,e){if(this.isEmpty())return null;var n=this.getField(t);return n?e===yt?n.uniques():e===mt?n.minMax():n.domain():null}},{key:"id",value:function(){return this._id}},{key:"breakLink",value:function(t){return t.removeChild(this),this.detachParent(t)}},{key:"detachParent",value:function(t){return this._parent=null,this.model.detachParent(t),this}},{key:"replica",value:function(){var t=this.getFieldNames();return this.project(t.filter((function(t){return t!==ut.ROW_ID})))}},{key:"createEmptyDm",value:function(){return this.select({field:pt,value:Number.MAX_SAFE_INTEGER,operator:"eq"})}}],[{key:"ComparisonOperators",get:function(){return this.DataModel().ComparisonOperators}},{key:"FilteringModes",get:function(){return this.DataModel().FilteringModes}},{key:"LogicalOperators",get:function(){return this.DataModel().LogicalOperators}},{key:"SortOrder",get:function(){return this.DataModel().SortOrder}},{key:"DateTimeFormatter",get:function(){return this.DataModel().DateTimeFormatter}},{key:"FieldType",get:function(){return this.DataModel().FieldType}},{key:"FieldSubtype",get:function(){return this.DataModel().FieldSubtype}},{key:"DerivationOperations",get:function(){return this.DataModel().DerivationOperations}},{key:"Invalid",value:function(t){return new(this.DataModel().Invalid)(t)}},{key:"AggregationFunctions",get:function(){return this.DataModel().AggregationFunctions}},{key:"DataModel",value:function(){return arguments.length?(this._dataModelCls=arguments.length<=0?void 0:arguments[0],this):this._dataModelCls}},{key:"loadData",value:function(t,e,n){return this.DataModel().loadData(t,e,n)}},{key:"isInvalid",value:function(t){return t instanceof this.DataModel().Invalid}},{key:"getActualValue",value:function(t){return this.isInvalid(t)?t.value():t}}]),n}(ct),xt=H()(at.a.mark((function t(){var e;return at.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot.onReady();case 2:return e=t.sent,bt.DataModel(e),t.abrupt("return",bt);case 5:case"end":return t.stop()}}),t)})))(),_t=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},wt=function(t){var e;return 1===t.length&&(e=t,t=function(t,n){return _t(e(t),n)}),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}},kt=wt(_t),St=kt.right,Mt=(kt.left,St),Et=function(t){return null===t?NaN:+t},Ot=Array.prototype,Ct=(Ot.slice,Ot.map,function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}),At=Math.sqrt(50),Pt=Math.sqrt(10),Dt=Math.sqrt(2),Rt=function(t,e,n){var r,i,a,o,c=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=It(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++c<i;)a[c]=(t+c)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++c<i;)a[c]=(t-c)/o;return r&&a.reverse(),a};function It(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=At?10:a>=Pt?5:a>=Dt?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=At?10:a>=Pt?5:a>=Dt?2:1)}function Tt(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=At?i*=10:a>=Pt?i*=5:a>=Dt&&(i*=2),e<t?-i:i}var Nt=function(t,e,n){if(null==n&&(n=Et),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}};function Ft(){}function jt(t,e){var n=new Ft;if(t instanceof Ft)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}Ft.prototype=jt.prototype={constructor:Ft,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Lt=jt,Bt=function(){var t,e,n,r=[],i=[];function a(n,i,o,c){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var u,s,l,f=-1,h=n.length,d=r[i++],p=Lt(),g=o();++f<h;)(l=p.get(u=d(s=n[f])+""))?l.push(s):p.set(u,[s]);return p.each((function(t,e){c(g,e,a(t,i,o,c))})),g}return n={object:function(t){return a(t,0,zt,Ht)},map:function(t){return a(t,0,Wt,Vt)},entries:function(t){return function t(n,a){if(++a>r.length)return n;var o,c=i[a-1];return null!=e&&a>=r.length?o=n.entries():(o=[],n.each((function(e,n){o.push({key:n,values:t(e,a)})}))),null!=c?o.sort((function(t,e){return c(t.key,e.key)})):o}(a(t,0,Wt,Vt),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}};function zt(){return{}}function Ht(t,e,n){t[e]=n}function Wt(){return Lt()}function Vt(t,e,n){t.set(e,n)}function Ut(){}var Gt=Lt.prototype;Ut.prototype=function(t,e){var n=new Ut;if(t instanceof Ut)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}.prototype={constructor:Ut,has:Gt.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Gt.remove,clear:Gt.clear,values:Gt.keys,size:Gt.size,empty:Gt.empty,each:Gt.each};var qt=Array.prototype,Yt=qt.map,Xt=qt.slice,$t={name:"implicit"};function Kt(t){var e=Lt(),n=[],r=$t;function i(i){var a=i+"",o=e.get(a);if(!o){if(r!==$t)return r;e.set(a,o=n.push(i))}return t[(o-1)%t.length]}return t=null==t?[]:Xt.call(t),i.domain=function(t){if(!arguments.length)return n.slice();n=[],e=Lt();for(var r,a,o=-1,c=t.length;++o<c;)e.has(a=(r=t[o])+"")||e.set(a,n.push(r));return i},i.range=function(e){return arguments.length?(t=Xt.call(e),i):t.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Kt().domain(n).range(t).unknown(r)},i}function Qt(){var t,e,n=Kt().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,c=0,u=0,s=.5;function l(){var n=r().length,l=a[1]<a[0],f=a[l-0],h=a[1-l];t=(h-f)/Math.max(1,n-c+2*u),o&&(t=Math.floor(t)),f+=(h-f-t*(n-c))*s,e=t*(1-c),o&&(f=Math.round(f),e=Math.round(e));var d=Ct(n).map((function(e){return f+t*e}));return i(l?d.reverse():d)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),l()):r()},n.range=function(t){return arguments.length?(a=[+t[0],+t[1]],l()):a.slice()},n.rangeRound=function(t){return a=[+t[0],+t[1]],o=!0,l()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(o=!!t,l()):o},n.padding=function(t){return arguments.length?(c=u=Math.max(0,Math.min(1,t)),l()):c},n.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),l()):c},n.paddingOuter=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u},n.align=function(t){return arguments.length?(s=Math.max(0,Math.min(1,t)),l()):s},n.copy=function(){return Qt().domain(r()).range(a).round(o).paddingInner(c).paddingOuter(u).align(s)},n.invertExtent=function(t,e){var n,o,c,u,s=+t,l=arguments.length>1?+e:s,f=a[1]<a[0],h=f?i().reverse():i(),d=h.length-1;if(h.push(h[d]+this.step()),l<s&&(c=s,s=l,l=c),!(l<h[0]||s>a[1-f]))return n=Math.max(0,Zt(h,s)),u=Zt(h,l),o=s===l?n:Math.max(n,u-1),f&&(c=n,n=d-o,o=d-c),n>o?void 0:r().slice(n,o+1)},n.invert=function(t,e){var n,o,c=+t,u=arguments.length>1?+e:c,s=a[1]<a[0],l=s?i().reverse():i(),f=l.length-1;if(u<c&&(o=c,c=u,u=o),!(u<l[0]||c>a[1-s]))return n=Math.max(0,Zt(l,c,"left")),r()[s?f-n:n]},l()}function Zt(t,e,n){for(var r,i,a,o=0,c=t.length-1;o<c;)i=Math.floor((o+c)/2),a=Math.abs(t[i]-e),Math.abs(t[i+1]-e)<=a?o=i+1:c=i;return n?(r=t[c])===e?c:r>e?0===c?c:"left"===n?c-1:c:c===t.length-1||"left"===n?c:c+1:c}var Jt=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},te=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function ee(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ne(){}var re="\\s*([+-]?\\d+)\\s*",ie="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",oe=/^#([0-9a-f]{3,8})$/,ce=new RegExp("^rgb\\("+[re,re,re]+"\\)$"),ue=new RegExp("^rgb\\("+[ae,ae,ae]+"\\)$"),se=new RegExp("^rgba\\("+[re,re,re,ie]+"\\)$"),le=new RegExp("^rgba\\("+[ae,ae,ae,ie]+"\\)$"),fe=new RegExp("^hsl\\("+[ie,ae,ae]+"\\)$"),he=new RegExp("^hsla\\("+[ie,ae,ae,ie]+"\\)$"),de={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pe(){return this.rgb().formatHex()}function ge(){return this.rgb().formatRgb()}function ve(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=oe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?ye(e):3===n?new _e(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?me(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?me(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ce.exec(t))?new _e(e[1],e[2],e[3],1):(e=ue.exec(t))?new _e(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=se.exec(t))?me(e[1],e[2],e[3],e[4]):(e=le.exec(t))?me(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=fe.exec(t))?Me(e[1],e[2]/100,e[3]/100,1):(e=he.exec(t))?Me(e[1],e[2]/100,e[3]/100,e[4]):de.hasOwnProperty(t)?ye(de[t]):"transparent"===t?new _e(NaN,NaN,NaN,0):null}function ye(t){return new _e(t>>16&255,t>>8&255,255&t,1)}function me(t,e,n,r){return r<=0&&(t=e=n=NaN),new _e(t,e,n,r)}function be(t){return t instanceof ne||(t=ve(t)),t?new _e((t=t.rgb()).r,t.g,t.b,t.opacity):new _e}function xe(t,e,n,r){return 1===arguments.length?be(t):new _e(t,e,n,null==r?1:r)}function _e(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function we(){return"#"+Se(this.r)+Se(this.g)+Se(this.b)}function ke(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Se(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Me(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ce(t,e,n,r)}function Ee(t){if(t instanceof Ce)return new Ce(t.h,t.s,t.l,t.opacity);if(t instanceof ne||(t=ve(t)),!t)return new Ce;if(t instanceof Ce)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,u=(a+i)/2;return c?(o=e===a?(n-r)/c+6*(n<r):n===a?(r-e)/c+2:(e-n)/c+4,c/=u<.5?a+i:2-a-i,o*=60):c=u>0&&u<1?0:o,new Ce(o,c,u,t.opacity)}function Oe(t,e,n,r){return 1===arguments.length?Ee(t):new Ce(t,e,n,null==r?1:r)}function Ce(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Ae(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Pe(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}te(ne,ve,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:pe,formatHex:pe,formatHsl:function(){return Ee(this).formatHsl()},formatRgb:ge,toString:ge}),te(_e,xe,ee(ne,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new _e(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new _e(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:we,formatHex:we,formatRgb:ke,toString:ke})),te(Ce,Oe,ee(ne,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ce(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ce(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _e(Ae(t>=240?t-240:t+120,i,r),Ae(t,i,r),Ae(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var De=function(t){return function(){return t}};function Re(t,e){return function(n){return t+n*e}}function Ie(t,e){var n=e-t;return n?Re(t,n>180||n<-180?n-360*Math.round(n/360):n):De(isNaN(t)?e:t)}function Te(t,e){var n=e-t;return n?Re(t,n):De(isNaN(t)?e:t)}var Ne=function t(e){var n=function(t){return 1==(t=+t)?Te:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):De(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=xe(t)).r,(e=xe(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Te(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);function Fe(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),c=new Array(i);for(n=0;n<i;++n)r=xe(e[n]),a[n]=r.r||0,o[n]=r.g||0,c[n]=r.b||0;return a=t(a),o=t(o),c=t(c),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=c(t),r+""}}}var je=Fe((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,c=r<e-1?t[r+2]:2*a-i;return Pe((n-r/e)*e,o,i,a,c)}})),Le=(Fe((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],c=t[(r+2)%e];return Pe((n-r/e)*e,i,a,o,c)}})),function(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}});function Be(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=Ge(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}var ze=function(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}},He=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Ge(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},We=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ve=new RegExp(We.source,"g"),Ue=function(t,e){var n,r,i,a=We.lastIndex=Ve.lastIndex=0,o=-1,c=[],u=[];for(t+="",e+="";(n=We.exec(t))&&(r=Ve.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),c[o]?c[o]+=i:c[++o]=i),(n=n[0])===(r=r[0])?c[o]?c[o]+=r:c[++o]=r:(c[++o]=null,u.push({i:o,x:Jt(n,r)})),a=Ve.lastIndex;return a<e.length&&(i=e.slice(a),c[o]?c[o]+=i:c[++o]=i),c.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)c[(n=u[r]).i]=n.x(t);return c.join("")})},Ge=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?De(e):("number"===r?Jt:"string"===r?(n=ve(e))?(e=n,Ne):Ue:e instanceof ve?Ne:e instanceof Date?ze:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Le:Array.isArray(e)?Be:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?He:Jt)(t,e)},qe=function(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}},Ye=function(t){return function(){return t}},Xe=function(t){return+t},$e=[0,1];function Ke(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ye(e)}function Qe(t,e,n,r){var i=t[0],a=t[1],o=e[0],c=e[1];return a<i?(i=n(a,i),o=r(c,o)):(i=n(i,a),o=r(o,c)),function(t){return o(i(t))}}function Ze(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),c=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++c<i;)a[c]=n(t[c],t[c+1]),o[c]=r(e[c],e[c+1]);return function(e){var n=Mt(t,e,1,i)-1;return o[n](a[n](e))}}function Je(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function tn(t,e){var n,r,i,a=$e,o=$e,c=Ge,u=!1;function s(){return n=Math.min(a.length,o.length)>2?Ze:Qe,r=i=null,l}function l(e){return(r||(r=n(a,o,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}(t):t,c)))(+e)}return l.invert=function(t){return(i||(i=n(o,a,Ke,u?function(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}(e):e)))(+t)},l.domain=function(t){return arguments.length?(a=Yt.call(t,Xe),s()):a.slice()},l.range=function(t){return arguments.length?(o=Xt.call(t),s()):o.slice()},l.rangeRound=function(t){return o=Xt.call(t),c=qe,s()},l.clamp=function(t){return arguments.length?(u=!!t,s()):u},l.interpolate=function(t){return arguments.length?(c=t,s()):c},s()}var en=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nn(t){if(!(e=en.exec(t)))throw new Error("invalid format: "+t);var e;return new rn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function rn(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function an(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}nn.prototype=rn.prototype,rn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var on,cn,un,sn,ln=function(t){return(t=an(Math.abs(t)))?t[1]:NaN},fn=function(t,e){var n=an(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},hn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return fn(100*t,e)},r:fn,s:function(t,e){var n=an(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(on=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+an(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},dn=function(t){return t},pn=Array.prototype.map,gn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function vn(t){var e=t.domain;return t.ticks=function(t){var n=e();return Rt(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return function(t,e,n){var r,i=t[0],a=t[t.length-1],o=Tt(i,a,null==e?10:e);switch((n=nn(null==n?",f":n)).type){case"s":var c=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ln(e)/3)))-ln(Math.abs(t)))}(o,c))||(n.precision=r),sn(n,c);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ln(e)-ln(t))+1}(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-ln(Math.abs(t)))}(o))||(n.precision=r-2*("%"===n.type))}return un(n)}(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,c=i[a],u=i[o];return u<c&&(r=c,c=u,u=r,r=a,a=o,o=r),(r=It(c,u,n))>0?r=It(c=Math.floor(c/r)*r,u=Math.ceil(u/r)*r,n):r<0&&(r=It(c=Math.ceil(c*r)/r,u=Math.floor(u*r)/r,n)),r>0?(i[a]=Math.floor(c/r)*r,i[o]=Math.ceil(u/r)*r,e(i)):r<0&&(i[a]=Math.ceil(c*r)/r,i[o]=Math.floor(u*r)/r,e(i)),t},t}function yn(){var t=tn(Ke,Jt);return t.copy=function(){return Je(t,yn())},vn(t)}function mn(){var t=[0,1];function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=Yt.call(n,Xe),e):t.slice()},e.copy=function(){return mn().domain(t)},vn(e)}cn=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?dn:(e=pn.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,c=e[0],u=0;i>0&&c>0&&(u+c+1>r&&(c=Math.max(1,r-u)),a.push(t.substring(i-=c,i+c)),!((u+=c+1)>r));)c=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",c=void 0===t.numerals?dn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(pn.call(t.numerals,String)),u=void 0===t.percent?"%":t.percent+"",s=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=nn(t)).fill,n=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,g=t.comma,v=t.precision,y=t.trim,m=t.type;"n"===m?(g=!0,m="g"):hn[m]||(void 0===v&&(v=12),y=!0,m="g"),(d||"0"===e&&"="===n)&&(d=!0,e="0",n="=");var b="$"===h?i:"#"===h&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",x="$"===h?a:/[%p]/.test(m)?u:"",_=hn[m],w=/[defgprs%]/.test(m);function k(t){var i,a,u,h=b,k=x;if("c"===m)k=_(t)+k,t="";else{var S=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:_(Math.abs(t),v),y&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),S&&0==+t&&"+"!==f&&(S=!1),h=(S?"("===f?f:s:"-"===f||"("===f?"":f)+h,k=("s"===m?gn[8+on/3]:"")+k+(S&&"("===f?")":""),w)for(i=-1,a=t.length;++i<a;)if(48>(u=t.charCodeAt(i))||u>57){k=(46===u?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}g&&!d&&(t=r(t,1/0));var M=h.length+t.length+k.length,E=M<p?new Array(p-M+1).join(e):"";switch(g&&d&&(t=r(E+t,E.length?p-k.length:1/0),E=""),n){case"<":t=h+t+k+E;break;case"=":t=h+E+t+k;break;case"^":t=E.slice(0,M=E.length>>1)+h+t+k+E.slice(M);break;default:t=E+h+t+k}return c(t)}return v=void 0===v?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var n=f(((t=nn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ln(e)/3))),i=Math.pow(10,-r),a=gn[8+r/3];return function(t){return n(i*t)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),un=cn.format,sn=cn.formatPrefix;var bn=function(t,e){var n,r=0,i=(t=t.slice()).length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t};function xn(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Ye(e)}function _n(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function wn(t){return isFinite(t)?+("1e"+t):t<0?0:t}function kn(t){return 10===t?wn:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Sn(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Mn(t){return function(e){return-t(-e)}}function En(){var t=tn(xn,_n).domain([1,10]),e=t.domain,n=10,r=Sn(10),i=kn(10);function a(){return r=Sn(n),i=kn(n),e()[0]<0&&(r=Mn(r),i=Mn(i)),t}return t.base=function(t){return arguments.length?(n=+t,a()):n},t.domain=function(t){return arguments.length?(e(t),a()):e()},t.ticks=function(t){var a,o=e(),c=o[0],u=o[o.length-1];(a=u<c)&&(h=c,c=u,u=h);var s,l,f,h=r(c),d=r(u),p=null==t?10:+t,g=[];if(!(n%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,c>0){for(;h<d;++h)for(l=1,s=i(h);l<n;++l)if(!((f=s*l)<c)){if(f>u)break;g.push(f)}}else for(;h<d;++h)for(l=n-1,s=i(h);l>=1;--l)if(!((f=s*l)<c)){if(f>u)break;g.push(f)}}else g=Rt(h,d,Math.min(d-h,p)).map(i);return a?g.reverse():g},t.tickFormat=function(e,a){if(null==a&&(a=10===n?".0e":","),"function"!=typeof a&&(a=un(a)),e===1/0)return a;null==e&&(e=10);var o=Math.max(1,n*e/t.ticks().length);return function(t){var e=t/i(Math.round(r(t)));return e*n<n-.5&&(e*=n),e<=o?a(t):""}},t.nice=function(){return e(bn(e(),{floor:function(t){return i(Math.floor(r(t)))},ceil:function(t){return i(Math.ceil(r(t)))}}))},t.copy=function(){return Je(t,En().base(n))},t}function On(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Cn(){var t=1,e=tn((function(e,n){return(n=On(n,t)-(e=On(e,t)))?function(r){return(On(r,t)-e)/n}:Ye(n)}),(function(e,n){return n=On(n,t)-(e=On(e,t)),function(r){return On(e+n*r,1/t)}})),n=e.domain;return e.exponent=function(e){return arguments.length?(t=+e,n(n())):t},e.copy=function(){return Je(e,Cn().exponent(t))},vn(e)}function An(){var t=[],e=[],n=[];function r(){var r=0,a=Math.max(1,e.length);for(n=new Array(a-1);++r<a;)n[r-1]=Nt(t,r/a);return i}function i(t){if(!isNaN(t=+t))return e[Mt(n,t)]}return i.invertExtent=function(r){var i=e.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,i=0,a=e.length;i<a;++i)null==(n=e[i])||isNaN(n=+n)||t.push(n);return t.sort(_t),r()},i.range=function(t){return arguments.length?(e=Xt.call(t),r()):e.slice()},i.quantiles=function(){return n.slice()},i.copy=function(){return An().domain(t).range(e)},i}function Pn(){var t=0,e=1,n=1,r=[.5],i=[0,1];function a(t){if(t<=t)return i[Mt(r,t,0,n)]}function o(){var i=-1;for(r=new Array(n);++i<n;)r[i]=((i+1)*e-(i-n)*t)/(n+1);return a}return a.domain=function(n){return arguments.length?(t=+n[0],e=+n[1],o()):[t,e]},a.range=function(t){return arguments.length?(n=(i=Xt.call(t)).length-1,o()):i.slice()},a.invertExtent=function(a){var o=i.indexOf(a);return o<0?[NaN,NaN]:o<1?[t,r[0]]:o>=n?[r[n-1],e]:[r[o-1],r[o]]},a.copy=function(){return Pn().domain([t,e]).range(i)},vn(a)}function Dn(){var t=[.5],e=[0,1],n=1;function r(r){if(r<=r)return e[Mt(t,r,0,n)]}return r.domain=function(i){return arguments.length?(t=Xt.call(i),n=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(i){return arguments.length?(e=Xt.call(i),n=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},r.copy=function(){return Dn().domain(t).range(e)},r}var Rn=new Date,In=new Date;function Tn(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,c=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return c;do{c.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return c},i.filter=function(n){return Tn((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return Rn.setTime(+e),In.setTime(+r),t(Rn),t(In),Math.floor(n(Rn,In))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var Nn=Tn((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Nn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Tn((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var Fn=Nn,jn=(Nn.range,Tn((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}))),Ln=jn;function Bn(t){return Tn((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}jn.range;var zn=Bn(0),Hn=Bn(1),Wn=Bn(2),Vn=Bn(3),Un=Bn(4),Gn=Bn(5),qn=Bn(6),Yn=(zn.range,Hn.range,Wn.range,Vn.range,Un.range,Gn.range,qn.range,Tn((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),Xn=Yn,$n=(Yn.range,Tn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()}))),Kn=$n,Qn=($n.range,Tn((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()}))),Zn=Qn,Jn=(Qn.range,Tn((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()}))),tr=Jn,er=(Jn.range,Tn((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));er.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Tn((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):er:null};var nr=er;function rr(t){return Tn((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}er.range;var ir=rr(0),ar=rr(1),or=rr(2),cr=rr(3),ur=rr(4),sr=rr(5),lr=rr(6),fr=(ir.range,ar.range,or.range,cr.range,ur.range,sr.range,lr.range,Tn((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),hr=fr,dr=(fr.range,Tn((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()})));dr.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Tn((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var pr=dr;function gr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function vr(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function yr(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}dr.range;var mr,br,xr={"-":"",_:" ",0:"0"},_r=/^\s*\d+/,wr=/^%/,kr=/[\\^$*+?|[\]().{}]/g;function Sr(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Mr(t){return t.replace(kr,"\\$&")}function Er(t){return new RegExp("^(?:"+t.map(Mr).join("|")+")","i")}function Or(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Cr(t,e,n){var r=_r.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ar(t,e,n){var r=_r.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Pr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Dr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Rr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ir(t,e,n){var r=_r.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Tr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Nr(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Fr(t,e,n){var r=_r.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function jr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Lr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Br(t,e,n){var r=_r.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function zr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Hr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Wr(t,e,n){var r=_r.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Vr(t,e,n){var r=_r.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ur(t,e,n){var r=_r.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Gr(t,e,n){var r=wr.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function qr(t,e,n){var r=_r.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Yr(t,e,n){var r=_r.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Xr(t,e){return Sr(t.getDate(),e,2)}function $r(t,e){return Sr(t.getHours(),e,2)}function Kr(t,e){return Sr(t.getHours()%12||12,e,2)}function Qr(t,e){return Sr(1+Xn.count(Fn(t),t),e,3)}function Zr(t,e){return Sr(t.getMilliseconds(),e,3)}function Jr(t,e){return Zr(t,e)+"000"}function ti(t,e){return Sr(t.getMonth()+1,e,2)}function ei(t,e){return Sr(t.getMinutes(),e,2)}function ni(t,e){return Sr(t.getSeconds(),e,2)}function ri(t){var e=t.getDay();return 0===e?7:e}function ii(t,e){return Sr(zn.count(Fn(t)-1,t),e,2)}function ai(t){var e=t.getDay();return e>=4||0===e?Un(t):Un.ceil(t)}function oi(t,e){return t=ai(t),Sr(Un.count(Fn(t),t)+(4===Fn(t).getDay()),e,2)}function ci(t){return t.getDay()}function ui(t,e){return Sr(Hn.count(Fn(t)-1,t),e,2)}function si(t,e){return Sr(t.getFullYear()%100,e,2)}function li(t,e){return Sr((t=ai(t)).getFullYear()%100,e,2)}function fi(t,e){return Sr(t.getFullYear()%1e4,e,4)}function hi(t,e){var n=t.getDay();return Sr((t=n>=4||0===n?Un(t):Un.ceil(t)).getFullYear()%1e4,e,4)}function di(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Sr(e/60|0,"0",2)+Sr(e%60,"0",2)}function pi(t,e){return Sr(t.getUTCDate(),e,2)}function gi(t,e){return Sr(t.getUTCHours(),e,2)}function vi(t,e){return Sr(t.getUTCHours()%12||12,e,2)}function yi(t,e){return Sr(1+hr.count(pr(t),t),e,3)}function mi(t,e){return Sr(t.getUTCMilliseconds(),e,3)}function bi(t,e){return mi(t,e)+"000"}function xi(t,e){return Sr(t.getUTCMonth()+1,e,2)}function _i(t,e){return Sr(t.getUTCMinutes(),e,2)}function wi(t,e){return Sr(t.getUTCSeconds(),e,2)}function ki(t){var e=t.getUTCDay();return 0===e?7:e}function Si(t,e){return Sr(ir.count(pr(t)-1,t),e,2)}function Mi(t){var e=t.getUTCDay();return e>=4||0===e?ur(t):ur.ceil(t)}function Ei(t,e){return t=Mi(t),Sr(ur.count(pr(t),t)+(4===pr(t).getUTCDay()),e,2)}function Oi(t){return t.getUTCDay()}function Ci(t,e){return Sr(ar.count(pr(t)-1,t),e,2)}function Ai(t,e){return Sr(t.getUTCFullYear()%100,e,2)}function Pi(t,e){return Sr((t=Mi(t)).getUTCFullYear()%100,e,2)}function Di(t,e){return Sr(t.getUTCFullYear()%1e4,e,4)}function Ri(t,e){var n=t.getUTCDay();return Sr((t=n>=4||0===n?ur(t):ur.ceil(t)).getUTCFullYear()%1e4,e,4)}function Ii(){return"+0000"}function Ti(){return"%"}function Ni(t){return+t}function Fi(t){return Math.floor(+t/1e3)}function ji(t){return new Date(t)}function Li(t){return t instanceof Date?+t:+new Date(+t)}mr=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,s=Er(i),l=Or(i),f=Er(a),h=Or(a),d=Er(o),p=Or(o),g=Er(c),v=Or(c),y=Er(u),m=Or(u),b={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return c[t.getMonth()]},c:null,d:Xr,e:Xr,f:Jr,g:li,G:hi,H:$r,I:Kr,j:Qr,L:Zr,m:ti,M:ei,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Ni,s:Fi,S:ni,u:ri,U:ii,V:oi,w:ci,W:ui,x:null,X:null,y:si,Y:fi,Z:di,"%":Ti},x={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return u[t.getUTCMonth()]},B:function(t){return c[t.getUTCMonth()]},c:null,d:pi,e:pi,f:bi,g:Pi,G:Ri,H:gi,I:vi,j:yi,L:mi,m:xi,M:_i,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Ni,s:Fi,S:wi,u:ki,U:Si,V:Ei,w:Oi,W:Ci,x:null,X:null,y:Ai,Y:Di,Z:Ii,"%":Ti},_={a:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return S(t,e,n,r)},d:Lr,e:Lr,f:Ur,g:Tr,G:Ir,H:zr,I:zr,j:Br,L:Vr,m:jr,M:Hr,p:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},q:Fr,Q:qr,s:Yr,S:Wr,u:Ar,U:Pr,V:Dr,w:Cr,W:Rr,x:function(t,e,r){return S(t,n,e,r)},X:function(t,e,n){return S(t,r,e,n)},y:Tr,Y:Ir,Z:Nr,"%":Gr};function w(t,e){return function(n){var r,i,a,o=[],c=-1,u=0,s=t.length;for(n instanceof Date||(n=new Date(+n));++c<s;)37===t.charCodeAt(c)&&(o.push(t.slice(u,c)),null!=(i=xr[r=t.charAt(++c)])?r=t.charAt(++c):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),u=c+1);return o.push(t.slice(u,c)),o.join("")}}function k(t,e){return function(n){var r,i,a=yr(1900,void 0,1);if(S(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=vr(yr(a.y,0,1))).getUTCDay(),r=i>4||0===i?ar.ceil(r):ar(r),r=hr.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=gr(yr(a.y,0,1))).getDay(),r=i>4||0===i?Hn.ceil(r):Hn(r),r=Xn.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?vr(yr(a.y,0,1)).getUTCDay():gr(yr(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,vr(a)):gr(a)}}function S(t,e,n,r){for(var i,a,o=0,c=e.length,u=n.length;o<c;){if(r>=u)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=_[i in xr?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),x.x=w(n,x),x.X=w(r,x),x.c=w(e,x),{format:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),br=mr.format,mr.parse,mr.utcFormat,mr.utcParse;var Bi=function(){return function t(e,n,r,i,a,o,c,u,s){var l=tn(Ke,Jt),f=l.invert,h=l.domain,d=s(".%L"),p=s(":%S"),g=s("%I:%M"),v=s("%I %p"),y=s("%a %d"),m=s("%b %d"),b=s("%B"),x=s("%Y"),_=[[c,1,1e3],[c,5,5e3],[c,15,15e3],[c,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,36e5],[a,3,108e5],[a,6,216e5],[a,12,432e5],[i,1,864e5],[i,2,1728e5],[r,1,6048e5],[n,1,2592e6],[n,3,7776e6],[e,1,31536e6]];function w(t){return(c(t)<t?d:o(t)<t?p:a(t)<t?g:i(t)<t?v:n(t)<t?r(t)<t?y:m:e(t)<t?b:x)(t)}function k(t,n,r,i){if(null==t&&(t=10),"number"==typeof t){var a=Math.abs(r-n)/t,o=wt((function(t){return t[2]})).right(_,a);o===_.length?(i=Tt(n/31536e6,r/31536e6,t),t=e):o?(i=(o=_[a/_[o-1][2]<_[o][2]/a?o-1:o])[1],t=o[0]):(i=Math.max(Tt(n,r,t),1),t=u)}return null==i?t:t.every(i)}return l.invert=function(t){return new Date(f(t))},l.domain=function(t){return arguments.length?h(Yt.call(t,Li)):h().map(ji)},l.ticks=function(t,e){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=k(t,i,a,e))?n.range(i,a+1):[],o?n.reverse():n},l.tickFormat=function(t,e){return null==e?w:s(e)},l.nice=function(t,e){var n=h();return(t=k(t,n[0],n[n.length-1],e))?h(bn(n,t)):l},l.copy=function(){return Je(l,t(e,n,r,i,a,o,c,u,s))},l}(Fn,Ln,zn,Xn,Kn,Zn,tr,nr,br).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},zi=(((Tn((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})).range,Tn((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()}))).range,Tn((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()}))).range,function(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}),Hi=zi("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Wi=zi("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Vi=(zi("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),zi("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5")),Ui=Math.PI/180,Gi=180/Math.PI,qi=1.78277,Yi=-.29227,Xi=1.97294,$i=-.90649*Xi,Ki=Xi*qi,Qi=qi*Yi-.1347134789;function Zi(t){if(t instanceof ta)return new ta(t.h,t.s,t.l,t.opacity);t instanceof _e||(t=be(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Qi*r+$i*e-Ki*n)/(Qi+$i-Ki),a=r-i,o=(Xi*(n-i)-Yi*a)/-.90649,c=Math.sqrt(o*o+a*a)/(Xi*i*(1-i)),u=c?Math.atan2(o,a)*Gi-120:NaN;return new ta(u<0?u+360:u,c,i,t.opacity)}function Ji(t,e,n,r){return 1===arguments.length?Zi(t):new ta(t,e,n,null==r?1:r)}function ta(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ea(t){return function e(n){function r(e,r){var i=t((e=Ji(e)).h,(r=Ji(r)).h),a=Te(e.s,r.s),o=Te(e.l,r.l),c=Te(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=c(t),e+""}}return n=+n,r.gamma=e,r}(1)}te(ta,Ji,ee(ne,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new ta(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new ta(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Ui,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new _e(255*(e+n*(-.14861*r+qi*i)),255*(e+n*(Yi*r+-.90649*i)),255*(e+n*(Xi*r)),this.opacity)}})),ea(Ie);var na=ea(Te);function ra(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function ia(t){var e=0,n=1,r=!1;function i(i){var a=(i-e)/(n-e);return t(r?Math.max(0,Math.min(1,a)):a)}return i.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.clamp=function(t){return arguments.length?(r=!!t,i):r},i.interpolator=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return ia(t).domain([e,n]).clamp(r)},vn(i)}na(Ji(300,.5,0),Ji(-240,.5,1)),na(Ji(-100,.75,.35),Ji(80,1.5,.8)),na(Ji(260,.75,.35),Ji(80,1.5,.8)),Ji(),ra(zi("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ra(zi("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ra(zi("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ra(zi("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var aa=function(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n},oa=aa("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ca=aa("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ua=aa("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),sa=aa("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),la=aa("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),fa=aa("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),ha=aa("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),da=aa("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),pa=function(t){return je(t[t.length-1])},ga=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(aa),va=pa(ga),ya=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(aa),ma=pa(ya),ba=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(aa),xa=pa(ba),_a=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(aa),wa=pa(_a),ka=pa(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(aa)),Sa=pa(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(aa)),Ma=pa(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(aa)),Ea=pa(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(aa)),Oa=pa(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(aa)),Ca=pa(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(aa)),Aa=pa(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(aa)),Pa=pa(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(aa)),Da=pa(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(aa)),Ra=pa(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(aa)),Ia=pa(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(aa));function Ta(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Na=Ta(aa("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Fa=Ta(aa("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ja=Ta(aa("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),La=Ta(aa("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Ba=na(Ji(-100,.75,.35),Ji(80,1.5,.8)),za=na(Ji(260,.75,.35),Ji(80,1.5,.8)),Ha=Ji(),Wa=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return Ha.h=360*t-100,Ha.s=1.5-1.5*e,Ha.l=.8-.9*e,Ha+""},Va=na(Ji(300,.5,0),Ji(-240,.5,1)),Ua=pa(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(aa)),Ga=pa(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(aa)),qa=pa(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(aa)),Ya=pa(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(aa)),Xa=pa(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(aa)),$a=pa(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(aa)),Ka=pa(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(aa)),Qa=pa(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(aa)),Za=pa(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(aa)),Ja=pa(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(aa)),to=pa(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(aa)),eo=pa(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(aa)),no="app.units",ro="local.units",io="local.layers",ao="app.layers",oo="app.group",co="local.group",uo="local.canvas",so="app.canvas",lo="virtualScrolling",fo=function(t,e,n){var r=t[e];t[e]=t[n],t[n]=r},ho=function(t,e){return t>e?-1:t>e?1:0},po=function(t,e,n,r,i){!function t(e,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,c=n-r+1,u=Math.log(o),s=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*s*(o-s)/o)*(c-o/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-c*s/o+l)),Math.min(i,Math.floor(n+(o-c)*s/o+l)),a)}var f=e[n],h=r,d=i;for(fo(e,r,n),a(e[i],f)>0&&fo(e,r,i);h<d;){for(fo(e,h,d),h++,d--;a(e[h],f)<0;)h++;for(;a(e[d],f)>0;)d--}0===a(e[r],f)?fo(e,r,d):(d++,fo(e,d,i)),d<=n&&(r=d+1),n<=d&&(i=d-1)}}(t,e,n||0,r||t.length-1,i||ho)};function go(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return vo(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vo(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function vo(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var yo=function(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},mo=function(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t},bo=function(t,e,n,r,i){i||(i=yo(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=e;a<n;a++){var o=t.children[a];mo(i,t.leaf?r(o):o)}return i},xo=function(t,e){bo(t,0,t.children.length,e,t)},_o=function(t,e){return t.minX-e.minX},wo=function(t,e){return t.minY-e.minY},ko=function(t){return(t.maxX-t.minX)*(t.maxY-t.minY)},So=function(t){return t.maxX-t.minX+(t.maxY-t.minY)},Mo=function(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY},Eo=function(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY},Oo=function(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1},Co=function(t,e,n,r,i){for(var a=[e,n];a.length;)if(!((n=a.pop())-(e=a.pop())<=r)){var o=e+Math.ceil((n-e)/r/2)*r;po(t,o,e,n,i),a.push(e,o,o,n)}},Ao=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,G()(t.children)):n.push.apply(n,G()(t.children)),t=n.pop();return e},Po=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;$()(this,t),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}return Q()(t,[{key:"all",value:function(){return Ao(this.data,[])}},{key:"search",value:function(t){var e=this.data,n=[];if(!Eo(t,e))return n;for(var r=this.toBBox,i=[];e;){var a,o=go(e.children);try{for(o.s();!(a=o.n()).done;){var c=a.value,u=e.leaf?r(c):c;Eo(t,u)&&(e.leaf?n.push(c):Mo(t,u)?Ao(c,n):i.push(c))}}catch(t){o.e(t)}finally{o.f()}e=i.pop()}return n}},{key:"load",value:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this.build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this.splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this.insertSingleItem(n,this.data.height-n.height-1,!0)}else this.data=n;return this}},{key:"insert",value:function(t){return t&&this.insertSingleItem(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=yo([]),this}},{key:"remove",value:function(t,e){if(!t)return this;for(var n,r,i,a=this.data,o=this.toBBox(t),c=[],u=[];a||c.length;){if(a||(a=c.pop(),r=c[c.length-1],n=u.pop(),i=!0),a.leaf){var s=Oo(t,a.children,e);if(-1!==s)return a.children.splice(s,1),c.push(a),this.condense(c),this}i||a.leaf||!Mo(a,o)?r?(n++,a=r.children[n],i=!1):a=null:(c.push(a),u.push(n),n=0,r=a,a=a.children[0])}return this}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"toBBox",value:function(t){return t}},{key:"compareMinX",value:function(t,e){return t.minX-e.minX}},{key:"compareMinY",value:function(t,e){return t.minY-e.minY}},{key:"build",value:function(t,e,n,r){var i,a=n-e+1,o=this._maxEntries;if(a<=o)return i=yo(t.slice(e,n+1)),xo(i,this.toBBox),i;r||(r=Math.ceil(Math.log(a)/Math.log(o)),o=Math.ceil(a/Math.pow(o,r-1))),(i=yo([])).leaf=!1,i.height=r;var c=Math.ceil(a/o),u=c*Math.ceil(Math.sqrt(o));Co(t,e,n,u,this.compareMinX);for(var s=e;s<=n;s+=u){var l=Math.min(s+u-1,n);Co(t,s,l,c,this.compareMinY);for(var f=s;f<=l;f+=c){var h=Math.min(f+c-1,l);i.children.push(this.build(t,f,h,r-1))}}return xo(i,this.toBBox),i}},{key:"chooseSubtree",value:function(t,e,n,r){for(;r.push(e),!e.leaf&&r.length-1!==n;){var i,a=1/0,o=1/0,c=void 0,u=go(e.children);try{for(u.s();!(i=u.n()).done;){var s=i.value,l=ko(s),f=(h=t,d=s,(Math.max(d.maxX,h.maxX)-Math.min(d.minX,h.minX))*(Math.max(d.maxY,h.maxY)-Math.min(d.minY,h.minY))-l);f<o?(o=f,a=l<a?l:a,c=s):f===o&&l<a&&(a=l,c=s)}}catch(t){u.e(t)}finally{u.f()}e=c||e.children[0]}var h,d;return e}},{key:"insertSingleItem",value:function(t,e,n){var r=n?t:this.toBBox(t),i=[],a=this.chooseSubtree(r,this.data,e,i);for(a.children.push(t),mo(a,r);e>=0&&i[e].children.length>this._maxEntries;)this.split(i,e),e--;this.adjustParentBoxes(r,i,e)}},{key:"split",value:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this.chooseSplitAxis(n,i,r);var a=this.chooseSplitIndex(n,i,r),o=yo(n.children.splice(a,n.children.length-a));o.height=n.height,o.leaf=n.leaf,xo(n,this.toBBox),xo(o,this.toBBox),e?t[e-1].children.push(o):this.splitRoot(n,o)}},{key:"splitRoot",value:function(t,e){this.data=yo([t,e]),this.data.height=t.height+1,this.data.leaf=!1,xo(this.data,this.toBBox)}},{key:"chooseSplitIndex",value:function(t,e,n){for(var r,i,a,o,c,u,s,l=1/0,f=1/0,h=e;h<=n-e;h++){var d=bo(t,0,h,this.toBBox),p=bo(t,h,n,this.toBBox),g=(i=d,a=p,o=Math.max(i.minX,a.minX),c=Math.max(i.minY,a.minY),u=Math.min(i.maxX,a.maxX),s=Math.min(i.maxY,a.maxY),Math.max(0,u-o)*Math.max(0,s-c)),v=ko(d)+ko(p);g<l?(l=g,r=h,f=v<f?v:f):g===l&&v<f&&(f=v,r=h)}return r||n-e}},{key:"chooseSplitAxis",value:function(t,e,n){var r=t.leaf?this.compareMinX:_o,i=t.leaf?this.compareMinY:wo;this.allDistMargin(t,e,n,r)<this.allDistMargin(t,e,n,i)&&t.children.sort(r)}},{key:"allDistMargin",value:function(t,e,n,r){t.children.sort(r);for(var i=this.toBBox,a=bo(t,0,e,i),o=bo(t,n-e,n,i),c=So(a)+So(o),u=e;u<n-e;u++){var s=t.children[u];mo(a,t.leaf?i(s):s),c+=So(a)}for(var l=n-e-1;l>=e;l--){var f=t.children[l];mo(o,t.leaf?i(f):f),c+=So(o)}return c}},{key:"adjustParentBoxes",value:function(t,e,n){for(var r=n;r>=0;r--)mo(e[r],t)}},{key:"condense",value:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():xo(t[n],this.toBBox)}}]),t}(),Do=n(18),Ro=n.n(Do),Io=n(23),To=n.n(Io),No=Array.prototype.slice,Fo=function(t){return t};function jo(t){return"translate("+(t+.5)+",0)"}function Lo(t){return"translate(0,"+(t+.5)+")"}function Bo(t){return function(e){return+t(e)}}function zo(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function Ho(){return!this.__axis}function Wo(t,e){var n=[],r=null,i=null,a=null,o=6,c=6,u=3,s=1===t||4===t?-1:1,l=4===t||2===t?"x":"y",f=1===t||3===t?jo:Lo;function h(h){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):Fo:i,g=Math.max(o,0)+u,v=e.range(),y=+v[0]+.5,m=+v[v.length-1]+.5,b=(e.bandwidth?zo:Bo)(e.copy()),x=h.selection?h.selection():h,_=x.selectAll(".domain").data([null]),w=x.selectAll(".tick").data(d,e).order(),k=w.exit(),S=w.enter().append("g").attr("class","tick"),M=w.select("line"),E=w.select("text");_=_.merge(_.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),w=w.merge(S),M=M.merge(S.append("line").attr("stroke","#000").attr(l+"2",s*o)),E=E.merge(S.append("text").attr("fill","#000").attr(l,s*g).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")).style("transform",a),h!==x&&(_=_.transition(h),w=w.transition(h),M=M.transition(h),E=E.transition(h),k=k.transition(h).attr("opacity",1e-6).attr("transform",(function(t){return isFinite(t=b(t))?f(t):this.getAttribute("transform")})),S.attr("opacity",1e-6).attr("transform",(function(t){var e=this.parentNode.__axis;return f(e&&isFinite(e=e(t))?e:b(t))}))),k.remove(),_.attr("d",4===t||2==t?"M"+s*c+","+y+"H0.5V"+m+"H"+s*c:"M"+y+","+s*c+"V0.5H"+m+"V"+s*c),w.attr("opacity",1).attr("transform",(function(t){return f(b(t))})),M.attr(l+"2",s*o),E.attr(l,s*g).text(p),x.filter(Ho).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),x.each((function(){this.__axis=b}))}return h.scale=function(t){return arguments.length?(e=t,h):e},h.tickTransform=function(t){return arguments.length?(a=t,h):a},h.ticks=function(){return n=No.call(arguments),h},h.tickArguments=function(t){return arguments.length?(n=null==t?[]:No.call(t),h):n.slice()},h.tickValues=function(t){return arguments.length?(r=null==t?null:No.call(t),h):r&&r.slice()},h.tickFormat=function(t){return arguments.length?(i=t,h):i},h.tickSize=function(t){return arguments.length?(o=c=+t,h):o},h.tickSizeInner=function(t){return arguments.length?(o=+t,h):o},h.tickSizeOuter=function(t){return arguments.length?(c=+t,h):c},h.tickPadding=function(t){return arguments.length?(u=+t,h):u},h}var Vo=Math.abs,Uo=Math.atan2,Go=Math.cos,qo=Math.max,Yo=Math.min,Xo=Math.sin,$o=Math.sqrt,Ko=Math.PI,Qo=Ko/2,Zo=2*Ko;function Jo(t){return t>1?0:t<-1?Ko:Math.acos(t)}function tc(t){return t>=1?Qo:t<=-1?-Qo:Math.asin(t)}var ec={draw:function(t,e){var n=Math.sqrt(e/Ko);t.moveTo(n,0),t.arc(0,0,n,0,Zo)}},nc={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},rc=Math.sqrt(1/3),ic=2*rc,ac={draw:function(t,e){var n=Math.sqrt(e/ic),r=n*rc;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},oc={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},cc=Math.sin(Ko/10)/Math.sin(7*Ko/10),uc=Math.sin(Zo/10)*cc,sc=-Math.cos(Zo/10)*cc,lc={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=uc*n,i=sc*n;t.moveTo(0,-n),t.lineTo(r,i);for(var a=1;a<5;++a){var o=Zo*a/5,c=Math.cos(o),u=Math.sin(o);t.lineTo(u*n,-c*n),t.lineTo(c*r-u*i,u*r+c*i)}t.closePath()}},fc=Math.sqrt(3)/2,hc=1/Math.sqrt(12),dc=3*(hc/2+1),pc={draw:function(t,e){var n=Math.sqrt(e/dc),r=n/2,i=n*hc,a=r,o=n*hc+n,c=-a,u=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(c,u),t.lineTo(-.5*r-fc*i,fc*r+-.5*i),t.lineTo(-.5*a-fc*o,fc*a+-.5*o),t.lineTo(-.5*c-fc*u,fc*c+-.5*u),t.lineTo(-.5*r+fc*i,-.5*i-fc*r),t.lineTo(-.5*a+fc*o,-.5*o-fc*a),t.lineTo(-.5*c+fc*u,-.5*u-fc*c),t.closePath()}},gc=Math.sqrt(3),vc={draw:function(t,e){var n=-Math.sqrt(e/(3*gc));t.moveTo(0,2*n),t.lineTo(-gc*n,-n),t.lineTo(gc*n,-n),t.closePath()}},yc=Math.PI,mc=2*yc,bc=mc-1e-6;function xc(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function _c(){return new xc}xc.prototype=_c.prototype={constructor:xc,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,c=n-t,u=r-e,s=a-t,l=o-e,f=s*s+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*c-u*s)>1e-6&&i){var h=n-a,d=r-o,p=c*c+u*u,g=h*h+d*d,v=Math.sqrt(p),y=Math.sqrt(f),m=i*Math.tan((yc-Math.acos((p+f-g)/(2*v*y)))/2),b=m/y,x=m/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*s)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>s*d)+","+(this._x1=t+x*c)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),c=n*Math.sin(r),u=t+o,s=e+c,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+s:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+u+","+s),n&&(f<0&&(f=f%mc+mc),f>bc?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-c)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=s):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=yc)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var wc=_c,kc=function(t){return function(){return t}},Sc=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},Mc=function(t){var e=t.map(Ec);return Sc(t).sort((function(t,n){return e[t]-e[n]}))};function Ec(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}var Oc=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],c=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<c;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},Cc=Array.prototype.slice;function Ac(t,e){return t[e]}function Pc(t){this._context=t}Pc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Dc=function(t){return new Pc(t)};function Rc(t,e){this._context=t,this._t=e}Rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Ic=function(t){return new Rc(t,.5)};function Tc(t){return new Rc(t,0)}function Nc(t){return new Rc(t,1)}function Fc(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function jc(t,e){this._context=t,this._k=(1-e)/6}function Lc(t,e){this._context=t,this._alpha=e}jc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Fc(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Fc(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new jc(t,e)}return n.tension=function(e){return t(+e)},n}(0),Lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:!function(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>1e-12){var c=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*c-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*c-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var s=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*s+t._x1*t._l23_2a-e*t._l12_2a)/l,o=(o*s+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Bc=function t(e){function n(t){return e?new Lc(t,e):new jc(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function zc(t){return t[0]}function Hc(t){return t[1]}var Wc=function(){var t=zc,e=Hc,n=kc(!0),r=null,i=Dc,a=null;function o(o){var c,u,s,l=o.length,f=!1;for(null==r&&(a=i(s=wc())),c=0;c<=l;++c)!(c<l&&n(u=o[c],c,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(u,c,o),+e(u,c,o));if(s)return a=null,s+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:kc(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:kc(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:kc(!!t),o):n},o.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),o):i},o.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),o):r},o},Vc=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Uc=function(t){return t};function Gc(t){return t.innerRadius}function qc(t){return t.outerRadius}function Yc(t){return t.startAngle}function Xc(t){return t.endAngle}function $c(t){return t&&t.padAngle}function Kc(t,e,n,r,i,a,o,c){var u=n-t,s=r-e,l=o-i,f=c-a,h=f*u-l*s;if(!(h*h<1e-12))return[t+(h=(l*(e-a)-f*(t-i))/h)*u,e+h*s]}function Qc(t,e,n,r,i,a,o){var c=t-n,u=e-r,s=(o?a:-a)/$o(c*c+u*u),l=s*u,f=-s*c,h=t+l,d=e+f,p=n+l,g=r+f,v=(h+p)/2,y=(d+g)/2,m=p-h,b=g-d,x=m*m+b*b,_=i-a,w=h*g-p*d,k=(b<0?-1:1)*$o(qo(0,_*_*x-w*w)),S=(w*b-m*k)/x,M=(-w*m-b*k)/x,E=(w*b+m*k)/x,O=(-w*m+b*k)/x,C=S-v,A=M-y,P=E-v,D=O-y;return C*C+A*A>P*P+D*D&&(S=E,M=O),{cx:S,cy:M,x01:-l,y01:-f,x11:S*(i/_-1),y11:M*(i/_-1)}}function Zc(t){return function(e,n){var r=t((e=Oe(e)).h,(n=Oe(n)).h),i=Te(e.s,n.s),a=Te(e.l,n.l),o=Te(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}Zc(Ie);var Jc=Zc(Te);function tu(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}function eu(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var nu=7.5625;function ru(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}var iu=2*Math.PI,au=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=iu);function i(t){return e*ru(- --t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*iu)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=iu);function i(t){return 1-e*ru(t=+t)*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*iu)},i.period=function(n){return t(e,n)},i}(1,.3)),ou=(function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=iu);function i(t){return((t=2*t-1)<0?e*ru(-t)*Math.sin((r-t)/n):2-e*ru(t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*iu)},i.period=function(n){return t(e,n)},i}(1,.3),function t(e){function n(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return--t*t*((t+1)*e+t)+1}return e=+e,n.overshoot=t,n}(1.70158),function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158)),cu=(function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3)),uu=function(t){return function(){return t}};function su(t){return t[0]}function lu(t){return t[1]}function fu(){this._=null}function hu(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function du(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function pu(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function gu(t){for(;t.L;)t=t.L;return t}fu.prototype={constructor:fu,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=gu(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(du(this,n),n=(t=n).U),n.C=!1,r.C=!0,pu(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(pu(this,n),n=(t=n).U),n.C=!1,r.C=!0,du(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?gu(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,du(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,pu(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,du(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,pu(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,du(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,pu(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var vu=fu;function yu(t,e,n,r){var i=[null,null],a=Hu.push(i)-1;return i.left=t,i.right=e,n&&bu(i,t,e,n),r&&bu(i,e,t,r),Bu[t.index].halfedges.push(a),Bu[e.index].halfedges.push(a),i}function mu(t,e,n){var r=[e,n];return r.left=t,r}function bu(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function xu(t,e,n,r,i){var a,o=t[0],c=t[1],u=o[0],s=o[1],l=0,f=1,h=c[0]-u,d=c[1]-s;if(a=e-u,h||!(a>0)){if(a/=h,h<0){if(a<l)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>l&&(l=a)}if(a=r-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>l&&(l=a)}else if(h>0){if(a<l)return;a<f&&(f=a)}if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>l&&(l=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<f&&(f=a)}return!(l>0||f<1)||(l>0&&(t[0]=[u+l*h,s+l*d]),f<1&&(t[1]=[u+f*h,s+f*d]),!0)}}}}}function _u(t,e,n,r,i){var a=t[1];if(a)return!0;var o,c,u=t[0],s=t.left,l=t.right,f=s[0],h=s[1],d=l[0],p=l[1],g=(f+d)/2,v=(h+p)/2;if(p===h){if(g<e||g>=r)return;if(f>d){if(u){if(u[1]>=i)return}else u=[g,n];a=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];a=[g,n]}}else if(c=v-(o=(f-d)/(p-h))*g,o<-1||o>1)if(f>d){if(u){if(u[1]>=i)return}else u=[(n-c)/o,n];a=[(i-c)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-c)/o,i];a=[(n-c)/o,n]}else if(h<p){if(u){if(u[0]>=r)return}else u=[e,o*e+c];a=[r,o*r+c]}else{if(u){if(u[0]<e)return}else u=[r,o*r+c];a=[e,o*e+c]}return t[0]=u,t[1]=a,!0}function wu(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function ku(t,e){return e[+(e.left!==t.site)]}function Su(t,e){return e[+(e.left===t.site)]}var Mu,Eu=[];function Ou(){hu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Cu(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],c=i[1],u=r[0]-o,s=r[1]-c,l=a[0]-o,f=a[1]-c,h=2*(u*f-s*l);if(!(h>=-Vu)){var d=u*u+s*s,p=l*l+f*f,g=(f*d-s*p)/h,v=(u*p-l*d)/h,y=Eu.pop()||new Ou;y.arc=t,y.site=i,y.x=g+o,y.y=(y.cy=v+c)+Math.sqrt(g*g+v*v),t.circle=y;for(var m=null,b=zu._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){m=b.P;break}b=b.L}else{if(!b.R){m=b;break}b=b.R}zu.insert(m,y),m||(Mu=y)}}}}function Au(t){var e=t.circle;e&&(e.P||(Mu=e.N),zu.remove(e),Eu.push(e),hu(e),t.circle=null)}var Pu=[];function Du(){hu(this),this.edge=this.site=this.circle=null}function Ru(t){var e=Pu.pop()||new Du;return e.site=t,e}function Iu(t){Au(t),Lu.remove(t),Pu.push(t),hu(t)}function Tu(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,c=[t];Iu(t);for(var u=a;u.circle&&Math.abs(n-u.circle.x)<Wu&&Math.abs(r-u.circle.cy)<Wu;)a=u.P,c.unshift(u),Iu(u),u=a;c.unshift(u),Au(u);for(var s=o;s.circle&&Math.abs(n-s.circle.x)<Wu&&Math.abs(r-s.circle.cy)<Wu;)o=s.N,c.push(s),Iu(s),s=o;c.push(s),Au(s);var l,f=c.length;for(l=1;l<f;++l)s=c[l],u=c[l-1],bu(s.edge,u.site,s.site,i);u=c[0],(s=c[f-1]).edge=yu(u.site,s.site,null,i),Cu(u),Cu(s)}function Nu(t){for(var e,n,r,i,a=t[0],o=t[1],c=Lu._;c;)if((r=Fu(c,o)-a)>Wu)c=c.L;else{if(!((i=a-ju(c,o))>Wu)){r>-Wu?(e=c.P,n=c):i>-Wu?(e=c,n=c.N):e=n=c;break}if(!c.R){e=c;break}c=c.R}!function(t){Bu[t.index]={site:t,halfedges:[]}}(t);var u=Ru(t);if(Lu.insert(e,u),e||n){if(e===n)return Au(e),n=Ru(e.site),Lu.insert(u,n),u.edge=n.edge=yu(e.site,u.site),Cu(e),void Cu(n);if(n){Au(e),Au(n);var s=e.site,l=s[0],f=s[1],h=t[0]-l,d=t[1]-f,p=n.site,g=p[0]-l,v=p[1]-f,y=2*(h*v-d*g),m=h*h+d*d,b=g*g+v*v,x=[(v*m-d*b)/y+l,(h*b-g*m)/y+f];bu(n.edge,s,p,x),u.edge=yu(s,t,null,x),n.edge=yu(t,p,null,x),Cu(e),Cu(n)}else u.edge=yu(e.site,u.site)}}function Fu(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var c=(n=o.site)[0],u=n[1],s=u-e;if(!s)return c;var l=c-r,f=1/a-1/s,h=l/s;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*s)-u+s/2+i-a/2)))/f+r:(r+c)/2}function ju(t,e){var n=t.N;if(n)return Fu(n,e);var r=t.site;return r[1]===e?r[0]:1/0}var Lu,Bu,zu,Hu,Wu=1e-6,Vu=1e-12;function Uu(t,e){return e[1]-t[1]||e[0]-t[0]}function Gu(t,e){var n,r,i,a=t.sort(Uu).pop();for(Hu=[],Bu=new Array(t.length),Lu=new vu,zu=new vu;;)if(i=Mu,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Nu(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;Tu(i.arc)}if(function(){for(var t,e,n,r,i=0,a=Bu.length;i<a;++i)if((t=Bu[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),c=new Array(r);for(n=0;n<r;++n)o[n]=n,c[n]=wu(t,Hu[e[n]]);for(o.sort((function(t,e){return c[e]-c[t]})),n=0;n<r;++n)c[n]=e[o[n]];for(n=0;n<r;++n)e[n]=c[n]}}(),e){var o=+e[0][0],c=+e[0][1],u=+e[1][0],s=+e[1][1];!function(t,e,n,r){for(var i,a=Hu.length;a--;)_u(i=Hu[a],t,e,n,r)&&xu(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>Wu||Math.abs(i[0][1]-i[1][1])>Wu)||delete Hu[a]}(o,c,u,s),function(t,e,n,r){var i,a,o,c,u,s,l,f,h,d,p,g,v=Bu.length,y=!0;for(i=0;i<v;++i)if(a=Bu[i]){for(o=a.site,c=(u=a.halfedges).length;c--;)Hu[u[c]]||u.splice(c,1);for(c=0,s=u.length;c<s;)p=(d=Su(a,Hu[u[c]]))[0],g=d[1],f=(l=ku(a,Hu[u[++c%s]]))[0],h=l[1],(Math.abs(p-f)>Wu||Math.abs(g-h)>Wu)&&(u.splice(c,0,Hu.push(mu(o,d,Math.abs(p-t)<Wu&&r-g>Wu?[t,Math.abs(f-t)<Wu?h:r]:Math.abs(g-r)<Wu&&n-p>Wu?[Math.abs(h-r)<Wu?f:n,r]:Math.abs(p-n)<Wu&&g-e>Wu?[n,Math.abs(f-n)<Wu?h:e]:Math.abs(g-e)<Wu&&p-t>Wu?[Math.abs(h-e)<Wu?f:t,e]:null))-1),++s);s&&(y=!1)}if(y){var m,b,x,_=1/0;for(i=0,y=null;i<v;++i)(a=Bu[i])&&(x=(m=(o=a.site)[0]-t)*m+(b=o[1]-e)*b)<_&&(_=x,y=a);if(y){var w=[t,e],k=[t,r],S=[n,r],M=[n,e];y.halfedges.push(Hu.push(mu(o=y.site,w,k))-1,Hu.push(mu(o,k,S))-1,Hu.push(mu(o,S,M))-1,Hu.push(mu(o,M,w))-1)}}for(i=0;i<v;++i)(a=Bu[i])&&(a.halfedges.length||delete Bu[i])}(o,c,u,s)}this.edges=Hu,this.cells=Bu,Lu=zu=Hu=Bu=null}Gu.prototype={constructor:Gu,polygons:function(){var t=this.edges;return this.cells.map((function(e){var n=e.halfedges.map((function(n){return ku(e,t[n])}));return n.data=e.site.data,n}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,c,u,s,l=n.site,f=-1,h=e[i[a-1]],d=h.left===l?h.right:h.left;++f<a;)o=d,d=(h=e[i[f]]).left===l?h.right:h.left,o&&d&&r<o.index&&r<d.index&&(u=o,s=d,((c=l)[0]-s[0])*(u[1]-c[1])-(c[0]-u[0])*(s[1]-c[1])<0)&&t.push([l.data,o.data,d.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,c=a.cells.length;!(i=a.cells[o]);)if(++o>=c)return null;var u=t-i.site[0],s=e-i.site[1],l=u*u+s*s;do{i=a.cells[r=o],o=null,i.halfedges.forEach((function(n){var r=a.edges[n],c=r.left;if(c!==i.site&&c||(c=r.right)){var u=t-c[0],s=e-c[1],f=u*u+s*s;f<l&&(l=f,o=c.index)}}))}while(null!==o);return a._found=r,null==n||l<=n*n?i.site:null}};var qu=function(){var t=su,e=lu,n=null;function r(r){return new Gu(r.map((function(n,i){var a=[Math.round(t(n,i,r)/Wu)*Wu,Math.round(e(n,i,r)/Wu)*Wu];return a.index=i,a.data=n,a})),n)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(e){return arguments.length?(t="function"==typeof e?e:uu(+e),r):t},r.y=function(t){return arguments.length?(e="function"==typeof t?t:uu(+t),r):e},r.extent=function(t){return arguments.length?(n=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(t){return arguments.length?(n=null==t?null:[[0,0],[+t[0],+t[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},Yu=function(t){if(!(i=t.length))return[];for(var e=-1,n=function(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}(t,Xu),r=new Array(n);++e<n;)for(var i,a=-1,o=r[e]=new Array(i);++a<i;)o[a]=t[a][e];return r};function Xu(t){return t.length}function $u(t,...e){t=new Set(t);for(const n of e)for(const e of n)t.delete(e);return t}function Ku(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}const Qu=Math.PI,Zu=2*Qu,Ju=Zu-1e-6;function ts(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function es(){return new ts}ts.prototype=es.prototype={constructor:ts,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,c=n-t,u=r-e,s=a-t,l=o-e,f=s*s+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*c-u*s)>1e-6&&i){var h=n-a,d=r-o,p=c*c+u*u,g=h*h+d*d,v=Math.sqrt(p),y=Math.sqrt(f),m=i*Math.tan((Qu-Math.acos((p+f-g)/(2*v*y)))/2),b=m/y,x=m/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*s)+","+(e+b*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>s*d)+","+(this._x1=t+x*c)+","+(this._y1=e+x*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),c=n*Math.sin(r),u=t+o,s=e+c,l=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+s:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-s)>1e-6)&&(this._+="L"+u+","+s),n&&(f<0&&(f=f%Zu+Zu),f>Ju?this._+="A"+n+","+n+",0,1,"+l+","+(t-o)+","+(e-c)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=s):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Qu)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var ns=es,rs=function(){function t(e){$()(this,t),this._dataObjects=new Map,this._updateData=new Map,this._enterData=new Map,this._exitData=new Map,this._idGetter=e}return Q()(t,[{key:"data",value:function(e){var n,r=new Map,i=new Map,a=new Map,o=new Map,c=this._updateData,u=this._idGetter;e.forEach((function(){var t=u?u.apply(void 0,arguments):arguments.length<=1?void 0:arguments[1];a.has(t)?o.push(t,arguments.length<=0?void 0:arguments[0]):a.set(t,arguments.length<=0?void 0:arguments[0])}));for(var s=a.entries();n=s.next().value;)c.has(n[0])?c.set(n[0],n[1]):r.set(n[0],n[1]);for(s=c.entries();n=s.next().value;)a.has(n[0])||i.set(n[0],n[1]);for(s=o.entries();n=s.next().value;)i.set(n[0],n[1]);var l=new t(this._idGetter);return l._updateData=c,l._dataObjects=this._dataObjects,l._enterData=r,l._exitData=i,l}},{key:"append",value:function(e){for(var n,r=new Map,i=new Map,a=zs(this._mode,"update"),o=this["_".concat(a,"Data")].entries();n=o.next().value;)r.set(n[0],e(n[1])),i.set(n[0],n[1]);var c=new t(this._idGetter);return c._updateData=i,c._dataObjects=r,c}},{key:"enter",value:function(){return this._mode="enter",this}},{key:"exit",value:function(){return this._mode="exit",this}},{key:"merge",value:function(e){var n,r,i=new Map,a=new Map;for(r=this._updateData.entries();n=r.next().value;)this._exitData.has(n[0])||(a.set(n[0],n[1]),i.set(n[0],this._dataObjects.get(n[0])));for(r=e._updateData.entries();n=r.next().value;)a.has(n[0])||e._exitData.has(n[0])||(a.set(n[0],n[1]),i.set(n[0],e._dataObjects.get(n[0])));var o=new t(this._idGetter);return o._updateData=a,o._dataObjects=i,o}},{key:"each",value:function(t){for(var e,n=this._dataObjects.entries();e=n.next().value;)t(e[1],this._updateData.get(e[0]),e[0])}},{key:"map",value:function(e){for(var n,r=new Map,i=this._dataObjects.entries();n=i.next().value;)r.set(n[0],e(n[1],this._updateData.get(n[0]),n[0]));var a=new t(this._idGetter);return a._updateData=this._updateData,a._dataObjects=r,a}},{key:"remove",value:function(){var t=zs(this._mode,"update");return this["_".concat(t,"Data")].clear(),this}},{key:"sort",value:function(t){var e=this._updateData,n=this._dataObjects,r=function(t,e,n){return function(r,i){var a=r[0],o=i[0];return n([r[0],t.get(a),e.get(a)],[o,t.get(o),e.get(o)])}}(n,e,t);return this._updateData=new Map(G()(e.entries()).sort(r)),this._dataObjects=new Map(G()(n.entries()).sort(r)),this}},{key:"getObjects",value:function(){for(var t,e=[],n=this._dataObjects,r=zs(this._mode,"update"),i=this["_".concat(r,"Data")].entries();t=i.next().value;)n.has(t[0])&&e.push(n.get(t[0]));return e}}]),t}();function is(t){return new rs(t)}var as,os,cs,us,ss="string",ls="function",fs=ft.DISCRETE,hs=ft.CONTINUOUS,ds=window.HTMLElement,ps=function(t){if("object"===To()(t)){if(null===t)return!1;if("[object Object]"===Object.prototype.toString.call(t))return"Object"===(t.constructor.toString().match(/^function (.*)\(\)/m)||[])[1]}return!1},gs=function(){return"id-"+(new Date).getTime()+Math.round(1e3*Math.random())},vs=function t(e){var n,r={};for(var i in e)({}).hasOwnProperty.call(e,i)&&(n=e[i],r[i]=ps(n)?t(n):n);return r},ys=function(t,e){var n=[];return t.forEach((function(t){t in e||n.push(t)})),n},ms={typeObj:function(t,e){if("object"!==To()(e))return Error("Argument type object expected");var n=ys(t,e);return n.length?Error("Missing keys from parameter ".concat(n.join(", "))):e},htmlElem:function(t){return t instanceof ds?t:Error("HTMLElement required")}},bs=function(t,e){for(var n=-1/0,r=0;r<t.length;r++)n=Math.max(e?t[r][e]:t[r],n);return n},xs=function(t,e){for(var n=1/0,r=0;r<t.length;r++)n=Math.min(e?t[r][e]:t[r],n);return n},_s=function(t,e,n){var r,i,a=[];switch(t=t[0]instanceof Array?t:[t],n){case"categorical":i=(r=[]).concat.apply(r,G()(t.map((function(t){return t.map((function(t){return t[e[0]]})).filter((function(t){return void 0!==t}))}))));break;default:for(var o=function(n,r){var i=t[n],o=Y()(e,2),c=o[0],u=o[1],s=i.filter((function(t){return!isNaN(t[c])})),l=i.filter((function(t){return!isNaN(t[u])}));if(s.length||l.length){var f=xs(s,c),h=xs(l,u),d=bs(s,c),p=bs(l,u);a.push([Math.min(f,h),Math.max(d,p)])}},c=0,u=t.length;c<u;c++)o(c);i=a.length?[Math.min.apply(Math,G()(a.map((function(t){return t[0]})))),Math.max.apply(Math,G()(a.map((function(t){return t[1]}))))]:[]}return i},ws=function(t){return t[0]===t[1]&&(t[0]=t[0]>0?0:t[0],t[1]=t[1]>0?t[1]:0),t},ks=function(t,e){var n=[];if((t=t.filter((function(t){return t&&t.length}))).length)if(e===fs){var r=[],i=new Set;t.flat().forEach((function(t){bt.isInvalid(t)?i.has(t.value)||(r.push(t),i.add(t.value)):r.push(t)})),n=G()(new Set(r))}else n=[Math.min.apply(Math,G()(t.map((function(t){return t[0]})))),Math.max.apply(Math,G()(t.map((function(t){return t[1]}))))];return n},Ss=function(t){var e=[0,0];return(t=t.filter((function(t){return t&&t.length}))).length&&(e=[Math.max.apply(Math,G()(t.map((function(t){return t[0]})))),Math.max.apply(Math,G()(t.map((function(t){return t[1]}))))]),e},Ms=function(t){var e={};return t.forEach((function(t){Object.keys(t).forEach((function(n){var r,i=t[n];e[n]||(e[n]=(r={},Ro()(r,fs,[]),Ro()(r,hs,[]),r)),[fs,hs].forEach((function(t){i[t]&&e[n][t].push(i[t])}))}))})),Object.keys(e).reduce((function(t,n){return[fs,hs].forEach((function(r){var i=e[n][r];i.length&&(t[n]=Object.assign({},t[n],Ro()({},r,ks(i,r))))})),t}),{})},Es={circle:ec,cross:nc,diamond:ac,square:oc,star:lc,wye:pc,triangle:vc},Os={cubic:eu,bounce:function(t){return(t=+t)<4/11?nu*t*t:t<8/11?nu*(t-=6/11)*t+3/4:t<10/11?nu*(t-=9/11)*t+15/16:nu*(t-=21/22)*t+63/64},linear:function(t){return+t},elastic:au,back:ou,poly:cu,circle:function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}},Cs=function(t,e,n){for(var r,i,a,o=t.length,c="max"===n?-1/0:1/0,u=0;u<o;u++)a=(i=t[u])[e],("min"===n?a<c:a>c)&&(c=a,r=i);return r},As=function(t,e){return Cs(t,e,"min")},Ps=function(t,e){return Cs(t,e,"max")},Ds=function(t,e,n){for(var r,i,a=0,o=t.length-1;a<o;)r=Math.floor((a+o)/2),i=Math.abs(t[r]-e),Math.abs(t[r+1]-e)<=i?a=r+1:o=r;if(!n)return o;var c=t[o];return c===e?o:c>e?0===o?o:"left"===n?o-1:o:o===t.length-1||"left"===n?o:o+1},Rs=function(t,e){var n=t.filter((function(t){return"number"==typeof t}));return n[Ds(n,e)]},Is=function(){return window},Ts=requestAnimationFrame,Ns=cancelAnimationFrame,Fs=function(t){return(t=t.toLowerCase()).replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1)}))},js=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=t.reduce((function(t,n){return t[e(n)]=n,t}),{});return Object.values(n)},Ls=function(t,e){var n,r;if((r=js(void 0!==e?t.map((function(t){return t[e]})):t)).length>1){n=Math.abs(r[1]-r[0]);for(var i=2,a=r.length;i<a;i++)n=Math.min(n,Math.abs(r[i]-r[i-1]))}else n=r[0];return n},Bs=function(t,e,n){return t=t.replace(/^\.*/,""),["".concat(n,"-").concat(t),"".concat(n,"-").concat(t,"-").concat(e)]},zs=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.find((function(t){return!(void 0===t||"object"===To()(t)&&!t)}))},Hs=function(t){for(var e=[],n={},r=Object.keys(t),i=function i(a){if(e.length===r.length)return!0;n[a]=!0;for(var o=t[a],c=0;c<o.length;c++){var u=o[c];n[u]||i(u)}return e.push(a),!1},a=0;a<r.length&&!i(r[a]);a++);return e},Ws=function(t,e){for(var n in t)Object.hasOwnProperty.call(t,n)&&e(n,t)},Vs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];$()(this,t),this._voronoi=qu().x((function(t){return t.x})).y((function(t){return t.y})),this.data(e)}return Q()(t,[{key:"data",value:function(t){return t&&(this._voronoiFn=this._voronoi(t)),this}},{key:"find",value:function(t,e,n){return this._voronoiFn.find(t,e,n)}}]),t}(),Us=function(t){if(null==t)return t;for(var e=t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r.length;a<o&&null!=(e=e[r[a]]);a++);return e},Gs=function(t){var e=t.toString().match(/(\d+)(px)*/g);return e?parseInt(e[0],10):null},qs=function(t,e){Object.entries(e).forEach((function(e){var n=e[0],r=e[1],i=r.sanitization,a=r.preset,o=r.onset,c=r.typeChecker,u=r.defaultValue,s=t.constructor.prototype;Object.hasOwnProperty.call(s,n)||(u&&(t["_".concat(n)]=u),t[n]=function(){if(arguments.length){var e=arguments.length<=0?void 0:arguments[0];return i&&(e=i(t,arguments.length<=0?void 0:arguments[0],t["_".concat(n)])),a&&a(t,e),c&&!c(e)?t["_".concat(n)]:(t["_".concat(n)]=e,o&&o(t,e),t)}return t["_".concat(n)]})}))},Ys=function(t,e){return t.reduce((function(t,n){return t+(e?n[e]:n)}),0)},Xs=function(t,e){if(t.length!==e.length)return!1;for(var n=t.length;n>=0;n--)if(t[n]!==e[n])return!1;return!0},$s=function(t){return function(e,n){return"Array"===t?!!e&&Xs(e,n):"Object"===t?Object.is(e,n):e===n}},Ks=function(t,e,n){return n.forEach((function(n){return t.registerImmediateListener(n,(function(t){var r=Y()(t,2)[1];return e[n](r)}))}))},Qs=function(t){return t instanceof ds},Zs={INTERFACE_IMPL:"Method not implemented"},Js=function t(e,n){for(var r in n)ps(e[r])&&ps(n[r])?t(e[r],n[r]):n[r]instanceof Object&&n[r].constructor===Object?(e[r]={},t(e[r],n[r])):e[r]=n[r];return e},tl=function(t,e,n,r){var i=t||is(r),a=(i=i.data(n)).enter().append(e).merge(i),o=i.exit();return o.getObjects().forEach((function(t){return t.remove()})),o.remove(),a},el=function(t,e){var n=function(t,e,n){return t+(e-t)*n},r=[],i=(t.length-1)/(e-1);r[0]=t[0];for(var a=1;a<e-1;a++){var o=a*i,c=Math.floor(o).toFixed(),u=Math.ceil(o).toFixed(),s=o-c;r[a]=n(t[c],t[u],s)}return r[e-1]=t[t.length-1],r},nl=function(t){setTimeout((function(){t()}),0)},rl=function(t){return t*Math.PI/180},il=function(){},al=function(){return Ge},ol=function(){return Jt},cl=function(){return Ne},ul=function(){return Jc},sl=function(){return{color:ve,rgb:xe,hsl:Oe}},ll=function(){return tu};function fl(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}var hl,dl,pl=function(t,e,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(0===e)r=i=a=n;else{var c=n<.5?n*(1+e):n+e-n*e,u=2*n-c;r=fl(u,c,t+1/3),i=fl(u,c,t),a=fl(u,c,t-1/3)}return[255*r,255*i,255*a,o]},gl=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;t=+t,e=+e,n=+n,r=+r,t/=255,e/=255,n/=255;var i,a,o=Math.max(t,e,n),c=Math.min(t,e,n),u=(o+c)/2;if(o===c)i=a=0;else{var s=o-c;switch(a=u>.5?s/(2-o-c):s/(o+c),o){case t:i=(e-n)/s+(e<n?6:0);break;case e:i=(n-t)/s+2;break;case n:i=(t-e)/s+4}i/=6}return[i,a,u,r]},vl=function(t,e,n){var r,i,a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=Math.floor(6*t),u=6*t-c,s=n*(1-e),l=n*(1-u*e),f=n*(1-(1-u)*e);switch(c%6){case 0:r=n,i=f,a=s;break;case 1:r=l,i=n,a=s;break;case 2:r=s,i=n,a=f;break;case 3:r=s,i=l,a=n;break;case 4:r=f,i=s,a=n;break;case 5:r=n,i=s,a=l}return[255*r,255*i,255*a,o]},yl=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?gl(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)):""},ml=function(t,e,n,r){var i=pl(t,e,n,r),a=Y()(i,4);return function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:255,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:255,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:255,c=Math.round((1-r)*i+r*t),u=Math.round((1-r)*a+r*e),s=Math.round((1-r)*o+r*n);return"rgb(".concat(c,",").concat(u,",").concat(s,")")}(a[0],a[1],a[2],a[3])},bl=function(t){return/rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/.test(t)||/rgba?\(((25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,\s*?){2}(25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,?\s*([01]\.?\d*?)?\)/.test(t)?"rgb":/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)||/^hsla\(([\d.]+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/.test(t)?"hsl":/^#([0-9a-f]{3}){1,2}$/i.test(t)?"hex":t},xl=function(t,e){var n,r=[];return e.length?function(){for(var i=e[0],a=i.length,o=0;o<a;o++){var c=i[o],u=c&&Object.assign({},t.getField(c).getSchema());u&&r.push(Object.assign(u))}n=[];for(var s=e[0],l=function(t){var r=e[t],i={};r.forEach((function(t,e){i[s[e]]=t})),n.push(i)},f=1;f<e.length;f+=1)l(f)}():(n=[],r=[]),new t.constructor(n,r)},_l=function(t,e,n,r){if(null===e)return null;var i=r||Object.keys(e).filter((function(e){return t.isFieldPresent(e)}));return t.select((function(t){return i.every((function(n){var r=t[n].internalValue,i=e[n][0]instanceof Array?e[n][0]:e[n];return To()(i[0])===ss?void 0!==i.find((function(t){return t===r})):!!i&&r>=i[0]&&r<=i[1]}))}),{saveChild:!1,mode:n})},wl=function(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})},kl=function(t,e,n,r){var i;if(e instanceof Array){var a=e.slice(1,e.length);if(e instanceof Function)i=e(t,{},!1);else if(e instanceof Array&&e[0].length){var o=e[0].filter((function(e){return t.isFieldPresent(e)||e===ut.ROW_ID}));i=t.select((function(t,e){var n=!0;return o.forEach((function(r,i){var o=r===ut.ROW_ID?e:t[r].internalValue,c=a.findIndex((function(t){return t[i]===o}));n=n&&-1!==c})),n}),{saveChild:!1,mode:n})}else i=t.select((function(){return!1}),{saveChild:!1,mode:n})}else i=_l(t,e,n,r);return i},Sl=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=e.apply(void 0,[t].concat(r));for(var o in a)if({}.hasOwnProperty.call(a,o)){var c=r[1].namespace,u=null;c&&(u=c);var s=a[o],l=s.type,f=s.props,h=s.listener;t.store()[l](f,h,!1,{namespace:u})}},Ml=function(t){return!isNaN(t)&&t!==-1/0&&t!==1/0},El=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return"".concat(t).replace(/[&<>"'/]/g,(function(t){return e[t]}))},Ol=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},Cl=function(t){return t instanceof Array?t:[t]},Al=function t(e,n,r){if(!e)return!1;var i=e.prototype;return i instanceof n||t(i,n,r)},Pl=function(t){return function(){var t=kc(ec),e=kc(64),n=null;function r(){var r;if(n||(n=r=wc()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(e){return arguments.length?(t="function"==typeof e?e:kc(e),r):t},r.size=function(t){return arguments.length?(e="function"==typeof t?t:kc(+t),r):e},r.context=function(t){return arguments.length?(n=null==t?null:t,r):n},r}().type(Es[t])},Dl=(as={},Ro()(as,"none",Sc),Ro()(as,"ascending",Mc),Ro()(as,"descending",(function(t){return Mc(t).reverse()})),as),Rl=(os={},Ro()(os,"diverging",(function(t,e){if((c=t.length)>0)for(var n,r,i,a,o,c,u=0,s=t[e[0]].length;u<s;++u)for(a=o=0,n=0;n<c;++n)(i=(r=t[e[n]][u])[1]-r[0])>0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):(r[0]=0,r[1]=i)})),Ro()(os,"none",Oc),Ro()(os,"expand",(function(t,e){if((r=t.length)>0){for(var n,r,i,a=0,o=t[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=t[n][a][1]||0;if(i)for(n=0;n<r;++n)t[n][a][1]/=i}Oc(t,e)}})),Ro()(os,"wiggle",(function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var c=0,u=0,s=0;c<i;++c){for(var l=t[e[c]],f=l[o][1]||0,h=(f-(l[o-1][1]||0))/2,d=0;d<c;++d){var p=t[e[d]];h+=(p[o][1]||0)-(p[o-1][1]||0)}u+=f,s+=h*f}n[o-1][1]+=n[o-1][0]=a,u&&(a-=s/u)}n[o-1][1]+=n[o-1][0]=a,Oc(t,e)}})),os),Il=function(t){return function(){var t=kc([]),e=Sc,n=Oc,r=Ac;function i(i){var a,o,c=t.apply(this,arguments),u=i.length,s=c.length,l=new Array(s);for(a=0;a<s;++a){for(var f,h=c[a],d=l[a]=new Array(u),p=0;p<u;++p)d[p]=f=[0,+r(i[p],h,p,i)],f.data=i[p];d.key=h}for(a=0,o=e(l);a<s;++a)l[o[a]].index=a;return n(l,o),l}return i.keys=function(e){return arguments.length?(t="function"==typeof e?e:kc(Cc.call(e)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:kc(+t),i):r},i.order=function(t){return arguments.length?(e=null==t?Sc:"function"==typeof t?t:kc(Cc.call(t)),i):e},i.offset=function(t){return arguments.length?(n=null==t?Oc:t,i):n},i}().keys(t.keys).offset(Rl[t.offset]).order(Dl[t.order])(t.data)},Tl=function(t){var e=Bt();return t.keys.forEach((function(t){return e.key((function(e){return e[t]}))})),e.entries(t.data)},Nl=function(t,e){return t.filter((function(t){return e.indexOf(t)<0}))},Fl={curveLinear:Dc,curveStepAfter:Nc,curveStepBefore:Tc,curveStep:Ic,curveCatmullRom:Bc,stepAfter:Nc,catmullRom:Bc,step:Ic,stepBefore:Tc,linear:Dc},jl={axisLeft:function(t){return Wo(4,t)},axisRight:function(t){return Wo(2,t)},axisTop:function(t){return Wo(1,t)},axisBottom:function(t){return Wo(3,t)},line:Wc,area:function(){var t=zc,e=null,n=kc(0),r=Hc,i=kc(!0),a=null,o=Dc,c=null;function u(u){var s,l,f,h,d,p=u.length,g=!1,v=new Array(p),y=new Array(p);for(null==a&&(c=o(d=wc())),s=0;s<=p;++s){if(!(s<p&&i(h=u[s],s,u))===g)if(g=!g)l=s,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),f=s-1;f>=l;--f)c.point(v[f],y[f]);c.lineEnd(),c.areaEnd()}g&&(v[s]=+t(h,s,u),y[s]=+n(h,s,u),c.point(e?+e(h,s,u):v[s],r?+r(h,s,u):y[s]))}if(d)return c=null,d+""||null}function s(){return Wc().defined(i).curve(o).context(a)}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:kc(+n),e=null,u):t},u.x0=function(e){return arguments.length?(t="function"==typeof e?e:kc(+e),u):t},u.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:kc(+t),u):e},u.y=function(t){return arguments.length?(n="function"==typeof t?t:kc(+t),r=null,u):n},u.y0=function(t){return arguments.length?(n="function"==typeof t?t:kc(+t),u):n},u.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:kc(+t),u):r},u.lineX0=u.lineY0=function(){return s().x(t).y(n)},u.lineY1=function(){return s().x(t).y(r)},u.lineX1=function(){return s().x(e).y(n)},u.defined=function(t){return arguments.length?(i="function"==typeof t?t:kc(!!t),u):i},u.curve=function(t){return arguments.length?(o=t,null!=a&&(c=o(a)),u):o},u.context=function(t){return arguments.length?(null==t?a=c=null:c=o(a=t),u):a},u},pie:function(){var t=Uc,e=Vc,n=null,r=kc(0),i=kc(Zo),a=kc(0);function o(o){var c,u,s,l,f,h=o.length,d=0,p=new Array(h),g=new Array(h),v=+r.apply(this,arguments),y=Math.min(Zo,Math.max(-Zo,i.apply(this,arguments)-v)),m=Math.min(Math.abs(y)/h,a.apply(this,arguments)),b=m*(y<0?-1:1);for(c=0;c<h;++c)(f=g[p[c]=c]=+t(o[c],c,o))>0&&(d+=f);for(null!=e?p.sort((function(t,n){return e(g[t],g[n])})):null!=n&&p.sort((function(t,e){return n(o[t],o[e])})),c=0,s=d?(y-h*b)/d:0;c<h;++c,v=l)u=p[c],l=v+((f=g[u])>0?f*s:0)+b,g[u]={data:o[u],index:c,value:f,startAngle:v,endAngle:l,padAngle:m};return g}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:kc(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,n=null,o):e},o.sort=function(t){return arguments.length?(n=t,e=null,o):n},o.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:kc(+t),o):r},o.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:kc(+t),o):i},o.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:kc(+t),o):a},o},arc:function(){var t=Gc,e=qc,n=kc(0),r=null,i=Yc,a=Xc,o=$c,c=null;function u(){var u,s,l=+t.apply(this,arguments),f=+e.apply(this,arguments),h=i.apply(this,arguments)-Qo,d=a.apply(this,arguments)-Qo,p=Vo(d-h),g=d>h;if(c||(c=u=wc()),f<l&&(s=f,f=l,l=s),f>1e-12)if(p>Zo-1e-12)c.moveTo(f*Go(h),f*Xo(h)),c.arc(0,0,f,h,d,!g),l>1e-12&&(c.moveTo(l*Go(d),l*Xo(d)),c.arc(0,0,l,d,h,g));else{var v,y,m=h,b=d,x=h,_=d,w=p,k=p,S=o.apply(this,arguments)/2,M=S>1e-12&&(r?+r.apply(this,arguments):$o(l*l+f*f)),E=Yo(Vo(f-l)/2,+n.apply(this,arguments)),O=E,C=E;if(M>1e-12){var A=tc(M/l*Xo(S)),P=tc(M/f*Xo(S));(w-=2*A)>1e-12?(x+=A*=g?1:-1,_-=A):(w=0,x=_=(h+d)/2),(k-=2*P)>1e-12?(m+=P*=g?1:-1,b-=P):(k=0,m=b=(h+d)/2)}var D=f*Go(m),R=f*Xo(m),I=l*Go(_),T=l*Xo(_);if(E>1e-12){var N,F=f*Go(b),j=f*Xo(b),L=l*Go(x),B=l*Xo(x);if(p<Ko&&(N=Kc(D,R,L,B,F,j,I,T))){var z=D-N[0],H=R-N[1],W=F-N[0],V=j-N[1],U=1/Xo(Jo((z*W+H*V)/($o(z*z+H*H)*$o(W*W+V*V)))/2),G=$o(N[0]*N[0]+N[1]*N[1]);O=Yo(E,(l-G)/(U-1)),C=Yo(E,(f-G)/(U+1))}}k>1e-12?C>1e-12?(v=Qc(L,B,D,R,f,C,g),y=Qc(F,j,I,T,f,C,g),c.moveTo(v.cx+v.x01,v.cy+v.y01),C<E?c.arc(v.cx,v.cy,C,Uo(v.y01,v.x01),Uo(y.y01,y.x01),!g):(c.arc(v.cx,v.cy,C,Uo(v.y01,v.x01),Uo(v.y11,v.x11),!g),c.arc(0,0,f,Uo(v.cy+v.y11,v.cx+v.x11),Uo(y.cy+y.y11,y.cx+y.x11),!g),c.arc(y.cx,y.cy,C,Uo(y.y11,y.x11),Uo(y.y01,y.x01),!g))):(c.moveTo(D,R),c.arc(0,0,f,m,b,!g)):c.moveTo(D,R),l>1e-12&&w>1e-12?O>1e-12?(v=Qc(I,T,F,j,l,-O,g),y=Qc(D,R,L,B,l,-O,g),c.lineTo(v.cx+v.x01,v.cy+v.y01),O<E?c.arc(v.cx,v.cy,O,Uo(v.y01,v.x01),Uo(y.y01,y.x01),!g):(c.arc(v.cx,v.cy,O,Uo(v.y01,v.x01),Uo(v.y11,v.x11),!g),c.arc(0,0,l,Uo(v.cy+v.y11,v.cx+v.x11),Uo(y.cy+y.y11,y.cx+y.x11),g),c.arc(y.cx,y.cy,O,Uo(y.y11,y.x11),Uo(y.y01,y.x01),!g))):c.arc(0,0,l,_,x,g):c.lineTo(I,T)}else c.moveTo(0,0);if(c.closePath(),u)return c=null,u+""||null}return u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Ko/2;return[Go(r)*n,Xo(r)*n]},u.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:kc(+e),u):t},u.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:kc(+t),u):e},u.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:kc(+t),u):n},u.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:kc(+t),u):r},u.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:kc(+t),u):i},u.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:kc(+t),u):a},u.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:kc(+t),u):o},u.context=function(t){return arguments.length?(c=null==t?null:t,u):c},u},nest:Bt},Ll={band:Qt},Bl={path:ns},zl=function(t){for(var e=(t=t.sort((function(t,e){return t-e})))[1]-t[0],n=2;n<t.length;n++)e=Math.min(e,t[n]-t[n-1]);return e},Hl={millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",month:"%B %Y",year:"%Y"},Wl=[["millisecond","second","minute","hour","day","month","year"],[1,1e3,6e4,36e5,864e5,2592e6,31536e6]],Vl=function(t,e){var n=function(t){var e=Ds(Wl[1],t);return Wl[0][e]}(e);return bt.DateTimeFormatter.formatAs(t,Hl[n])},Ul=function(t,e){return{resolvable:function(n){var r=n[t],i=e.slice(0,e.length-1),a=e[e.length-1],o=i.map((function(t){return r[t]}));return{fn:a.apply(void 0,G()(o)),depArr:i}}}},Gl=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,16)},ql=function(t){return function(e){return bt.isInvalid(e)&&e in t?t[e]:e}},Yl=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};if(t instanceof bt){var r=[].concat(G()(t.getDerivations().reverse()),G()(t.getAncestorDerivations().reverse())),i=zs(Us(r.find((function(t){return t.op===bt.DerivationOperations.GROUPBY})),"criteria"),{}),a=t.getMeasures();(e=e.length?e:a).forEach((function(e){if(i[e])n[e]=i[e];else{var r=t.getField(e);r&&(n[e]=r.schema().defAggFn)}}))}return n},Xl=function(t,e){return t.getField(e).displayName()},$l=function(t,e){return bt.isInvalid(t)&&bt.isInvalid(e)?0:bt.isInvalid(t)?-1:bt.isInvalid(e)?1:String(t).localeCompare(String(e))},Kl=function(t,e){var n=-1;return bt.isInvalid(t)||bt.isInvalid(e)||(n=(t=parseFloat(t))-(e=parseFloat(e))),n},Ql=(cs={},Ro()(cs,"asc",(function(t,e){return $l(t,e)})),Ro()(cs,"desc",(function(t,e){return $l(e,t,-1)})),cs),Zl=function(t,e,n){var r=To()(t);return r===ls?t(e,n):r===ss&&Ql[t]?Ql[t](e,n):null},Jl=function(t,e){return bt.isInvalid(t)&&bt.isInvalid(e)?0:bt.isInvalid(t)?-1:bt.isInvalid(e)?1:(t=Number(t))-(e=Number(e))},tf=(us={},Ro()(us,"asc",(function(t,e){return Jl(t,e)})),Ro()(us,"desc",(function(t,e){return Jl(e,t)})),us),ef=function(t,e,n){var r=To()(t);return r===ls?t(e,n):r===ss&&tf[t]?tf[t](e,n):null},nf=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[function(t){return t},function(t){return t}],r=Y()(n,2),i=r[0],a=r[1],o=new Set(e.map((function(t){return a(t)})));return t.filter((function(t){return o.has(i(t))}))},rf=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[function(t){return t},function(t){return t}],r=Y()(n,2),i=r[0],a=r[1],o=new Set(e.map((function(t){return a(t)})));return t.filter((function(t){return!o.has(i(t))}))},af=function(t,e){return t.reduce((function(n,r,i){return e(r,i,t)?n[0].push(r):n[1].push(r),n}),[[],[]])},of=function(t){return{with:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce((function(t,e){return e(t)}),t)}}},cf=function(t){var e=Object.assign({},t),n={register:function(t,r){if(ps(t))for(var i in t)e[i]=t[i];else{var a=r||t.formalName();e[a]=t}return n},get:function(){return e}};return n},uf=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=0;n<t.length;n++)if(e.has(t[n]))return!0;return!1},sf=function(t,e){var n=[Math.min.apply(Math,G()(t)),Math.max.apply(Math,G()(t))];if(e<3)return n;var r=Pn().domain(n).nice(),i=null;return i=jl.axisBottom().scale(r).scale().ticks(e),Math.max.apply(Math,G()(i))<n[1]&&i.push(n[1]),Math.min.apply(Math,G()(i))>n[0]&&i.unshift(n[0]),i},lf=function(t,e,n,r){var i=t.h,a=t.s,o=t.l,c=t.a,u=e.h,s=void 0===u?0:u,l=e.s,f=void 0===l?0:l,h=e.l,d=void 0===h?0:h,p=e.a,g=i+","+a+","+o+","+c+","+s+","+f+","+d+","+p,v=r.get(g);if(v)return v;var y=parseFloat(p||c,10),m=i+s,b=a+f,x=o+d,_=y+1;n||(_=y-1),b=+(100*b).toFixed(1),x=+(100*x).toFixed(1);var w="hsla(".concat(m,",").concat(b,"%,").concat(x,"%,").concat(_,")");return r.set(g,w),w},ff=function(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y;return Math.sqrt(Math.pow(n-a,2)+Math.pow(r-o,2))<=i},hf=function(t,e){var n=e.getFieldNames(),r=nf(t[0],n);return r.length?{conditions:r.map((function(e,n){return{field:e,value:bt.isInvalid(t[1][n])?null:t[1][n],operator:"eq"}})),operator:"and"}:{field:n[0],value:[],operator:"in"}},df=function(t,e){return t.reduce((function(t,n,r){return t[e?n[e]:n]=r,t}),{})},pf=function t(e,n){function r(t){return"object"===To()(t)&&null!=t}if(e===n)return!0;if(r(e)&&r(n)){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return!1},gf=function(t){return null==t?t:"object"===To()(t)?t.field:t},vf=function(t,e){e=e||{};var n={};return(t=t||[]).forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},yf=function(t,e){t=t||[],e=e||{};var n={};return Object.keys(e).forEach((function(r){t.includes(r)||(n[r]=e[r])})),n},mf=function(t,e){return t-e},bf=function(t,e){return e-t},xf=(hl={},dl={},{startMeasure:function(t){dl[t]=performance.now()},endMeasure:function(t){t in hl||(hl[t]=0),hl[t]+=performance.now()-dl[t]},getTimings:function(){return hl}});function _f(){}var wf=function(t){return null==t?_f:function(){return this.querySelector(t)}};function kf(){return[]}var Sf=function(t){return null==t?kf:function(){return this.querySelectorAll(t)}},Mf=function(t){return function(){return this.matches(t)}},Ef=function(t){return new Array(t.length)};function Of(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Cf(t,e,n,r,i,a){for(var o,c=0,u=e.length,s=a.length;c<s;++c)(o=e[c])?(o.__data__=a[c],r[c]=o):n[c]=new Of(t,a[c]);for(;c<u;++c)(o=e[c])&&(i[c]=o)}function Af(t,e,n,r,i,a,o){var c,u,s,l={},f=e.length,h=a.length,d=new Array(f);for(c=0;c<f;++c)(u=e[c])&&(d[c]=s="$"+o.call(u,u.__data__,c,e),s in l?i[c]=u:l[s]=u);for(c=0;c<h;++c)(u=l[s="$"+o.call(t,a[c],c,a)])?(r[c]=u,u.__data__=a[c],l[s]=null):n[c]=new Of(t,a[c]);for(c=0;c<f;++c)(u=e[c])&&l[d[c]]===u&&(i[c]=u)}function Pf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Of.prototype={constructor:Of,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Df="http://www.w3.org/1999/xhtml",Rf={svg:"http://www.w3.org/2000/svg",xhtml:Df,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},If=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Rf.hasOwnProperty(e)?{space:Rf[e],local:t}:t};function Tf(t){return function(){this.removeAttribute(t)}}function Nf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ff(t,e){return function(){this.setAttribute(t,e)}}function jf(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Lf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Bf(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var zf=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Hf(t){return function(){this.style.removeProperty(t)}}function Wf(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Vf(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Uf(t,e){return t.style.getPropertyValue(e)||zf(t).getComputedStyle(t,null).getPropertyValue(e)}function Gf(t){return function(){delete this[t]}}function qf(t,e){return function(){this[t]=e}}function Yf(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Xf(t){return t.trim().split(/^|\s+/)}function $f(t){return t.classList||new Kf(t)}function Kf(t){this._node=t,this._names=Xf(t.getAttribute("class")||"")}function Qf(t,e){for(var n=$f(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Zf(t,e){for(var n=$f(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Jf(t){return function(){Qf(this,t)}}function th(t){return function(){Zf(this,t)}}function eh(t,e){return function(){(e.apply(this,arguments)?Qf:Zf)(this,t)}}function nh(){this.textContent=""}function rh(t){return function(){this.textContent=t}}function ih(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ah(){this.innerHTML=""}function oh(t){return function(){this.innerHTML=t}}function ch(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function uh(){this.nextSibling&&this.parentNode.appendChild(this)}function sh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lh(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Df&&e.documentElement.namespaceURI===Df?e.createElement(t):e.createElementNS(n,t)}}function fh(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}Kf.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var hh=function(t){var e=If(t);return(e.local?fh:lh)(e)};function dh(){return null}function ph(){var t=this.parentNode;t&&t.removeChild(this)}function gh(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var yh={},mh=null;function bh(t,e,n){return t=xh(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function xh(t,e,n){return function(r){var i=mh;mh=r;try{t.call(this,this.__data__,e,n)}finally{mh=i}}}function _h(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function wh(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function kh(t,e,n){var r=yh.hasOwnProperty(t.type)?bh:xh;return function(i,a,o){var c,u=this.__on,s=r(e,a,o);if(u)for(var l=0,f=u.length;l<f;++l)if((c=u[l]).type===t.type&&c.name===t.name)return this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=s,c.capture=n),void(c.value=e);this.addEventListener(t.type,s,n),c={type:t.type,name:t.name,value:e,listener:s,capture:n},u?u.push(c):this.__on=[c]}}function Sh(t,e,n,r){var i=mh;t.sourceEvent=mh,mh=t;try{return e.apply(n,r)}finally{mh=i}}function Mh(t,e,n){var r=zf(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Eh(t,e){return function(){return Mh(this,t,e)}}function Oh(t,e){return function(){return Mh(this,t,e.apply(this,arguments))}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(yh={mouseenter:"mouseover",mouseleave:"mouseout"}));var Ch=[null];function Ah(t,e){this._groups=t,this._parents=e}function Ph(){return new Ah([[document.documentElement]],Ch)}Ah.prototype=Ph.prototype={constructor:Ah,select:function(t){"function"!=typeof t&&(t=wf(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,c=e[i],u=c.length,s=r[i]=new Array(u),l=0;l<u;++l)(a=c[l])&&(o=t.call(a,a.__data__,l,c))&&("__data__"in a&&(o.__data__=a.__data__),s[l]=o);return new Ah(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=Sf(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,c=e[a],u=c.length,s=0;s<u;++s)(o=c[s])&&(r.push(t.call(o,o.__data__,s,c)),i.push(o));return new Ah(r,i)},filter:function(t){"function"!=typeof t&&(t=Mf(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],c=o.length,u=r[i]=[],s=0;s<c;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new Ah(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),l=-1,this.each((function(t){p[++l]=t})),p;var n,r=e?Af:Cf,i=this._parents,a=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=a.length,c=new Array(o),u=new Array(o),s=new Array(o),l=0;l<o;++l){var f=i[l],h=a[l],d=h.length,p=t.call(f,f&&f.__data__,l,i),g=p.length,v=u[l]=new Array(g),y=c[l]=new Array(g);r(f,h,v,y,s[l]=new Array(d),p,e);for(var m,b,x=0,_=0;x<g;++x)if(m=v[x]){for(x>=_&&(_=x+1);!(b=y[_])&&++_<g;);m._next=b||null}}return(c=new Ah(c,i))._enter=u,c._exit=s,c},enter:function(){return new Ah(this._enter||this._groups.map(Ef),this._parents)},exit:function(){return new Ah(this._exit||this._groups.map(Ef),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var u,s=e[c],l=n[c],f=s.length,h=o[c]=new Array(f),d=0;d<f;++d)(u=s[d]||l[d])&&(h[d]=u);for(;c<r;++c)o[c]=e[c];return new Ah(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=Pf);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,c=n[a],u=c.length,s=i[a]=new Array(u),l=0;l<u;++l)(o=c[l])&&(s[l]=o);s.sort(e)}return new Ah(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,c=a.length;o<c;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=If(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?Nf:Tf:"function"==typeof e?n.local?Bf:Lf:n.local?jf:Ff)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Hf:"function"==typeof e?Vf:Wf)(t,e,null==n?"":n)):Uf(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Gf:"function"==typeof e?Yf:qf)(t,e)):this.node()[t]},classed:function(t,e){var n=Xf(t+"");if(arguments.length<2){for(var r=$f(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?eh:e?Jf:th)(n,e))},text:function(t){return arguments.length?this.each(null==t?nh:("function"==typeof t?ih:rh)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ah:("function"==typeof t?ch:oh)(t)):this.node().innerHTML},raise:function(){return this.each(uh)},lower:function(){return this.each(sh)},append:function(t){var e="function"==typeof t?t:hh(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:hh(t),r=null==e?dh:"function"==typeof e?e:wf(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(ph)},clone:function(t){return this.select(t?vh:gh)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=_h(t+""),o=a.length;if(!(arguments.length<2)){for(c=e?kh:wh,null==n&&(n=!1),r=0;r<o;++r)this.each(c(a[r],e,n));return this}var c=this.node().__on;if(c)for(var u,s=0,l=c.length;s<l;++s)for(r=0,u=c[s];r<o;++r)if((i=a[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?Oh:Eh)(t,e))}};var Dh=Ph,Rh=function(t){return"string"==typeof t?new Ah([[document.querySelector(t)]],[document.documentElement]):new Ah([[t]],Ch)},Ih=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},Th={value:function(){}};function Nh(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Fh(r)}function Fh(t){this._=t}function jh(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function Lh(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Bh(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Th,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Fh.prototype=Nh.prototype={constructor:Fh,on:function(t,e){var n,r=this._,i=jh(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=Bh(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Bh(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=Lh(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Fh(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var zh=Nh,Hh=function(){for(var t,e=mh;t=e.sourceEvent;)e=t;return e},Wh=function(t){var e=Hh();return e.changedTouches&&(e=e.changedTouches[0]),Ih(t,e)},Vh=function(t,e,n){arguments.length<3&&(n=e,e=Hh().changedTouches);for(var r,i=0,a=e?e.length:0;i<a;++i)if((r=e[i]).identifier===n)return Ih(t,r);return null};function Uh(){mh.stopImmediatePropagation()}var Gh=function(){mh.preventDefault(),mh.stopImmediatePropagation()},qh=function(t){var e=t.document.documentElement,n=Rh(t).on("dragstart.drag",Gh,!0);"onselectstart"in e?n.on("selectstart.drag",Gh,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},Yh=function(t){return function(){return t}};function Xh(t,e,n,r,i,a,o,c,u,s){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=c,this.dy=u,this._=s}function $h(){return!mh.ctrlKey&&!mh.button}function Kh(){return this.parentNode}function Qh(t){return null==t?{x:mh.x,y:mh.y}:t}function Zh(){return navigator.maxTouchPoints||"ontouchstart"in this}Xh.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Jh,td,ed=function(){var t,e,n,r,i=$h,a=Kh,o=Qh,c=Zh,u={},s=zh("start","drag","end"),l=0,f=0;function h(t){t.on("mousedown.drag",d).filter(c).on("touchstart.drag",v).on("touchmove.drag",y).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var o=b("mouse",a.apply(this,arguments),Wh,this,arguments);o&&(Rh(mh.view).on("mousemove.drag",p,!0).on("mouseup.drag",g,!0),qh(mh.view),Uh(),n=!1,t=mh.clientX,e=mh.clientY,o("start"))}}function p(){if(Gh(),!n){var r=mh.clientX-t,i=mh.clientY-e;n=r*r+i*i>f}u.mouse("drag")}function g(){var t,e,r,i;Rh(mh.view).on("mousemove.drag mouseup.drag",null),t=mh.view,e=n,r=t.document.documentElement,i=Rh(t).on("dragstart.drag",null),e&&(i.on("click.drag",Gh,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect),Gh(),u.mouse("end")}function v(){if(i.apply(this,arguments)){var t,e,n=mh.changedTouches,r=a.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=b(n[t].identifier,r,Vh,this,arguments))&&(Uh(),e("start"))}}function y(){var t,e,n=mh.changedTouches,r=n.length;for(t=0;t<r;++t)(e=u[n[t].identifier])&&(Gh(),e("drag"))}function m(){var t,e,n=mh.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=u[n[t].identifier])&&(Uh(),e("end"))}function b(t,e,n,r,i){var a,c,f,d=n(e,t),p=s.copy();if(Sh(new Xh(h,"beforestart",a,t,l,d[0],d[1],0,0,p),(function(){return null!=(mh.subject=a=o.apply(r,i))&&(c=a.x-d[0]||0,f=a.y-d[1]||0,!0)})))return function o(s){var g,v=d;switch(s){case"start":u[t]=o,g=l++;break;case"end":delete u[t],--l;case"drag":d=n(e,t),g=l}Sh(new Xh(h,s,a,t,g,d[0]+c,d[1]+f,d[0]-v[0],d[1]-v[1],p),p.apply,p,[s,r,i])}}return h.filter=function(t){return arguments.length?(i="function"==typeof t?t:Yh(!!t),h):i},h.container=function(t){return arguments.length?(a="function"==typeof t?t:Yh(t),h):a},h.subject=function(t){return arguments.length?(o="function"==typeof t?t:Yh(t),h):o},h.touchable=function(t){return arguments.length?(c="function"==typeof t?t:Yh(!!t),h):c},h.on=function(){var t=s.on.apply(s,arguments);return t===s?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h},nd=0,rd=0,id=0,ad=0,od=0,cd=0,ud="object"==typeof performance&&performance.now?performance:Date,sd="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ld(){return od||(sd(fd),od=ud.now()+cd)}function fd(){od=0}function hd(){this._call=this._time=this._next=null}function dd(t,e,n){var r=new hd;return r.restart(t,e,n),r}function pd(){od=(ad=ud.now())+cd,nd=rd=0;try{!function(){ld(),++nd;for(var t,e=Jh;e;)(t=od-e._time)>=0&&e._call.call(null,t),e=e._next;--nd}()}finally{nd=0,function(){for(var t,e,n=Jh,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Jh=e);td=t,vd(r)}(),od=0}}function gd(){var t=ud.now(),e=t-ad;e>1e3&&(cd-=e,ad=t)}function vd(t){nd||(rd&&(rd=clearTimeout(rd)),t-od>24?(t<1/0&&(rd=setTimeout(pd,t-ud.now()-cd)),id&&(id=clearInterval(id))):(id||(ad=ud.now(),id=setInterval(gd,1e3)),nd=1,sd(pd)))}hd.prototype=dd.prototype={constructor:hd,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ld():+n)+(null==e?0:+e),this._next||td===this||(td?td._next=this:Jh=this,td=this),this._call=t,this._time=n,vd()},stop:function(){this._call&&(this._call=null,this._time=1/0,vd())}};var yd=function(t,e,n){var r=new hd;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r},md=zh("start","end","cancel","interrupt"),bd=[],xd=function(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(u){var s,l,f,h;if(1!==n.state)return c();for(s in i)if((h=i[s]).name===n.name){if(3===h.state)return yd(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[s]):+s<e&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[s])}if(yd((function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),s=0,l=-1;s<f;++s)(h=n.tween[s].value.call(t,t.__data__,n.index,n.group))&&(r[++l]=h);r.length=l+1}}function o(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=dd((function(t){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:md,tween:bd,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})};function _d(t,e){var n=kd(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function wd(t,e){var n=kd(t,e);if(n.state>3)throw new Error("too late; already running");return n}function kd(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}var Sd,Md,Ed,Od,Cd=180/Math.PI,Ad={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},Pd=function(t,e,n,r,i,a){var o,c,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Cd,skewX:Math.atan(u)*Cd,scaleX:o,scaleY:c}};function Dd(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var c=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,c){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);c.push({i:u-4,x:Jt(t,i)},{i:u-2,x:Jt(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,c,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Jt(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,c,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Jt(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,c,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var c=a.push(i(a)+"scale(",null,",",null,")");o.push({i:c-4,x:Jt(t,n)},{i:c-2,x:Jt(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,c,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)c[(e=u[n]).i]=e.x(t);return c.join("")}}}var Rd=Dd((function(t){return"none"===t?Ad:(Sd||(Sd=document.createElement("DIV"),Md=document.documentElement,Ed=document.defaultView),Sd.style.transform=t,t=Ed.getComputedStyle(Md.appendChild(Sd),null).getPropertyValue("transform"),Md.removeChild(Sd),t=t.slice(7,-1).split(","),Pd(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Id=Dd((function(t){return null==t?Ad:(Od||(Od=document.createElementNS("http://www.w3.org/2000/svg","g")),Od.setAttribute("transform",t),(t=Od.transform.baseVal.consolidate())?(t=t.matrix,Pd(t.a,t.b,t.c,t.d,t.e,t.f)):Ad)}),", ",")",")");function Td(t,e){var n,r;return function(){var i=wd(this,t),a=i.tween;if(a!==n)for(var o=0,c=(r=n=a).length;o<c;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Nd(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=wd(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var c={name:e,value:n},u=0,s=i.length;u<s;++u)if(i[u].name===e){i[u]=c;break}u===s&&i.push(c)}a.tween=i}}function Fd(t,e,n){var r=t._id;return t.each((function(){var t=wd(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return kd(t,r).value[e]}}var jd=function(t,e){var n;return("number"==typeof e?Jt:e instanceof ve?Ne:(n=ve(e))?(e=n,Ne):Ue)(t,e)};function Ld(t){return function(){this.removeAttribute(t)}}function Bd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function zd(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Hd(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Wd(t,e,n){var r,i,a;return function(){var o,c,u=n(this);if(null!=u)return(o=this.getAttribute(t))===(c=u+"")?null:o===r&&c===i?a:(i=c,a=e(r=o,u));this.removeAttribute(t)}}function Vd(t,e,n){var r,i,a;return function(){var o,c,u=n(this);if(null!=u)return(o=this.getAttributeNS(t.space,t.local))===(c=u+"")?null:o===r&&c===i?a:(i=c,a=e(r=o,u));this.removeAttributeNS(t.space,t.local)}}function Ud(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Gd(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function qd(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Gd(t,i)),n}return i._value=e,i}function Yd(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&Ud(t,i)),n}return i._value=e,i}function Xd(t,e){return function(){_d(this,t).delay=+e.apply(this,arguments)}}function $d(t,e){return e=+e,function(){_d(this,t).delay=e}}function Kd(t,e){return function(){wd(this,t).duration=+e.apply(this,arguments)}}function Qd(t,e){return e=+e,function(){wd(this,t).duration=e}}function Zd(t,e){if("function"!=typeof e)throw new Error;return function(){wd(this,t).ease=e}}function Jd(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?_d:wd;return function(){var o=a(this,t),c=o.on;c!==r&&(i=(r=c).copy()).on(e,n),o.on=i}}var tp=Dh.prototype.constructor;function ep(t){return function(){this.style.removeProperty(t)}}function np(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function rp(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&np(t,a,n)),r}return a._value=e,a}function ip(t){return function(e){this.textContent=t.call(this,e)}}function ap(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&ip(r)),e}return r._value=t,r}var op=0;function cp(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function up(){return++op}var sp=Dh.prototype;cp.prototype=function(t){return Dh().transition(t)}.prototype={constructor:cp,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=wf(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var c,u,s=r[o],l=s.length,f=a[o]=new Array(l),h=0;h<l;++h)(c=s[h])&&(u=t.call(c,c.__data__,h,s))&&("__data__"in c&&(u.__data__=c.__data__),f[h]=u,xd(f[h],e,n,h,f,kd(c,n)));return new cp(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Sf(t));for(var r=this._groups,i=r.length,a=[],o=[],c=0;c<i;++c)for(var u,s=r[c],l=s.length,f=0;f<l;++f)if(u=s[f]){for(var h,d=t.call(u,u.__data__,f,s),p=kd(u,n),g=0,v=d.length;g<v;++g)(h=d[g])&&xd(h,e,n,g,d,p);a.push(d),o.push(u)}return new cp(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=Mf(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],c=o.length,u=r[i]=[],s=0;s<c;++s)(a=o[s])&&t.call(a,a.__data__,s,o)&&u.push(a);return new cp(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),c=0;c<a;++c)for(var u,s=e[c],l=n[c],f=s.length,h=o[c]=new Array(f),d=0;d<f;++d)(u=s[d]||l[d])&&(h[d]=u);for(;c<r;++c)o[c]=e[c];return new cp(o,this._parents,this._name,this._id)},selection:function(){return new tp(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=up(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,c=r[a],u=c.length,s=0;s<u;++s)if(o=c[s]){var l=kd(o,e);xd(o,t,n,s,c,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new cp(r,this._parents,t,n)},call:sp.call,nodes:sp.nodes,node:sp.node,size:sp.size,empty:sp.empty,each:sp.each,on:function(t,e){var n=this._id;return arguments.length<2?kd(this.node(),n).on.on(t):this.each(Jd(n,t,e))},attr:function(t,e){var n=If(t),r="transform"===n?Id:jd;return this.attrTween(t,"function"==typeof e?(n.local?Vd:Wd)(n,r,Fd(this,"attr."+t,e)):null==e?(n.local?Bd:Ld)(n):(n.local?Hd:zd)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=If(t);return this.tween(n,(r.local?qd:Yd)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Rd:jd;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=Uf(this,t),o=(this.style.removeProperty(t),Uf(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,ep(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=Uf(this,t),c=n(this),u=c+"";return null==c&&(this.style.removeProperty(t),u=c=Uf(this,t)),o===u?null:o===r&&u===i?a:(i=u,a=e(r=o,c))}}(t,r,Fd(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,c="end."+o;return function(){var u=wd(this,t),s=u.on,l=null==u.value[o]?a||(a=ep(e)):void 0;s===n&&i===l||(r=(n=s).copy()).on(c,i=l),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=Uf(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,rp(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Fd(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,ap(t))},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=kd(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Td:Nd)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Xd:$d)(e,t)):kd(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Kd:Qd)(e,t)):kd(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(Zd(e,t)):kd(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var c={value:o},u={value:function(){0==--i&&a()}};n.each((function(){var n=wd(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(c),e._.interrupt.push(c),e._.end.push(u)),n.on=e}))}))}};var lp={time:null,delay:0,duration:250,ease:eu};function fp(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return lp.time=ld(),lp;return n}Dh.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}(this,t)}))},Dh.prototype.transition=function(t){var e,n;t instanceof cp?(e=t._id,t=t._name):(e=up(),(n=lp).time=ld(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,c=r[a],u=c.length,s=0;s<u;++s)(o=c[s])&&xd(o,t,e,s,c,n||fp(o,e));return new cp(r,this._parents,t,e)};var hp=function(t){return Rh(t)},dp=function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5?arguments[5]:void 0;(t instanceof HTMLElement||t instanceof SVGElement)&&(t=hp(t));var o,c=r?r[0]:null,u=null,s=null,l=null,f=null,h=null;c?"#"===c?(u="id",s=r):(u="class",s="."===r[0]?r:".".concat(r)):(s=e,o=!0),l=t.selectAll(s),o&&(l=l.filter((function(){return this.parentNode===t.node()}))),f=(l=l.data(n,a)).enter().append(e||"div"),i.enter&&f.each((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.enter.apply(i,[hp(this)].concat(e))})),h=f.merge(l),i.update&&h.each((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.update.apply(i,[hp(this)].concat(e))})),"class"===u?h.classed("."===c?r.substring(1,r.length):r,!0):"id"===u&&h.attr("id",r.substring(1,r.length));var d=l.exit();return i.exit?d.each((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.exit.apply(i,[hp(this)].concat(e))})):d.remove(),h},pp=function(t,e){return Object.entries(e).forEach((function(e){t.style(e[0],e[1])}),void 0),t},gp=function(t,e){t.appendChild(e)},vp=function(t,e){for(var n in e)({}).hasOwnProperty.call(e,n)&&t.attr(n,e[n])},yp=function(t,e,n){return t instanceof Dh||(t=hp(t)),void 0!==n?t.selectAll(".".concat(n)).each((function(){vp(Rh(this),e)})):vp(t,e),t},mp=function(t,e,n,r){Rh(t).selectAll(n).each((function(t){var n=Rh(this);r?r(t)&&n.classed(e,!0):n.classed(e,!0)}))},bp=function(t,e,n,r){Rh(t).selectAll(n).each((function(t){var n=Rh(this);r?r(t)&&n.classed(e,!1):n.classed(e,!1)}))},xp=function(t,e){for(var n in t instanceof Dh||(t=hp(t)),e)({}).hasOwnProperty.call(e,n)&&t.style(n,e[n]);return t},_p=function(t){var e,n=Rh(t.container);"number"==typeof(e=t.data)&&(e=Array(e).fill().map((function(t,e){return e})));var r=n.selectAll(t.selector).filter((function(){return this.parentNode===n.node()})).data(e);r.enter().append(t.append).merge(r).each((function(e,n){t.each(e,Rh(this),n)})).attr("class",t.className||""),r.exit().remove()},wp=function(t,e,n){var r=dp(Rh(t),"clipPath",[1],"#".concat(n));dp(r,"rect",[1]).attr("x",e.x).attr("y",e.x).attr("width",e.width).attr("height",e.height),r.attr("clip-path","url(#".concat(n,")"))},kp=function(t,e){return Rh(t).selectAll(e).nodes()},Sp=function(t,e){var n=t.getBoundingClientRect();return{x:e.x-n.x,y:e.y-n.y}},Mp=function(t,e){var n=Ih(t,e);return{x:n[0],y:n[1]}},Ep=function(t,e){return Rh(e).append(t)},Op=function(){return mh},Cp=function(){return ed},Ap=function(t,e){var n,r={"fill-opacity":0},i="string"==typeof e?e:e instanceof Array?e.join(" "):void 0;n=t.node()instanceof HTMLElement?t.append("div").html("W"):t.append("text").text("W"),i?n.attr("class",i):"object"===To()(e)&&(delete e["fill-opacity"],Js(r,e)),n.style(r);var a=window.getComputedStyle(n.node()),o={fontSize:a.fontSize,fontFamily:a.fontFamily,fontWeight:a.fontWeight,fontStyle:a.fontStyle};return n.remove(),o},Pp=function(){return"ontouchstart"in document.documentElement},Dp=n(55),Rp=n.n(Dp),Ip=function(t,e,n,r,i,a){var o=n;Array.isArray(n)||(o=[n]);var c=t.model[e](o,r,i),u=zs(a,t._listeners.size);t._listeners.set(u,c)},Tp=function(){function t(e){$()(this,t),this.model=Rp.a.create(e),this._listeners=new Map,this._queue=new Map,this._locked=!1}return Q()(t,[{key:"lockModel",value:function(){return this.model.lock(),this._locked=!0,this}},{key:"unlockModel",value:function(){return this._locked=!1,this.model.unlock(),this.flushQueue(),this}},{key:"flushQueue",value:function(){var t=this;this._queue.forEach((function(e,n){var r=e.reduce((function(t,e){return e(t)}),t.model.prop(n));t.model.prop(n,r)})),this._queue.clear()}},{key:"serialize",value:function(){return this.model.serialize()}},{key:"commit",value:function(t,e){if(e instanceof Function)if(this._locked){var n=this._queue.get(t);n||(n=[],this._queue.set(t,n)),n.push(e)}else{var r=this.model.prop(t);this.model.prop(t,e(r))}else this.model.prop(t,e);return this}},{key:"registerChangeListener",value:function(t,e,n,r){return Ip(this,"next",t,e,n,r),this}},{key:"registerImmediateListener",value:function(t,e,n,r){Ip(this,"on",t,e,n,r)}},{key:"get",value:function(t,e){var n=this.model.prop(t);return e?n&&n[e]:n}},{key:"computed",value:function(t,e){return this.model.calculatedProp(t,e)}},{key:"append",value:function(){var t;return(t=this.model).append.apply(t,arguments),this}},{key:"unsubscribeAll",value:function(){return this._listeners.forEach((function(t){return t()})),this._listeners.clear(),this}},{key:"unsubscribe",value:function(t){var e=this._listeners.get(t);return e&&e(),this._listeners.delete(t),this}}]),t}(),Np=function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n instanceof Tp?n:new Tp({}),o={},c=i.namespace,u=i.subNamespace;for(var s in e)if({}.hasOwnProperty.call(e,s)){r=e[s];var l=c?"".concat(c,".").concat(s):s;if(u){var f=zs(a.get(l),{});f[u]=r.value,o[l]=f}else o[s]=r.value;t[s]=function(e,n,r){return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var c=a.length;if(c){var s=n||{},l=s.takesMultipleParams,f=void 0!==l&&l,h=f?a:a[0];if(n){var d,p=e.get(r,u),g=n.sanitization,v=n.typeCheck,y=n.typeExpected;if("function"==typeof g&&(h=g(h,p,t)),"function"==typeof v){var m=v(h);m&&(d=h)}else"string"==typeof v&&"constructor"===v?h&&h.constructor.name===y&&(d=h):d=h;var b=n.preset,x=Cl(e.get(r,u));b&&b(d,t),f&&x.forEach((function(t,e){void 0===d[e]&&(d[e]=t)})),d&&e.commit(r,d,u)}else e.commit(r,h,u);return t}return e.get(r,u)}}(a,r.meta,l,Array.isArray(r.value))}if(u)for(var h in o)a.commit(h,o[h][u],u);else void 0===c?a.append(o):a.append(c,o);return[t,a]},Fp={init:function(t){var e=t.document,n=t.navigator.userAgent,r=Math.ceil,i=Math.floor,a="fusioncharts-smartlabel-",o=a+"container",c=a+"tag";return Fp={win:t,containerClass:o,classNameWithTag:c,classNameWithTagBR:"fusioncharts-smartlabel-br",maxDefaultCacheLimit:1e3,classNameReg:/\bfusioncharts-smartlabel-tag\b/,classNameBrReg:/\bfusioncharts-smartlabel-br\b/,spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+c+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+c+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),brRegex:new RegExp("({br[ ]*})|(<br[ ]*>)|(<br[ ]*/>)|(<BR[ ]*/>)|(<br\\>)","g"),ltgtRegex:/&lt;|&gt;/g,nbspRegex:/&nbsp;|&#160;|&#xA0;/g,htmlSpecialEntityRegex:/&amp;|&quot;|&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function(){var r,i,a;return e.getElementsByClassName?(r="getElementsByClassName",i=c,a=!0):(r="getElementsByTagName",i="span",a=!1),{isIE:/msie/i.test(n)&&!t.opera,hasSVG:Boolean(t.SVGAngle||e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(n),isWebKit:new RegExp(" AppleWebKit/").test(n),childRetriverFn:r,childRetriverString:i,noClassTesting:a}},createContainer:function(t){var n,r;if(t&&(t.offsetWidth||t.offsetHeight)){if(t.appendChild)return t.appendChild(r=e.createElement("DIV")),r.className=o,r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation"),r}else if((n=e.getElementsByTagName("body")[0])&&n.appendChild)return(r=e.createElement("DIV")).className=o,r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation"),n.appendChild(r),r},getNearestBreakIndex:function(t,e,n){if(!t||!t.length)return 0;var a,o=n._getWidthFn(),c=0,u=0,s=o(t),l=s/t.length;if(a=e,c=r(e/l),s<e)return t.length-1;for(c>t.length&&(a=e-s,c=t.length);a>0;){if(a=e-o(t.substr(0,c)),!(u=i(a/l)))return c;c+=u}for(;a<0;){if(a=e-o(t.substr(0,c)),!(u=i(a/l)))return c;c+=u}return c},parseStyle:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={};return e.fontSize=(t.fontSize||t["font-size"]||"12px")+"",e.fontVariant=t.fontVariant||t["font-variant"]||"normal",e.fontWeight=t.fontWeight||t["font-weight"]||"normal",e.fontStyle=t.fontStyle||t["font-style"]||"normal",e.fontFamily=t.fontFamily||t["font-family"]||"Verdana,sans",e},setLineHeight:function(t){var e=t.fontSize;return t.lineHeight=t.lineHeight||t["line-height"]||1.2*parseInt(e,10)+"px",t},_getCleanHeight:function(t){return t=t.replace(/px/g,""),Number(t)},_getDimentionUsingDiv:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e._container;return t instanceof Array&&(t=t.join("")),n.innerHTML=t,{width:n.offsetWidth,height:n.offsetHeight}},_getDimentionUsingCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e.ctx,r=e.style,i=Fp._getCleanHeight(r.lineHeight);return t=t instanceof Array?(t=t.join("")).replace(/<br \/>/g,""):t.replace(/<br \/>/g,""),{width:n.measureText(t).width,height:i}},_hasOnlyBRTag:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!Fp.xmlTagRegEx.test(t)&&Fp.brRegex.test(t)},_getDimentionOfMultiLineText:function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0,a=r.replace(Fp.brRegex,"<br />"),o=Fp._getTextArray(a),c=0,u=0,s=i._getWidthFn(),l=Fp._getCleanHeight(i.style.lineHeight),f=l,h={};for(t=0,e=o.length;t<e;t++)"<br />"===o[t]?(u=Math.max(u,c),c=0,f+=l):(c+=n=s(o[t]),h[o[t]]=n);return{height:f,width:u=Math.max(u,c),detailObj:h}},_getTextArray:function(){var t,e,n,r,i,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=[];for(n=(i=o.split("<br />")).length,t=0;t<n;t++){for(r=(a=i[t].split("")).length,e=0;e<r;e++)c.push(a[e]);t!==n-1&&c.push("<br />")}return c},_findLastIndex:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=e.length;for(t=r-1;t>=0;t--)if(e[t]===n)return t;return-1}}}},jp=Fp,Lp=jp.init(window),Bp=Lp.win.document,zp=Lp.getDocumentSupport(),Hp=zp.isWebKit?0:4.5;function Wp(t,e,n){var r;n=(n=n>5?n:5)<20?n:20,this.maxContainers=n,this.first=null,this.last=null,this.containers={},this.length=0,this.rootNode=t,e&&((r=Bp.createElementNS("http://www.w3.org/2000/svg","svg")).setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),r.setAttributeNS("http://www.w3.org/2000/svg","height","0"),r.setAttributeNS("http://www.w3.org/2000/svg","width","0"),this.svgRoot=r,this.rootNode.appendChild(r))}Wp.prototype.get=function(t){var e,n,r,i=this.containers,a=this.length,o=this.maxContainers,c="";for(n in Lp.supportedStyle)void 0!==t[n]&&(c+=Lp.supportedStyle[n]+":"+t[n]+";");if(!c)return!1;if(r=i[c])this.first!==r&&(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r.next=this.first,r.next.prev=r,this.last===r&&(this.last=r.prev),r.prev=null,this.first=r);else{if(a>=o)for(e=a-o+1;e--;)this.removeContainer(this.last);r=this.addContainer(c)}return r},Wp.prototype._makeDivNode=function(t){var e,n=t.keyStr;t.node||(t.node=Bp.createElement("div"),t.node.className="fusioncharts-div",this.rootNode.appendChild(t.node)),e=t.node,zp.isIE&&!zp.hasSVG?e.style.setAttribute("cssText",n):e.setAttribute("style",n),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),e.style.display="inline-block",e.innerHTML=Lp.testStrAvg,t.lineHeight=e.offsetHeight,t.avgCharWidth=e.offsetWidth/3,zp.isBrowserLess?(t.svgText||(t.svgText=Bp.createElementNS("http://www.w3.org/2000/svg","text"),this.svgRoot.appendChild(e)),(e=t.svgText).setAttribute("style",n),e.textContent=Lp.testStrAvg,t.lineHeight=e.getBBox().height,t.avgCharWidth=(e.getBBox().width-Hp)/3,e.textContent="...",t.ellipsesWidth=e.getBBox().width-Hp,e.textContent=".",t.dotWidth=e.getBBox().width-Hp):(e.innerHTML="...",t.ellipsesWidth=e.offsetWidth,e.innerHTML=".",t.dotWidth=e.offsetWidth,e.innerHTML="")},Wp.prototype.addContainer=function(t){var e;return this.containers[t]=e={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:t,charCache:{}},e.next=this.first,e.next&&(e.next.prev=e),this.first=e,this.last||(this.last=e),this.length+=1,e},Wp.prototype.removeContainer=function(t){var e=t.keyStr;e&&this.length&&t&&(this.length-=1,t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),this.first===t&&(this.first=t.next),this.last===t&&(this.last=t.prev),t.node&&t.node.parentNode.removeChild(t.node),delete this.containers[e])},Wp.prototype.dispose=function(){var t,e=this.containers;for(t in this.maxContainers=null,e)this.removeContainer(e[t]);this.rootNode.parentNode.removeChild(this.rootNode),this.rootNode=null,this.first=null,this.last=null};var Vp=Wp;function Up(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){Gp(t,e,n[e])}))}return t}function Gp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qp=jp.init(window),Yp=qp.win.document,Xp=qp.win.Math,$p=Xp.max,Kp=Xp.round,Qp={" ":"&nbsp;"},Zp=qp.getDocumentSupport(),Jp=Zp.isWebKit?0:4.5;function tg(t,e,n){var r,i,a,o=!1,c=window.document.createElement("canvas");for(i in(n=n||{}).maxCacheLimit=isFinite(a=n.maxCacheLimit)?a:qp.maxDefaultCacheLimit,"string"==typeof t&&(t=Yp.getElementById(t)),(r=qp.createContainer(t)).innerHTML=qp.testStrAvg,!Zp.isHeadLess&&(Zp.isIE||r.offsetHeight||r.offsetWidth)||(o=!0),r.innerHTML="",qp.parentContainerStyle)r.style[i]=qp.parentContainerStyle[i];this.parentContainer=r,this.ctx=c&&c.getContext&&c.getContext("2d"),this._containerManager=new Vp(r,o,10),this._showNoEllipses=!e,this._init=!0,this.style={},this.oldStyle={},this.options=n,this.setStyle()}tg.textToLines=function(t){return(t=t||{}).text?"string"!=typeof t.text&&(t.text=t.text.toString()):t.text="",t.lines=t.text.split(/\n|<br\s*?\/?>/gi),t},tg.prototype._calCharDimWithCache=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;if(!this._init)return!1;var r,i,a,o,c,u,s,l,f,h=this.options.maxCacheLimit,d=this.style||{};return u=this._advancedCache=this._advancedCache||(this._advancedCache={}),s=this._advancedCacheKey||(this._advancedCacheKey=[]),l=t+d.fontSize+d.fontFamily+d.fontWeight+d.fontStyle,f=t+"init"+d.fontSize+d.fontFamily+d.fontWeight+d.fontStyle,!this.ctx&&Qp[t]&&(t=Qp[t]),e?void 0===(c=u[f])&&(i=this._getDimention(t.repeat?t.repeat(n):Array(n+1).join(t)).width,a=this._getDimention(t).width,c=u[f]=(i-n*a)/(n+1),s.push(f),s.length>h&&delete u[s.shift()]):c=0,(o=u[l])?{width:o.width,height:o.height}:((r=this._getDimention(t)).width+=c,u[l]={width:r.width,height:r.height},s.push(l),s.length>h&&delete u[s.shift()],r)},tg.prototype._getDimention=function(t){return this.requireDiv||!this.ctx?qp._getDimentionUsingDiv(t,this):qp._getDimentionUsingCanvas(t,this)},tg.prototype._getWidthFn=function(){var t=this,e=t._containerObj.svgText;return e?function(t){var n,r;return e.textContent=t,(r=(n=e.getBBox()).width-Jp)<1&&(r=n.width),r}:function(e){return t.requireDiv||!t.ctx?qp._getDimentionUsingDiv(e,t).width:qp._getDimentionUsingCanvas(e,t).width}},tg.prototype._isSameStyle=function(){var t=this.oldStyle||{},e=this.style;return e.fontSize===t.fontSize&&e.fontFamily===t.fontFamily&&e.fontStyle===t.fontStyle&&e.fontWeight===t.fontWeight&&e.fontVariant===t.fontVariant},tg.prototype._setStyleOfCanvas=function(){if(!this._isSameStyle()){var t,e,n=this.style,r=n.fontStyle,i=n.fontVariant,a=n.fontWeight,o=n.fontSize,c=n.fontFamily;t=r+" "+i+" "+a+" "+(o+=-1===o.indexOf("px")?"px":"")+" "+c,this.ctx.font=t,e=this._containerObj=this._containerManager.get(n),this._containerObj?(this._container=e.node,this._context=e.context,this._cache=e.charCache,this._lineHeight=e.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0,e.ellipsesWidth=this._calCharDimWithCache("...",!1).width,e.dotWidth=this._calCharDimWithCache(".",!1).width,e.lineHeight=this._lineHeight=e.lineHeight||qp._getCleanHeight(n.lineHeight),this.oldStyle=n}},tg.prototype._setStyleOfDiv=function(){var t,e=this.style;this._containerObj=t=this._containerManager.get(e),t.node||this._containerManager._makeDivNode(this._containerObj),this._containerObj?(this._container=t.node,this._context=t.context,this._cache=t.charCache,this._lineHeight=t.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0},tg.prototype._updateStyle=function(){return this.requireDiv||!this.ctx?this._setStyleOfDiv():this._setStyleOfCanvas()},tg.prototype.setStyle=function(t){return this.style=qp.parseStyle(t),qp.setLineHeight(this.style),this},tg.prototype.useEllipsesOnOverflow=function(t){return this._init?(this._showNoEllipses=!t,this):this},tg.prototype.getSmartText=function(t,e,n,r){if(!this._init)return!1;null==t?t="":"string"!=typeof t&&(t=t.toString());var i,a,o,c,u,s,l,f,h,d,p,g,v,y,m,b,x,_,w,k,S,M,E,O,C,A,P,D,R,I,T,N,F,j,L,B=0,z=-1,H=-1,W=-1,V=0,U=0,G=[],q=0,Y=this._showNoEllipses?"":"...",X=this.ctx,$=[],K=-1,Q=-1,Z=-1,J=function(t){for(var e=/\s/,n=(t=t.replace(/^\s\s*/,"")).length;e.test(t.charAt(n-=1)););return t.slice(0,n+1)},tt={text:t,maxWidth:e,maxHeight:n,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:t,isTruncated:!1};if(P=qp.xmlTagRegEx.test(t)||qp.nbspRegex.test(t),j=qp._hasOnlyBRTag(t),this.requireDiv=P&&!j,this._updateStyle(),D=this._lineHeight,R=this._context,I=this._container,N=(T=this._containerObj).ellipsesWidth,F=T.dotWidth,s=t.replace(qp.spanAdditionRegx,"$2"),g=this._getWidthFn(),D-n<=1&&D-n>=0&&(n*=1.2),X||I){if(!Zp.isBrowserLess){if(P?j?(t=t.replace(qp.brRegex,"<br />"),L=qp._getDimentionOfMultiLineText(t,this),tt.oriTextWidth=l=L.width,tt.oriTextHeight=f=L.height):(I.innerHTML=t,tt.oriTextWidth=l=I.offsetWidth,tt.oriTextHeight=f=I.offsetHeight):(c=t=t.replace(qp.ltgtRegex,(function(t){return"&lt;"===t?"<":">"})),m=this.getSize(c,!0,{hasHTMLTag:P,hasOnlyBrTag:j,cleanText:!0}),tt.oriTextWidth=l=m.width,tt.oriTextHeight=f=m.height),f<=n&&l<=e)return tt.width=tt.oriTextWidth=l,tt.height=tt.oriTextHeight=f,tt;if(D>n)return tt.text="",tt.width=tt.oriTextWidth=0,tt.height=tt.oriTextHeight=0,tt}if(t=J(t).replace(/(\s+)/g," "),u=this._showNoEllipses?e:e-N,!P||j){if(i=(G=qp._getTextArray(t)).length,a="",o=[],p=G[0],this._cache[p]?w=this._cache[p].width:(w=g(p),this._cache[p]={width:w}),u>w&&!j)o=t.substr(0,qp.getNearestBreakIndex(t,u,this)).split("");else{if(w>e)return tt.text="",tt.width=tt.oriTextWidth=tt.height=tt.oriTextHeight=0,tt;Y&&((u=e-2*F)>w?Y="..":(u=e-F)>w?Y=".":(u=0,Y=""))}if(q=o.length,V=g(o.join("")),U=this._lineHeight,r){for(;q<i;q+=1)if(p=o[q]=G[q],"<br />"!==o[q]){if(this._cache[p]?w=this._cache[p].width:(m&&(w=m.detailObj[p])||(w=g(p)),this._cache[p]={width:w}),(V+=w)>u&&(a||(a=o.slice(0,-1).join("")),V>e))return tt.text=J(a)+Y,tt.tooltext=tt.oriText,tt.width=$p(B,V),tt.height=U,tt.isTruncated=!0,tt}else U+=this._lineHeight,W=q,B=$p(B,V),V=0,a=null;return tt.text=o.join(""),tt.width=$p(B,V),tt.height=U,tt}for(;q<i;q+=1){if(" "!==(p=o[q]=G[q])||R||(p=this.ctx?" ":"&nbsp;"),"<br />"===o[q]){if(B=$p(B,V),(U+=this._lineHeight)<=n){W=q,V=0,a=null;continue}if(U>n)return a=o.slice(0,-1).join(""),tt.text=J(a)+Y,tt.tooltext=s,tt.width=B,tt.height=U-this._lineHeight,tt.isTruncated=!0,tt}if(this._cache[p]?w=this._cache[p].width:(m&&(w=m.detailObj[p])||(w=g(p)),this._cache[p]={width:w}),(V+=w)>u&&(a||(a=o.slice(0,-1).join("")),V>e)){if("<br />"===G[q+1])continue;if(H=qp._findLastIndex(G.slice(0,o.length)," "),z=qp._findLastIndex(G.slice(0,o.length),"-"),H>W?(V=g(o.slice(W+1,H).join("")),o.splice(H,1,"<br />"),W=H,h=H+1):z>W?(z===o.length-1?(V=g(o.slice(W+1,H).join("")),o.splice(z,1,"<br />-")):(V=g(o.slice(W+1,H).join("")),o.splice(z,1,"-<br />")),W=z,h=z+1):(o.splice(o.length-1,1,"<br />"+G[q]),Z=o.length-2,V=g(o.slice(W+1,Z+1).join("")),W=Z,h=q),(U+=this._lineHeight)>n)return tt.text=J(a)+Y,tt.tooltext=tt.oriText,tt.width=e,tt.height=U-this._lineHeight,tt.isTruncated=!0,tt;B=$p(B,V),a=null,j?V=qp._getDimentionOfMultiLineText(o.slice(W+1).join(""),this).width:(d=qp.getNearestBreakIndex(t.substr(h),u,this),V=g(t.substr(h,d||1)),o.length<h+d&&(q=(o=o.concat(t.substr(o.length,h+d-o.length).split(""))).length-1))}}return B=$p(B,V),tt.text=o.join(""),tt.width=B,tt.height=U,tt}for(s=t.replace(qp.spanAdditionRegx,"$2"),t=(t=t.replace(qp.spanAdditionRegx,qp.spanAdditionReplacer)).replace(/(<br\s*\/*\>)/g,'<span class="'+[qp.classNameWithTag," ",qp.classNameWithTagBR].join("")+'">$1</span>'),I.innerHTML=t,x=0,_=(b=I[Zp.childRetriverFn](Zp.childRetriverString)).length;x<_;x+=1)k=b[x],(Zp.noClassTesting||qp.classNameReg.test(k.className))&&""!==(S=k.innerHTML)&&(" "===S?Q=$.length:"-"===S&&(K=$.length),$.push({spaceIdx:Q,dashIdx:K,elem:k}),G.push(S));if(q=0,(w=(i=$.length)&&$[0].elem.offsetWidth)>e||!i)return tt.text="",tt.width=tt.oriTextWidth=tt.height=tt.oriTextHeight=0,tt;if(w>u&&!this._showNoEllipses&&((u=e-2*F)>w?Y="..":(u=e-F)>w?Y=".":(u=0,Y="")),v=$[0].elem.offsetLeft,y=$[0].elem.offsetTop,r)for(;q<i;q+=1)(M=(k=$[q].elem).offsetLeft-v+k.offsetWidth)>u&&(A||(A=q),I.offsetWidth>e&&(C=q,q=i));else for(;q<i;q+=1)E=(k=$[q].elem).offsetHeight+(k.offsetTop-y),O=null,(M=k.offsetLeft-v+k.offsetWidth)>u?(A||(A=q),M>e&&(H=$[q].spaceIdx,z=$[q].dashIdx,H>W?($[H].elem.innerHTML="<br/>",W=H):z>W?($[z].elem.innerHTML=z===q?"<br/>-":"-<br/>",W=z):k.parentNode.insertBefore(O=Yp.createElement("br"),k),k.offsetHeight+k.offsetTop>n?(O?O.parentNode.removeChild(O):W===z?$[z].elem.innerHTML="-":$[H].elem.innerHTML=" ",C=q,q=i):A=null)):E>n&&(C=q,q=i);if(C<i){for(tt.isTruncated=!0,A=A||C,q=i-1;q>=A;q-=1)(k=$[q].elem).parentNode.removeChild(k);for(;q>=0;q-=1)k=$[q].elem,qp.classNameBrReg.test(k.className)?k.parentNode.removeChild(k):q=0}return tt.text=I.innerHTML.replace(qp.spanRemovalRegx,"$1").replace(/\&amp\;/g,"&"),tt.isTruncated&&(tt.text+=Y,tt.tooltext=s),tt.height=I.offsetHeight,tt.width=I.offsetWidth,tt}return tt.error=new Error("Body Tag Missing!"),tt},tg.prototype.getSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!this._init)return!1;null==t?t="":"string"!=typeof t&&(t=t.toString());var r,i,a,o,c,u,s=0,l=0,f={},h=n.hasHTMLTag,d=n.hasOnlyBrTag;if(void 0===h&&(h=qp.xmlTagRegEx.test(t)||qp.nbspRegex.test(t)),void 0===d&&(d=qp._hasOnlyBRTag(t)),this.requireDiv=h&&!d,n.cleanText||(t=t.replace(qp.ltgtRegex,(function(t){return"&lt;"===t?"<":">"}))),this._updateStyle(),u=this._container,!e)return this._calCharDimWithCache(t);for(o=0,c=(r=t.split("")).length;o<c;o++)i=r[o],a=this._calCharDimWithCache(i,!1,r.length),l=$p(l,a.height),s+=a.width,f[i]=a.width;return d?Up({},qp._getDimentionOfMultiLineText(t,this),{detailObj:f}):h?(u.innerHTML=t,{width:u.offsetWidth,height:u.offsetHeight,detailObj:f}):{width:Kp(s),height:l,detailObj:f}},tg.prototype.getOriSize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSize(t,e,n)},tg.prototype.dispose=function(){return this._init?(this._containerManager&&this._containerManager.dispose&&this._containerManager.dispose(),delete this._container,delete this._context,delete this._cache,delete this._containerManager,delete this._containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this._showNoEllipses,this):this};var eg=tg,ng=["initialized","beforeupdate","updated","beforedraw","drawn","beforeremove","removed","animationend"],rg=[];["canvas","unit","layer","axis","facet-headers","legend","caption"].forEach((function(t){ng.forEach((function(e){rg.push("".concat(t,".").concat(e))}))}));var ig,ag,og=rg,cg=function(t){return function(e){return t(e)}},ug=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},sg=function(){function t(){$()(this,t),this._eventList=og,this._promises=new Map,this._notifiers={},this._lifeCycles={},this._unreleasedLifeCycles={},this._boot()}return Q()(t,[{key:"_boot",value:function(){this._notifiers=this._eventList.reduce((function(t,e){return t[e]=cg,t}),{}),this._preparePromises()}},{key:"retrieve",value:function(t){return this._promises.get(t)}},{key:"_makeNotifierPromise",value:function(t){var e=this;return new Promise((function(n){e._notifiers[t]=cg(n)}))}},{key:"_preparePromises",value:function(){var t=this;this._eventList.forEach((function(e){var n=t._makeNotifierPromise(e);t._promises.set(e,n),function t(e,n,r){e.then((function(){var e=r._makeNotifierPromise(n);r._promises.set(n,e),t(e,n,r)}))}(n,e,t)}))}},{key:"_resolvePromise",value:function(t,e){this._notifiers[t](e)}},{key:"notify",value:function(t){var e=t.formalName||t.client.constructor.formalName();t.formalName=e,this._releasePromisesFromCache(),this._notify(e,t)}},{key:"_notify",value:function(t,e){var n=e.action,r="".concat(t,".").concat(n);this._resolvePromise(r,e);var i=this.retrieve(r);this._lifeCycles[t]&&this._lifeCycles[t][n]?this._callLifeCycleCallback(t,n,i):this._cachePromise(t,n,i)}},{key:"_callLifeCycleCallback",value:function(t,e,n){var r="".concat(t,".").concat(e);this._lifeCycles[t][e](n),this._resetTargetPromise(r)}},{key:"_releasePromisesFromCache",value:function(){var t=this;Object.keys(this._unreleasedLifeCycles).forEach((function(e){Object.keys(t._unreleasedLifeCycles[e]).forEach((function(n){if(t._lifeCycles[e]&&t._lifeCycles[e][n]){var r=t._unreleasedLifeCycles[e][n];t._callLifeCycleCallback(e,n,r),delete t._unreleasedLifeCycles[e][n]}}))}))}},{key:"_cachePromise",value:function(t,e,n){ug(this._unreleasedLifeCycles,t)||(this._unreleasedLifeCycles[t]={}),ug(this._unreleasedLifeCycles[t],e)||(this._unreleasedLifeCycles[t][e]={}),this._unreleasedLifeCycles[t][e]=n}},{key:"register",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._lifeCycles=t,this._releasePromisesFromCache()}},{key:"_resetTargetPromise",value:function(t){var e=this;setTimeout((function(){e._notifiers[t]=cg,e._promises.set(t,e._makeNotifierPromise(t))}),0)}}]),t}(),lg=n(7),fg=n.n(lg),hg=n(2),dg=n.n(hg),pg=n(3),gg=n.n(pg),vg=n(4),yg=n.n(vg),mg=n(5),bg=n.n(mg),xg=n(6),_g=n.n(xg),wg=n(1),kg=n.n(wg),Sg="muze",Mg="stack",Eg="group",Og="identity",Cg="angle",Ag="radius",Pg="size",Dg="color",Rg="shape",Ig="text",Tg="detail",Ng="outerRadiusValue",Fg="middle",jg={X:"x",Y:"y",X0:"x0",Y0:"y0",RADIUS:"radius",RADIUS0:"radius0",ANGLE:"angle",ANGLE0:"angle0",COLOR:"color",SHAPE:"shape",SIZE:"size",TEXT:"text"},Lg="stroke-dasharray",Bg="asc",zg="sum",Hg="area",Wg="arc",Vg="line",Ug="text",Gg="point",qg="bar",Yg="tick",Xg="simple",$g="base",Kg="left",Qg="right",Zg="center",Jg=function(){function t(){gg()(this,t)}return yg()(t,[{key:"formalName",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"dependencies",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"config",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"data",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"id",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"normalizeTransformedData",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getTransformedData",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"_calculateDomainFromData",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getDomain",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getNearestPoint",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"highlightPoint",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"dehighlightPoint",value:function(){return this}},{key:"linkLayerStore",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"mount",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"render",value:function(){throw new Error(Zs.INTERFACE_IMPL)}}]),t}(),tv=n(30),ev=n.n(tv),nv=n(0),rv=n.n(nv),iv="bottom",av="top",ov="left",cv="right",uv="x",sv="y",lv=(ig={},rv()(ig,ov,jl.axisLeft),rv()(ig,iv,jl.axisBottom),rv()(ig,cv,jl.axisRight),rv()(ig,av,jl.axisTop),ig),fv="linear",hv="band",dv="temporal",pv="color",gv="ordinal",vv="quantize",yv="quantile",mv="log",bv="pow",xv="identity",_v="sequential",wv="threshold",kv=(n(87),n(9)),Sv=n.n(kv),Mv="continous",Ev=[1],Ov=i.scaleLinear,Cv=i.scaleThreshold,Av=i.scaleLog,Pv=i.scalePow,Dv=i.scaleIdentity,Rv=i.scaleOrdinal,Iv=i.scaleSequential,Tv=i.scaleQuantize,Nv=i.scaleQuantile,Fv=i.scaleBand,jv=i.scaleTime,Lv=(ag={},rv()(ag,fv,Ov),rv()(ag,hv,Fv),rv()(ag,vv,Tv),rv()(ag,yv,Nv),rv()(ag,wv,Cv),rv()(ag,_v,Iv),rv()(ag,mv,Av),rv()(ag,bv,Pv),rv()(ag,xv,Dv),rv()(ag,dv,jv),rv()(ag,pv,Ov),rv()(ag,gv,Rv),ag);function Bv(t){var e=t.range;if(!t.type||!Lv[t.type])throw new Error("".concat(t.type," is not a valid scale type"));if(!Array.isArray(t.range))throw new Error("range parameter must be an array");var n=null;if("linear"===t.type&&t.interpolator){if(n=Lv[t.interpolator],t.interpolator===bv)return n().range(e).exponent(t.exponent);if(t.interpolator===mv)return n().range(e).base([t.base])}else n=Lv[t.type];return"quantize"===t.type&&n().nice(),n().range(e)}var zv={id:gs(),adjustRange:!1,axisName:{defClassName:"axis-name"},axisNamePadding:7,base:10,classPrefix:"muze",className:"".concat("muze","-axis"),exponent:1,interpolator:"linear",fixedBaseline:!0,labels:{rotation:null,smartTicks:null,className:""},orientation:"left",format:function(t){return t},padding:.3,nice:!0,numberOfTicks:null,rotate:!1,show:!0,showAxisName:!0,showInnerTicks:!0,showOuterTicks:!0,style:{},type:"linear",tickFormat:null,tickValues:null,xOffset:0,yOffset:0,defaultSort:"asc",transition:{disabled:!1},ticks:{labels:{style:{"font-size":"12px","font-family":'"Source Sans Pro", "Helvetica Neue", Helvetica, Arial, sans-serif',"font-weight":"400","font-style":"normal","text-align":"center",fill:"#858585"},"&:highlight":{style:{"font-weight":"bold",fill:"#595959"}}}},title:{style:{"font-size":"14px","font-family":'"Source Sans Pro", "Helvetica Neue", Helvetica, Arial, sans-serif',"font-weight":"400","font-style":"normal",fill:"#5f5f5f"}}},Hv={labels:{align:"right"}},Wv={labels:{align:"center"}};function Vv(t,e){var n=t.renderConfig(),r=t.config(),i=n.show,a=n.xOffset,o=n.yOffset,c=n.showAxisName,u=n.labels,s=n.smartAxisName,l=t.mount(),f=r.orientation,h=r.axisNamePadding,d=r.className,p=r.id,g=r.field,v=r.classPrefix,y=r.labels.className,m=zs(e.transition,r.transition);if(i&&g!==gt){var b,x,_,w=dp(hp(l),"g",[t],"".concat(d),{},(function(t){return t.config().id}));if(w.attr("transform","translate(".concat(a,",").concat(o,")")),t.domain().length>0){var k=t.dependencies().labelManager,S=t.range(),M=t.axis(),E=t.scale(),O=t._tickLabelStyle,C=t._tickFormatter;_=t.getTickSize(),k.setStyle(O);var A=E.ticks||E.quantile||E.domain,P=M.tickValues()||A();if(M.tickFormat(C(P)),b=Math.abs(S[0]-S[1]),x=t.axisComponentDimensions().largestTickDimensions,function(t){var e=t.config().fixedBaseline,n=t.renderConfig().showInnerTicks,r=t.domain();e&&r.length&&n&&t.setFixedBaseline()}(t),u.rotation||!1!==u.smartTicks)w.call(M),function(t,e,n,r){var i=e._smartTicks,a=e.config(),o=e.renderConfig(),c=e.dependencies().labelManager,u=a.orientation,s=a.classPrefix,l=zs(r,a.transition),f=o.labels,h=f.rotation,d=f.smartTicks,p=t.selectAll(".tick text");if(p.selectAll("tspan").remove(),h)!function(t,e,n){var r=t.config(),i=t.axis(),a=t.renderConfig(),o=t.smartTicks(),c=i.scale(),u=(c.ticks||c.quantile||c.domain)(),s=t.axis().tickSize(),l=r.orientation,f=r.type,h=r.fixedBaseline,d=a.labels.rotation;d<0&&(d=360+d),d=360-d,e.each((function(t,e){var r=String(o[e]?o[e].text:t),i=n.getOriSize(r),a=i.width,c=i.width/2,p=0,g=0,v=0,y=0,m="";l===av?(m="translate(0, -".concat(s,") rotate(").concat(d,", 0, 0)"),y=3,p=d>=180&&d<=360?c:-c,0===d||360===d?(p=0,y=0):180===d&&(p=0,y=6)):l===iv?(m="translate(0, ".concat(s,") rotate(").concat(d,", 0, 0)"),y=3,d>=180&&d<=360?(p=-c,v=-3):(p=c,v=3),0===d||360===d?(p=0,y=s+3,v=0):180===d&&(p=0,y=-3,v=0)):l===ov?(m="translate(-".concat(s,", 0) rotate(").concat(d,", 0, 0)"),y="0.3em",d<90?v=0:90===d?(p=c,y=9):d>90&&d<=180||d>180&&d<270?v=a:270===d?(p=c,y=-5):v=0,h&&u[0]===t&&"linear"===f&&(d>90&&d<180?(g=s,v=0):d>180&&d<270?(g=s,p=s,v=0):d>270&&d<360?(g=-s,p=s,v=0):90===d?v=-s:180===d?g=s:270===d?v=s:360===d&&(g=-s))):l===cv&&(m="translate(".concat(s,", 0) rotate(").concat(d,", 0, 0)"),y="0.3em",d<90?v=0:90===d?(p=c,y=-5):d>90&&d<=180?v=-a:d>180&&d<270?v=a:270===d?(p=c,y=5):v=0,h&&u[0]===t&&"linear"===f&&(d>90&&d<180?(g=s,v=0):d>180&&d<270?(g=s,p=s,v=0):d>270&&d<360?(g=-s,p=s,v=0):90===d?v=-s:180===d?g=s:270===d?v=s:360===d&&(g=-s))),hp(this).attr("x",p).attr("y",g).attr("dx",v).attr("dy",y).attr("transform",m).text(r).style("transform","")}))}(e,p,c);else if(h||d)if(p.text(""),"top"===u||"bottom"===u){p.attr("y",0).attr("x",0).attr("transform","").text("");var g=dp(p,"tspan",(function(t,e){return i[e]?i[e].lines:[]}),"".concat(s,"-smart-text"));g.attr("dy","0").style("opacity","0");var v=g;l.disabled||(v=g.transition().duration(l.duration).on("end",e.registerAnimationDoneHook())),v.attr("dy",(function(t,e){return"bottom"===u||0!==e?i[0].oriTextHeight:-i[0].oriTextHeight*(i[0].lines.length-1)-n})).style("opacity",1).text((function(t){return t})).attr("x",0)}else dp(p,"tspan",(function(t,e){return i[e].lines}),"".concat(s,"-smart-text")).text((function(t){return t}));else p.attr("transform","")}(w,t,_);else{var D=w;m.disabled||(D=w.transition().duration(1e3).on("end",t.registerAnimationDoneHook())),D.call(M)}w.selectAll(".tick").classed("".concat(v,"-ticks"),!0),w.selectAll(".tick line").classed("".concat(v,"-tick-lines"),!0);var R=w.selectAll(".tick text");R.classed("".concat(v,"-ticks"),!0).classed("".concat(v,"-ticks-").concat(p),!0).classed(y,!0),r.useExternalCSS||Object.entries(r.ticks.labels.style).forEach((function(t){var e=fg()(t,2),n=e[0],r=e[1];R.style(n,r)}))}var I=dp(w,"text",[s],"".concat(v,"-axis-name")).attr("text-anchor","middle").classed("".concat(v,"-axis-name-").concat(p),!0).text((function(t){return t.text}));r.useExternalCSS||Object.entries(r.title.style).forEach((function(t){var e=fg()(t,2),n=e[0],r=e[1];return I.style(n,r)})),I.classed("hidden",!c);var T=b/2,N={labelProps:x,tickSize:_,axisNamePadding:h,axisNameHeight:s.height,yOffset:o,xOffset:a,labelOffset:T,availableSpace:t.availableSpace()};!function(t,e,n){var r=n.axisNameHeight,i=n.availableSpace;switch(e){case ov:t.attr("transform","translate(".concat(-(i.width-r),",").concat(i.height/2,")rotate(-90)"));break;case cv:t.attr("transform","translate(".concat(i.width-r,",").concat(i.height/2,")rotate(90)"));break;case av:t.attr("transform","translate(".concat(i.width/2,",").concat(-i.height+r,")"));break;case iv:t.attr("transform","translate(".concat(i.width/2,",").concat(i.height-r/2,")"))}}(I,f,N)}}var Uv,Gv={month:"September",quarter:"October",halfYearly:"July",year:9999,day:"September",hour:"24 AM",mintues:"60:60",seconds:":60",week:"Wed 31"},qv=[[1,1,"milliseconds",nr.every(1),"seconds"],[1,1e3,"seconds",tr.every(1),"seconds"],[5,5e3,"five seconds",tr.every(5),"seconds"],[10,1e4,"ten seconds",tr.every(10),"seconds"],[15,15e3,"fifteen seconds",tr.every(15),"seconds"],[30,3e4,"thirty seconds",tr.every(30),"seconds"],[1,6e4,"minute",Zn.every(1),"minutes"],[5,3e5,"five minutes",Zn.every(5),"minutes"],[10,6e5,"ten minutes",Zn.every(10),"minutes"],[15,9e5,"fifteen minutes",Zn.every(15),"minutes"],[30,18e5,"thirty minutes",Zn.every(30),"minutes"],[1,36e5,"hour",Kn.every(1),"hour"],[3,108e5,"three hours",Kn.every(3),"hour"],[6,216e5,"six hours",Kn.every(6),"hour"],[12,432e5,"twelve hours",Kn.every(12),"hour"],[1,864e5,"daily",Xn.every(1),"day"],[1,6048e5,"weekly",zn.every(1),"week"],[1,2592e6,"monthly",Ln.every(1),"week"],[3,7776e6,"quaterly",Ln.every(3),"quarter"],[6,15552e6,"half yearly",Ln.every(6),"halfYearly"],[1,31536e6,"yearly",Fn.every(1),"year"],[2,63072e6,"2 year",Fn.every(2),"year"],[3,94608e6,"3 year",Fn.every(3),"year"],[5,15768e7,"5 year",Fn.every(5),"year"],[10,31536e7,"decade",Fn.every(10),"year"],[100,31536e8,"century",Fn.every(100),"year"],[1e3,31536e9,"millenium",Fn.every(1e3),"year"]],Yv=function(t){var e=t._minTickDistance,n=t._minTickSpace,r=e.width,i=n.width,a=t.availableSpace().width,o=Math.floor((a+r)/(i+r)),c=t.scale().ticks(function(t,e){var n=e,r=t.domain(),i=t._minDiff,a=r[1]-r[0],o=Math.floor(a/i);return e>=o&&(n=o),function(t,e,n){for(var r=qv.length-1,i=1,a=null,o=qv.length-1;o>=0;o--){var c=qv[o],u=Math.floor(t/c[1]);u<=e&&(r=o,i=u)}return a=qv[r],function(t,e){var n=t._minTickDistance.width,r=t.availableSpace().width;return Math.floor((r-(e-1)*n)/e)}(n,i)<function(t,e){var n=t._dependencies.labelManager,r=Gv[e];return n.getOriSize(r).width}(n,a[4])&&r<qv.length-1&&(a=qv[r+1]),a[3]}(a,n,t)}(t,o));t.renderConfig({tickValues:c})},Xv=function(t,e){return t[0]+=e,t[1]-=e,t},$v=function(t,e){return t[0]-=e,t[1]+=e,t},Kv=(Uv={},rv()(Uv,av,Xv),rv()(Uv,iv,Xv),rv()(Uv,ov,$v),rv()(Uv,cv,$v),Uv),Qv=function(t,e,n,r){t.range(n),r&&t.renderConfig(rv()({},"".concat(e,"Offset"),r))},Zv=function(t,e,n,r){var i=r.orientation,a=r.adjustRange,o=function(t,e,n){var r=Math.abs(e[1]-e[0]),i=r/(r/(n[1]-n[0])*t);return(r-r/(i+1)*i)/2}(t,e,n);return a?Kv[i](e,o):e},Jv=function(t){return t<0&&(t=360+t),t},ty=function(t){return Jv(t)},ey=function(t){return Jv(t)},ny=function(t,e){var n,r,i,a=t.config(),o=t.availableSpace(),c=o.width,u=o.height,s=o.padding,l=s.top,f=s.left,h=s.bottom,d=s.right,p=e.isOffset,g=t.renderConfig().labels,v=g.rotation,y=a.fixedBaseline,m=a.axisNamePadding,b=a.tickValues,x=a.labels.rotation,_=t.getAxisDimensions(),w=_.tickDimensions,k=_.allTickDimensions,S=_.axisNameDimensions,M=_.tickSize,E=w.height,O=w.width,C=t instanceof Oy||!t.renderConfig().showAxisName?0:m,A={smartTicks:!0,rotation:g.rotation},P=t._minTickDistance,D=t._minTickSpace,R=t._minDiff,I=t.domain(),T=S.height,N=P.width,F=Math.min(D.width,O),j=Math.min(D.height,E);return n={},rv()(n,dv,{x:function(){!b&&t.applyTickSkipping();var e=t.getTickValues().length;i=u-T-M-C,(r=(c-(e-1)*N)/e)<F&&0!==v&&(A.rotation=v,r<j&&(i=u,r=j,t.renderConfig({showInnerTicks:!1,showOuterTicks:!1}))),u<T&&t.renderConfig({show:!1});var n=Math.min(r,O);return Qv(t,"y",Zv(R,[n/2,c-f-d-n/2],I,a),p?u:null),t.maxTickSpaces({width:r,height:i,noWrap:null!==v}),null!=x&&(A.rotation=ty(x)),A},y:function(){var e=c,n=E/2;return Qv(t,"x",Zv(R,[u-l-h-n,n],I,a),p?c:null),c-T-C<=N&&(e=0,t.renderConfig({showInnerTicks:!1,showOuterTicks:!1})),t.maxTickSpaces({width:e,height:u,noWrap:!0}),c<T&&t.renderConfig({show:!1}),null!=x&&(A.rotation=ey(x)),A}}),rv()(n,hv,{x:function(){Qv(t,"y",[0,c-f-d],p?u:null);var e=t.range();return r=(e[1]-e[0])/(b||I).length-N,i=u-T-M-C,r<F&&0!==v?(A.rotation=null===v?90:v,A.smartTicks=!1,r=Math.max(i,F),i<F&&t.renderConfig({showAxisName:!1})):b&&c/I.length-N<F&&t.range([j/2,c-j/2]),u<T&&t.renderConfig({show:!1}),t.maxTickSpaces({width:r,height:i,noWrap:null!==v}),null!=x&&(A.rotation=ty(x)),A},y:function(){Qv(t,"x",[u-h,l],p?c:null);var e=c-T-M-C;return e<=N&&(e=0,t.renderConfig({showInnerTicks:!1,showOuterTicks:!1})),t.maxTickSpaces({width:e,height:u,noWrap:!0}),c<T&&t.renderConfig({show:!1}),null!=x&&(A.rotation=ey(x)),A}}),rv()(n,fv,{x:function(){A.smartTicks=!1;var e=O/2;Qv(t,"y",[(y?0:e)+f,c-d-e],p?u:null);var n=t.range(),r=k.length*(O+N);return n[1]-n[0]<r&&null!==g.rotation&&(u-O-C-M>T?(A.rotation=null,t.renderConfig({showInnerTicks:!0,showAxisName:!0})):(A.rotation=-90,t.renderConfig({showInnerTicks:!0,showAxisName:!1}))),u<T&&t.renderConfig({show:!1}),null!=x&&(A.rotation=ty(x)),A},y:function(){A.smartTicks=!1;var e=E/2;return Qv(t,"x",[u-h-(y?1:e),e+l],p?c:null),c<O+T+C&&(t.renderConfig({showInnerTicks:!1}),c<T&&t.renderConfig({show:!1})),null!=x&&(A.rotation=ey(x)),A}}),n},ry=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=n,i=e;if(t){var a=(t||0)*Math.PI/180;i=Math.abs(n*Math.sin(a))+Math.abs(e*Math.cos(a)),r=Math.abs(e*Math.sin(a))+Math.abs(n*Math.cos(a))}return{width:i,height:r}},iy=function(t){var e=0,n=0,r=t.logicalSpace(),i=t.config(),a=i.orientation,o=i.xOffset,c=i.yOffset;a===ov&&(e=void 0===o?r.width:o),a===av&&(n=void 0===c?r.height:c),t.renderConfig({xOffset:e,yOffset:n})},ay=function(t){var e,n="",r={width:0,height:0},i={},a=[],o=t.scale(),c=t.renderConfig(),u=c.tickValues,s=c.showAxisName,l=c.labels,f=t.config(),h=f.name,d=f.labels.rotation,p=t.dependencies().labelManager,g=o.ticks||o.quantile||o.domain;p.setStyle(t._tickLabelStyle),e=u||g();var v=l.rotation||d;return v&&v<0&&(v=360+v),e=e.map((function(o,c){var u=t.getFormattedText(o,c,e),s=p.getOriSize(u);return a.push(s),"band"===t.constructor.type()&&e.length>1&&v&&((v>0&&v<90||v>180&&v<270)&&c===e.length-1||(v>90&&v<180||v>270&&v<360)&&0===c)||s.width>r.width&&(n=u,i=t.smartTicks()?t.smartTicks()[c]:{},r=s,i=i||s),u})),p.setStyle(t._axisNameStyle),{axisNameDimensions:s?p.getOriSize(h):{width:0,height:0},largestTick:n,largestTickDimensions:r,allTickDimensions:a,axisTicks:e,smartTick:i,tickSize:t.getTickSize()}},oy=function(t){var e={},n=t.renderConfig().labels,r=n.smartTicks,i=n.rotation,a=ay(t),o=a.largestTickDimensions,c=a.axisTicks,u=a.smartTick,s=a.axisNameDimensions,l=a.allTickDimensions,f=a.tickSize,h=o.height,d=o.width;return 0===t.domain().length?{allTickDimensions:l,tickSize:0,tickDimensions:{height:0,width:0},axisNameDimensions:s,largestTickDimensions:o,axisTicks:c}:(e=ry(i,(e=r?u:{width:d,height:h}).width,e.height),0===f&&(e={width:0,height:0}),{allTickDimensions:l,tickSize:f,tickDimensions:e,axisNameDimensions:s,largestTickDimensions:o,axisTicks:c})},cy=function(t,e,n){var r,i,a=t.domain(),o=t._minTickDistance.width,c=e.tickSize,u=e.tickDimensions,s=e.axisNameDimensions,l=t.config(),f=l.axisNamePadding,h=l.tickValues,d=t.renderConfig().showAxisName,p=s.height,g=u.height,v=u.width;if(r=n&&n.length?n[1]-n[0]:3*(v+o),i=0,h){var y=t.getMinTickDifference(),m=[Math.min.apply(Math,dg()(h).concat(dg()(a))),Math.max.apply(Math,dg()(h).concat(dg()(a)))];r=(m[1]-m[0])/Math.abs(y)*(v+t._minTickDistance.width)}return i=n&&n.length?g:Math.max(v,g),{width:r,height:i+=(d?p+f:0)+c}},uy=function(t,e){var n,r,i=t.domain(),a=e.tickSize,o=e.tickDimensions,c=e.axisNameDimensions,u=t.config(),s=u.axisNamePadding,l=u.tickValues,f=t.renderConfig().showAxisName,h=c.height,d=o.height;if(n=0,r=o.width,l){var p=t.getMinTickDifference(),g=[Math.min.apply(Math,dg()(l).concat(dg()(i))),Math.max.apply(Math,dg()(l).concat(dg()(i)))];n=(g[1]-g[0])/Math.abs(p)*d}return{height:n,width:r+=(f?h+8:0)+a+(l?s:0)}},sy=function(t){var e=t.range(),n=t.getAxisDimensions(),r=t.overrideDimension&&t.overrideDimension(),i=t.config(),a=i.orientation,o=i.bandwidth,c=void 0===o?0:o,u=i.field,s=i.labels.rotation,l=t.renderConfig().show,f=n.allTickDimensions,h=t._minTickDistance.width,d=t._minTickDistance.height,p=l,g=u!==gt;if(a===av||a===iv){var v=cy(t,n,e),y=v.width,m=v.height;return r.width?y=r.width:e&&e.length||(y=f.reduce((function(t,e){var n=0===s||180===s||360===s?Math.max(e.width,e.height):Math.min(e.width,e.height);return t+(c?Math.max(e.width,e.height,c):n+h)}),0)),!1!==p||g||(m=0,y=0),{width:y,height:m}}var b=uy(t,n),x=b.width,_=b.height;return r.height?_=r.height:_||(_=f.reduce((function(t,e){var n=90===s||270===s?Math.max(e.width,e.height):Math.min(e.width,e.height);return t+(c?Math.max(e.width,e.height,c):n+d)}),0)),!1!==p||g||(x=0,_=0),{width:x,height:_}},ly=function(t,e){var n,r,i,a=t.config().domain;return a&&(r=e,i=(n=a).slice(0,2),n.length||(i=r),i.forEach((function(t,e){(null===t||isNaN(t))&&(i[e]=r[e])})),e=i.sort((function(t,e){return t-e}))),zs(e,[])},fy=function(t,e){var n=t.config().nice,r=t.scale.bind(t);r().domain(e),n&&r().nice(),t._domain=r().domain()},hy=function(t,e){var n=t.config(),r=n.orientation,i=n.isOffset,a=t._minDiff;if(t.range().length&&(r===av||r===iv)){t.applyTickSkipping();var o=t.getAxisDimensions().largestTickDimensions,c=t.getTickValues().length,u=t.availableSpace(),s=u.width,l=u.height,f=u.padding,h=f.left,d=f.right,p=Math.min(o.width,(s-(c-1)*t._minTickDistance.width)/c);t.maxTickSpaces({width:p});var g=Zv(a,[p/2,s-h-d-p/2],e,t.config());Qv(t,"y",g,i?l:null),t.setTickConfig()}},dy=function(t,e,n){var r=n.getOriSize(t);return n.useEllipsesOnOverflow(!0),n.getSmartText(t,e,r.height,!0)},py={availableSpace:{},axisDimensions:{},axisComponentDimensions:{},config:{sanitization:function(t,e){var n=Object.assign({},t._config||{}),r=Js({},n);(e=Js(r,e)).axisNamePadding=Math.max(e.axisNamePadding,0);var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return!(!Object.keys(t).length||!Object.keys(e).length)&&n.some((function(n){return t[n]!==e[n]}))}(e,n,["interpolator","exponent","base","orientation"]),a=t.sanitizeTickFormatter(e);return i&&(t._scale=t.createScale(e),t._axis=t.createAxis(e)),t._tickFormatter=function(t){return a(t)},t.resetRenderConfig(e),e}},renderConfig:{sanitization:function(t,e){var n=Object.assign({},t._renderConfig||{});return Js(n,e)}},logicalSpace:{},mount:{},range:{sanitization:function(t,e){return t.scale().range(e),t.logicalSpace(null),e}},smartTicks:{},tickSize:{},maxTickSpaces:{sanitization:function(t,e){var n=Object.assign({},t._maxTickSpaces||{});return Js(n,e)}},valueParser:{defaultValue:function(t){return t}}};function gy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vy(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gy(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yy,my,by,xy,_y=function(){function t(e,n){gg()(this,t),this._id=gs(),this._dependencies=n,this._mount=null,this._range=[],this._domain=[],this._domainLock=!1,this._axisDimensions={},this._smartTicks=[],this._overriddenDimension={};var r=Js({},this.constructor.defaultConfig(e)),i=Js(r,e),a=hp("body"),o=i.classPrefix;i.useExternalCSS?(this._tickLabelStyle=Ap(a,"".concat(o,"-ticks")),this._axisNameStyle=Ap(a,"".concat(o,"-axis-name"))):(this._tickLabelStyle=i.ticks.labels.style,this._axisNameStyle=i.title.style),n.labelManager.setStyle(this._tickLabelStyle);var c=n.labelManager.getOriSize("w");this._minTickDistance={width:3*c.width/4,height:c.height/2},this._minTickSpace=n.labelManager.getOriSize("www..."),qs(this,py),this.config(i),this._scale=this.createScale(this._config),this._axis=this.createAxis(this._config),this._animationDonePromises=[],this._cachedExtendedDomainDiffs=null}return yg()(t,[{key:"setFixedBaseline",value:function(){return this}},{key:"scale",value:function(){return arguments.length?(this._scale=arguments.length<=0?void 0:arguments[0],this):this._scale}},{key:"resetDomain",value:function(){return this._domain=[],this}},{key:"axis",value:function(){return arguments.length?(this._axis=arguments.length<=0?void 0:arguments[0],this):this._axis}},{key:"domain",value:function(){if(arguments.length){var t=this.getValidDomain(arguments.length<=0?void 0:arguments[0]);return this.scale().domain(t),this._domain=this.scale().domain(),this.setAxisComponentDimensions(),this.logicalSpace(null),this}return this._domain}},{key:"extendDomain",value:function(t){var e=dg()(this.range()).sort(mf),n=[this.invert(e[0]-t[0]),this.invert(e[1]+t[1])].sort(mf);this.domain(n)}},{key:"cachedExtendedDomainDiffs",value:function(){return arguments.length?(this._cachedExtendedDomainDiffs=arguments.length<=0?void 0:arguments[0],this):this._cachedExtendedDomainDiffs}},{key:"getValidDomain",value:function(t){var e=this.config().domain;return e&&(t=e),zs(t,[])}},{key:"setAxisComponentDimensions",value:function(){this.axisComponentDimensions(ay(this))}},{key:"dependencies",value:function(){return this._dependencies}},{key:"createScale",value:function(t){var e=t.base;return Bv({padding:t.padding,interpolator:t.interpolator,exponent:t.exponent,base:e,range:this.range(),type:this.constructor.type()})}},{key:"sanitizeTickFormatter",value:function(t){var e=t.tickFormat,n=t.format;return e?function(t){return function(r,i){return e(n(r),r,i,t)}}:function(){return function(t){return n(t)}}}},{key:"resetRenderConfig",value:function(t){var e=t.labels,n=t.show,r=t.showInnerTicks,i=t.showOuterTicks,a=t.showAxisName,o=t.xOffset,c=t.yOffset,u=t.tickValues,s=t.smartAxisName;return this.renderConfig({labels:e,show:n,showInnerTicks:r,showOuterTicks:i,showAxisName:a,xOffset:o,yOffset:c,tickValues:u,smartAxisName:s}),this}},{key:"resetLogicalSpace",value:function(){this.logicalSpace(null),this.range([]),this.resetRenderConfig(this.config())}},{key:"getFormattedText",value:function(t,e,n){return(0,this._tickFormatter)(n)(t,e)}},{key:"createAxis",value:function(t){var e=t.orientation,n=lv[e];return n?n(this.scale()):null}},{key:"setTickValues",value:function(t){var e=this.renderConfig();this.config(vy(vy({},e),{},{tickValues:t})),this.tickValues=t,this.axis().tickValues(t)}},{key:"setAvailableSpace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i={},a=this.config(),o=a.orientation;this.availableSpace({width:t,height:e,padding:n});var c=this.constructor.type();return i=o===av||o===iv?ny(this,{isOffset:r})[c].x():ny(this,{isOffset:r})[c].y(),this.renderConfig({labels:i}),this.setTickConfig(),this.setSmartAxisName(),this}},{key:"setSmartAxisName",value:function(){var t=this.config(),e=t.orientation,n=t.name,r=e===av||e===iv?"width":"height",i=this.availableSpace()[r],a=this.dependencies().labelManager;return a.setStyle(this._axisNameStyle),this.renderConfig({smartAxisName:dy(n,i,a)}),this}},{key:"setTickConfig",value:function(){return this}},{key:"getScaleValue",value:function(t){if(null!=t)return this.scale()(t)}},{key:"getTickSize",value:function(){return this.axis().tickSize()}},{key:"getAxisDimensions",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.axisDimensions(oy.apply(void 0,[this].concat(e))),this.axisDimensions()}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(function(t){var e=t.range(),n=t.getAxisDimensions(),r=t.config().orientation,i=t.renderConfig(),a=i.show,o=i.showAxisName,c=n.axisNameDimensions;if(!1===a)return{width:0,height:0};var u=c.width;if(r===av||r===iv){var s=cy(t,n,e),l=s.width,f=s.height;return{width:Math.max(l,u),height:f}}var h=uy(t,n),d=h.width,p=h.height;return{width:d,height:Math.max(p,o?u:0)}}(this)),iy(this),this.logicalSpace()}},{key:"invert",value:function(t){return this.scale().invert(t)}},{key:"getNearestRange",value:function(t,e){return[t,e]}},{key:"invertExtent",value:function(t,e){return[this.invert(t),this.invert(e)]}},{key:"getMinTickDifference",value:function(){return this.domain()}},{key:"getFormattedTickValues",value:function(t){return t}},{key:"getUnitWidth",value:function(){return 0}},{key:"serialize",value:function(){return{name:this.name,type:this.type,range:this.range(),config:this.config()}}},{key:"id",get:function(){return this._id}},{key:"renderAsHTML",value:function(){var t=this._smartTicks,e=this.config(),n=e.className,r=e.orientation,i=e.field,a=e.classPrefix,o=e.id,c=e.useExternalCSS,u=e.ticks.labels.style,s=e.labels,l=s.align,f=s.className,h=this.renderConfig().show,d=this.mount(),p=r===ov,g=r===cv,v=r===iv,y=p||g;if(h&&i!==gt){var m=dp(hp(d),"div",[this],"".concat(n),{},(function(t){return t.config().id})).style("float","none").style("display","grid").style("grid-auto-flow",y?"row":"column").style("justify-content","stretch").style("width","100%").style("height","100%");if(this.domain().length>0){m.style("grid-auto-".concat(y?"rows":"columns"),"1fr");var b=(y?t.reverse():t).map((function(t){return t.text.replace(/<br \/>/g," ")})),x=dp(m,"div",b,"tick").text((function(t){return t}));c||Object.entries(u).forEach((function(t){var e=fg()(t,2),n=e[0],r=e[1];x.style(n,r)})),x.style("white-space","normal").style("padding-".concat(y?p?cv:ov:v?iv:av),"6px").style("line-height",1).style("display","grid").style("align-items","center").classed("".concat(a,"-ticks"),!0).classed("".concat(a,"-ticks-").concat(o),!0).classed(f,!0).style("text-align",p?"end":g?"start":"center").style("text-align",l),y&&x.each((function(t,e){hp(this).classed("".concat(a,"-text-row-").concat((e+1)%2==0?"even":"odd"),!0)}))}}}},{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.mount()&&(this.setTickConfig(),"html"===this.config().renderer?this.renderAsHTML():Vv(this,e)),this}},{key:"remove",value:function(){return hp(this.mount()).remove(),this}},{key:"unsubscribe",value:function(){return this}},{key:"isReverse",value:function(){var t=this.range();return t[0]>t[1]}},{key:"getPixelToValueRatio",value:function(){var t=this.scale(),e=t.range(),n=t.domain();return Math.abs(e[1]-e[0])/(n[1]-n[0])}},{key:"animationDone",value:function(){return Promise.all(this._animationDonePromises)}},{key:"registerAnimationDoneHook",value:function(){var t,e=new Promise((function(e){t=e}));return this._animationDonePromises.push(e),function(){t()}}},{key:"_getRawTickValue",value:function(t){return t}},{key:"getTicksBasedOnData",value:function(t){var e=this,n=hp(this.mount()).selectAll(".tick"),r=null,i=null;return t&&(r=n.filter((function(n){return t===e._getRawTickValue(n)})),i=n.filter((function(n){return!(t===e._getRawTickValue(n))}))),{selectionSet:r,rejectionSet:i||n}}},{key:"getIndex",value:function(){return null}}],[{key:"defaultConfig",value:function(t){var e=t.orientation;return Js(zv,e===ov||e===cv?Hv:Wv)}}]),t}(),wy=function(){function t(){gg()(this,t)}return yg()(t,[{key:"createScale",value:function(t){var e=t.range,n=Lv.linear;return this._scale=n().range(e),this._scale}},{key:"getScaleValue",value:function(t){return this._scale(t)+.5}},{key:"sanitizeDomain",value:function(t){return t.length&&(t=ws(t)),t}}]),t}(),ky=function(){function t(){gg()(this,t)}return yg()(t,[{key:"createScale",value:function(t){var e=t.range,n=t.base,r=Lv.log;return this._scale=r().range(e).base(n),this._scale}},{key:"getScaleValue",value:function(t){var e=this._scale;return t<=0?e(e.domain()[0]):e(t)+.5}},{key:"sanitizeDomain",value:function(t){return t[0]<=0&&(t[0]=Math.max(1,t[0])),t[1]<=0&&(t[1]=Math.max(1,t[1])),t}}]),t}(),Sy=function(){function t(){gg()(this,t)}return yg()(t,[{key:"createScale",value:function(t){var e=t.range,n=t.exponent,r=Lv.pow;return this._scale=r().range(e).exponent(n),this._scale}},{key:"getScaleValue",value:function(t){return this._scale(t)+.5}},{key:"sanitizeDomain",value:function(t){return t}}]),t}(),My=(yy={},rv()(yy,mv,ky),rv()(yy,bv,Sy),rv()(yy,fv,wy),yy),Ey=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r){return gg()(this,n),t.tickFormat=t.tickFormat?t.tickFormat:t.numberFormat?t.numberFormat:function(t){return t},e.call(this,t,r)}return yg()(n,[{key:"createScale",value:function(t){var e=t.base,n=t.padding,r=t.interpolator,i=t.exponent,a=this.range(),o=My[r];this._interpolator=new o;var c=this._interpolator.createScale({padding:n,exponent:i,base:e,range:a});return c.nice()}},{key:"getScaleValue",value:function(t){if(null!=t)return this._interpolator.getScaleValue(t)}},{key:"getTickSize",value:function(){var t=this.renderConfig(),e=t.showInnerTicks,n=t.showOuterTicks,r=this.axis();return r.tickSizeInner(!1===e?0:6),r.tickSizeOuter(!1===n?0:6),r.tickSize()}},{key:"domain",value:function(){if(arguments.length){var t=this._interpolator.sanitizeDomain(ly(this,arguments.length<=0?void 0:arguments[0]));return fy(this,t),this.setAxisComponentDimensions(),this.logicalSpace(null),this}return this._domain}},{key:"setAvailableSpace",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=Sv()(kg()(n.prototype),"setAvailableSpace",this)).call.apply(t,[this].concat(r)),this.getTickSize(),this}},{key:"setTickConfig",value:function(){var t=this.renderConfig(),e=t.tickValues,n=t.showInnerTicks,r=this.axis();if(!n)return r.tickValues([]),this;e&&e instanceof Array&&this.axis().tickValues(e);var i=this.getTickValues();r.tickValues(i);var a=this.dependencies().labelManager;a.setStyle(this._tickLabelStyle);var o=this._tickFormatter(i),c=i.map((function(t,e){var n=o(t,e),r=a.getOriSize(n);return r.text=n,r}));return this.smartTicks(c),this}},{key:"getTickValues",value:function(){var t=this.config().orientation,e=this.renderConfig().tickValues,n=this.range(),r=this.axis(),i=Math.abs(n[0]-n[1]),a=this.axisComponentDimensions().largestTickDimensions;return e||function(t,e,n,r){var i=0,a=[],o=r.config().numberOfTicks,c=n.scale().ticks().length,u=r._minTickDistance.width;return i=c,c*(e+u)>t&&(i=Math.floor(t/(e+u))),o=o||i,i=Math.min(o,Math.max(2,i)),(a=n.scale().ticks(i)).length>i&&(a=a.filter((function(t,e){return 0===t||e%2==0}))),2===i&&(a=[(a=n.scale().ticks(10))[0],a[a.length-1]]),a}(i,a[t===iv||t===av?"width":"height"],r,this)}},{key:"getMinTickDifference",value:function(){return zl(this.renderConfig().tickValues)}},{key:"setFixedBaseline",value:function(t){var e=this.config().orientation,n=this.renderConfig().labels.rotation,r=this.axis(),i=r.tickValues(),a=this.smartTicks();if(a&&a.length){var o=this.smartTicks()[0],c=o.width,u=o.height;r.tickTransform((function(t){if(t===i[0]){if(e===ov||e===cv)return"translate(0, -".concat(u/3,"px)");if((e===av||e===iv)&&!n)return"translate(".concat(c/2,"px,  ",0,"px)")}return""}))}return t}}],[{key:"type",value:function(){return fv}}]),n}(_y),Oy=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"setTickConfig",value:function(){var t,e="",n=this.domain(),r=this._dependencies.labelManager,i=this.config().padding,a=this.renderConfig(),o=a.labels,c=a.tickValues,u=this.maxTickSpaces(),s=u.height,l=u.width,f=u.noWrap,h=ry(o.rotation,l,s),d=h.width,p=h.height;if(c&&this.axis().tickValues(c),e=c||n,r.setStyle(this._tickLabelStyle),"number"==typeof i){var g=Math.min(1,Math.max(0,i));this.scale().padding(g)}if(n&&n.length){var v=c||n,y=this._tickFormatter(v);e=v.map((function(e,n){return r.useEllipsesOnOverflow(!0),t=r.getSmartText(y(e,n),d,p,f),r.constructor.textToLines(t)}))}return this.smartTicks(e),this}},{key:"overrideDimension",value:function(t){return null==t?this._overriddenDimension:(this._overriddenDimension=t,this)}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(sy(this)),iy(this),this.logicalSpace()}},{key:"getTickValues",value:function(){return this.axis().scale().domain()}},{key:"formatTickValue",value:function(t){return t}},{key:"sanitizeTickFormatter",value:function(t){var e=this,n=t.tickFormat,r=t.fieldAs,i=t.fieldSubtype,a=t.fieldInstance;return n?function(t){return function(r,i){return n(e.formatTickValue(r),r,i,t)}}:"discrete"===r&&"temporal"===i?function(){return a.rawFormat()}:function(){return function(t){return e.formatTickValue(t)}}}},{key:"getUnitWidth",value:function(){return this.scale().bandwidth()}},{key:"getTickSize",value:function(){var t=this.renderConfig(),e=t.showInnerTicks,n=t.showOuterTicks,r=this.axis();return r.tickSizeInner(e?6:0),r.tickSizeOuter(n?6:0),r.tickSize()}},{key:"invertExtent",value:function(t,e){return this.scale().invertExtent(t,e)}},{key:"getNearestRange",value:function(t,e){var n=this.scale(),r=n.range(),i=r[0]>r[1],a=this.invertExtent(t,e);return[n(i?a[a.length-1]:a[0]),n(i?a[0]:a[a.length-1])+n.bandwidth()]}},{key:"getValidDomain",value:function(t){var e=Sv()(kg()(n.prototype),"getValidDomain",this).call(this,t),r=this.config().orientation;return"left"!==r&&"right"!==r||e.reverse(),e}},{key:"extendDomain",value:function(){}},{key:"getIndex",value:function(t){var e=this.domain(),n=bt.isInvalid(t)?t.value():t,r=this.config().orientation;return r===ov||r===cv?e.length-(e.findIndex((function(t){return n===(bt.isInvalid(t)?t.value():t)}))+1):e.findIndex((function(t){return n===(bt.isInvalid(t)?t.value():t)}))}}],[{key:"type",value:function(){return hv}}]),n}(_y),Cy=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._minDiff=1/0,t}return yg()(n,[{key:"createScale",value:function(t){var e=Sv()(kg()(n.prototype),"createScale",this).call(this,t);return e.nice()}},{key:"formatTickValue",value:function(t){return this.scale().tickFormat()(t)}},{key:"sanitizeTickFormatter",value:function(t){var e=this,n=t.tickFormat;return n?function(t){var r=t.map((function(t){return t.getTime()}));return function(t,i){return n(e.formatTickValue(t),t.getTime(),i,r)}}:function(){return function(t){return e.formatTickValue(t)}}}},{key:"getTickSize",value:function(){var t=this.renderConfig(),e=t.showInnerTicks,r=t.showOuterTicks,i=this.axis();return i.tickSizeInner(!1===e?0:6),i.tickSizeOuter(!1===r?0:6),Sv()(kg()(n.prototype),"getTickSize",this).call(this)}},{key:"getTickValues",value:function(){return this.renderConfig().tickValues||this.scale().ticks()}},{key:"minDiff",value:function(t){return this._minDiff=Math.min(this._minDiff,t),this}},{key:"applyTickSkipping",value:function(){Yv(this)}},{key:"domain",value:function(){if(arguments.length){var t=ly(this,arguments.length<=0?void 0:arguments[0]);return fy(this,t),this.setAxisComponentDimensions(),this.logicalSpace(null),hy(this,t),this}return this._domain}},{key:"overrideDimension",value:function(t){return null==t?this._overriddenDimension:(this._overriddenDimension=t,this)}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(sy(this)),iy(this),this.logicalSpace()}},{key:"getMinTickDifference",value:function(){return zl(this.config().tickValues)}},{key:"setAvailableSpace",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=Sv()(kg()(n.prototype),"setAvailableSpace",this)).call.apply(t,[this].concat(r)),this.getTickSize(),this}},{key:"setTickConfig",value:function(){var t,e,n=this.renderConfig(),r=n.labels,i=n.tickValues,a=this.maxTickSpaces(),o=a.height,c=a.width,u=a.noWrap,s=this._dependencies.labelManager,l=this.getTickValues();i&&this.axis().tickValues(i);var f=ry(r.rotation,c,o),h=f.width,d=f.height;if(t=i||l,s.setStyle(this._tickLabelStyle),l&&l.length){var p=i||l,g=this._tickFormatter(p);t=p.map((function(t,n){return s.useEllipsesOnOverflow(!0),e=s.getSmartText(g(t,n),h,d,u),s.constructor.textToLines(e)}))}return this.smartTicks(t),this}},{key:"_getRawTickValue",value:function(t){return new Date(t).getTime()}}],[{key:"type",value:function(){return dv}}]),n}(_y),Ay={Pink:{hex:"ffc0cb",rgb:"255,192,203"},LightPink:{hex:"ffb6c1",rgb:"255,182,193"},HotPink:{hex:"ff69b4",rgb:"255,105,180"},DeepPink:{hex:"ff1493",rgb:"255,20,147"},PaleVioletRed:{hex:"db7093",rgb:"219,112,147"},MediumVioletRed:{hex:"c71585",rgb:"199,21,133"},LightSalmon:{hex:"ffa07a",rgb:"255,160,122"},Salmon:{hex:"fa8072",rgb:"250,128,114"},DarkSalmon:{hex:"e9967a",rgb:"233,150,122"},LightCoral:{hex:"f08080",rgb:"240,128,128"},IndianRed:{hex:"cd5c5c",rgb:"205,92,92"},Crimson:{hex:"dc143c",rgb:"220,20,60"},FireBrick:{hex:"b22222",rgb:"178,34,34"},DarkRed:{hex:"8b0000",rgb:"139,0,0"},Red:{hex:"ff0000",rgb:"255,0,0"},OrangeRed:{hex:"ff4500",rgb:"255,69,0"},Tomato:{hex:"ff6347",rgb:"255,99,71"},Coral:{hex:"ff7f50",rgb:"255,127,80"},DarkOrange:{hex:"ff8c00",rgb:"255,140,0"},Orange:{hex:"ffa500",rgb:"255,165,0"},Gold:{hex:"ffd700",rgb:"255,215,0"},Yellow:{hex:"ffff00",rgb:"255,255,0"},LightYellow:{hex:"ffffe0",rgb:"255,255,224"},LemonChiffon:{hex:"fffacd",rgb:"255,250,205"},LightGoldenrodYellow:{hex:"fafad2",rgb:"250,250,210"},PapayaWhip:{hex:"ffefd5",rgb:"255,239,213"},Moccasin:{hex:"ffe4b5",rgb:"255,228,181"},PeachPuff:{hex:"ffdab9",rgb:"255,218,185"},PaleGoldenrod:{hex:"eee8aa",rgb:"238,232,170"},Khaki:{hex:"f0e68c",rgb:"240,230,140"},DarkKhaki:{hex:"bdb76b",rgb:"189,183,107"},Cornsilk:{hex:"fff8dc",rgb:"255,248,220"},BlanchedAlmond:{hex:"ffebcd",rgb:"255,235,205"},Bisque:{hex:"ffe4c4",rgb:"255,228,196"},NavajoWhite:{hex:"ffdead",rgb:"255,222,173"},Wheat:{hex:"f5deb3",rgb:"245,222,179"},BurlyWood:{hex:"deb887",rgb:"222,184,135"},Tan:{hex:"d2b48c",rgb:"210,180,140"},RosyBrown:{hex:"bc8f8f",rgb:"188,143,143"},SandyBrown:{hex:"f4a460",rgb:"244,164,96"},Goldenrod:{hex:"daa520",rgb:"218,165,32"},DarkGoldenrod:{hex:"b8860b",rgb:"184,134,11"},Peru:{hex:"cd853f",rgb:"205,133,63"},Chocolate:{hex:"d2691e",rgb:"210,105,30"},SaddleBrown:{hex:"8b4513",rgb:"139,69,19"},Sienna:{hex:"a0522d",rgb:"160,82,45"},Brown:{hex:"a52a2a",rgb:"165,42,42"},Maroon:{hex:"800000",rgb:"128,0,0"},DarkOliveGreen:{hex:"556b2f",rgb:"85,107,47"},Olive:{hex:"808000",rgb:"128,128,0"},OliveDrab:{hex:"6b8e23",rgb:"107,142,35"},YellowGreen:{hex:"9acd32",rgb:"154,205,50"},LimeGreen:{hex:"32cd32",rgb:"50,205,50"},Lime:{hex:"00ff00",rgb:"0,255,0"},LawnGreen:{hex:"7cfc00",rgb:"124,252,0"},Chartreuse:{hex:"7fff00",rgb:"127,255,0"},GreenYellow:{hex:"adff2f",rgb:"173,255,47"},SpringGreen:{hex:"00ff7f",rgb:"0,255,127"},MediumSpringGreen:{hex:"00fa9a",rgb:"0,250,154"},LightGreen:{hex:"90ee90",rgb:"144,238,144"},PaleGreen:{hex:"98fb98",rgb:"152,251,152"},DarkSeaGreen:{hex:"8fbc8f",rgb:"143,188,143"},MediumSeaGreen:{hex:"3cb371",rgb:"60,179,113"},SeaGreen:{hex:"2e8b57",rgb:"46,139,87"},ForestGreen:{hex:"228b22",rgb:"34,139,34"},Green:{hex:"008000",rgb:"0,128,0"},DarkGreen:{hex:"006400",rgb:"0,100,0"},MediumAquamarine:{hex:"66cdaa",rgb:"102,205,170"},Aqua:{hex:"00ffff",rgb:"0,255,255"},Cyan:{hex:"00ffff",rgb:"0,255,255"},LightCyan:{hex:"e0ffff",rgb:"224,255,255"},PaleTurquoise:{hex:"afeeee",rgb:"175,238,238"},Aquamarine:{hex:"7fffd4",rgb:"127,255,212"},Turquoise:{hex:"40e0d0",rgb:"64,224,208"},MediumTurquoise:{hex:"48d1cc",rgb:"72,209,204"},DarkTurquoise:{hex:"00ced1",rgb:"0,206,209"},LightSeaGreen:{hex:"20b2aa",rgb:"32,178,170"},CadetBlue:{hex:"5f9ea0",rgb:"95,158,160"},DarkCyan:{hex:"008b8b",rgb:"0,139,139"},Teal:{hex:"008080",rgb:"0,128,128"},LightSteelBlue:{hex:"b0c4de",rgb:"176,196,222"},PowderBlue:{hex:"b0e0e6",rgb:"176,224,230"},LightBlue:{hex:"add8e6",rgb:"173,216,230"},SkyBlue:{hex:"87ceeb",rgb:"135,206,235"},LightSkyBlue:{hex:"87cefa",rgb:"135,206,250"},DeepSkyBlue:{hex:"00bfff",rgb:"0,191,255"},DodgerBlue:{hex:"1e90ff",rgb:"30,144,255"},CornflowerBlue:{hex:"6495ed",rgb:"100,149,237"},SteelBlue:{hex:"4682b4",rgb:"70,130,180"},RoyalBlue:{hex:"4169e1",rgb:"65,105,225"},Blue:{hex:"0000ff",rgb:"0,0,255"},MediumBlue:{hex:"0000cd",rgb:"0,0,205"},DarkBlue:{hex:"00008b",rgb:"0,0,139"},Navy:{hex:"000080",rgb:"0,0,128"},MidnightBlue:{hex:"191970",rgb:"25,25,112"},Lavender:{hex:"e6e6fa",rgb:"230,230,250"},Thistle:{hex:"d8bfd8",rgb:"216,191,216"},Plum:{hex:"dda0dd",rgb:"221,160,221"},Violet:{hex:"ee82ee",rgb:"238,130,238"},Orchid:{hex:"da70d6",rgb:"218,112,214"},Fuchsia:{hex:"ff00ff",rgb:"255,0,255"},Magenta:{hex:"ff00ff",rgb:"255,0,255"},MediumOrchid:{hex:"ba55d3",rgb:"186,85,211"},MediumPurple:{hex:"9370db",rgb:"147,112,219"},BlueViolet:{hex:"8a2be2",rgb:"138,43,226"},DarkViolet:{hex:"9400d3",rgb:"148,0,211"},DarkOrchid:{hex:"9932cc",rgb:"153,50,204"},DarkMagenta:{hex:"8b008b",rgb:"139,0,139"},Purple:{hex:"800080",rgb:"128,0,128"},Indigo:{hex:"4b0082",rgb:"75,0,130"},DarkSlateBlue:{hex:"483d8b",rgb:"72,61,139"},SlateBlue:{hex:"6a5acd",rgb:"106,90,205"},MediumSlateBlue:{hex:"7b68ee",rgb:"123,104,238"},White:{hex:"ffffff",rgb:"255,255,255"},Snow:{hex:"fffafa",rgb:"255,250,250"},Honeydew:{hex:"f0fff0",rgb:"240,255,240"},MintCream:{hex:"f5fffa",rgb:"245,255,250"},Azure:{hex:"f0ffff",rgb:"240,255,255"},AliceBlue:{hex:"f0f8ff",rgb:"240,248,255"},GhostWhite:{hex:"f8f8ff",rgb:"248,248,255"},WhiteSmoke:{hex:"f5f5f5",rgb:"245,245,245"},Seashell:{hex:"fff5ee",rgb:"255,245,238"},Beige:{hex:"f5f5dc",rgb:"245,245,220"},OldLace:{hex:"fdf5e6",rgb:"253,245,230"},FloralWhite:{hex:"fffaf0",rgb:"255,250,240"},Ivory:{hex:"fffff0",rgb:"255,255,240"},AntiqueWhite:{hex:"faebd7",rgb:"250,235,215"},Linen:{hex:"faf0e6",rgb:"250,240,230"},LavenderBlush:{hex:"fff0f5",rgb:"255,240,245"},MistyRose:{hex:"ffe4e1",rgb:"255,228,225"},Gainsboro:{hex:"dcdcdc",rgb:"220,220,220"},LightGray:{hex:"d3d3d3",rgb:"211,211,211"},Silver:{hex:"c0c0c0",rgb:"192,192,192"},DarkGrey:{hex:"a9a9a9",rgb:"169,169,169"},Grey:{hex:"808080",rgb:"128,128,128"},DimGrey:{hex:"696969",rgb:"105,105,105"},LightSlateGrey:{hex:"778899",rgb:"119,136,153"},SlateGrey:{hex:"708090",rgb:"112,128,144"},DarkSlateGrey:{hex:"2f4f4f",rgb:"47,79,79"},Black:{hex:"000000",rgb:"0,0,0"}},Py=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Dy="#eaeaea",Ry={range:Py,value:Py[0],step:!1,stops:5,type:"linear",repeatRange:!1,domainRangeMap:{}},Iy=function(t){return"hsla(".concat(360*t[0],",").concat(100*t[1],"%,").concat(100*t[2],"%,").concat(t[3]||1,")")},Ty=function(t){return(t.split(" ")||[]).reduce((function(t,e){return"".concat(t).concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}),"")},Ny=function(t,e){var n="";if("string"==typeof t)if(t=(t=t.replace(/ /g,"")).toLowerCase(),"hsl"===bl(t)||"hsla"===bl(t))n=[(n=t.match(/(\d+(\.\d+)?)/g))[0]/360,n[1]/100,n[2]/100,zs(Number(n[3]),1)];else if("hex"===bl(t))n=yl(t);else if("rgb"===bl(t)){var r=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,\s*/);n=gl.apply(void 0,dg()(r))}else Ay[Ty(t)]&&(n=gl.apply(void 0,dg()(Ay[Ty(t)].rgb.split(","))));else n=t instanceof Array?t:gl(e);return n},Fy={config:{sanitization:function(t,e){var n=Js({},t.constructor.defaultConfig());"linear"===e.type&&(e.range=e.range||[n.range[0]],e.range=e.range.length>1?e.range:[Dy].concat(dg()(e.range)));var r=Js(n,t.config()),i=Js(r,e);return i.range instanceof Array&&(i.range=i.range.map((function(t,e){return Ny(t,Py[e])})),i.stops=e.stops?e.stops:e.range&&e.range.length>2?e.range.length:Ry.stops),i.value=Ny(i.value,i.value),i}},domain:{},scale:{},uniqueValues:{},isGlobal:{}},jy=function(t,e){return e},Ly=function(t,e,n){switch(Us(t,"constructor")){case Function:return t(e,n);case Array:return t;default:return e}},By=function(t,e){var n=[];return e instanceof Array?(n=e.slice().sort(),n=dg()(new Set([t[0]].concat(dg()(e),[t[1]]))).sort()):n=sf(t,e),{domain:t,newStops:n}},zy=function(t){return{domain:t.map((function(e,n){return n/(t.length-1)})),uniqueVals:t,scaleDomain:[0,1]}},Hy=function(t,e,n){return{domain:t,uniqueVals:t,scaleDomain:[0,1],range:n}},Wy=function(t,e,n){return{uniqueVals:t,domain:t,nice:!0,range:n}},Vy=function(t,e,n){var r=By(t,e),i=r.domain,a=r.newStops;return{uniqueVals:i,domain:a,nice:!0,range:function(t,e){var n=[];if(t>Math.min(e.length,18))for(var r=ll()(ul(),e.map((function(t){return Iy(t)}))),i=0;i<t;i++)n[i]=r(i/(t-1));else n=e.slice(0,t);return{newRange:n}}(a.length-1,n).newRange}},Uy=function(t,e,n){var r=By(ws(t),n.length-1);return{uniqueVals:r.domain,domain:r.newStops,nice:!0,range:n.map((function(t){return Iy(t)}))}},Gy=function(t,e,n,r){return e(n[r.indexOf(t)])},qy=function(t,e,n){var r=(t-n[0])/(n[n.length-1]-n[0]);return jy(0,e(r),e(0))},Yy=function(t,e,n){return jy(0,e(t),e(n[0]))},Xy=function(){function t(e){var n;gg()(this,t),qs(this,Fy),this.config(e),this._domainType="linear"===this._config.type?Mv:"discrete",this._rangeType="linear"!==this._config.type||this._config.step?"discrete":Mv,this._schemeType=(n=this._config.range)&&"string"==typeof n&&"i"===n[0]?"sequential":"ordinal",this._colorStrategy=this.setColorStrategy(this._domainType,this._rangeType,this._schemeType),this._scale=this.createScale(this._colorStrategy),this._id=gs(),this.updateDomain(e.domain)}return yg()(t,[{key:"createScale",value:function(t){var e,n=this.config().range;return n&&"string"==typeof n?"i"===(e=n)[0]?Iv(a[e]):Rv(a[e]):Bv({type:t.scale,range:n})}},{key:"setColorStrategy",value:function(t,e,n){return function(t,e,n){return(r={},rv()(r,"".concat(Mv,"-").concat(Mv,"-").concat(_v),{scale:_v,domainRange:function(){return Hy},value:function(){return qy}}),rv()(r,"".concat(Mv,"-").concat("discrete","-").concat(_v),{scale:_v,domainRange:function(){return Hy},value:function(){return qy}}),rv()(r,"".concat("discrete","-").concat("discrete","-").concat(_v),{scale:_v,domainRange:function(){return zy},value:function(){return Gy}}),rv()(r,"".concat("discrete","-").concat("discrete","-").concat(gv),{scale:gv,domainRange:function(){return Wy},value:function(){return Yy}}),rv()(r,"".concat(Mv,"-").concat(Mv,"-").concat(gv),{scale:fv,domainRange:function(){return Uy},value:function(){return Yy}}),rv()(r,"".concat(Mv,"-").concat("discrete","-").concat(gv),{scale:yv,domainRange:function(){return Vy},value:function(){return Yy}}),r)["".concat(t,"-").concat(e,"-").concat(n||"")];var r}(t,e,n)}},{key:"getHslString",value:function(t){return Iy(t)}},{key:"getColor",value:function(t){var e=this.config().domainRangeMap;return e[t]?e[t]:this.getHslString(this.getRawColor(t))}},{key:"getRawColor",value:function(t){if(this.domain()&&void 0!==t){var e=this.scale(),n=e.range?e.range():null,r=this._colorStrategy.value(n)(t,e,this.domain(),this.uniqueValues());if(r){if("string"==typeof r){var i=r.substring(r.indexOf("(")+1,r.lastIndexOf(")")).split(/,\s*/);return gl.apply(void 0,dg()(i))}return dg()(r)}}return dg()(this.config().value)}},{key:"setRangeWithInterpolatedColors",value:function(t,e){var n=e.domain,r=e.range,i=n.length,a=r.length,o=this.config().repeatRange;if("ordinal"===t&&i>a&&!o){var c=[],u=n.map((function(t,e){return e/i}));this._linearScale=Lv.linear().range(this._config.range).domain(u);for(var s=0,l=i;s<l;s++){var f=1/l*s;c.push(dg()(this._linearScale(f)))}this.scale().range(c)}}},{key:"updateDomain",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var e=this.scale(),n=e.range?e.range():null,r=this._colorStrategy.domainRange(),i=this._colorStrategy.scale,a=r(t,this.config().stops,n);this.domain(a.domain),a.range&&this.scale().range(a.range),this.uniqueValues(a.uniqueVals),this.scale().domain(a.scaleDomain||this.domain()),this.setRangeWithInterpolatedColors(i,a)}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),config:this.config()}}},{key:"transformColor",value:function(t,e){var n=360*t[0],r=100*t[1],i=100*t[2],a=Math.min(zs(t[3],0),1),o=n+e[0],c=r+e[1],u=i+e[2],s=Math.min(a+e[3]||0,1);return{color:"hsla(".concat(o,",").concat(c,"%,").concat(u,"%,").concat(s,")"),hsla:[o/360,c/100,u/100,s]}}},{key:"id",value:function(){return this._id}},{key:"getHslArray",value:function(t){return Ny(t)}}],[{key:"defaultConfig",value:function(){return Ry}},{key:"type",value:function(){return"color"}}]),t}(),$y={value:4,range:[2,50]},Ky=(my={},rv()(my,"".concat("discrete","-").concat(Mv),{scale:fv,domain:function(t){var e=t;return{domain:t.map((function(e,n){return n/(t.length-1)})),uniqueVals:e,scaleDomain:[0,1]}},range:function(t,e,n,r){var i=n[r.findIndex((function(e){return bt.isInvalid(e)?e.value()===t:e===t}))];return ll()(ol(),dg()(e.range()))(i)}}),rv()(my,"".concat(Mv,"-").concat(Mv),{scale:fv,domain:function(t){return{uniqueVals:t,domain:t}},range:function(t,e,n){return jy(0,e(t),e(n[0]))}}),rv()(my,"".concat(Mv,"-").concat("discrete"),{scale:wv,domain:function(t,e){var n;return{uniqueVals:n=e instanceof Array?e.slice().sort():sf(t,e),domain:n,nice:!0}},range:function(t,e,n){var r=(t-n[0])/(n[n.length-1]-n[0]),i=ol().apply(void 0,dg()(e.range()));return jy(0,i(r),i(n[0]))}}),my),Qy={config:{sanitization:function(t,e){return t._userRange=e.range,Js(t._config||{},e)}},domain:{sanitization:function(t,e){return t.scale().domain(e),e}},range:{},scale:{},uniqueValues:{},isGlobal:{}},Zy=function(){function t(e){gg()(this,t),qs(this,Qy),this._id=gs(),this.config(this.constructor.defaultConfig()),this.config(e),this._domainType="linear"===this._config.type?Mv:"discrete",this._config.range=this._userRange?this._userRange:this._config.range,this._config.stops=this._config.stops||5,this._rangeType="linear"===this._config.type&&this._config.stops?"discrete":Mv,this._sizeStrategy=this.setStrategy(this._domainType,this._rangeType),this._scale=this.createScale(this._sizeStrategy),this._range=this._config.range,this.updateDomain(e.domain)}return yg()(t,[{key:"setStrategy",value:function(t,e){return function(t,e){return Ky["".concat(t,"-").concat(e)]}(t,e)}},{key:"createScale",value:function(t){var e=this.config().range;return Bv({type:t.scale,range:e})}},{key:"getSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.config(),n=e.value,i=e.as,a=this.scale(),o=this.domain()||[1,1];return!a||o[0]===o[1]||1===o.length||null==t||i===r.SCALES.CONTINUOUS&&bt.isInvalid(t)?n:this._sizeStrategy.range(bt.isInvalid(t)?t.value():t,a,this.domain(),this.uniqueValues())}},{key:"updateDomain",value:function(t){if(t){var e=(0,this._sizeStrategy.domain)(t,this.config().stops);this.domain(e.domain),this.uniqueValues(e.uniqueVals),this.scale().domain(e.scaleDomain||this.domain())}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),range:this.range(),config:this.config()}}},{key:"id",value:function(){return this._id}}],[{key:"defaultConfig",value:function(){return $y}},{key:"type",value:function(){return"size"}}]),t}(),Jy={generator:null,value:"circle",range:["circle","diamond","star","cross","square","wye","triangle"]},tm=function(t,e){var n={};return t.forEach((function(t){n[t]=e(t)})),n},em={config:{},domain:{},scale:{},uniqueValues:{},generator:{},isGlobal:{}},nm=function(){function t(e){gg()(this,t),qs(this,em),this._id=gs(),this._config=Object.assign({},this.constructor.defaultConfig()),this._config=Js(this._config,e),this._scale=Bv({type:"ordinal",range:this._config.range}),this.updateDomain(e.domain)}return yg()(t,[{key:"getShape",value:function(t){if(!this.scale()||!this.domain()||!t||bt.isInvalid(t))return this.config().value;if(this._generatedShapes)return this._generatedShapes[t];var e=this.scale()(t);return"string"===e?Pl(e):e}},{key:"updateDomain",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length){var e=this.config().generator;this.uniqueValues(t),this.domain(t),this.scale().domain(t),e&&(this._generatedShapes=tm(t,e))}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),range:this.config().range,config:this.config()}}},{key:"id",value:function(){return this._id}}],[{key:"defaultConfig",value:function(){return Jy}},{key:"type",value:function(){return"shape"}}]),t}(),rm={config:{sanitization:function(t,e){return Js(t.config(),e)},preset:function(t,e){var n=e.range,r=e.domain;n&&t.range(n),r&&t.domain(r)}},domain:{},range:{}},im=jl.pie,am=function(t){var e=t._angleFn(t._domain);e.forEach((function(t){t.startAngle-=Math.PI/2,t.endAngle-=Math.PI/2})),t._angleValues=e.reduce((function(t,e){var n=e.data;return!t[n]&&(t[n]=[]),t[n].push(e),t}),{})},om=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};gg()(this,t),this._id=gs(),qs(this,rm),this._config=Js({},this.constructor.defaultConfig()),this.config(e),this._range=[0,360];var n=this._config.angle;this._angleFn=im().value((function(t){return bt.isInvalid(t)?0:n&&"discrete"===n.as||"string"==typeof t?1:t})).sortValues(null),this._angleValues={}}return yg()(t,[{key:"createScale",value:function(t){var e=this.config().range;return Bv({type:t.scale,range:e})}},{key:"getScaleValue",value:function(t){return this._angleValues[t]}},{key:"padAngle",value:function(t){this._angleFn=this._angleFn.padAngle(t)}},{key:"domain",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=this.config(),i=r.domain,a=e[0].length?e[0]:Ev;return this._domain=Ly(i,a,this),am(this),this}return this._domain}},{key:"range",value:function(){if(arguments.length){var t=this.config(),e=t.range;this._range=Ly(e,arguments.length<=0?void 0:arguments[0],this);var n=this.domain(),r=fg()(this._range,2),i=r[0],a=r[1];return this._angleFn.startAngle(i/180*Math.PI).endAngle(Math.PI*a/180),n&&n.length&&am(this),this}return this._range}}],[{key:"defaultConfig",value:function(){return{}}}]),t}(),cm="x",um="y",sm="width",lm="height",fm="measurement",hm="config",dm="minUnitWidth",pm="minUnitHeight",gm="dimensions",vm="measures",ym="dimension",mm="measure",bm="continuous",xm="binned",_m="pivot",wm="format",km="mount",Sm="hasDataUpdated",Mm="rows",Em="columns",Om="data",Cm="col",Am="row",Pm="column",Dm="color",Rm="shape",Im="size",Tm="detail",Nm="layers",Fm="transform",jm="ordinal",Lm="linear",Bm="left",zm="right",Hm="top",Wm="bottom",Vm="retinal",Um="cell",Gm="xAxes",qm="yAxes",Ym="entryCell",Xm="initialized",$m="exitCell",Km="axis",Qm="unit",Zm="updated",Jm="beforeupdate",tb="valueMatrix",eb="facet-headers",nb="radius",rb="angle",ib="angle0",ab="arc",ob="categorical",cb="temporal",ub="bar",sb="line",lb="point",fb="Primary",hb="Secondary",db="both",pb="interaction",gb="gridLines",vb="gridBands",yb="header",mb="rowFacetHeader",bb="columnFacetHeader",xb="facet",_b="table",wb="default",kb="asc",Sb="desc",Mb="dark",Eb="none",Ob="normal",Cb="darker",Ab=70,Pb="muze",Db=function(t){var e=t.config().minOuterRadius,n=t._domain;if(t._range.length){var r=t._scale,i=r.invert(e)-r.invert(0);t._domain=[n[0]-i,n[1]],r.domain(t._domain)}},Rb=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};gg()(this,t),this._id=gs(),qs(this,rm),this._range=[],this._radiusFactor=1,this._config=Js({},this.constructor.defaultConfig()),this.config(e),this._scale=this.createScale({scale:Lm})}return yg()(t,[{key:"config",value:function(){if(arguments.length){var t=Js(this.config(),arguments.length<=0?void 0:arguments[0]);return this._config=t,this}return this._config}},{key:"createScale",value:function(t){return Bv({type:t.scale,range:this.range()})}},{key:"domain",value:function(){if(arguments.length){var t=this.config(),e=t.domain,n=Ly(e,arguments.length<=0?void 0:arguments[0],this);n=ws(n),this._scale.domain(n),this._domain=n,Db(this)}return this._domain}},{key:"getInnerRadius",value:function(t){return void 0===t?this.range()[0]:this._scale(t)}},{key:"getOuterRadius",value:function(t){return void 0===t?this.range()[1]:this._scale(t)*this._radiusFactor}},{key:"range",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=this.config(),i=r.padding,a=r.range,o=e[0].map((function(t,e){return t+(e?-i[e]:i[e])})),c=Ly(a,o,this);this._range=c,this._scale.range(c),Db(this)}return this._range}},{key:"setRadiusFactor",value:function(t){return this._radiusFactor=t,this}}],[{key:"defaultConfig",value:function(){return{padding:[0,1],minOuterRadius:10}}}]),t}(),Ib=(by={},rv()(by,"dimension",hv),rv()(by,"measure",fv),rv()(by,"temporal",dv),function(){function t(e,n){gg()(this,t),this._data=null,this._sourceDm=e,this._config=n,this._domain={}}return yg()(t,[{key:"getDomain",value:function(t,e){var n=t.field,r=t.fieldAs,i=e.field,a=e.fieldAs,o=this._sourceDm.getDomain(n,r);if(i){var c=this._sourceDm.getDomain(i,a);return[Math.min(o[0],c[0]),Math.max(o[1],c[1])]}return o}},{key:"getData",value:function(){return this._data}},{key:"getUniqueValues",value:function(){return this._data.filter((function(t){return t.keys})).map((function(t){return t.keys.join(",")}))}},{key:"isSortedDomain",value:function(){return!1}}]),t}()),Tb=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r){var i;gg()(this,n),i=e.call(this,t,r);var a,o,c,u,s=r.uniqueField,l=r.value,f=r.sortConfig,h=s.field,d=s.as,p=l.field;if(t.isEmpty())i._data=[{values:[]}],i._domain[h]=[];else{if(!r.groupBy.length)throw new Error("Minimum one field is needed to stack by");if(!p)throw new Error("Need one value field for stack transform");var g=(a=r.groupBy,o=t,u=0,a.forEach((function(t){var e=o.getDomain(t).length;e>u&&(u=e,c=t)})),c),v=t.constructor.DataModel().DataWranglers,y=Us(f,p)||"",m=Us(f,g),b=Us(f,h),x=!!Us(f,"autoSort","disabled");y||x||(t=t.sort([[h,b||"asc"],[g,"desc"===m?"asc":"desc"]]));var _=v.stackBy(t.model,h,g,p,y),w={},k=t.getUidMap(),S=t.getData(),M=S.data,E=S.schema,O=t.getDomain(g,"discrete"),C=new Set,A=new Set;_.y0.forEach((function(e,n){var r=_.id[n],i=k[r],a=t.getValueAtIndex(g,i),o=t.getValueAtIndex(h,i);w[a]||(w[a]=[]),w[a].push({values:[_.y0[n],_.y1[n]],rowId:r,data:M[i],uniqueVal:o}),A.add(o),C.add("".concat(a,"-").concat(o))}));var P=!1;if(_.id.length<A.size*O.length&&A.forEach((function(e){O.forEach((function(n){if(!C.has("".concat(n,"-").concat(e))){var r=E.reduce((function(t,r,i){var a=r.name;return t[i]=a===g?n:a===h?e:bt.Invalid(null),t}),[]);P=!0,w[n].push({values:[bt.Invalid(null),bt.Invalid(null)],rowId:r[t.getFieldIndex(ut.ROW_ID)],data:r,uniqueVal:e})}}))})),P&&"continuous"===d)for(var D in w)w[D].sort((function(t,e){return t.uniqueVal-e.uniqueVal}));i._data=O.map((function(t){return{key:t,keys:[t],values:w[t]}})),i._domain[h]="continuous"===d?t.getDomain(h,d):dg()(A),i._domain[p]=[Math.min(xs(_.y0),xs(_.y1)),Math.max(bs(_.y0),bs(_.y1))],y||x||t.dispose()}return i}return yg()(n,[{key:"getDomain",value:function(t){var e=t.field;return this._domain[e]}},{key:"isSortedDomain",value:function(){return!!this._config.sort}}]),n}(Ib),Nb=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r){var i;if(gg()(this,n),i=e.call(this,t,r),t.isEmpty())i._data=[{values:[]}];else{var a=r.groupBy instanceof Array?r.groupBy:[r.groupBy],o=t.getSchema();if(void 0!==a.map((function(t){return o.findIndex((function(e){return e.name===t}))})).find((function(t){return-1===t})))throw new Error("Groupby field ".concat(a," not found in schema"));var c=t.splitByRow(a);i._data=c.map((function(t){var e,n=t.getData().data,i=r.groupBy.map((function(e){return t.getValueAtIndex(e,0)}));return n.keys=i.map((function(t){return bt.getActualValue(t)})),r.groupBy.length&&(e=t.getValueAtIndex(r.groupBy[0],0),n.key=bt.getActualValue(e)),t.dispose(),{keys:i,key:e,values:n}}))}return i}return n}(Ib),Fb=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getUniqueValues",value:function(){return[0]}},{key:"getData",value:function(){var t=this._sourceDm;return this._data||(t.isEmpty()?this._data=[{values:[]}]:this._data=[{values:t.getData().data}]),this._data}}]),n}(Ib),jb=(xy={},rv()(xy,"identity",Fb),rv()(xy,"group",Nb),rv()(xy,"stack",Tb),xy);function Lb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bb(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lb(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lb(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var zb=l.BAND,Hb=l.LINEAR,Wb=l.TIME,Vb=ft.DISCRETE,Ub=function(t,e,n,r,i){var a=e.meta,o=zs(a.currentState[i][n],a.originalState[n]),c=t.transformColor(o,r);return a.currentState[i][n]=c.hsla,c},Gb=function(t,e,n){var r={};return n.forEach((function(n){var i=Us(t,n,"field"),a=Us(t,n,"as"),o=i&&e.getField(i);r["".concat(n,"Field")]=i,r["".concat(n,"FieldAs")]=a,r["".concat(n,"FieldIndex")]=e.getFieldIndex(i),r["".concat(n,"FieldType")]=o&&o.type(),r["".concat(n,"FieldSubType")]=o&&o.subtype()})),r},qb=function(t,e){var n=[jg.X,jg.Y,jg.X0,jg.Y0,jg.RADIUS,jg.RADIUS0,jg.ANGLE,jg.ANGLE0,Dg,Rg,Pg,Ig];return Gb(t,e,n)},Yb=function(t,e,n){var r=e.connectNullData,i=n.type,a=n.groupBy,o=n.sort,c=n.offset,u=n.orderBy,s=n.value;return function(t,e,n){var r=jb[t];if("function"!=typeof r)throw new Error("Invalid transform type supplied.");return new r(e,n)}(i,t,{groupBy:a,sortConfig:o,offset:c,orderBy:u,uniqueField:n.uniqueField,connectNullData:r,value:s})},Xb=function(t,e,n,r){var i=r.config().individualClassName,a="";return i instanceof Function&&(a=i(t,e,n,r)),a},$b=function(t,e,n,r){var i=e.xField,a=e.yField,o=e.xFieldIndex,c=e.yFieldIndex,u=e.x0FieldIndex,s=e.y0FieldIndex,l=e.radiusFieldIndex,f=e.angleFieldIndex,h=e.angleField,d=e.colorField,p=e.colorFieldIndex,g=e.radius0FieldIndex,v=e.angle0FieldIndex,y=r.type,m=r.uniqueField,b=[[i,o,"x"],[a,c,"y"]].find((function(t){return t[0]===(m&&m.field)})),x=Us(b,1),_=Us(b,2),w=n.getFieldNames();return t.getData().map((function(t){return t.values.map((function(t){var r,i={};if(y===Mg){var a,m,b,k;r=t.data||[];var S=fg()(t.values,2),M=S[0],E=S[1];E>=M?(a=k=E,b=m=M):(a=k=M,b=m=E),"y"===_?i={x:b,x0:k,y:r[x],y0:r[x]}:"x"===_&&(i={x:r[x],x0:r[x],y:a,y0:m}),i.source=r,i.rowId=t.rowId}else r=t,(i={x:t[o],x0:t[u],y:t[c],y0:t[s]}).source=t,i.rowId=t[t.length-1];i=Bb(Bb({},i),{},{radius:t[l],angle:h?t[f]:d?t[p]:1,radius0:t[g],angle0:t[v]}),[Dg,Rg,Pg,Ig].forEach((function(t){var n=r[e["".concat(t,"FieldIndex")]];i[t]=n}));var O=i.source;return i.dataObj=w.reduce((function(t,e){return t[e]=O[n.getFieldIndex(e)],t}),{}),i}))})).filter((function(t){return t.length}))},Kb=function(t,e){var n=e.encodingFieldsInf();return $b(t,n,e.data(),e._transformConfig)},Qb=function(t,e){var n=e.encodingFieldsInf(),r=n.xField,i=n.xFieldAs,a=n.yField,o=n.yFieldAs,c=n.x0Field,u=n.x0FieldAs,s=n.y0Field,l=n.y0FieldAs,f={};return r&&(f.x=t.getDomain({field:r,fieldAs:i},{field:c,fieldAs:u})),a&&(f.y=t.getDomain({field:a,fieldAs:o},{field:s,fieldAs:l})),f},Zb=function(t){var e=t.update;return{x:e.x,y:e.y}},Jb=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zb;t.data((n=[]).concat.apply(n,dg()(e)).map((function(t){var e=r(t);return{x:e.x,y:e.y,data:t}})))},tx=function(t,e,n){for(var r in e)({}).hasOwnProperty.call(e,r)&&t.style(r,n?null:e[r])},ex=function(t,e){var n,r,i=e.transition,a=e.groupAnimateStyle,o=i.duration,c=i.effect,u=i.disabled;a&&(xp(t.node(),a.enter),r=a.update,n=u?t:t.transition().ease(Os[c]).duration(o).on("end",(function(){tx(hp(this),r,!0)})),tx(n,r))},nx=function(t,e){var n=t.encodingTransform();return n?n(e,t,{smartLabel:t._dependencies.smartLabel}):e},rx=function(t,e){var n=t.getUnitWidth(),r=t.scale(),i=r.range(),a=r.domain();return n||Math.abs(i[1]-i[0])/Math.abs(a[1]-a[0])*e},ix=function(t,e){var n=t.encodingFieldsInf(),r=t.axes(),i=t.transformType(),a=t.config(),o=bt.FieldSubtype.TEMPORAL;return["x","y"].map((function(c){var u=0,s=0,f=0,h=[];if(r[c]&&r[c].constructor.type()===l.BAND||n["".concat(c,"FieldSubType")]===o){var d,p=n["".concat(c,"FieldSubType")]===o?t.dataProps().timeDiffs[c]:0,g=r[c],v=a["pad".concat(c.toUpperCase())],y=a.innerPadding,m=e,b=g.scale();s=rx(g,p);var x=g.constructor.type()===zb,_=g.config().padding;if("group"===i){var w=t.getBandScale(),k=x?0:_*s/2;w.range([k,s-k]).domain(m).paddingInner(y),u=w.bandwidth(),d=s-(x?0:_*s),h=m.map((function(t){return w(t)-(x?0:s/2)}))}else if(void 0!==v){var S;if(x){var M=b.step();S=b.padding()*M,u=b.bandwidth()+S}else u=s;h=m.map((function(){return x?-S/2:-u/2}))}else d=u=s-(f=x?0:_*s),h=m.map((function(){return x?0:-u/2}));s=d,f=x?_*g.scale().step():_*s}return{span:u,offsetValues:h,groupSpan:s,padding:f}}))},ax=function(t){var e=t.mount();e&&(t.render(e),t.dependencies().throwback.commit(st.ON_LAYER_DRAW,!0,t.metaInf().parentNamespace))},ox=function(t){var e=t.config(),n=t.encodingFieldsInf(),r=e.transform.groupBy,i=t.resolveDetailEncodingFields();return function(t,e,n,r){var i=bt.FieldType.DIMENSION,a=t.xField,o=t.yField,c=t.xFieldAs,u=t.yFieldAs,s=t.xFieldType,l=t.yFieldType,f=t.sizeField,h=["xField","yField"].find((function(e){return t["".concat(e,"Type")]===i})),d=f&&t.sizeFieldType===i,p=!(!Array.isArray(r)||!r.length);return[!a,!o,!(n||d||p),!(!n||!e.data().isMeasure(n)),s===i&&l===i,h&&t[h]===n,h&&t[h]===f&&d,[c,u].every((function(t){return t===Vb}))]}(n,t,r,i).some((function(t){return t}))?Og:null},cx=function(t){return ox(t)||t.config().transform.type},ux=function(t){var e=ox(t);if(e)return e;var n=t.encodingFieldsInf(),r=n.xField,i=n.yField,a=n.xFieldType,o=n.yFieldType,c=bt.FieldType.MEASURE,u=t.config().transform.groupBy,s=!!Us(t._customConfig,"transform","type"),l=t.config().transform.type;if(!s&&u&&a!==o){var f=a===c?r:i;l=Yl(t.data(),[f])[f]===zg?Mg:Eg}return l},sx=function(t,e){var n=bt.FieldType.DIMENSION;return t.filter((function(t,r){return e[r]&&e[r].type===n})).join()},lx=function(t,e,n,r){var i={},a=t.values,o=r.config().encoding;for(var c in a){var u=Us(o[c],"value");i[c]=u instanceof Function?u(a,e,n,r):a[c]}return i},fx=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{originalStyle:Object.assign({},{styles:t},e),currentState:new Map,lastInteraction:[]}},hx=function(t,e,n,r){return t*Math[e](n)+r},dx=function(t,e,n,r){return{x:hx(t,"cos",e,n),y:hx(t,"sin",e,r)}},px=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.width/2,i=e.height/2,a=0,o=t.length;a<o;a++){var c=t[a],u=c.update,s=u.angle,l=u.radius,f=u.radius0,h=u.angle0;if(c.update=dx(l,s,r,i),n){var d=c.update=dx(f,h,r,i),p=dx(l,s,r,i),g=p.x,v=p.y;d.x0=g,d.y0=v}}return t},gx=function(t){return t.constructor.type()===zb},vx=function(t){return t.constructor.type()===Wb},yx=function(t,e){var n=function(t){var e=t.x,n=t.y,r=e,i="x";return(gx(n)&&!gx(e)||vx(n)&&!vx(e))&&(r=n,i="y"),{sortAxis:r,sortCoord:i}}(e),r=n.sortAxis,i=n.sortCoord;if(r.constructor.type()===zb){var a=r.domain().reduce((function(t,e,n){return t[e]=n,t}),{});t.sort((function(t,e){return a[t[i]]-a[e[i]]}))}else r.constructor.type()===Hb&&t.sort((function(t,e){var n=Number.parseFloat(t[i]),r=Number.parseFloat(e[i]);return n!=n?-r:r!=r?n:n-r}));return t},mx=function(t){return t.map((function(t){var e=t.update,n=e.x,r=e.y;return{minX:n,maxX:n,minY:r,maxY:r,data:t.data}}))},bx=function(t,e,n){var r=n||hp(e.target).data()[0];if(ps(r)&&Us(r,"meta","layerId")===t.id()){var i=r&&r.source,a=null;return i&&(a=t.getIdentifiersFromData(i,r.rowId)),{point:r,id:a,layerId:t.id()}}return null},xx=function(t){return t.filter((function(e,n){return!(!t[n]||null===t[n].update.y||null===t[n].update.x||(0===n?t[n+1]&&null!==t[n+1].update.y&&null!==t[n+1].update.x:n===t.length-1?t[n-1]&&null!==t[n-1].update.y&&null!==t[n-1].update.x:null!==t[n+1].update.y&&null!==t[n+1].update.x||null!==t[n-1].update.y&&null!==t[n-1].update.x))}))};function _x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_x(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kx=function(t,e,n){var r,i=e.datum,a=e.datumStyle,o=e.colorMap;if("function"==typeof t){if("number"!=typeof a){var c=Oe(a),u=t(c,i,n),s=u.diff;r=u.value||lf(c,s,n,o)}else r=r(parseFloat(a,10),i,n);return r}return t},Sx=function(t,e,n,r){var i=r.interactionType,a=r.apply,o=r.reset,c=void 0!==o&&o,u=e.data()[0],s=u.meta,l=s.currentState,f=s.originalStyle,h=s.lastInteraction,d=!0,p=l.get(i);if(a===!!p)return!1;var g={},v=n.style,y=n.strokePosition,m=y;if(c&&l.clear(),t.colorMap||(t.colorMap=new Map),a){var b={styles:{},strokePosition:y};for(var x in v){var _=kx(v[x],{datum:u,datumStyle:e.style(x),colorMap:t.colorMap},a);b.styles[x]=_}l.set(i,b),h.push(i),g=b.styles}else if(p||c){l.delete(i),h.splice(h.indexOf(i),1);var w=function(t,e,n){var r,i=t.originalStyle,a=t.currentState,o=Object.assign({},i);return a.size>0&&(e=(r=n)[r.length-1],o=a.get(e)||{}),o}(u.meta,i,h);g=wx(wx({},f.styles),w.styles),m=w.strokePosition||f.strokePosition}else d=!1;return d&&t.applyStyles({styleObj:g,elem:e,datum:u,applicableStrokePos:m},r),!0},Mx="drag",Ex="hover",Ox="selectiondrag",Cx="click",Ax="longtouch",Px="touchdrag",Dx="*";function Rx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ix=function(t,e){var n={};for(var r in e)({}).hasOwnProperty.call(r,e)||(n[r]=e[r](t));return n},Tx=function(t,e){var n;n=e[0]instanceof Set||e[0]instanceof Array?e:[e],t=Cl(t);var r=n.map((function(t){return t instanceof Set?t:new Set(t)})),i=new Set;return t.forEach((function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Rx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rx(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(t);try{var a=function(){var t=e.value;r.every((function(e){return!e.has(t)}))&&i.add(t)};for(n.s();!(e=n.n()).done;)a()}catch(t){n.e(t)}finally{n.f()}})),i},Nx=function(t,e){if(t){var n=e.data(),r=[],i=t.range,a=t.dimensions,o=t.uids;if(o)r=o;else if(i){var c=n.select(n.getFilterRangeQuery(i));r=c.getUids(),c.dispose()}else a&&(r=function(t,e){for(var n=t[0],r=n.reduce((function(t,e,n){return t[e]=n,t}),{}),i=new Set,a=n,o=n.find((function(t){return t===ut.ROW_ID})),c=e(a),u=function(e,n){var u=t[e];if(o)i.add(u[r[o]]);else{var s=a.map((function(t){return u[r[t]]})),l=c[s];l&&l.forEach((function(t){i.add(t)}))}},s=1,l=t.length;s<l;s++)u(s);return dg()(i)}(a,e._dimsMapGetter));return r}return null},Fx=function(t,e,n){var r=n._actionBehaviourMap;for(var i in r)if(i===e){var a=r[i];a.behaviours=a.behaviours.filter((function(e){return e!==t}))}},jx=function(t,e,n){var r=n._behaviourEffectMap;r[e]=r[e].filter((function(e){return(e.name||e)!==t}))},Lx=function(){function t(e,n,r,i){gg()(this,t),this.context=e,this._childFirebolts=[],this._onMatrixCreated=[],this._sideEffectDefinitions={},this._sideEffects={},this._actions={behavioural:{},physical:{},physicalActionDefs:{},behaviourDefs:{}},this._propagationBehaviourMap={},this._actionBehaviourMap={},this._propagationInf={},this._config={},this._behaviourEffectMap={},this._queuedSideEffects={},this._handlers={},this._payloadGenerators={},this._propagationHandler=null,this.mapSideEffects(i),this.registerBehaviouralActions(n.behavioural),this.registerSideEffects(r),this.registerPhysicalBehaviouralMap(n.physicalBehaviouralMap),this.registerPhysicalActions(n.physical);var a={};for(var o in this._actions.behavioural)a[o]=[o];this.registerPropagationBehaviourMap(a)}return yg()(t,[{key:"config",value:function(){return arguments.length?(this._config=Js(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"mapSideEffects",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this._behaviourEffectMap;for(var r in t){var i=t[r]||[];i=i.map((function(t){return ps(t)?Js({},t):{name:t}})),!n[r]&&(n[r]=[]),n[r]=dg()(new Set(e?[].concat(dg()(n[r]),dg()(i)):i))}return this._childFirebolts.forEach((function(e){e.mapSideEffects(t)})),this}},{key:"registerBehaviouralActions",value:function(t){Object.assign(this._actions.behaviourDefs,t);var e=function(t,e){var n={};return(e=e instanceof Array?e:Object.values(e)).forEach((function(e){var r=e.formalName();n[r]=new e(t),t.registerPropagationBehaviourMap(rv()({},r,[r]))})),n}(this,t);return Object.assign(this._actions.behavioural,e),this}},{key:"registerSideEffects",value:function(t){for(var e in t)this._sideEffectDefinitions[t[e].formalName()]=t[e];return this.initializeSideEffects(),this}},{key:"applySideEffects",value:function(t,e,n,r){var i=this;return t.forEach((function(t){var a=t.name,o=Object.assign({},t.options||{},{behaviour:r});i.dispatchSideEffect(a,e,n,o)})),this}},{key:"dispatchSideEffect",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.sideEffects(),a=i[t],o=r.setTransform;e=o?o(e,n,a):e,a.apply(e,n,r)}},{key:"disposeSelectionSets",value:function(){var t=this._actions.behavioural;for(var e in t)t[e].dispose()}},{key:"dispose",value:function(){Object.entries(this._sideEffects).forEach((function(t){var e=fg()(t,2),n=e[0],r=e[1];"tooltip"!==n&&"fragmented-tooltip"!==n||r.dispose()}))}},{key:"registerPropagationBehaviourMap",value:function(t){var e=this._propagationBehaviourMap;for(var n in t)if(n in e){var r=t[n]instanceof Array?t[n]:[t[n]];e[n]=dg()(new Set([].concat(dg()(e[n]),dg()(r))))}else e[n]=t[n];return this}},{key:"dispatchBehaviour",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=void 0===n.propagate||n.propagate,a=this.getBehaviouralAction(t);return this._propagationInf=n,!(!a||!a.shouldApply(e,n)&&!r||(e.action=t,a.dispatch(e),i&&a.propagate()&&this.propagate(t,e,a.propagationIdentifiers()),this.dispatchSideEffects(t,e,n),0))}},{key:"dispatchSideEffects",value:function(t,e,n){var r=this._behaviourEffectMap[t],i=this.getApplicableSideEffects(r,e,n);this.applySideEffects(i,this.getEntryExitSet(t),e,t)}},{key:"propagate",value:function(){return this}},{key:"sideEffects",value:function(){return arguments.length?(this._sideEffects=arguments.length<=0?void 0:arguments[0],this):this._sideEffects}},{key:"dissociateBehaviour",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){Fx.apply(void 0,dg()(e).concat([t]))})),this._childFirebolts.forEach((function(t){t.dissociateBehaviour.apply(t,n)})),this}},{key:"dissociateSideEffect",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){jx.apply(void 0,dg()(e).concat([t]))})),this._childFirebolts.forEach((function(t){t.dissociateSideEffect.apply(t,n)})),this}},{key:"getApplicableSideEffects",value:function(t,e,n){var r=this.sideEffects();return(e.sideEffects?e.sideEffects:t).filter((function(t){return r[t.name]&&r[t.name].shouldApply(e,n)}))}},{key:"attachPropagationListener",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.onDataModelPropagation();return t.unsubscribe(this._propagationHandler),t.onPropagation(e),this._propagationHandler=e,this}},{key:"onDataModelPropagation",value:function(){var t=this;return function(e){var n=e.payload,r=n.action;t.dispatchBehaviour(r,n,{propagate:!1})}}},{key:"createSelectionSet",value:function(t){var e=this._actions.behavioural;for(var n in e)e[n].createSelectionSet(t);return this}},{key:"initializeSideEffects",value:function(){var t,e,n,r=this._sideEffectDefinitions;return this.sideEffects((e=r,n=(t=this)._sideEffects,(e=e instanceof Array?e:Object.values(e)).forEach((function(e){var r=e.formalName(),i=e.target()instanceof Array?e.target():[e.target()];if(i.includes(t.target())||i.includes("all")){var a=n[r];n[r]=a||new e(t)}})),n)),this}},{key:"target",value:function(){return"all"}},{key:"registerPhysicalActions",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this;Object.assign(this._actions.physicalActionDefs,t);var n=Ix(e,t);return Object.assign(this._actions.physical,n),this}},{key:"setPropagationFields",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._actions.behavioural;if(t===Dx)for(var i in r)r[i].propagateWith(e,n);else r[t].propagateWith(e,n);return this}},{key:"propagateWith",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._childFirebolts;this.setPropagationFields(t,e,n),r.forEach((function(r){r.propagateWith(t,e,n)}))}},{key:"mapActionsAndBehaviour",value:function(t){var e=this._actions.physical,n=this._actionBehaviourMap;for(var r in n)if(!{}.hasOwnProperty.call(r,n)&&r===(t||r)){var i=void 0,a=n[r];i=a.target;var o=a.touch;i||(i=this.context.getDefaultTargetContainer()),(Pp()?!0===o||void 0===o:!o)&&this.bindActionWithBehaviour(e[r],i,a.behaviours)}return this.registerPhysicalActionHandlers(),this}},{key:"registerPhysicalBehaviouralMap",value:function(t){return this._actionBehaviourMap=Js(this._actionBehaviourMap,t),this._childFirebolts.forEach((function(e){e.registerPhysicalBehaviouralMap(t)})),this}},{key:"bindActionWithBehaviour",value:function(t,e,n){var r=this;return"string"==typeof e&&(e=[e]),e.forEach((function(e){var i=r.context.mount(),a=e.node instanceof Function?e:hp(i).selectAll(e);a.empty()||(a instanceof Array?a.forEach((function(e){t(hp(e),n)})):t(a,n))})),this}},{key:"getPropagationInf",value:function(){return this._propagationInf}},{key:"getAddSetFromCriteria",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null===t?{model:null,uids:null}:{model:e.data?e.data:null,uids:Nx(t,this)}}},{key:"getFullData",value:function(){return this.context.data()}},{key:"data",value:function(){return this.context.data()}},{key:"currentData",value:function(){return this.data()}},{key:"triggerPhysicalAction",value:function(t,e){var n=this._handlers[t]||[],r=this._handlers["*"];return[].concat(dg()(Object.values(n)),dg()(Object.values(r))).forEach((function(n){n(t,e)})),this}},{key:"onPhysicalAction",value:function(t,e,n){return!this._handlers[t]&&(this._handlers[t]={}),this._handlers[t][n]=e,this}},{key:"registerPhysicalActionHandlers",value:function(){var t=this;this.onPhysicalAction("*",(function(e,n){t._actionBehaviourMap[e].behaviours.forEach((function(e){t.dispatchBehaviour(e,n)})),t._criteria=n.criteria}))}},{key:"id",value:function(){return this.context.id()}},{key:"payloadGenerators",value:function(){return arguments.length&&Object.assign(this._payloadGenerators,arguments.length<=0?void 0:arguments[0]),this._payloadGenerators}},{key:"getPayloadGeneratorFor",value:function(t){var e=this._payloadGenerators.__default,n=this._payloadGenerators[t];return zs(n,e)}},{key:"getPayload",value:function(t){return this._actions.behavioural[t].getPayload()}},{key:"actions",value:function(){return this._actions}},{key:"getBehaviouralAction",value:function(t){return this._actions.behavioural[t]}},{key:"getSideEffectInstance",value:function(t){return this._sideEffects[t]}},{key:"getEntryExitSet",value:function(t){return this.getBehaviouralAction(t).entryExitSet()}},{key:"getSelectionSet",value:function(t){return this.getBehaviouralAction(t).getSelectionSet()}},{key:"onPropagationDone",value:function(t){this._onPropagationDone=t}},{key:"applyPropagationPolicy",value:function(t){var e=t.behaviours,n=t.sideEffects;(function(t,e){var n=e.behaviours,r=e.sideEffects,i=function(t,e){var n={};return Object.keys(e.actions().behavioural).forEach((function(e){var r=zs(t[e],t["*"]);r&&(n[e]=r)})),n}(n,t);for(var a in i){var o;t.getBehaviouralAction(a).setApplyChecker((o={},rv()(o,a,i[a]),rv()(o,"*",n["*"]),o))}var c=function(t,e){var n={};return Object.keys(e.sideEffects()).forEach((function(e){var r=zs(t[e],t["*"]);r&&(n[e]=r)})),n}(r,t);for(var u in c){var s;t.getSideEffectInstance(u).setApplyChecker((s={},rv()(s,u,c[u]),rv()(s,"*",r["*"]),s))}})(this,{behaviours:e,sideEffects:n}),this._childFirebolts.forEach((function(t){t.applyPropagationPolicy({behaviours:e,sideEffects:n})}))}}]),t}(),Bx=function(t,e,n){if(!(t=t.filter((function(t){return t&&t.getRowsCount()}))).length)return null;for(var r=new Map,i=0;i<t.length;i++)t[i].getSchema().forEach((function(t){t.name!==ut.ROW_ID&&r.set(t.name,t)}));for(var a=[],o=function(e){for(var n=t[e],i=n.getRowsCount(),o=function(t){var e=[];r.forEach((function(r,i){var a=n.getValueAtIndex(i,t);e.push(a)})),a.push(e)},c=0;c<i;c++)o(c)},c=0;c<t.length;c++)o(c);var u=a.length?Yu(a):[[]],s=dg()(r.values()),l=[],f=[];if(u.forEach((function(t,e){t.every((function(t){return null===t}))||(l.push(s[e]),f.push(t))})),e&&f.length){var h=f[0].length,d=function(t){l.find((function(e){return e.name===t}))||(f.push(new Array(h).fill().map((function(){return e[t]}))),l.push({name:t,type:"dimension"}))};for(var p in e)d(p)}var g=new bt({data:f.length?f:[[]],schema:l});return g.model._alias=n,g},zx=function(t){var e=new Set;return t.forEach((function(t){t.forEach((function(t){e.add(t)}))})),e},Hx=function(t,e){return t.reduce((function(t,n){return t+e(n)}),0)},Wx={mergedEnter:function(t){return zx(t.getEntrySet())},mergedExit:function(t){return zx(t.getExitSet())},oldEntry:function(t){return t.getEntrySet()[0]},oldExit:function(t){return t.getExitSet()[0]},newEntry:function(t){return t.getEntrySet()[1]},newExit:function(t){return t.getExitSet()[1]},complete:function(t){return t.getCompleteSet()}},Vx=function(){function t(e){var n=e.selectionSet,r=e.type,i=e.data,a=e.fullData,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gg()(this,t),this._selectionSet=n,this._uids=null,this._type=r,this._model=null,this._data=i,this._config=o,this._fullData=a}return yg()(t,[{key:"uids",get:function(){if(!this._uids){var t=this._type;this._uids=Wx[t](this._selectionSet)}return this._uids}},{key:"model",get:function(){if(!this._model){var t=this._data;t instanceof Function&&(this._model=t(this._type,this.uids,this._fullData),this._model&&(this._model.alias=this._config.alias,this._model.action=this._config.action))}return this._model}},{key:"length",get:function(){return"mergedEnter"===this._type?this._selectionSet.getEntrySetLength():"mergedExit"===this._type?this._selectionSet.getExitSetLength():this._selectionSet.getCompleteSetLength()}},{key:"aggFns",get:function(){return Yl(this._model)}},{key:"dispose",value:function(){this._model&&this._model.dispose()}}]),t}(),Ux=function(){function t(e){var n=e.selectionSet,r=e.data,i=e.action,a=e.alias,o=e.fullData;gg()(this,t),this._data=r,this._action=i,this._selectionSet=n,this._alias=a,this._fullData=o,this._sets={entrySet:[this.createAtomicSet("oldEntry"),this.createAtomicSet("newEntry")],exitSet:[this.createAtomicSet("oldExit"),this.createAtomicSet("newExit")],mergedEnter:this.createAtomicSet("mergedEnter",{alias:a,action:i}),mergedExit:this.createAtomicSet("mergedExit",{alias:a,action:i}),completeSet:this.createAtomicSet("complete")}}return yg()(t,[{key:"createAtomicSet",value:function(t,e){return new Vx({selectionSet:this._selectionSet,type:t,data:this._data,fullData:this._fullData},e)}},{key:"mergedEnter",get:function(){return this._sets.mergedEnter}},{key:"mergedExit",get:function(){return this._sets.mergedExit}},{key:"entrySet",get:function(){return this._sets.entrySet}},{key:"exitSet",get:function(){return this._sets.exitSet}},{key:"completeSet",get:function(){return this._sets.completeSet}},{key:"dispose",value:function(){this._sets.mergedEnter.dispose(),this._sets.mergedExit.dispose()}}]),t}(),Gx=function(){function t(e,n){var r=n.extraData,i=n.alias,a=n.action,o=n.propagatedDm;gg()(this,t),this._entryExitSets=e,this._mergedEnter=null,this._mergedExit=null,this._entrySet=null,this._exitSet=null,this._extraData=r,this._alias=i,this._action=a,this._propagatedDm=o}return yg()(t,[{key:"composeSet",value:function(t){return{uids:zx(this._entryExitSets.map((function(e){return e[t].uids}))),model:Bx(this._entryExitSets.map((function(e){return e[t].model})),this._extraData,this._alias),length:Hx(this._entryExitSets.map((function(e){return e[t]})),(function(t){return t.length}))}}},{key:"mergedEnter",get:function(){return this._mergedEnter||(this._mergedEnter=this.composeSet("mergedEnter",this._extraData)),this._mergedEnter}},{key:"mergedExit",get:function(){return this._mergedExit||(this._mergedExit=this.composeSet("mergedExit",this._extraData)),this._mergedExit}},{key:"entrySet",get:function(){var t=this._entrySet,e="entrySet";return t||(this._entrySet=[{uids:zx(this._entryExitSets.map((function(t){return t[e][0].uids}))),length:Hx(this._entryExitSets.map((function(t){return t[e][0]})),(function(t){return t.length}))},{uids:zx(this._entryExitSets.map((function(t){return t[e][1].uids}))),length:Hx(this._entryExitSets.map((function(t){return t[e][1]})),(function(t){return t.length}))}]),this._entrySet}},{key:"exitSet",get:function(){var t="exitSet";return this._exitSet||(this._exitSet=[{uids:zx(this._entryExitSets.map((function(e){return e[t][0].uids}))),model:Bx(this._entryExitSets.map((function(e){return e[t][0].model}))),length:Hx(this._entryExitSets.map((function(e){return e[t][0]})),(function(t){return t.length}))},{uids:zx(this._entryExitSets.map((function(e){return e[t][1].uids}))),model:Bx(this._entryExitSets.map((function(e){return e[t][1].model}))),length:Hx(this._entryExitSets.map((function(e){return e[t][1]})),(function(t){return t.length}))}]),this._exitSet}},{key:"completeSet",get:function(){return this._completeSet||(this._completeSet={uids:zx(this._entryExitSets.map((function(t){return t.completeSet.uids}))),length:Hx(this._entryExitSets.map((function(t){return t.completeSet})),(function(t){return t.length}))}),this._completeSet}},{key:"dispose",value:function(){this._mergedEnter&&this._mergedEnter.model&&this._mergedEnter.model.dispose(!1),this._mergedExit&&this._mergedExit.model&&this._mergedExit.model.dispose(!1),this._propagatedDm&&this._propagatedDm.dispose(!1)}},{key:"propagatedDm",get:function(){return this._propagatedDm}}]),t}();function qx(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Yx(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yx(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function Yx(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xx,$x,Kx,Qx=function(t,e){if(Array.isArray(t))t.forEach(e);else{var n,r=qx(t);try{for(r.s();!(n=r.n()).done;)e(n.value)}catch(t){r.e(t)}finally{r.f()}}},Zx=function(){function t(e){var n=this,r=e.keys;gg()(this,t),this._set=new Set,r.forEach((function(t){n._set.add(t)})),this._entrySet=[new Set,new Set],this._exitSet=[new Set,new Set],this._resetted=!1}return yg()(t,[{key:"add",value:function(t){var e=fg()(this._entrySet,2)[1],n=fg()(this._exitSet,2),r=n[0],i=n[1];return Qx(t,(function(t){e.add(t),i.has(t)?i.delete(t):r.delete(t)})),this}},{key:"updateEntrySet",value:function(){var t,e=fg()(this._entrySet,2),n=e[0],r=e[1],i=qx(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.delete(a),n.add(a)}}catch(t){i.e(t)}finally{i.f()}}},{key:"updateExitSet",value:function(){var t,e=fg()(this._exitSet,2),n=e[0],r=e[1],i=qx(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.add(a),r.delete(a)}}catch(t){i.e(t)}finally{i.f()}}},{key:"getEntrySet",value:function(){return this._entrySet}},{key:"getExitSet",value:function(){return this._exitSet}},{key:"remove",value:function(t){var e=fg()(this._entrySet,2),n=e[0],r=e[1],i=fg()(this._exitSet,2)[1];return Qx(t,(function(t){i.add(t),r.has(t)?r.delete(t):n.delete(t)})),this}},{key:"reset",value:function(){return this._entrySet.forEach((function(t){return t.clear()})),this._exitSet.forEach((function(t){return t.clear()})),this}},{key:"resetted",value:function(){return!this.getEntrySetLength()&&!this.getExitSetLength()}},{key:"getEntrySetLength",value:function(){return this._entrySet.reduce((function(t,e){return e.size+t}),0)}},{key:"getExitSetLength",value:function(){return this._exitSet.reduce((function(t,e){return e.size+t}),0)}},{key:"getCompleteSet",value:function(){return this._set}},{key:"getCompleteSetLength",value:function(){return this._set.size}}]),t}(),Jx=function(){function t(e){var n=this;gg()(this,t),this.firebolt=e,this._selectionSet=null,this._cachedSets=[],this._applyChecker={},this._appendPropFields=!1,this._propagationIdentifiers=null,this.propagate(!0),this.setApplyChecker({source:function(t){if(t.sourceUnit===e.id()){var r=n._payload?n._payload.criteria:null;return!pf(r,t.criteria)}return!0}})}return yg()(t,[{key:"dispatch",value:function(t){var e=t.criteria,n=this.firebolt,r=this.getSelectionSet(),i=n.getPropagationInf(),a=this.getAddSetFromCriteria(e,this.firebolt.getPropagationInf(),t),o=a.model,c=a.uids;this._payload=t,t.uids=c||[],this.setSelectionSet(c,r,{filteredDataModel:o,payload:t}),!1!==i.propagate&&this.propagationIdentifiers(r,t),r.resetted()&&(this._propagationIdentifiers=null),this.entryExitSet(r,o,t)}},{key:"getSelectionSet",value:function(){return this._selectionSet}},{key:"getInitialSelectionSet",value:function(){return this._cachedSets[0]||this._selectionSet}},{key:"createSelectionSet",value:function(t){return this._selectionSet&&(this._cachedSets.length?this._cachedSets=[this._cachedSets[0],this._selectionSet]:this._cachedSets.push(this._selectionSet)),this._selectionSet=new Zx(t),this}},{key:"getAddSetFromCriteria",value:function(){var t;return(t=this.firebolt).getAddSetFromCriteria.apply(t,arguments)}},{key:"setSelectionSet",value:function(){return this}},{key:"entryExitSet",value:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length){var i=n[0],a=n[1];!this._entryExitSet||a instanceof Function||this._entryExitSet.dispose();var o=Us(this.firebolt.getPropagationInf(),"propPayload","sourceId");return this._entryExitSet=new Ux({selectionSet:i,data:function(e,n,r){var i=null;if(a instanceof Function)return a();if("complete"===e)return r;if("mergedEnter"===e&&o)(i=a?a.replica():null)&&(i.model._alias="".concat(t.constructor.name,"-layer"));else{var c=dg()(n);(i=c.length?r.select({field:ut.ROW_ID,value:c,operator:"in"}):r.createEmptyDm()).model._alias="layer",r.removeChild(i)}return i},fullData:this.firebolt.data(),action:this.constructor.formalName(),alias:this.firebolt.context.config().mark}),this}return this._entryExitSet}},{key:"propagationIdentifiers",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length){var r=null,i=e[0],a=e[1],o=a.criteria,c=this._propagationFields;if(null===o||i.resetted())r=null;else if(o.range)r={interpolated:!0,identifiers:o.range,fields:Object.keys(o.range).map((function(t){return{name:t}}))};else{var u=a.fields;c&&(u=this._appendPropFields?[].concat(dg()(a.fields),dg()(c)):c);var s=i.getEntrySet().map((function(t){return dg()(t)})).flat();r={fields:u.map((function(t){return{name:t}})),identifiers:s}}return this._propagationIdentifiers=r,this}return this._propagationIdentifiers}},{key:"propagateWith",value:function(t,e){return this._appendPropFields=!!e,this._propagationFields=t,this}},{key:"propagate",value:function(){return arguments.length?(this._propagate=arguments.length<=0?void 0:arguments[0],this):this._propagate}},{key:"runApplyChecker",value:function(t,e){return(0,this._applyChecker[t])({unitId:e.sourceUnit,layerId:e.layerId,canvasId:e.sourceCanvas,fields:e.fields,type:e.sourceType},{canvasId:this.firebolt.sourceCanvas(),unitId:this.firebolt.sourceUnit?this.firebolt.sourceUnit():null,layerId:this.firebolt.id(),fields:this.firebolt.data().getFieldNames()},e)}},{key:"shouldApply",value:function(t){var e=!0,n=this._applyChecker;for(var r in n)e=e&&this.runApplyChecker(r,t);return e}},{key:"setApplyChecker",value:function(t){return Object.assign(this._applyChecker,t),this}},{key:"removeApplyChecker",value:function(t){delete this._applyChecker[t]}},{key:"getPayload",value:function(){return this._payload}},{key:"reset",value:function(){return this.getSelectionSet().reset(),this._propagationIdentifiers=null,this}},{key:"dispose",value:function(){this._cachedSets.length=0,this._selectionSet&&this._selectionSet.reset();var t=this._entryExitSet;return t&&(t.dispose(),this._entryExitSet=null),this}},{key:"getDiffSet",value:function(t,e){return Tx(t,e)}},{key:"disposeEntryExitSet",value:function(){this._entryExitSet&&this._entryExitSet.dispose()}}],[{key:"mutates",value:function(){return!1}}]),t}(),t_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"setSelectionSet",value:function(t,e){var n=e.getEntrySet();if(null===t)e.reset();else if(t.length){var r=Tx(n,[t]),i=t.filter((function(t){return!n[0].has(t)&&!n[1].has(t)}));e.updateExitSet(),e.remove(r),e.updateEntrySet(),e.add(i),r=Tx([e.getCompleteSet()],[].concat(dg()(e.getEntrySet()),dg()(e.getExitSet()))),e.remove(r)}else{var a=Tx([e.getCompleteSet()],dg()(e.getExitSet()));e.remove(a)}}}]),n}(Jx),e_="brush",n_="highlight",r_="tooltip",i_="filter",a_="select",o_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).setApplyChecker({source:function(e,n,r){var i=t._payload?t._payload.criteria:null,a=t._payload?t._payload.target:null;return!(pf(i,r.criteria)&&pf(a,r.target))}}),t}return yg()(n,null,[{key:"formalName",value:function(){return n_}}]),n}(t_),c_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return e_}}]),n}(t_),u_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return i_}},{key:"mutates",value:function(){return!0}}]),n}(t_),s_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"setSelectionSet",value:function(t,e){return null===t?e.reset():t.length?this.firebolt.getPropagationInf().sourceId?(e.reset(),e.add(t)):e.add(t):e.remove(e.getCompleteSet()),this}}]),n}(Jx),l_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._applyChecker={source:function(){return!0}},t}return yg()(n,[{key:"setSelectionSet",value:function(t,e){var n=e.getEntrySetLength(),r=e.getExitSetLength();if(null===t)e.reset(),this.updateSelectionInStateStore({prevEntrySet:n,prevExitSet:r});else if(t.length){var i=this.firebolt.getPropagationInf(),a=fg()(e._entrySet,2),o=a[0],c=a[1],u=t.filter((function(t){return c.has(t)||o.has(t)}));if(i.sourceId){e.reset(),e.add(t);var s=Tx([e.getCompleteSet()],dg()(e.getEntrySet()));e.remove(s)}else{if(e.updateExitSet(),e.updateEntrySet(),u.length)e.remove(u);else if(e.add(t),!e.getExitSetLength()){var l=Tx([e.getCompleteSet()],[].concat(dg()(e.getEntrySet()),dg()(e.getExitSet())));e.remove(l)}this.updateSelectionInStateStore({prevEntrySet:n,prevExitSet:r}),this.firebolt.context.store().get("interactions.select.entrySet")||e.reset()}}else e.remove(e.getCompleteSet()),this.updateSelectionInStateStore({prevEntrySet:n,prevExitSet:r});return this}},{key:"updateSelectionInStateStore",value:function(t){var e=t.prevEntrySet,n=t.prevExitSet,r=this.firebolt.context.store(),i=this.getSelectionSet(),a=i.getEntrySetLength(),o=i.getExitSetLength(),c=r.get("interactions.select.entrySet")||0,u=r.get("interactions.select.exitSet")||0;r.commit("interactions.select.entrySet",c+(a-e)),r.commit("interactions.select.exitSet",u+(o-n))}},{key:"getAddSetFromCriteria",value:function(t,e,n){if(n.sourceLayer&&n.sourceLayer!==this.firebolt.id()){var r=this.entryExitSet();return r?{model:function(){return r.mergedEnter.model},uids:null===n.criteria?null:dg()(r.mergedEnter.uids)}:{model:null,uids:null===n.criteria?null:[]}}return this.firebolt.getAddSetFromCriteria(t,e,n)}}],[{key:"formalName",value:function(){return a_}}]),n}(s_),f_=function(t,e,n,r){var i,a,o={},c={},u=Cp();t.call(u().on("start",(function(){var t=Op();o={x:t.x,y:t.y},i=n.context.getDrawingContext(),a=(new Date).getTime()})).on("drag",(function(){var t=Op();if(c={x:t.x,y:t.y},!(r&&Math.abs(o.x-c.x)<=5)){c.x=Math.max(0,Math.min(c.x,i.width)),c.y=Math.max(0,Math.min(c.y,i.height));var a=Object.assign({},o),u=Object.assign({},c);if(o.x>c.x&&(a.x=c.x,u.x=o.x),o.y>c.y){var s=o.y;a.y=c.y,u.y=s}var l=n.getPayloadFromEvent("drag",{startPos:a,endPos:u},{event:t,isDragging:!0});n.triggerPhysicalAction(e,l)}})).on("end",(function(){var t=Op();c={x:t.x,y:t.y};var u=(new Date).getTime()-a;if(!(r&&u>100&&Math.abs(o.x-c.x)<=5)){if(c.x=Math.max(0,Math.min(c.x,i.width)),c.y=Math.max(0,Math.min(c.y,i.height)),o.x>c.x){var s=o.x;o.x=c.x,c.x=s}if(o.y>c.y){var l=o.y;o.y=c.y,c.y=l}var f=n.getPayloadFromEvent("drag",{startPos:o,endPos:c},{event:t,dragEnd:!0});f.target&&0===f.dragDiff||n.triggerPhysicalAction(e,f)}})))},h_=function(t,e,n,r){var i=n.context,a=Mp(i.getDrawingContext().svgContainer,e.touches?e.touches[0]:e);return n.getPayloadFromEvent(r,a,{data:t,event:e})},d_=function(t){return function(e){var n,r,i=t.context,a=function(e){t.triggerPhysicalAction(d.SELECTIONDRAG,e)},o=Cp();e.call(o().on("start",(function(){var t=Op();r=i.getDrawingContext(),n=t.subject})).on("drag",(function(){var e=Op();n.x+=e.dx,n.y+=e.dy;var i=r.width,o=r.height,c=Math.min(i-n.width,Math.max(n.x,0)),u=Math.min(o-n.height,Math.max(n.y,0)),s=u+n.height,l=c+n.width;if(c>=0&&l<=i&&u>=0&&s<=o){var f=t.getPayloadFromEvent(d.SELECTIONDRAG,{startPos:{x:c,y:u},endPos:{x:l,y:s}},{event:e,isDragging:!0});a(f)}})).on("end",(function(){var e=r.width,i=r.height,o=Math.min(e-n.width,Math.max(n.x,0)),c=Math.min(i-n.height,Math.max(n.y,0)),u=c+n.height,s=o+n.width;if(o>=0&&s<=e&&c>=0&&u<=i){var l=t.getPayloadFromEvent(d.SELECTIONDRAG,{startPos:{x:o,y:c},endPos:{x:s,y:u}},{event:event,dragEnd:!0});a(l)}})))}},p_=(Xx={},rv()(Xx,Mx,(function(t){return function(e){f_(e,Mx,t)}})),rv()(Xx,Ex,(function(t){return function(e){var n=function(e){var n=Op(),r=t.context,i=Mp(r.getDrawingContext().svgContainer,n),a=t.getPayloadFromEvent(Ex,i,{data:e,event:n});t.triggerPhysicalAction(Ex,a)};e.on("mouseover",n).on("mousemove",n).on("mouseout",(function(){t.triggerPhysicalAction(Ex,{criteria:null})}))}})),rv()(Xx,Cx,(function(t){return function(e){e.on("click",(function(e){var n=Op(),r=h_(e,n,t,Cx);r.event=n,t.triggerPhysicalAction(Cx,r)}))}})),rv()(Xx,Ax,(function(t){return function(e){var n,r;r=!1,n=Op(),e.on("touchstart",(function(e){n=Op(),r=!1,setTimeout((function(){r?t.triggerPhysicalAction(Ax,{criteria:null}):function(e){var r=h_(e,n,t,Ax);t.triggerPhysicalAction(Ax,r)}(e)}),100)})).on("touchend",(function(){r=!0}))}})),rv()(Xx,Px,(function(t){return function(e,n){f_(e,n,t,!0)}})),rv()(Xx,Ox,d_),Xx),g_="anchors",v_="tooltip",y_="brush-anchors",m_="persistent-anchors",b_="filter",x_="highlighter",__="crossline",w_="fragmented-tooltip",k_="axis-label-highlighter",S_={valueParser:{defaultValue:function(t){return t}}},M_=function(){function t(e){gg()(this,t),this.firebolt=e,this._strategy="default",this._config={},this._id=gs(),this._strategies={},this._enabled=!0,qs(this,S_),this.config(this.constructor.defaultConfig()),this._applyChecker={},this.setApplyChecker({source:function(){return!0}})}return yg()(t,[{key:"config",value:function(){return arguments.length?(this._config=Js(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"apply",value:function(){return this}},{key:"setStrategy",value:function(t,e){return e&&(this._strategies[t]=e),this}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1}},{key:"sourceInfo",value:function(){return this.firebolt.getSourceInfo()}},{key:"layers",value:function(){return this.firebolt.layers()}},{key:"plotPointsFromIdentifiers",value:function(){var t;return(t=this.firebolt).getPlotPointsFromIdentifiers.apply(t,arguments)}},{key:"shouldApply",value:function(t){var e=!0,n=this._applyChecker;for(var r in n){var i=n[r];e=e&&i({unitId:t.sourceUnit,layerId:t.layerId,canvasId:t.sourceCanvas,fields:t.fields,type:t.sourceType},{canvasId:this.firebolt.sourceCanvas(),unitId:this.firebolt.id(),layerId:this.firebolt.id(),fields:this.firebolt.data().getFieldNames()},t)}return e&&this._enabled}},{key:"setApplyChecker",value:function(t){return Object.assign(this._applyChecker,t),this}},{key:"removeApplyChecker",value:function(t){delete this._applyChecker[t]}},{key:"setLayerData",value:function(t,e){var n=this.layers().find((function(t){return t.alias()===e}));return t?(n&&n.enableCaching().data(t),this):(this.resetLayerData(e),this)}},{key:"resetLayerData",value:function(t){var e=this.layers().find((function(e){return e.alias()===t}));e&&e.resetData()}}],[{key:"defaultConfig",value:function(){return{}}},{key:"formalName",value:function(){return"generic"}},{key:"target",value:function(){return"all"}},{key:"mutates",value:function(){return!1}}]),t}(),E_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"applyInteractionStyle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.firebolt.context;return!1!==n.config().interactive&&n.applyInteractionStyle(e,t.uids),this}}]),n}(M_),O_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"createElement",value:function(t,e,n,r,i){return dp(t,e,n,r,i)}},{key:"drawingContext",value:function(){return this.firebolt.getDrawingContext()}},{key:"show",value:function(){return this}},{key:"hide",value:function(){return this}}],[{key:"target",value:function(){return["visual-group","visual-unit"]}}]),n}(M_),C_=(n(89),function(t,e,n){var r=t.config(),i=r.defClassName,a=r.classPrefix;hp(e).selectAll(".".concat(a,"-").concat(i)).style("display",n?"block":"none")}),A_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).setApplyChecker((function(){return!0})),t}return yg()(n,[{key:"apply",value:function(t,e){var n,r,i=0,a=0,o=this._config,c=o.box,u=this.firebolt,s=this.drawingContext(),l=s.sideEffectGroup,f=s.width,h=s.height,d=o.classPrefix,g=o.defClassName,v=o.brush,y=e.criteria;if(n=f,r=h,!Us(y,"range")&&!Us(y,"dimensions")||e.hideSelBox&&!o.persistent)return this.hide(s),this;var m=this.sourceInfo(),b=function(t,e,n){var r,i,a,o,c=t.criteria,u=t.dimensions||{},s=u.x,l=u.y;if(!c)return null;if(e.x&&e.y){var f,h,d="".concat(n.x[0]),p="".concat(n.y[0]),g=c.range,v=e.x[0],y=e.y[0],m="linear"===v.constructor.type(),b="linear"===y.constructor.type(),x="band"===v.constructor.type(),_="band"===v.constructor.type(),w=c.dimensions;if(w){var k=w[0].findIndex((function(t){return t===d}));-1!==k&&(f=w.slice(1,w.length).map((function(t){return t[k]}))),-1!==(k=w[0].findIndex((function(t){return t===p})))&&(h=w.slice(1,w.length).map((function(t){return t[k]})))}else f=g[d],h=g[p];if(f&&f.length){var S=v.domain(),M=f[0],E=f[f.length-1];if(x){var O=S.indexOf(f[0]),C=S.indexOf(f[f.length-1]),A=[O,C].sort((function(t,e){return t-e})),P=fg()(A,2);O=P[0],C=P[1],M=S[O],E=S[C]}r=v.getScaleValue(M),i=v.getScaleValue(E),i+=x?v.getUnitWidth():0}if(h&&h.length){var D=y.domain(),R=h[0],I=h[h.length-1];if(_){var T=D.indexOf(h[0]),N=D.indexOf(h[h.length-1]),F=[T,N].sort((function(t,e){return e-t})),j=fg()(F,2);T=j[0],N=j[1],R=D[T],I=D[N]}a=y.getScaleValue(R),o=y.getScaleValue(I),o+=_?y.getUnitWidth():0}if(b&&m||!t.dragEnd){if(s){var L=fg()(s,2);r=L[0],i=L[1]}if(l){var B=fg()(l,2);a=B[0],o=B[1]}}}return{dimension:{x1:r,x2:i,y1:a,y2:o}}}(e,m.axes,m.fields).dimension,x=e.dragEnd&&o.transition;"xy"===v?(i=Math.min(b.x1,b.x2),a=Math.min(b.y1,b.y2),n=Math.abs(b.x2-b.x1),r=Math.abs(b.y2-b.y1)):"x"===v?(i=Math.min(b.x1,b.x2),a=0,n=Math.abs(b.x2-b.x1),r=h):(i=0,a=Math.min(b.y1,b.y2),n=f,r=Math.abs(b.y2-b.y1)),this.show(s);var _=[{x:i,y:a,width:n,height:r}],w=dp(hp(l),"g",[1],".".concat(d,"-").concat(g)),k=this,S=w.selectAll("rect").data(_),M=S.enter().append("rect").each((function(){u.registerPhysicalBehaviouralMap(rv()({},Ox,{target:[hp(this)],behaviours:[p.BRUSH]})),d_(u)(hp(this),["brush"],k)})).merge(S).each((function(t){var e=hp(this);for(var n in x&&(e=e.transition().duration(x.duration)),t)({}).hasOwnProperty.call(t,n)&&Ml(t[n])&&e.attr(n,t[n])})),E=Bs(c.defClassName,this._id,d);return M.classed(E.join(" "),!0),M.classed(c.className,!0),this}},{key:"hide",value:function(t){C_(this,t.sideEffectGroup,!1)}},{key:"show",value:function(t){C_(this,t.sideEffectGroup,!0)}}],[{key:"defaultConfig",value:function(){return{defClassName:"selection-box-group",className:"",classPrefix:"muze",box:{defClassName:"selection-box",className:""},transition:{duration:200},brush:"xy",persistent:!1}}},{key:"formalName",value:function(){return"selectionBox"}},{key:"target",value:function(){return"visual-unit"}}]),n}(O_),P_={classPrefix:"muze",defClassName:"tooltip-box",parentClassName:"tooltip-parent-container",connectorClassName:"tooltip-connectors",className:"",row:{margin:0},spacing:5,content:{spacing:5,iconContainerSize:10,iconScale:1,iconShape:"circle",iconColor:"#ff0000",rowMargin:"4px 0 4px 0",margin:10,separator:":",className:"tooltip-content-container",parentClassName:"tooltip-content-parent-container"},arrow:{size:10,disabled:!1,defClassName:"tooltip-arrow",className:"",color:"rgba(195,195,195,0.85)"}},D_=function(t,e){t.selectAll(e).sort((function(t,e){return t-e}))},R_=(n(90),function(){function t(){gg()(this,t),this._model=null,this._formatter=null,this._config=this.constructor.defaultConfig()}return yg()(t,[{key:"config",value:function(){return arguments.length>0?(this._config=Js(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"update",value:function(t){return this._model=t.model,this._formatter=t.formatter,this}},{key:"context",value:function(t){return this._context=t,this}},{key:"hide",value:function(){this._mount&&this._mount.style("visiblity","hidden")}},{key:"render",value:function(t){var e,n=this._config,r=n.iconContainerSize,i=this._formatter,a=n.rowMargin,o=this._model,c=n.classPrefix;if(this._mount=t,(e=o instanceof Array?o:i(this._model,this.config(),this._context))instanceof Function)dp(t,"div",[1],"".concat(c,"-tooltip-html-container")).html(e());else{var u=e,s="default";ps(e)&&(u=e.content,s=e.displayFormat);var l=dp(t,"div",[s],"".concat(c,"-tooltip-content"),{},(function(t){return t}));if("table"===s){var f=dp(l,"table",[1],"".concat(c,"-tooltip-table")),h=dp(f,"tbody",[1],"".concat(c,"-tooltip-table-tbody")),d=dp(h,"tr",u,"".concat(c,"-tooltip-table-row"));d.each((function(t,e){hp(this).classed("".concat(c,"-tooltip-table-row-").concat(e),!0)})),dp(d,"td",(function(t){return t}),"".concat(c,"-tooltip-table-cell")).each((function(t){hp(this).html(t)}))}else{var p=dp(l,"div",u,"",{update:function(t,e){return t.attr("class",e.className)}}),g=dp(p,"span",(function(t){return t.data}),"".concat(c,"-tooltip-content"));g.attr("class","".concat(c,"-tooltip-content")),xp(p,{margin:a}),xp(g,{display:"inline-block"}),g.each((function(t){var e=hp(this);if(t instanceof Object)if("icon"===t.type){var n=dp(e,"svg",[1]),i=dp(n,"path",[1]),a=t.shape instanceof Function?t.shape:Pl(t.shape);yp(n,{x:0,y:0,width:r,height:r}),yp(i,{d:a.size(t.size*t.size*Math.PI)(),transform:"translate(".concat(r/2,", ").concat(r/2,")")}),xp(i,{fill:t.color}),xp(n,{width:"".concat(r,"px"),height:"".concat(r,"px")})}else e.node().textContent=t.value,t.className&&e.classed(t.className,!0),xp(e,t.style);else e.node().textContent=t}))}}return this}},{key:"clear",value:function(){return this._model=null,this}},{key:"remove",value:function(){this._mount&&this._mount.remove()}}],[{key:"defaultConfig",value:function(){var t=P_.content;return t.classPrefix=P_.classPrefix,t}}]),t}()),I_=function(){function t(e){gg()(this,t),this._id=gs(),this._config={},this.config({});var n=this._config,r=n.classPrefix,i=n.content.parentClassName;this._tooltipContainer=dp(e,"div",[1],"".concat(r,"-tooltip-container ").concat(r,"-group-container")),this._tooltipContainerNode=this._tooltipContainer.node(),this._contentContainer=this._tooltipContainer.append("div").attr("class","".concat(r,"-").concat(n.defClassName," ").concat(r,"-").concat(i,"\n            ").concat(n.className)),this._contentContainerNode=this._contentContainer.node(),this._contents={};var a=this._id,o=n.parentClassName,c=Bs(o,a,n.classPrefix);this.addClass(c.join(" ")),this.hide()}return yg()(t,[{key:"config",value:function(){if(arguments.length>0){var t=Js({},this.constructor.defaultConfig());return this._config=Js(t,arguments.length<=0?void 0:arguments[0]),this}return this._config}},{key:"addClass",value:function(t){return this._tooltipContainer.classed(t,!0),this}},{key:"context",value:function(){return arguments.length?(this._context=arguments.length<=0?void 0:arguments[0],this):this._context}},{key:"content",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.config(),i=r.classPrefix,a=r.content.className,o=r.formatter,c="".concat(i,"-").concat(a,"-").concat(t),u="".concat(i,"-").concat(n.className),s=this._contents[t]=this._contents[t]||new R_,l=dp(this._contentContainer,"div",[n.order],c);l.attr("class","".concat(i,"-").concat(a," ").concat(c," ").concat(u)),D_(this._contentContainer,".".concat(i,"-").concat(a));var f=r.content;return n.classPrefix=this._config.classPrefix,s.config(f),null===e?(s.clear(),s.remove(),delete this._contents[t]):(s.update({model:e,formatter:n.formatter||o}),s.context(this._context),s.render(l)),Object.keys(this._contents).length||this.hide(),this}},{key:"hideContent",value:function(t){var e=this._contents[t];e&&e.hide()}},{key:"getContents",value:function(){return Object.values(this._contents)}},{key:"position",value:function(t,e){if(!Object.keys(this._contents).length)return this.hide(),this;this.show();var n=this._offset||{x:0,y:0};return this._tooltipContainer.style("transform","translate(".concat(n.x+t,"px,").concat(n.y+e,"px")),this}},{key:"positionRelativeTo",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.orientation;if(!t)return this.hide(),this;var i=this._extent,a=this._contentContainerNode,o=a.offsetWidth+4,c=a.offsetHeight+4,u=this._config,s=this._offset,l=u.spacing,f=void 0===n.draw||n.draw,h=t.y,d=t.x+t.width+s.x,p=i.width-d,g=t.x+s.x-i.x,v=i.height-(t.y+t.height+s.y),y=l,m=c+y,b=o+y,x=[{position:"top",value:h-m},{position:"right",value:p-b},{position:"left",value:g-b},{position:"bottom",value:v-m}],_=function(e){var n,r=t.x+t.width,i=t.y;return"right"===e?(n="left",r+=y):"left"===e&&(r=t.x-o,n="right",r-=y),t.height<c&&(i=Math.max(0,t.y+t.height/2-c/2)),{position:n,x:r,y:i}},w=function(e){var n,r,a=t.x-o/2+t.width/2;return i.width-(t.x+s.x)<o?a=i.width-o-s.x:a+s.x<i.x&&(a=i.x),"top"===e?(r=t.y-c-y,n="bottom"):(r=t.y+t.height+y,n="top"),{position:n,x:a,y:r}};this._target=t;var k=Ps(x.filter((function(t){return"left"===t.position||"right"===t.position})),"value"),S=Ps(x.filter((function(t){return"top"===t.position||"bottom"===t.position})),"value");if(r)if("horizontal"===r){var M=k.position;e=_(M)}else{var E=S.position;e=w(E)}else if(k.value>0){var O=k.position;e=_(O)}else{var C=S.position;e=w(C)}return this._position={x:e.x,y:e.y},this._orientation=e.position,f&&this.position(e.x,e.y),this}},{key:"hide",value:function(){return this._tooltipContainer.style("visibility","hidden"),this}},{key:"show",value:function(){return this._tooltipContainer.style("visibility","visible"),this}},{key:"extent",value:function(t){return this._extent=t,this}},{key:"offset",value:function(t){return this._offset=t,this}},{key:"remove",value:function(){return this._tooltipContainer.remove(),this}}],[{key:"defaultConfig",value:function(){return P_}}]),t}(),T_=function(t){return"".concat(t%t.toFixed(0)==0?t:t.toFixed(2))},N_=function(t,e,n){var r,i=bt.FieldSubtype,a=i.TEMPORAL,o=i.CONTINUOUS,c=i.CATEGORICAL;return r={},rv()(r,a,(function(t){return bt.isInvalid(t)?n(t):Vl(Number(t),e)})),rv()(r,o,(function(e){return bt.isInvalid(e)?n(e):t(T_(e))})),rv()(r,c,(function(t){return n(t)})),r},F_=function(t){var e=t.field,n=t.value,r=t.classPrefix;return{className:"".concat(r,"-tooltip-stacked-row"),data:[{value:e,className:"".concat(r,"-tooltip-stacked-row-key")},{value:"".concat(n),className:"".concat(r,"-tooltip-stacked-row-value")}]}},j_=function(t){var e=t.field,n=t.value,r=t.classPrefix,i=t.margin,a=t.isSelected,o=t.showFieldName,c=void 0===o||o,u=t.stackPercent,s=t.showStackPercentage,l=t.stackedValue;if(c){var f={value:e,className:"".concat(r,"-tooltip-key")},h={value:n,className:"".concat(r,"-tooltip-value")};"null"!==l&&"undefined"!==l||(l=0);var d={value:u,className:"".concat(r,"-tooltip-stacked-percentage")};return void 0!==i&&(f.style={"margin-left":"".concat(i,"px")},h.style={"margin-left":"".concat(i,"px")},d.style={"margin-left":"".concat(i,"px")}),{className:a?"".concat(r,"-tooltip-row ").concat(r,"-tooltip-selected-row"):"".concat(r,"-tooltip-row"),data:s?[f,d,h]:[f,h]}}return{data:[{className:"",value:n,style:{"margin-left":"10px"}}],className:"".concat(r,"-tooltip-first")}},L_=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},r=e.getRowsCount(),i=0,a=0;a<r;a++){var o=e.getValueAtIndex(t,a);i+="number"==typeof o&&n(o)?o:0}return i},B_=function(t,e,n,r,i){var a,o=i.dataModel,c=i.config,u=i.fieldInf,s=i.target,l=i.positiveStackSum,f=i.negStackSum,h=i.showStackPercentage,d=c.classPrefix,p=r.color,g=r.shape,v=r.size,y=o.getValueAtIndex(e,t),m={type:"icon",color:p.getColor(y),size:v.config().value,shape:g.getShape(y)},b=(0,u[e].fn)(y),x=s&&s[1][s[0].indexOf(e)];a=(x=bt.getActualValue(x))===y;var _=u[n].fn,w=o.getValueAtIndex(n,t),k=_(w),S="(".concat((w>=0?100*w/l:100*w/f).toFixed(2)," %)"),M=j_({field:b,value:k,classPrefix:d,isSelected:a,stackPercent:S,showStackPercentage:h});return M.data=[m].concat(dg()(M.data)),M},z_=function(t,e,n){var r=bt.FieldSubtype,i=r.CATEGORICAL,a=r.TEMPORAL,o=n.valueParser,c=n.timeDiffs,u=N_(null,null,o)[i];return t.reduce((function(t,n){var r=n.subtype,i=n.name,s=r===a?c[i]:0,l=e.getField(i).schema().format;return t[i]={fn:zs(N_(l,s,o)[r],u),displayName:"".concat(Xl(e,i))},t}),{})},H_=function(t){return"continuous"===t.as},W_=function(t){return"discrete"===t.as},V_=function(t,e){return t.find((function(t){return t.name===e}))},U_=function(t,e,n){var r=t.x,i=t.y,a=e[0].name,o=V_(e,r.field),c=V_(e,i.field);return o&&!n.isTemporal(o.name)&&H_(r)?a=r.field:c&&!n.isTemporal(c.name)&&H_(i)&&(a=i.field),a},G_=function(t,e,n){var r=t.x,i=t.y,a=null,o=V_(e,r.field),c=V_(e,i.field);return o&&(n.isTemporal(o.name)||W_(r))?a=r.field:c&&(n.isTemporal(c.name)||W_(i))&&(a=i.field),a},q_=function(t){var e=[];for(var n in t){var r=t[n].field;(r instanceof Array?r:[r]).forEach((function(t){e.push(t)}))}return e},Y_=($x={},rv()($x,"selectionSummary",(function(t,e,n){var r=n.selectionSet,i=e.classPrefix,a=n.config,o=a.showMultipleMeasures,c=r.mergedEnter.length,u=function(t,e,n){var r=n.showMultipleMeasures,i=n.fields,a=t.getMeasures(),o=r?a:i||a.slice(0,1),c={};if(o.length){var u=t.groupBy([]);u.isEmpty()||o.forEach((function(t){var e=u.getValueAtIndex(t,0);c[t]=T_(e)})),u.dispose()}return c}(t,r.mergedEnter,a),s=[{className:"".concat(i,"-tooltip-row"),data:[{value:"".concat(c),style:{"font-weight":"bold"}},"Items Selected"]}];return Object.keys(u).forEach((function(e){var n,r=t.getField(e).schema(),a=r.format,c=void 0===a?T_:a,l=r.defAggFn,f=u[e],h=["(".concat(l.toUpperCase(),")"),"".concat(Xl(t,e),":"),{value:c(f),style:{"font-weight":"bold"},className:"".concat(i,"-tooltip-value")}];o?s.push({className:"".concat(i,"-tooltip-row"),data:h}):(n=s[0].data).push.apply(n,h)})),s})),rv()($x,"highlightSummary",(function(t,e,n){return function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=t.getData({excludeFields:[ut.ROW_ID,gt]}),a=i.schema,o=r.targetLayer,c=n.classPrefix,u=n.separator,s=o.config().encoding,l=o.axes(),f=o.transformType(),h="stack"===f,d=r.config||{},p=d.showStackSum,g=void 0===p||p,v=o.config().mark===ub&&h,y=U_(s,a,t,r.config),m=t.getRowsCount(),b=z_(a,t,r),x=function(t,e,n){var r=b[t],i=r.displayName,a=r.fn;return j_({field:"".concat(i).concat(u),value:a(e),classPrefix:c,margin:10,showFieldName:n})},_=function(){var e=[];return a.forEach((function(n){var r=n.name;e.push(x(r,t.getValueAtIndex(r,0)))})),e};if(1===m)e=_();else{var w;e=[];var k=G_(s,a,t,r.config),S=q_(s).filter((function(t){return t!==y&&t!==k})).filter((function(t){return t})),M=[],E=af(S,(function(e){return t.isDimension(e)})),O=fg()(E,2),C=O[0],A=O[1],P=[].concat(dg()(a.filter((function(t){return!S.includes(t.name)&&t.name!==y&&t.name!==k})).map((function(t){return t.name}))),[k]).filter((function(t){return t}));P.forEach((function(n){e.push(x(n,t.getValueAtIndex(n,0),!1))}));var D=0,R=0,I=0;if(h&&g){D=L_(y,t),R=L_(y,t,(function(t){return t>=0})),I=L_(y,t,(function(t){return t<0}));var T=b[y].fn;e.push(F_({field:"Total".concat(u),value:T(D),classPrefix:c}))}dg()(new Set(C)).forEach((function(e){for(var i={},a=function(a){var o=t.getValueAtIndex(e,a);if(i[o])return"continue";i[o]=1;var c=B_(a,e,y,l,{dataModel:t,config:n,target:r.payload.target,stackedSum:D,positiveStackSum:R,negStackSum:I,fieldInf:b,showStackPercentage:v});M.push(c),A.filter((function(t){return t})).forEach((function(e){M.push(x(e,t.getValueAtIndex(e,a)))}))},o=0;o<m;o++)a(o)})),(w=e).push.apply(w,M)}return{content:e,displayFormat:"normal"}}(t,e,n)})),$x);n(91);var X_=(Kx={},rv()(Kx,"highlightSummary",(function(t,e){return zs(t,e)})),rv()(Kx,"default",(function(t){return zs(t,{})})),Kx),$_=function(t,e){var n=e._strategies,r=Object.assign({},t);for(var i in n)r[i]=zs(X_[i],X_.default)(t[i],t);return r.highlightSummary=Js(r.highlightSummary,function(t){return["formatter","dataTransform","order","fields"].reduce((function(e,n){return n in t&&(e[n]=t[n]),e}),{})}(t)),r},K_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._tooltips={},t._strategies=Js({},Y_),t._strategy="highlightSummary",t}return yg()(n,[{key:"config",value:function(){if(arguments.length){var t=this._config=Js(this._config,$_(arguments.length<=0?void 0:arguments[0],this)),e=this._strategies;for(var n in e){var r=t[n].formatter;this.setStrategy(n,r)}return this}return this._config}},{key:"apply",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t&&t.mergedEnter.model;return null!==e.criteria&&r?(this.createTooltip(Object.assign({},{payload:e,selectionSet:t,options:n}),null,0),this):(this.hide(n,null),this)}},{key:"hide",value:function(t){var e=this._tooltips;for(var n in e)({}).hasOwnProperty.call(e,n)&&function(){var r=e[n];t.contents.forEach((function(t){var e=t.name;r.content(e,null)})),Object.keys(r._contents).length||r.hide()}()}},{key:"getPlotPointsFromIdentifiers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Sv()(kg()(n.prototype),"plotPointsFromIdentifiers",this).call(this,t,{getBBox:!0,target:e.target},e.sourceLayer);return r&&r[0]}},{key:"createTooltip",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=this.drawingContext(),o=this.sourceInfo(),c=this.config(),u=e.payload,s=e.selectionSet,l=e.options,f=a.parentContainerDimensions,h=document.body,d=a.htmlContainer.getBoundingClientRect(),p=window.pageXOffset||document.documentElement.scrollLeft,g=window.pageYOffset||document.documentElement.scrollTop,v=d.left+p,y=d.top+g,m=this._tooltips[r]=this._tooltips[r]||new I_(h,a.svgContainer),b=s.entrySet,x=s.mergedEnter,_=b[1].uids.size?b[1].uids:x.uids,w=this.getPlotPointsFromIdentifiers(_,u);n=zs(n,w,m._target);var k=c.padding,S=u.showInPosition,M=u.position,E=l.contents,O=void 0===E?[{name:"highlightSummary"}]:E;O.forEach((function(e){var n=e.name,r=e.setTransform,a=c[n],l=a.fields,f=a.dataTransform,h=r?r(s,u,t):s;if(h&&h.mergedEnter.model){var d=f(i||h.mergedEnter.model,l,t),p=Object.assign({},o,{payload:u,firebolt:t.firebolt,detailFields:[],timeDiffs:o.timeDiffs,selectionSet:h,config:c[n],valueParser:c.valueParser}),g=t._strategies[n];m.context(p),m.content(n,d,{formatter:g,order:c[n].order,className:c[n].className})}else m.content(n,null)})),m.config(this.config()).extent({x:0,y:0,width:f.width,height:f.height}).offset({x:v+(c.offset.x||0),y:y+(c.offset.y||0)}),S?m.position(M.x+k,M.y+k):n?m.positionRelativeTo({x:n.x,y:n.y,width:n.width||0,height:n.height||0},{orientation:c.orientation}):m.hide()}},{key:"dispose",value:function(){Object.values(this._tooltips).forEach((function(t){return t.remove()}))}}],[{key:"defaultConfig",value:function(){return{padding:5,offset:{x:0,y:0},highlightSummary:{order:1,dataTransform:function(t,e){return e?t.project(e):t}},selectionSummary:{order:0,dataTransform:function(t){return t}},valueParser:function(t){return t}}}},{key:"formalName",value:function(){return v_}},{key:"target",value:function(){return"all"}}]),n}(O_),Q_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"createTooltip",value:function(t){var e=0,r=0,i=this.config(),a=t.strategy,o=void 0===a?"highlightSummary":a,c=t.selectionSet,u=t.payload,s=bt.FieldType.DIMENSION,l=c.mergedEnter.model,f=this.firebolt.context,h=this.drawingContext(),d=this._tooltips,p={width:h.width,height:h.height},g=i.padding,v=[],y=f.getSourceInfo().fields,m=!(!y.x[0]||y.x[0].type()!==s),b=[],x=l.getUids();v.push.apply(v,dg()(x.map((function(t){return l.select({field:ut.ROW_ID,value:t,operator:"eq"})}))));for(var _={},w=0,k=v.length;w<k;w++){var S=v[w],M=this.getPlotPointsFromIdentifiers(c.mergedEnter.uids,u);Sv()(kg()(n.prototype),"createTooltip",this).call(this,t,M,w,S);var E=this._tooltips[w];_[w]=this._tooltips[w];var O=E._position,C=E._tooltipContainer.node().getBoundingClientRect();if(e+=C.height+g,r+=C.width+g,m?e>h.height:r>h.width)break;O&&b.push({x:O.x,y:O.y,width:C.width,height:C.height,tooltip:E})}for(var A in d)if(!_[A]){var P=d[A];P.content(o,null),P.getContents().length||(P.remove(),delete d[A])}return b.length&&function(t,e,n){var r,i,a,o,c,u=t.length,s=function(t,e,c){a=t.x,o=t.width,r=t.y,i=t.height;var u=r+i,s=a+o;n?(c?r<e.y+e.height:u>e.y)&&(e.y=c?t.y-e.height-5:u+5):(c?a<e.x+e.width:s>e.x)&&(e.x=c?t.x-e.width-5:s+5)};for(t.sort((function(t,e){return n?t.y-e.y:t.x-e.x})),c=0,c=0;c<u-1;c++)s(t[c],t[c+1]);if(t[c].y+t[c].height>e.height||t[c].x+t[c].width>e.width)for(n?t[c].y-=t[c].height+t[c].y-e.height:t[c].x-=t[c].width+t[c].x-e.width,c=u-1;c>0;c--)s(t[c],t[c-1],!0)}(b,p,m),b.forEach((function(t){return t.tooltip.position(t.x,t.y,{repositionArrow:!0})})),this}},{key:"hide",value:function(t){var e=this._tooltips;for(var n in e)if({}.hasOwnProperty.call(e,n)){var r=t.strategy||this._strategy;e[n].content(r,null),e[n].hide()}}}],[{key:"formalName",value:function(){return w_}}]),n}(K_);n(92);var Z_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"apply",value:function(t,e){var n,r,i,a,o=this,c=this.config(),u=c.className,s=c.bandClass,l=c.lineClass,f=bt.FieldType.DIMENSION,h=t.mergedEnter.length,d=t.mergedEnter.model,p=this.drawingContext();if(null===e.criteria||!h)return this.hide(),this;var g=this.firebolt.context.getSourceInfo(),v=g.axes,y=g.fields,m=nf(e.fields,d.getFieldNames()),b=p.sideEffectGroup,x=d.getRowsCount(),_=[];if(m.forEach((function(t){for(var e=[],c=0;c<x;c++)e.push(d.getValueAtIndex(t,c));var u=[["x",0],["x",1],["y",0],["y",1]].find((function(e){var n=y[e[0]][e[1]];return n&&n.type()===f&&-1!==n.getMembers().indexOf(t)}));if(void 0!==u&&e.length){var h=u[0],g=v[h][u[1]],m=e[0];r=g.getUnitWidth()||0,i=g.getScaleValue(m)+r/2+p.xOffset;var b=o.firebolt.context.layers();if((b=b.filter((function(t){return!!t.config().crossline}))).length){var w=Math.max.apply(Math,dg()(b.map((function(t){return t.getPlotSpan()[h]})))),k=Math.max.apply(Math,dg()(b.map((function(t){return t.getPlotPadding()[h]}))));n=p.height,a=p.width;var S=i-w/2-k/2,M=i+w/2+k/2,E={};E.d="y"===h?"M 0 ".concat(S," L 0 ").concat(M," L ").concat(a," ").concat(M," L ").concat(a," ").concat(S," Z"):"M ".concat(S," 0 L ").concat(M," 0 L ").concat(M," ").concat(n," L ").concat(S," ").concat(n," Z"),E.className=w?s:l,!isNaN(i)&&_.push(E)}}})),_.length){var w=this.createElement(b,"g",[1],u);this.createElement(w,"path",_).attr("d",(function(t){return t.d})).style("pointer-events","none").attr("class",(function(t){return t.className}))}return this}},{key:"hide",value:function(){var t=this.config().className,e=this.drawingContext();hp(e.sideEffectGroup).selectAll(".".concat(t)).remove()}}],[{key:"defaultConfig",value:function(){return{className:"".concat("muze","-crossline-group"),bandClass:"".concat("muze","-crossband"),lineClass:"".concat("muze","-crossline")}}},{key:"formalName",value:function(){return __}},{key:"target",value:function(){return"visual-unit"}}]),n}(O_),J_=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._entryModel=null,t}return yg()(n,[{key:"apply",value:function(t,e){var n=this.firebolt,r=n.getUnitDataModels(e.action),i=n.getLayerDataModels(e.action),a=t.mergedEnter.model;return this._entryModel===a||(this._entryModel=a,a?n.data(a,{unitDataModels:r,layerDataModels:i}):n.resetData()),this}}],[{key:"formalName",value:function(){return"filter"}},{key:"target",value:function(){return"visual-group"}},{key:"mutates",value:function(){return!0}}]),n}(E_);n(93);var tw=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"apply",value:function(t,e){var n=this.firebolt.context,r=t&&t.mergedEnter.model,i=r&&r.getData().data,a=i&&i.length?i[0]:[];e.target&&function(){for(var t=e.target,n=t[0],o=r&&r.getRowsCount(),c=function(e){if(n.every((function(n,i){return r.getValueAtIndex(n,e)===t[1][i]})))return a=i[e],"break"},u=0;u<o&&"break"!==c(u);u++);}();var o=n.axes(),c=o.x,u=void 0===c?[]:c,s=o.y,l=void 0===s?[]:s;return[].concat(dg()(u),dg()(l)).forEach((function(t){var e=t.config(),n=e.useExternalCSS,i=e.ticks.labels,o=i.style,c=i["&:highlight"].style,u=null;r&&(u=a[r.getFieldIndex(t.config().field)]);var s=t.getTicksBasedOnData(u),l=s.selectionSet,f=s.rejectionSet;if(l){var h=l.selectAll("text");h.classed("muze-axis-ticks-highlight",!0),n||Object.entries(c).forEach((function(t){var e=fg()(t,2),n=e[0],r=e[1];h.style(n,r)}))}var d=f.selectAll("text");d.classed("muze-axis-ticks-highlight",!1),n||Object.entries(o).forEach((function(t){var e=fg()(t,2),n=e[0],r=e[1];d.style(n,r)}))})),this}}],[{key:"formalName",value:function(){return k_}},{key:"target",value:function(){return"visual-unit"}}]),n}(E_),ew=function(t){var e={};for(var n in t){var r=t[n];e[r.formalName()]=r}return e},nw={behaviours:cf(ew(g)),physicalActions:cf(p_),sideEffects:cf(ew(y))};function rw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function iw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rw(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var aw=function(t,e){var n=t._cacheMap={};return function(r){if(!(n=t._cacheMap)[r]){for(var i=e.getUids(),a=e.getRowsCount(),o={},c=function(t){var n=r.map((function(n){return e.getValueAtIndex(n,t)}));!o[n]&&(o[n]=[]),o[n].push(i[t])},u=0;u<a;u++)c(u);n[r]=o}return n[r]}},ow=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._sideEffects.tooltip.disable(),t._propagationDms={},t}return yg()(n,[{key:"target",value:function(){return"visual-layer"}},{key:"createSelectionSet",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=Sv()(kg()(n.prototype),"createSelectionSet",this)).call.apply(t,[this].concat(r)),this._dimsMapGetter=aw(this,this.context.data()),this}},{key:"generatePayload",value:function(t,e){var n={};return n=t?{criteria:{uids:t.getUids()}}:{criteria:null},Object.assign({},e,n)}},{key:"onDataModelPropagation",value:function(){var t=this;return function(e,n){t._propagationDms[n.sourceAction]&&t._propagationDms[n.sourceAction].dispose(!1),t._propagationDms[n.sourceAction]=e;var r=e?e.getFieldNames():[],i=!r.length||nf(n.fields,r).length,a=n.action;if(n.sourceLayer&&n.sourceLayer===t.context.id())return a.forEach((function(r){t._onPropagationDone(iw(iw({},n),{action:r}),e,{})})),t;a.forEach((function(r){if(t.getBehaviouralAction(r)){var a=t.generatePayload(e,n);i||(a.criteria={uids:[]}),n.sourceId=n.propagationSourceId;var o={propagate:!1,data:e,propPayload:n,sourceId:n.sourceId};t.dispatchBehaviour(r,a,Object.assign({},o,{data:null===a.criteria?null:o.data})),t.getBehaviouralAction(r).runApplyChecker(r,a)||t.dispatchBehaviour(r,iw(iw({},a),{criteria:null}),Object.assign({},o,{data:null===a.criteria?null:o.data}),!0),t._onPropagationDone(iw(iw({},n),{action:r}),e,o)}}))}}},{key:"remove",value:function(){return this.context._cachedData[0].unsubscribe(this._propagationHandler),this}},{key:"sourceCanvas",value:function(){return this.context.metaInf().canvasAlias}},{key:"sourceUnit",value:function(){return this.context.metaInf().unitId}},{key:"data",value:function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0];return this.context.enableCaching().data(t),this}return this.context.data()}},{key:"resetData",value:function(){return this.context.clearCaching(),this}},{key:"getMatchingEntryExitSet",value:function(t){var e=this.getPropagationInf();if(!e.sourceId)return this.getBehaviouralAction(t.action).entryExitSet();if(e.data){var n=new Zx({keys:[]});return n.add(e.data.getUids()),new Ux({selectionSet:n,data:function(){return e.data}})}return null}}]),n}(Lx);function cw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return uw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?uw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function uw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sw={fade:function(t,e){var n=t.mergedEnter,r=t.mergedExit,i=t.completeSet;n.length||r.length?"area"===e.config().mark||"area"===e.firebolt.context.constructor.formalName()?(e.applyInteractionStyle(n,{interactionType:"fade",apply:!0}),e.applyInteractionStyle(r,{interactionType:"fade",apply:!1})):(e.applyInteractionStyle(r,{interactionType:"fade",apply:!0}),e.applyInteractionStyle(n,{interactionType:"fade",apply:!1})):e.applyInteractionStyle(i,{interactionType:"fade",apply:!1})},fadeOnBrush:function(t,e,n){var r=t.mergedEnter,i=t.mergedExit,a=t.completeSet;r.length||i.length?n.dragEnd?(e.applyInteractionStyle(i,{interactionType:"brushFocus",apply:!0}),e.applyInteractionStyle(r,{interactionType:"doubleStroke",apply:!0}),e.applyInteractionStyle(i,{interactionType:"doubleStroke",apply:!1}),e.applyInteractionStyle(r,{interactionType:"brushFocus",apply:!1})):(e.applyInteractionStyle(r,{interactionType:"brushStroke",apply:!0}),e.applyInteractionStyle(i,{interactionType:"brushStroke",apply:!1}),e.applyInteractionStyle(i,{interactionType:"brushFocus",apply:!1}),e.applyInteractionStyle(i,{interactionType:"doubleStroke",apply:!1})):(e.applyInteractionStyle(a,{interactionType:"brushStroke",apply:!1}),e.applyInteractionStyle(a,{interactionType:"doubleStroke",apply:!1}),e.applyInteractionStyle(a,{interactionType:"brushFocus",apply:!1}))},focus:function(t,e){var n=t.mergedEnter,r=t.mergedExit,i=t.completeSet,a=t.entrySet,o=t.exitSet,c=e.firebolt;n.length||r.length?"area"===c.context.constructor.formalName()?(e.applyInteractionStyle(r,{interactionType:"focus",apply:!1}),e.applyInteractionStyle(n,{interactionType:"focus",apply:!0})):(e.applyInteractionStyle(o[1],{interactionType:"focusStroke",apply:!1}),e.applyInteractionStyle(a[1],{interactionType:"focusStroke",apply:!0}),e.applyInteractionStyle(o[1],{interactionType:"focus",apply:!0}),e.applyInteractionStyle(a[1],{interactionType:"focus",apply:!1})):(e.applyInteractionStyle(i,{interactionType:"focus",apply:!1}),e.applyInteractionStyle(i,{interactionType:"focusStroke",apply:!1}),e.applyInteractionStyle(i,{interactionType:"commonDoubleStroke",apply:!1}))},highlight:function(t,e,n){if(null===n.criteria)e.applyInteractionStyle(t.completeSet,{interactionType:"highlight",apply:!1}),e.applyInteractionStyle(t.completeSet,{interactionType:"commonDoubleStroke",apply:!1});else{var r=t.entrySet[1].uids,i=t.mergedEnter.model;if(n.target&&i){var a=i.select(hf(n.target,i),{mode:"all"}).map((function(t){var e=new Set(t.getUids());return t.dispose(),e})),o=fg()(a,2),c=o[0],u=o[1];r=c,e.applyInteractionStyle({uids:c},{interactionType:"highlight",apply:!0},[]),e.applyInteractionStyle({uids:u},{interactionType:"highlight",apply:!1},[])}else e.applyInteractionStyle({uids:r},{interactionType:"highlight",apply:!0},[]);e.applyInteractionStyle(t.exitSet[1],{interactionType:"highlight",apply:!1},[]);var s=e.firebolt.getEntryExitSet("select");if(s){var l=function(t,e){var n,r=new Set,i=cw(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.has(a)&&r.add(a)}}catch(t){i.e(t)}finally{i.f()}return r}(r,s.mergedEnter.uids),f=function(t,e){var n,r=new Set,i=cw(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e.has(a)||r.add(a)}}catch(t){i.e(t)}finally{i.f()}return r}(s.mergedEnter.uids,r);e.applyInteractionStyle({uids:l},{interactionType:"commonDoubleStroke",apply:!0},[]),e.applyInteractionStyle({uids:f},{interactionType:"commonDoubleStroke",apply:!1},[])}}},selectionHighlight:function(t,e){e.applyInteractionStyle(t.mergedEnter,{interactionType:"focus",apply:!1});var n=e.firebolt.getEntryExitSet("select");n?e.applyInteractionStyle({uids:Tx([t.mergedExit.uids],[n.mergedEnter.uids])},{interactionType:"select",apply:!0}):e.applyInteractionStyle(t.mergedExit,{interactionType:"focus",apply:!0})},brushHighlight:function(t,e){e.applyInteractionStyle(t.mergedEnter,{interactionType:"brushFocus",apply:!1});var n=e.firebolt.getEntryExitSet("brush");n?e.applyInteractionStyle({uids:Tx([t.mergedExit.uids],[n.mergedEnter.uids])},{interactionType:"brushFocus",apply:!0}):e.applyInteractionStyle(t.mergedExit,{interactionType:"brushFocus",apply:!0})}},lw=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._strategy="highlight",t._strategies=sw,t}return yg()(n,[{key:"getExcludeSetIds",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof Function?e(this.firebolt.getEntryExitSet):e.reduce((function(e,n){var r=((t.firebolt.getEntryExitSet(n)||{}).mergedEnter||{}).uids;return r&&e.push.apply(e,dg()(r)),e}),[])}},{key:"apply",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._strategies[n.strategy||this._strategy];return t&&r(t,this,e),this}}],[{key:"formalName",value:function(){return"highlighter"}},{key:"target",value:function(){return"visual-layer"}}]),n}(E_),fw=[0,50],hw=[0,24];function dw(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return pw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}function pw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function vw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gw(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yw={"stroke-width":1,stroke:1,"stroke-opacity":1},mw=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n),t=e.call(this);var r=gs();return t._axes={},t._alias=t.constructor.formalName()+r,t._points=[],t._pointMap={},t._cachedData=[],t._id=r,t._measurement={},t._animationDonePromises=[],t._graphicElems={},t._linkedElems={},t._customConfig=null,t._renderer="svg",t._metaInf=null,t}return yg()(n,[{key:"createFirebolt",value:function(){var t=this.interactionRegistry();this._firebolt=new ow(this,{physical:Object.assign({},t.physicalActions),behavioural:Object.assign({},t.behaviours),physicalBehaviouralMap:Object.assign({},t.physicalBehaviouralMap)},Object.assign({},t.sideEffects,vw({PlotHighlighter:lw},this.getSideEffects())),Object.assign({},t.behaviourEffectMap))}},{key:"firebolt",value:function(){return this._firebolt}},{key:"getSideEffects",value:function(){return{}}},{key:"store",value:function(){return arguments.length?(this._store=arguments.length<=0?void 0:arguments[0],this):this._store}},{key:"domain",value:function(){return arguments.length?(this._domain=arguments.length<=0?void 0:arguments[0],this):this._domain}},{key:"alias",value:function(){return arguments.length?(this._alias=arguments.length<=0?void 0:arguments[0],this):this._alias||this.constructor.formalName()}},{key:"enableCaching",value:function(){return this._cacheEnabled=!0,this}},{key:"disableCaching",value:function(){return this._cacheEnabled=!1,this}},{key:"resetData",value:function(){return this._cacheEnabled=!1,this._cachedData[0]!==this.data()&&this.data(this._cachedData[0]),this}},{key:"clearCaching",value:function(){this._cacheEnabled=!1,this.resetData()}},{key:"serialize",value:function(){return this.config()}},{key:"id",value:function(){return this._id}},{key:"getTransformedData",value:function(t,e,n,r){return Yb(t,e,n,r)}},{key:"calculateDomainFromData",value:function(t){var e={};return this.data().isEmpty()||(e=Qb(t,this)),e}},{key:"getDataDomain",value:function(t){return void 0!==t?this._domain[t]||[]:this._domain}},{key:"getNormalizedData",value:function(t){return Kb(t,this)}},{key:"getNearestPoint",value:function(){return null}},{key:"applyInteractionStyle",value:function(t,e){var n=this.config().interaction||{},r=this._graphicElems,i=n[t.interactionType],a=this.getOverlayPathMount();if(t.mountPoint=a,i){var o,c=dw(e);try{for(c.s();!(o=c.n()).done;){var u=r[o.value];u&&Sx(this,u,i,t)}}catch(t){c.e(t)}finally{c.f()}}}},{key:"resolveTransformType",value:function(){return this._transformType=cx(this),this._transformType}},{key:"transformType",value:function(){return this._transformType}},{key:"render",value:function(){return ax(this),this}},{key:"elemType",value:function(){return"g"}},{key:"remove",value:function(){return hp(this.mount()).remove(),this.firebolt()&&(this.firebolt().remove(),this.firebolt().dispose()),this}},{key:"cachePoint",value:function(t,e){return null===t||(this._pointMap[t]=e),this}},{key:"addOverlayPathAndStyles",value:function(){return null}},{key:"getIdentifiersFromData",value:function(t,e){var n,r,i=this.data(),a=i.getSchema(),o=[[],[]];return a.forEach((function(e,n){var r=e.name;i.isDimension(r)&&(o[0].push(r),o[1].push(t[n]))})),(n=o[0]).push.apply(n,[ut.ROW_ID]),(r=o[1]).push.apply(r,[e]),o}},{key:"hasPlotSpan",value:function(){return!1}},{key:"getPlotSpan",value:function(){return{x:0,y:0}}},{key:"getPlotPadding",value:function(){return{x:0,y:0}}},{key:"getPointsFromIdentifiers",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.getAllAttrs,i=n.getBBox,a=n.target;if(!this.data())return[];var o,c=this._pointMap,u=[],s=dw(t);try{for(s.s();!(o=s.n()).done;){var l=o.value,f=c[l];if(f){var h=function(){var t=f.data;return a?a[0].every((function(e,n){return!(e in t)||t[e]===a[1][n]}))?(u.push(f),"break"):void 0:(u.push(f),"break")}();if("break"===h)break}}}catch(t){s.e(t)}finally{s.f()}return r?u:u.map((function(t){var n=vs(t);return i?e.getBoundBox(n):n.update||n})).sort((function(t,e){return t.y-e.y}))}},{key:"getBoundBox",value:function(t){var e=this.measurement(),n=t.update||t;if(void 0!==t.size){var r=2*Math.sqrt(t.size/Math.PI);n.width=r,n.height=r,n.x-=r/2,n.y-=r/2}else void 0===n.width&&(n.width=2),void 0===n.height&&(n.height=2);return n.x=Math.min(e.width,Math.max(n.x,0)),n.y=Math.min(e.height,Math.max(n.y,0)),n}},{key:"isSortedDomain",value:function(){return this._transformedData.isSortedDomain()}},{key:"getTransformedDataFromIdentifiers",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=bt.FieldType.MEASURE,a=this.data(),o=this.encodingFieldsInf(),c=o.yField,u=o.xField,s=o.yFieldType,l=o.xFieldType;if(l===i)e=a.getFieldIndex(u),n="x";else if(s===i){var f=this.constructor.formalName();e=a.getFieldIndex(c),n="y",f===Hg&&(n=r%2==0?"y":"y0")}var h=[],d=a.getFieldNames();d.forEach((function(t){var e=a.getFieldIndex(t);h[e]=[]}));var p,g=0,v=dw(t);try{for(v.s();!(p=v.n()).done;){var y=p.value,m=this._pointMap[y];m&&function(){var t=m.normalizedData,r=t[n]||0,i=t.source;d.forEach((function(t){var n=a.getFieldIndex(t);h[n][g]=n===e?r:i[n]})),g++}()}}catch(t){v.e(t)}finally{v.f()}return[h,this.data().getSchema()]}},{key:"getPlotElementsFromSet",value:function(t){var e,n=this._graphicElems,r=[],i=dw(t);try{for(i.s();!(e=i.n()).done;){var a=n[e.value];a&&r.push(a)}}catch(t){i.e(t)}finally{i.f()}return r}},{key:"animationDone",value:function(){return Promise.all(this._animationDonePromises)}},{key:"registerAnimationDoneHook",value:function(){var t,e=new Promise((function(e){t=e}));return this._animationDonePromises.push(e),function(){t()}}},{key:"createPolarAxes",value:function(){var t=this,e=this._normalizedData,n=[],r=this.encodingFieldsInf().radiusField;e.forEach((function(e){var i=t.calculatePolarDomain(e),a=new Rb;r?a.domain(i.radius):a.domain(fw);var o=new om({angle:t.config().encoding.angle});o.domain(i.angle),n.push({radius:a,angle:o})})),this._polarAxes=n}},{key:"calculatePolarDomain",value:function(t){var e=this.config().sort,n=t;e&&(n=n.sort((function(t,n){var r=+t.radius,i=+n.radius;return e===Bg?r-i:i-r})));var r=n.map((function(t){return+t.radius}));return 1===r.length&&r.push(0),{radius:[Math.min.apply(Math,dg()(r)),Math.max.apply(Math,dg()(r))],angle:n.map((function(t){return t.angle}))}}},{key:"setPolarAxesRange",value:function(){var t=this,e=this.encodingFieldsInf(),n=this.axes(),r=this.config().encoding.radius.range,i=e.xField,a=e.yField,o=e.sizeField,c=e.sizeFieldType,u=e.textField,s=n.x,l=n.y,f=n.size;this._normalizedData.forEach((function(e,n){var h;if(h=i===gt&&a===gt?[0,Math.min(u?s.scale().range()[1]/3:s.scale().range()[1]/2,u?l.scale().range()[0]/3:l.scale().range()[0]/2)]:hw,f&&o){var d=e.map((function(t){return t.size}));h=[0,c===bt.FieldType.MEASURE?f.getSize(Math.max.apply(Math,dg()(d))):f.getSize(d[0])]}var p=t._polarAxes[n].radius;p&&p.range(r(h))}))}},{key:"initializeFireboltSelectionSet",value:function(){var t=this.data();!1!==this.config().interactive&&(this.firebolt().createSelectionSet({keys:t.getUids()}),this.firebolt().attachPropagationListener(this._cachedData[0],this.firebolt().onDataModelPropagation()))}},{key:"dataDidSet",value:function(t){var e=fg()(t,2)[1],n=this.config();if(e&&n){this._cacheEnabled?this._cachedData.push(e):this._cachedData=[e];var r=n.encoding;if(r){!1!==n.interactive&&this.initializeFireboltSelectionSet();var i=this.retrieveEncodingFields(r,e);this.encodingFieldsInf(i);var a=this.resolveTransformConfig(i);if(this._transformType=a.type,this._transformConfig=a,this._transformedData=this.getTransformedData(e,n,a,i),this._normalizedData=this.getNormalizedData(this._transformedData),this.createPolarAxes(),!1!==n.calculateDomain){var o=this.calculateDomainFromData(this._transformedData,this.encodingFieldsInf());this.domain(o)}}}return this}},{key:"getAllEncodingDimensions",value:function(t){var e=this.config().encoding,n=this.data(),r=[],i=function(i){var a=e[i],o=a.field,c=a.as;(o instanceof Array?o:[o]).forEach((function(e){c||(c=n.isDimension(e)?ft.DISCRETE:ft.CONTINUOUS),!t.includes(i)&&n.isDimension(e)&&r.push(e)}))};for(var a in e)i(a);return r}},{key:"getStackConfig",value:function(){var t=this.encodingFieldsInf(),e=t.xField,n=t.xFieldSubType,r=t.xFieldAs,i=t.yFieldAs,a=t.yField,o=t.yFieldSubType,c=[{field:e,as:r,subtype:n},{field:a,as:i,subtype:o}].find((function(t){var e=t.as,n=t.subtype;return e===ft.DISCRETE||"temporal"===n})),u=[{field:e,as:r,subtype:n},{field:a,as:i,subtype:o}].find((function(t){var e=t.as,n=t.subtype;return e===ft.CONTINUOUS&&"temporal"!==n}));return c||(c={field:e,as:r,subtype:n},u={field:a,as:i,subtype:o}),{uniqueField:c,value:u}}},{key:"autoDetectTransformType",value:function(t,e){if(!t.length)return Og;if(e.uniqueField&&e.value){var n=e.value.field;return Yl(this.data(),[n])[n]===zg?Mg:Eg}return Og}},{key:"resolveTransformConfig",value:function(){var t=this.config().transform,e=this.getAllEncodingDimensions(["x","y","x0","y0"]),n=t.type,r=vw(vw({},t),{},{groupBy:zs(t.groupBy,e)}),i=this.getStackConfig();return n||(n=this.autoDetectTransformType(e,i)),n===Mg&&(r=vw(vw({},r),i)),vw(vw({},r),{},{type:n})}},{key:"retrieveEncodingFields",value:function(t,e){return qb(t,e)}},{key:"applyStyles",value:function(t,e){var n=this,r=t.styleObj,i=t.elem,a=t.applicableStrokePos,o=t.datum,c=Object.keys(r),u=c.filter((function(t){return!(t in yw)}));c.forEach((function(t){n.addOverlayPathAndStyles(i.node(),o,{type:t,value:r[t],strokeProps:yw},a,e)})),this.applyElementStyles(i,u,r)}},{key:"applyElementStyles",value:function(t,e,n){e.forEach((function(e){t.style(e,n[e])}))}},{key:"getBoundBoxes",value:function(){return null}},{key:"getOverlayPathMount",value:function(){return this._overlayMount||(this._overlayMount=hp(this.mount()).select(".muze-overlay-paths").node()),this._overlayMount}},{key:"getRetinalFieldsDomain",value:function(){var t={},e=this.encodingFieldsInf(),n=this.data(),r=this.config().encoding;return["color","shape","size"].forEach((function(i){var a=e["".concat(i,"Field")];if(a){var o=n.getField(a);if(o){var c=r[i].as;c||(c=dt(o));var u=n.getDomain(a,c);u&&(t[a]=Object.assign({},t[a],rv()({},c,u)))}}})),t}},{key:"calculateExtendDomainDiffs",value:function(){return{x:[0,0],y:[0,0]}}},{key:"postLayout",value:function(){}},{key:"postRender",value:function(){this._renderCompleteListener&&this._renderCompleteListener(this.id())}},{key:"data",value:function(){if(arguments.length){var t=this._data,e=this._cacheEnabled;return e||(this._cachedData.splice(1,this._cachedData.length).forEach((function(t){return t.dispose()})),t&&t!==(arguments.length<=0?void 0:arguments[0])&&t.dispose()),this._data=arguments.length<=0?void 0:arguments[0],this.dataDidSet([t,this._data]),this}return this._data}},{key:"getBandScale",value:function(){return this._bandScale||(this._bandScale=Ll.band()),this._bandScale}},{key:"axes",value:function(){return arguments.length?(this._axes=arguments.length<=0?void 0:arguments[0],this):this._axes}},{key:"measurement",value:function(){return arguments.length?(this._measurement=arguments.length<=0?void 0:arguments[0],this):this._measurement}},{key:"encodingFieldsInf",value:function(){return arguments.length?(this._encodingFieldsInf=arguments.length<=0?void 0:arguments[0],this):this._encodingFieldsInf}},{key:"encodingTransform",value:function(){return arguments.length?(this._encodingTransform=arguments.length<=0?void 0:arguments[0],this):this._encodingTransform}},{key:"dependencies",value:function(){return arguments.length?(this._dependencies=arguments.length<=0?void 0:arguments[0],this):this._dependencies}},{key:"dataProps",value:function(){return arguments.length?(this._dataProps=arguments.length<=0?void 0:arguments[0],this):this._dataProps}},{key:"renderer",value:function(){return arguments.length?(this._renderer=arguments.length<=0?void 0:arguments[0],this):this._renderer}},{key:"interactionRegistry",value:function(){return arguments.length?(this._interactionRegistry=arguments.length<=0?void 0:arguments[0],this):this._interactionRegistry}},{key:"metaInf",value:function(){return arguments.length?(this._metaInf?this._metaInf=Object.assign(this._metaInf,arguments.length<=0?void 0:arguments[0]):this._metaInf=arguments.length<=0?void 0:arguments[0],this):this._metaInf}},{key:"mount",value:function(){return arguments.length?(this._mount=arguments.length<=0?void 0:arguments[0],this.data()&&this.render(this._mount,arguments.length<=1?void 0:arguments[1]),this):this._mount}},{key:"valueParser",value:function(){return arguments.length?(this._valueParser=(arguments.length<=0?void 0:arguments[0])||function(t){return t},this):this._valueParser}},{key:"config",value:function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0];this._customConfig=t;var e=this.constructor,n=Js({},e.defaultConfig()),r=e.defaultPolicy(n,t);return this._config=r,this}return this._config}},{key:"getPointsWithinRange",value:function(t){return this._rtree.search(t)}},{key:"onRenderComplete",value:function(t){return this._renderCompleteListener=t,this}},{key:"cachedData",value:function(){return this._cachedData}}],[{key:"create",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ev()(this,e)}},{key:"defaultConfig",value:function(){return{transform:{type:"identity"}}}},{key:"defaultPolicy",value:function(t,e){return Js(t,e)}},{key:"shouldDrawAnchors",value:function(){return!1}}]),n}(t)},bw=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return $g}}]),n}(of(Jg).with(mw)),xw=function(t,e){var n=vl.apply(void 0,dg()(t.getRawColor(e))),r=fg()(n,4),i=r[0],a=r[1],o=r[2],c=r[3],u=[i,a,o].map((function(t){return(t/=255)<=.03928?t/=12.92:t=(t+.055)/1.055^2.4,t})),s=fg()(u,3),l=.2126*s[0]+.7152*s[1]+.0722*s[2];return(l+.05)/.05>1.05/(l+.05)?"rgba(0, 0, 0, ".concat(c,")"):"rgba(255, 255, 2555, ".concat(c,")")},_w=function(t){return!("number"==typeof t&&!Number.isNaN(t))},ww={"stroke-width":0,"fill-opacity":1},kw="black",Sw={value:"",formatter:function(t,e,n,r){return function(t,e){var n=bt.FieldSubtype,r=n.TEMPORAL,i=n.CONTINUOUS,a=t.valueParser(),o=t.encodingFieldsInf().textField;if(!o)return e;var c=t.data().getField(o).schema(),u=c.subtype,s=c.format;if(bt.isInvalid(e)){var l=a(e);return!t.data().isMeasure(o)&&bt.isInvalid(l)&&(l=bt.getActualValue(l)),l}if(u===r){var f=t.dataProps().timeDiffs,h=f.x||f.y;return h?Vl(Number(e),h):bt.DateTimeFormatter.formatAs(e,c.format||Hl.year)}return u===i?s(function(t){return null==t?"":"".concat(t%t.toFixed(0)==0?t:t.toFixed(2))}(e)):a(String(e))}(r,t)},background:{padding:10},rotation:0,alignmentBaseline:"middle",textAnchor:"middle"};function Mw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ew(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mw(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ow=function(t,e,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(_w(e.x)||_w(e.y))return null;var o,c,u,s=t.config().encoding.text,l=s.formatter,f=s.background,h=s.alignmentBaseline,d=s.rotation,p=s.textAnchor,g=f.padding,v=f.value;o="function"==typeof h?h(e,r,i,t):h,c="function"==typeof d?d(e,r,i,t):d,u="function"==typeof p?p(e,r,i,t):p;var y=Ew({enter:{},update:{x:e.x,y:e.y},text:l(e.text,r,i,t),color:e.color,background:{value:v instanceof Function?v(n,r,i,t):null,padding:g},alignmentBaseline:o,rotation:c,textAnchor:u,meta:Ew(Ew({},{layerId:t.id()}),fx({fill:e.color,"border-color":e["border-color"]})),style:{},source:n.source,rowId:n.rowId,data:n.dataObj},a);return y.className=Xb(n,r,i,t),y},Cw=function(t,e,n,r){var i=hp(e).selectAll("g").data(n),a=t._dependencies.smartLabel,o={},c=i.enter().append("g").each((function(t){yp(this,t.enter)})).merge(i),u=Ap(hp(e),r.className),s=parseInt(u.fontSize,10);return a.setStyle(u),c.each((function(t){var e=hp(this);o[t.rowId]=e;var n,r=t.update,i=t.text,c=t.color,u=t.textAnchor,l=t.background,f=Object.assign({},ww,t.style);if(n=l.value){var h,d=l.padding,p=a.getOriSize(t.text),g=p.width,v=p.height,y=dp(e,"rect",[1]);h="end"===u?g:"start"===u?0:g/2,yp(y.node(),{x:r.x-h-d/2,y:r.y-s-d/2,width:g+d,height:v+d}),l&&xp(y,{background:n})}var m=dp(e,"text",(function(t){return[t]})).text(i),b=m.node();f&&xp(b,f),c&&xp(b,{fill:c}),t.className&&m.classed(t.className,!0),yp(b,r),m.attr("text-anchor",u),m.attr("alignment-baseline",t.alignmentBaseline),m.attr("transform","rotate(".concat(t.rotation," ").concat(r.x," ").concat(r.y,")"))})),i.exit().remove(),{selection:i,elems:o}};function Aw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Aw(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Aw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dw=function(t){var e=t.layer,n=t.container,r=t.points,i=t.transition,a=t.className,o=e.encodingFieldsInf().textField,c=i.duration,u=i.effect,s=i.disabled,l=hp(n),f=e._graphicElems;return l.attr("class",a),dp(l,"g",r,null,{enter:function(t,e){var n=e.enter;t.attr("transform","translate(".concat(n.x,",").concat(n.y,")"))},update:function(t,n){!function t(e,n){var r,i=e.shape,a=e.size,o=e.update,c=e.style;if(i instanceof Promise)i.then((function(r){e.shape=r,t(e,n)}));else if(i instanceof Element){var u=i.cloneNode(!0);if("img"===u.nodeName.toLowerCase()){var s=u.src||u.href;(u=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("href",s)}var l=hp(u);"path"===u.nodeName||"image"===u.nodeName?l.attr("transform","scale(".concat(a/100,")")):(l.attr("height",a),l.attr("width",a)),l.attr("x",-a/2),l.attr("y",-a/2),dp(n,(function(){return u}),[1])}else if("string"==typeof i){var f;f=/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(r=i)&&/[\dz]$/i.test(r)&&r.length>4?i:Pl(i).size(a*a*Math.PI)(o);var h=dp(n,"path",(function(t){return[t]})).attr("d",f);xp(h,c)}else e.shape="circle",t(e,n)}(n,t),f[n.rowId]=t;var r=n.update,c=n.style;if(Ws(c,(function(e){return t.style(e,c[e])})),t.attr("class",a),t.classed(n.className,!0),s||(t=t.transition().duration(i.duration).on("end",e.registerAnimationDoneHook())),t.attr("transform","translate(".concat(r.x,",").concat(r.y,")")).style("visibility","visible"),o){var u=[n.text].filter((function(t){return!!t})),l=Cw(e,t.node(),u,{className:a}).elems;e._linkedElems=Pw(Pw({},e._linkedElems),{},{text:Object.assign({},e._linkedElems.text,l)})}},exit:function(t){s?t.style("visibility","hidden"):t.transition().ease(Os[u]).duration(c).on("end",(function(){return t.style("visibility","hidden")})).style("fill-opacity",0).style("stroke-opacity",0)}},t.keyFn)};function Rw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Iw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rw(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Tw=jl.line,Nw=function(t){var e=t.update;return null!==e.y&&null!==e.x},Fw=function(t){var e=t?t.update:{},n=e.x,r=e.y;return null===n||null===r},jw=function(t){var e=t.mount,n=t.data,r=t.className,i=t.layer,a=t.strokeStyle,o=t.linepath,c=t.transition,u=t.updateFns,s=c.disabled,l=i.config().encoding.size.field,f=dp(e,"path",n.length?[n]:[],r,u);f.attr("class",(function(t,e){return t[e].className}));var h=l?1:0;return xp(f,Iw(Iw({},a),{},{"fill-opacity":h})),l&&(s=!0),s||(f=f.transition().duration(c.duration).on("end",i.registerAnimationDoneHook())),f.attr("d",o(n)),f},Lw=function(t){var e=t.layer,n=t.container,r=t.points,i=t.interpolate,a=t.connectNullData,o=t.className,c=t.style,u=t.transition,s=hp(n),l=e.config().nullDataLineStyle,f=e.config().nullDataLineClass,h=s.attr("class",o),d=Fl[i],p=xx(r).map((function(t){return Iw(Iw({},t),{},{enter:Iw({},t.update),style:c})}));Dw(Iw(Iw({},t),{},{points:p}));var g=e.config().encoding.size.field?function(t){return(new Bw).x((function(t){return t.update.x})).y((function(t){return t.update.y})).size((function(t){return t.size})).defined((function(t){return t.update.x&&t.update.y})).pathStr(t)}:Tw().curve(d).x((function(t){return t.update.x})).y((function(t){return t.update.y})).defined(Nw),v=e._graphicElems,y={update:function(t,e){e.forEach((function(t){v[t.rowId]=s}))}};tx(h,c);var m,b=jw({mount:h,data:r,strokeStyle:void 0,layer:e,linepath:g,transition:u,updateFns:y});return function(t,e){var n=[],r=e.prevOfNull,i=e.nextOfNull,a=r.length;if(!a)return n;for(var o=0;o<a;o++){var c=[],u=t[r[o]],s=t[i[o]];u&&c.push(u),s&&c.push(s),n.push(c)}return n}(m=r,function(t){var e={prevOfNull:[],nextOfNull:[]};return t.forEach((function(n,r){var i=n.update;null!==i.y&&null!==i.x||function(t,e,n){var r=Fw(t[e-1]),i=Fw(t[e+1]);!r&&n.prevOfNull.push(e-1),!i&&n.nextOfNull.push(e+1)}(t,r,e)})),e}(m)).map((function(t){return a&&t.length>1&&jw({mount:h,data:t,strokeStyle:l,className:".".concat(o,"-").concat(f),layer:e,linepath:g,transition:u,updateFns:y}),null})),b},Bw=function(){function t(){gg()(this,t),this.xFn=function(){return 0},this.yFn=function(){return 0},this.sizeFn=function(){return 1},this.definedFn=function(){return!0}}return yg()(t,[{key:"x",value:function(t){return this.xFn=t,this}},{key:"y",value:function(t){return this.yFn=t,this}},{key:"size",value:function(t){return this.sizeFn=t,this}},{key:"defined",value:function(t){return this.definedFn=t,this}},{key:"point",value:function(t){var e=t.x1,n=t.y1,r=t.size1,i=t.x2,a=t.y2,o=t.size2,c=t.path,u=r/2,s=o/2,l=n-a,f=i-e;if(f||l){var h=Math.sqrt(f*f+l*l),d=f/h,p=l/h,g=p*u,v=d*u,y=p*s,m=d*s,b=Math.atan2(f,l);c.moveTo(e-g,n-v),c.lineTo(i-y,a-m),c.arc(i,a,s,b-Math.PI,b),c.lineTo(e+g,n+v),c.arc(e,n,u,b,b+Math.PI)}else c.arc(i,a,s,0,2*Math.PI);return c.closePath(),c}},{key:"pathStr",value:function(t){var e,n,r,i=this,a=Bl.path(),o=!1;return t.forEach((function(c,u){var s=!1;if(!i.definedFn(c,u,t)===o&&(o=!o)&&(s=!0),o){var l=+i.xFn(c,u,t),f=+i.yFn(c,u,t),h=+i.sizeFn(c,u,t);a=s?a:i.point({x1:e,y1:n,size1:r,x2:l,y2:f,size2:h,path:a}),e=l,n=f,r=h}})),a.toString()}}]),t}();function zw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Hw,Ww,Vw={classPrefix:Sg,defClassName:"layer-line",className:"",interpolate:"linear",transform:{},interaction:{fade:{style:{stroke:function(){return{diff:{a:-.5}}}}},focus:{style:{stroke:function(){return{diff:{a:-.5}}}}},brushStroke:{style:{stroke:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},crossline:!0,nearestPointThreshold:20,encoding:{color:{},x:{},y:{},strokeOpacity:{value:1},size:{},text:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zw(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Sw),fillOpacity:{value:0},strokeWidth:{value:"2px"}},transition:{effect:"cubic",duration:1e3},connectNullData:!1,nullDataLineStyle:{},nullDataLineClass:"null",highlightExactPoint:!1,detectHoverOnEmptyArea:!0,interactive:!0},Uw=(n(94),function(t,e,n,r,i){e=e||{x:0,y:0},r=r||{x:0,y:0};var a=i.size,o=void 0===a?0:a,c=i.text,u={x:n.x,y:n.y,textAnchor:"middle"};n.y>e.y&&n.y>r.y?u.y+=3+o/2:n.y<e.y&&n.y<r.y?u.y-=3+o/2:n.x>e.x&&n.x>r.x?(u.x+=3+o/2,u.textAnchor="start"):n.x<e.x&&n.x<r.x?(u.x-=3+o/2,u.textAnchor="end"):(u.x+=3,u.y+=3);var s=t.measurement().width,l=t._dependencies.smartLabel.getOriSize(c).width,f=u.x,h=u.textAnchor;return"start"===h?f+l>s&&(u.textAnchor="end"):"middle"===h?f+l/2>s?u.textAnchor="end":f-l/2<0&&(u.textAnchor="start"):"end"===h&&f-l<0&&(u.textAnchor="start"),u}),Gw=function(t){for(var e in t){var n=t[e];("string"==typeof n||Array.isArray(n))&&(t[e]={field:n})}},qw=(Hw={},Ww={setLayerRegistry:function(t){Ww._layerRegistry=t},getSerializedConf:function(t,e){var n,r=Hw[t],i=Js({},e);if(r)n=r.map((function(e){var n={};return function t(e,n,r,i){for(var a in n)if(Object.hasOwnProperty.call(n,a)){var o=void 0,c=void 0,u=n[a];ps(u)?(e[a]={},t(e[a],u,r,i)):"string"==typeof u&&(o=u.split("."))&&o[0]===i?void 0!==(c=Us.apply(void 0,[r].concat(dg()(o.slice(1,o.length)))))&&(e[a]=c):e[a]=u}}(n,e,i,t),Gw(n.encoding),n}));else{var a=i.encoding;Gw(a),n=i}return n},getLayerInstance:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Ww._layerRegistry,a=(t=t instanceof Array?t:[t]).map((function(t){var e=i[t.mark];return e.create.apply(e,n)}));return 1===a.length?a[0]:a},getLayerClass:function(t){return Ww._layerRegistry[t]},composeLayers:function(t,e){Hw[t]=e},sanitizeLayerConfig:function(t){var e=Js({},t);Gw(e.encoding);var n=e.encoding;if(n){var r=n.detail&&n.detail.field?n.detail.field:void 0;Array.isArray(r)?e.encoding.detail={field:r}:e.encoding.detail="string"==typeof r?{field:[r]}:{}}else e.encoding={};return e}});function Yw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}var Xw=function(t){bg()(n,t);var e=Yw(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._layerInstances=[],t.addAnchorLayers(),t}return yg()(n,[{key:"addAnchorLayers",value:function(){var t=this,e=this.firebolt.context.config().encoding,n={x:e.x,y:e.y,color:e.color,size:{field:Us(e,"size","field"),as:e.size.as,value:function(){return t.defaultSizeValue()}}},r=this.constructor.defaultConfig().className,i=this.constructor.formalName(),a={name:"".concat(i,"-upper"),mark:"point",className:"".concat(r,"-upper"),encoding:n,transform:{type:"identity"},calculateDomain:!1,transition:this.getTransitionConfig(),source:function(){return new bt({data:[[]],schema:[]})},interactive:!1};this._layerInstances=[this.createLayerInstance(a)]}},{key:"createLayerInstance",value:function(t){var e=qw.getLayerInstance(t),n=this.firebolt.context,r=n.metaInf();return e.config(t).metaInf({unitRowIndex:r.rowIndex,unitColIndex:r.colIndex,namespace:"".concat(r.parentNamespace,"-").concat(t.mark,"-").concat(gs()),parentNamespace:r.parentNamespace}).dependencies(n._dependencies).store(n.store()),e}},{key:"getTransitionConfig",value:function(){return{disabled:!0}}},{key:"defaultSizeValue",value:function(){return 5}},{key:"getAnchorSizeOnInteraction",value:function(t){return t.dragEnd?2:0}},{key:"apply",value:function(t,e,n){var r=this,i=t.mergedEnter.model;if(null===i)return this._layerInstances.forEach((function(t){t.data()&&t.data().dispose(),t.data(new bt({data:[[]],schema:[]}))})),this;var a=this.constructor.formalName(),o=this.firebolt.context,c=e.target,u=null;c&&(u=c[1].reduce((function(t,e,n){return t[c[0][n]]=e,t}),{})),this._layerInstances.forEach((function(s,l){var f=s.config(),h=o,d=h.constructor.formalName(),p=f.name,g=p==="".concat(a,"-upper"),v=[],y=[],m=h.getTransformedDataFromIdentifiers(t.mergedEnter.uids,l),b=fg()(m,2);if(v=b[0],y=b[1],"area"===d&&c&&"highlight"===n.behaviour&&!g){var x=hf(c,i),_=i.select(x),w=h.getTransformedDataFromIdentifiers(_.getUids(),l),k=fg()(w,2);v=k[0],y=k[1],_.dispose()}s.data()&&s.data().dispose();var S=new bt({data:v,schema:y.filter((function(t){return t.name!==ut.ROW_ID}))});S._alias="anchors";var M={encoding:{size:{value:function(){return r.defaultSizeValue()+r.getAnchorSizeOnInteraction(e)}},"stroke-width":{value:r.getAnchorStroke(e,u)}}},E=Js(f,M),O=dp(h.mount(),"g",[1],p);return s.axes(h.axes()).data(S).config(E).dataProps(h.dataProps()).mount(O.node()),r}))}},{key:"getAnchorStroke",value:function(t,e){return function(t){var n=t.data.dataObj;return e&&Object.keys(e).filter((function(t){return t!==ut.ROW_ID})).every((function(t){return n[t]===e[t]}))?"1px":"0px"}}}],[{key:"target",value:function(){return"visual-layer"}},{key:"defaultConfig",value:function(){return{className:"muze-anchors-group"}}},{key:"formalName",value:function(){return"line-anchors"}}]),n}(O_),$w=function(t){bg()(n,t);var e=Yw(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"addAnchorLayers",value:function(){var t=this;Sv()(kg()(n.prototype),"addAnchorLayers",this).call(this);var e=this.constructor.formalName(),r=this.firebolt.context.config().encoding,i={x:r.x,y:r.y,color:r.color,size:{field:Us(r,"size","field"),as:r.size.as,value:function(){return t.defaultSizeValue()}}},a=this.constructor.defaultConfig().className,o={name:"".concat(e,"-lower"),mark:"point",className:"".concat(a,"-lower"),encoding:i,transform:{type:"identity"},calculateDomain:!1,transition:this.getTransitionConfig(),source:function(){return new bt({data:[[]],schema:[]})},interactive:!1};this._layerInstances.push(this.createLayerInstance(o))}}],[{key:"formalName",value:function(){return"area-anchors"}}]),n}(Xw),Kw=function(t){bg()(n,t);var e=Yw(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getAnchorSizeonInteraction",value:function(){return 50}},{key:"getAnchorStroke",value:function(){return"2px"}}],[{key:"formalName",value:function(){return"persistent-line-anchors"}}]),n}(Xw),Qw=function(t){bg()(n,t);var e=Yw(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getAnchorSizeonInteraction",value:function(){return 50}},{key:"getAnchorStroke",value:function(t){return t.dragEnd?"2px":"1px"}}],[{key:"formalName",value:function(){return"brush-line-anchors"}}]),n}(Xw),Zw=function(t){bg()(n,t);var e=Yw(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getAnchorSizeonInteraction",value:function(){return 50}},{key:"getAnchorStroke",value:function(){return"2px"}}],[{key:"formalName",value:function(){return"persistent-area-anchors"}}]),n}($w),Jw=function(t){bg()(n,t);var e=Yw(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getAnchorSizeonInteraction",value:function(){return 50}},{key:"getAnchorStroke",value:function(t){return t.dragEnd?"2px":"1px"}}],[{key:"formalName",value:function(){return"brush-area-anchors"}}]),n}($w);function tk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ek(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rk=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._voronoi=new Vs,t._rtree=null,t}return yg()(n,[{key:"elemType",value:function(){return"path"}},{key:"getDrawFn",value:function(){return Lw}},{key:"optimizeTextLabelPositions",value:function(t){t=t.filter((function(t){return!!t.text}));for(var e=0;e<t.length;e++){var n=t[e],r=t[e-1],i=t[e+1],a=Uw(this,r?{x:r.text.update.x,y:r.text.update.y}:null,{x:n.text.update.x,y:n.text.update.y},i?{x:i.text.update.x,y:i.text.update.y}:null,{size:n.size,text:n.text.text}),o=a.x,c=a.y,u=a.textAnchor;n.text.update.x=o,n.text.update.y=c,n.text.textAnchor=u}return t}},{key:"translatePoints",value:function(t){var e=this,n=[],r=this.axes(),i=this.encodingFieldsInf().textField,a=this.config().encoding,o=r.x,c=r.y,u=r.color;yx(t,r);var s=r.x instanceof Oy,l=r.y instanceof Oy,f=function(t,e){return e.getScaleValue(t)+e.getUnitWidth()/2};return t.forEach((function(h,d){var p,g=a.size?r.size.getSize(h.size):void 0,v=f(h.x,o),y=f(h.y,c),m=u.getColor(h.color),b=lx({values:{x:v,y:y,color:m,text:h.text},data:h},d,t,e),x={fill:b.color,stroke:b.color,"fill-opacity":a.fillOpacity.value,"stroke-width":a.strokeWidth.value};i&&(p=Ow(e,{x:b.x,y:b.y,text:b.text,color:kw},h,d,t));var _={enter:{},update:{x:!s&&bt.isInvalid(h.x)?null:b.x,y:!l&&bt.isInvalid(h.y)?null:b.y},style:x,rowId:h.rowId,source:h.source,data:h.dataObj,meta:fx(x),normalizedData:h,size:g,text:p};_.className=Xb(h,d,t,e),n.push(_),e.cachePoint(h.rowId,_)})),i&&(n=this.optimizeTextLabelPositions(n)),n=(n=nx(this,n)).filter((function(t){var e=t.update;return!isNaN(e.x)&&!isNaN(e.y)}))}},{key:"getTranslatedData",value:function(t,e,n){var r=this;return t.map((function(i,a){var o,c,u=i[0].color;e?(o=e(i,a,t),c=i[0].rowId):(u=bt.getActualValue(u),o=n.color.getColor(u),c=u);var s=r.getPathStyle(o);return{data:r.translatePoints(i),style:s,meta:fx(s),id:c}}))}},{key:"render",value:function(t,e){var n=this,r=this.config(),i=this.encodingFieldsInf().textField,a=r.encoding,o=r.interpolate,c=r.className,u=r.defClassName,s=r.transition,l=this._normalizedData,f=this._transformedData,h=this.axes(),d=f.getUniqueValues(),p=Bs(u,this.id(),r.classPrefix),g=hp(t),v=zs(e.transition,s);this._points=[],this._pointMap={},g.attr("class","".concat(p.join(" ")," ").concat(c));var y=a.color.value,m=a.size?a.size.field:void 0,b=this.getTranslatedData(l,y,h);return this._linkedElems={},dp(t,"g",b,null,{update:function(t,e,a){var c=e.data,u="".concat(p[0],"-").concat(d[a]||a).toLowerCase(),s=e.style;n._points.push(c),xp(t,s),n.getDrawFn()({layer:n,container:t.node(),interpolate:o,points:c,className:u,transition:v,style:s||{},connectNullData:r.connectNullData,size:m}),i&&n.animationDone().then((function(){var e=c.map((function(t){return t.text})).filter((function(t){return!!t})),r=Cw(n,t.node(),e,{className:p[0]}).elems;n._linkedElems=nk(nk({},n._linkedElems),{},{text:Object.assign({},n._linkedElems.text,r)})}))}},(function(t){return t.id})),this.postRender(),this}},{key:"postRender",value:function(){if(Sv()(kg()(n.prototype),"postRender",this).call(this),this.config().interactive){Jb(this._voronoi,this._points);var t=this.getBoundBoxes().flat().filter((function(t){return null!==t}));this._rtree=new Po,this._rtree.load(t)}}},{key:"getPathStyle",value:function(t){return{stroke:t,fill:t,"fill-opacity":"1"}}},{key:"getNearestPoint",value:function(t,e,n){var r=n.searchRadius,i=this.data();if(!i||i&&i.isEmpty())return null;r=void 0!==r?r:this.config().nearestPointThreshold;var a=this._voronoi.find(t,e,r),o=Us(a,"data","data","update");if(a){var c=a.data.data,u=c.source,s=c.rowId;return{id:this.getIdentifiersFromData(u,s),dimensions:[{x:o.x,y:o.y,width:2,height:2}],point:a.data.data,layerId:this.id()}}return null}},{key:"applyStyles",value:function(t){var e=t.styleObj,n=t.elem;for(var r in e)n.style(r,e[r])}},{key:"getBoundBoxes",value:function(){return mx(this._points.flat())}},{key:"applyInteractionStyle",value:function(t,e){var n=this.config().interaction||{},r=this._graphicElems,i=new Set,a=n[t.interactionType];if(a){var o,c=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return tk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tk(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(e);try{for(c.s();!(o=c.n()).done;){var u=r[o.value];if(u){var s=u.data()[0];i.has(s)||(i.add(s),Sx(this,u,a,nk({},t)))}}}catch(t){c.e(t)}finally{c.f()}}}},{key:"getSideEffects",value:function(){return{LineAnchors:Xw,PersistentLineAnchors:Kw,BrushLineAnchors:Qw}}},{key:"autoDetectTransformType",value:function(t){return t.length?"group":Og}}],[{key:"formalName",value:function(){return"line"}},{key:"defaultConfig",value:function(){return Vw}},{key:"shouldDrawAnchors",value:function(){return!0}}]),n}(t)};function ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var ak={classPrefix:Sg,defClassName:"layer-area",className:"",interpolate:"linear",transform:{},interaction:{fade:{style:{"fill-opacity":.7}},focus:{style:{"fill-opacity":.7}},brushStroke:{style:{"fill-opacity":.7}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},crossline:!0,nearestPointThreshold:10,encoding:{color:{},x:{},y:{},y0:{},text:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ik(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ik(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Sw),strokeOpacity:{value:1},fillOpacity:{value:.3}},transition:{effect:"cubic",duration:1e3},connectNullData:!1,highlightExactPoint:!1,detectHoverOnEmptyArea:!0,interactive:!0};function ok(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ck(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ok(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ok(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var uk=jl.area,sk=function(t){var e=t.layer,n=t.container,r=t.points,i=t.transition,a=t.className,o=t.interpolate,c=t.connectNullData,u=t.style;!function(t){var e=t.mount,n=t.points,r=void 0===n?[]:n,i=t.styles,a=t.selector,o=["enter","update"].map((function(t){var e=Bl.path();return r.forEach((function(n){e.moveTo(n[t].x,n[t].y),e.lineTo(n[t].x,n[t].y0)})),e.toString()})),c=fg()(o,2),u=c[0],s=c[1],l=dp(e,"g",[1],a);Object.keys(i).map((function(t){l.style(t,i[t])}));var f=l.selectAll("path").data(r.length?[r]:[]),h=f.enter().append("path").attr("d",u);f.merge(h).attr("d",s)}({mount:n,styles:ck(ck({},u),{},{stroke:u.fill}),points:xx(r),selector:".".concat(e.config().classPrefix,"-area-disconnected-points")});var s=e._graphicElems,l=i.effect,f=i.duration,h=i.disabled,d=hp(n),p=Fl[o],g=dp(d,"g",[1],".".concat(e.config().classPrefix,"-area-connected-points")).selectAll("path").data(r.length?[r]:[]),v=["enter","update"].map((function(t){return uk().curve(p).x((function(e){return e[t].x})).y1((function(e){return e[t].y})).y0((function(e){return e[t].y0})).defined((function(t){return!bt.isInvalid(t.normalizedData.y)}))})),y=fg()(v,2),m=y[0],b=y[1];d.attr("class",a);var x=r;c&&(x=x.filter((function(t){return!bt.isInvalid(t.normalizedData.y)})));var _=g.enter().append("path").attr("d",m(x)).each((function(t){t.forEach((function(t){null!==t.rowId&&(s[t.rowId]=d)}))})),w=g.merge(_);h||(w=w.transition().ease(Os[l]).duration(f).on("end",e.registerAnimationDoneHook())),w.attr("d",b(x))};n(95);var lk=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;return gg()(this,n),(t=e.call(this))._dimensionMap={},t}return yg()(n,[{key:"calculateDomainFromData",value:function(t,e){var r=Sv()(kg()(n.prototype),"calculateDomainFromData",this).call(this,t),i=bt.FieldType.MEASURE;return[jg.X,jg.Y].forEach((function(t){e["".concat(t,"FieldType")]===i&&Us(r[t],"length")&&(r[t][0]=Math.min(r[t][0],0),r[t][1]=Math.max(0,r[t][1]))})),r}},{key:"getDrawFn",value:function(){return sk}},{key:"getDimensionMap",value:function(t){var e=this;return this._dimensionMap[t]||(this._dimensionMap[t]=Object.keys(this._pointMap).reduce((function(n,r){var i=e._pointMap[r].data[t];return n[i]||(n[i]=[]),n[i].push(e._pointMap[r]),n}),{})),this._dimensionMap[t]}},{key:"getNearestPoint",value:function(t,e,n){var r=n.searchRadius,i=this.data();if(!i||i&&i.isEmpty())return null;r=void 0!==r?r:this.config().nearestPointThreshold;var a,o=this._voronoi.find(t,e,r),c=null;if(!o&&n.dimValue&&this._pointMap){for(var u=n.dimValue[1][0],s=this.getDimensionMap(n.dimValue[0][0])[u]||[],l=0,f=s.length;l<f;l++){var h=s[l].update,d=h.y,p=h.y0;if(d<e&&e<p){a=l,c=s[l];break}}void 0!==a&&(o={index:a,data:{x:t,y:e,data:c}})}var g=Us(o,"data","data","update");if(o){var v=o.data.data,y=v.source,m=v.rowId;return{id:this.getIdentifiersFromData(y,m),dimensions:[{x:g.x,y0:g.y0,y:g.y,width:2,height:2}],point:o.data.data,layerId:this.id()}}return null}},{key:"translatePoints",value:function(t){var e=this,n=[],r=this.transformType(),i=this.axes(),a=i.color,o=this.config(),c=o.encoding,u=this.encodingFieldsInf(),s=u.y0Field,l=u.textField,f=i.x,h=i.y,d=o.individualClassName,p=h.domain()[0],g=p<0?h.getScaleValue(0):h.getScaleValue(p);return yx(t,i),n=t.map((function(n,i){var o,u=f.getScaleValue(n.x)+f.getUnitWidth()/2,p=h.getScaleValue(n.y),v=s||r===Mg?h.getScaleValue(n.y0):g;o=a.getColor(bt.getActualValue(n.color));var y,m=bt.isInvalid(n.y),b=bt.isInvalid(n.y0),x=lx({values:{x:u,y:p,y0:v,color:o,text:n.text},data:n},i,t,e),_={fill:o=x.color,"fill-opacity":c.fillOpacity.value};l&&(y=Ow(e,{x:x.x,y:x.y,text:x.text,color:xw(a,n.color)},n,i,t));var w={enter:{x:u,y:m?null:g,y0:b?null:g},update:{x:u,y:m?null:x.y,y0:b?null:x.y0},source:n.source,rowId:n.rowId,data:n.dataObj,normalizedData:n,className:d?d(n,i,t,e):"",style:_,meta:fx(_),text:y};return w.className=Xb(n,i,t,e),e.cachePoint(n.rowId,w),w})),l&&(n=this.optimizeTextLabelPositions(n)),(n=nx(this,n)).filter((function(t){var e=t.update;return!isNaN(e.x)}))}},{key:"resolveTransformType",value:function(){return this._transformType=ux(this),this._transformType}},{key:"getPathStyle",value:function(t){return{fill:t,"fill-opacity":.3}}},{key:"getSideEffects",value:function(){return{AreaAnchors:$w,PersistentAreaAnchors:Zw,BrushAreaAnchors:Jw}}},{key:"autoDetectTransformType",value:function(t){return t.length?Mg:Og}}],[{key:"defaultConfig",value:function(){return ak}}]),n}(t)},fk=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return Hg}}]),n}(of(bw).with(mw,rk,lk));function hk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var dk={classPrefix:Sg,defClassName:"layer-arc",padding:{top:1,bottom:1,left:1,right:1},className:"",interaction:{highlight:{style:{fill:function(){return{diff:{a:-.1}}}}},fade:{style:{fill:function(){return{diff:{a:-.3}}}}},focus:{style:{fill:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},height:100,width:100,sort:"",colors:["#F44336","blue","green","yellow","orange","purple"],transform:{type:"identity"},encoding:{"stroke-width":{value:"2px"},"stroke-linejoin":{value:"round"},angle:{value:"1"},radius:{value:"1",range:function(t){return t}},opacity:{value:"1"},color:{value:"1"},shape:{value:"1"},size:{value:"1"},text:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hk(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Sw)},transition:{effect:"cubic",duration:500}},pk=function(t,e,n){var r=t[e-1],i=t[e],a=n.angle.range(),o=fg()(a,2),c=o[0],u=o[1];return r&&i?{update:{angle0:Us(r,"update","angle"),angle:Us(i,"update","angle0")}}:i?{update:{angle0:(c-90)*Math.PI*2/360,angle:(c-90)*Math.PI*2/360}}:{update:{angle0:(u-90)*Math.PI*2/360,angle:(u-90)*Math.PI*2/360}}},gk=function(t,e){var n=e[0];return function(e){return t(al()(n._previousInfo,n)(e))}},vk=function(t){return t+Math.PI/2};function yk(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function mk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mk(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(96);var xk=jl.arc,_k=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r,i,a){var o;return gg()(this,n),(o=e.call(this,t,r,i,a))._prevPieData={},o._doneSettingPolarAxesRangeOnPostLayout=!1,o}return yg()(n,[{key:"elemType",value:function(){return"path"}},{key:"resolveTransformType",value:function(){return this._transformType=Eg,this._transformType}},{key:"getTransformedData",value:function(t,e,n,r){var i=r.xField,a=r.yField,o=[];return i&&o.push(i),a&&o.push(a),this.config(e),Yb(t,this.config(),bk(bk({},n),{},{groupBy:o,type:Eg}),r)}},{key:"getNearestPoint",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.event;return r||(r=Op()),this.getDataFromEvent(r)}},{key:"getDataFromEvent",value:function(t){var e=hp(t.target).data()[0];if(ps(e)&&e.source){var n=e.source,r=e.rowId;return{id:this.getIdentifiersFromData(n,r),layerId:this.id(),point:e}}return null}},{key:"getTextLabelPositionInfo",value:function(t,e){if(1===e.length)return{x:0,y:0,textAnchor:"middle"};var n=vk(t.angle0),r=n+(vk(t.angle)-n)/2,i=t.radius*Math.sin(r),a=-t.radius*Math.cos(r);return{x:i>0?i+3:i-3,y:a>0?a+3:a-3,textAnchor:i>0?"start":"end"}}},{key:"translateSinglePoint",value:function(t,e,n,r,i){var a=this.axes(),o=a.x,c=a.y,u=a.color,s=i.angle,l=i.radius;r=r||{};var f=s.getScaleValue(t.angle);if(f){!r[t.angle]&&(r[t.angle]=0);var h=f[r[t.angle]++],d=h.startAngle,p=h.endAngle,g=lx({values:{x:o.getScaleValue(t.x),y:c.getScaleValue(t.y),radius:l.getOuterRadius(t.radius),radius0:l.getInnerRadius(t.radius0),color:u.getColor(t.color),angle0:d,angle:p,startAngle:d,endAngle:p,startAngle0:d,endAngle0:p,text:t.text},data:t},e,n,this),v=this.axes();return["x","y"].forEach((function(t){var e=v[t];if(e instanceof Oy){var n=e.getUnitWidth();g[t]+=n/2}})),g}}},{key:"translatePoints",value:function(t,e){var n=this,r=this.encodingFieldsInf().textField,i={},a=this._points[0]||[],o=[],c={};return this._prevPieData={},a.forEach((function(t,e){n._prevPieData[t.rowId]=[t,e],i[t.index]=t})),t.forEach((function(a,u){var s=n.translateSinglePoint(a,u,t,c,e);if(s){var l,f=a.rowId;if(r&&(l=Ow(n,{x:s.x,y:s.y,text:s.text,color:kw},a,u,t))){var h=n.getTextLabelPositionInfo({angle0:s.angle0,angle:s.angle,radius:s.radius,text:l.text},t);l.update.x=h.x,l.update.y=h.y,l.textAnchor=h.textAnchor}var d=s.color,p={source:a.source,index:u,enter:{},update:{x:s.x,y:s.y,angle0:s.angle0,angle:s.angle,radius0:s.radius0,radius:s.radius},color:d,text:l,meta:fx({fill:d}),rowId:f,data:a.dataObj,_previousInfo:n._prevPieData[f]?n._prevPieData[f][0]:pk(i,u,e)};o.push(p),n.cachePoint(f,p)}})),o}},{key:"render",value:function(t,e){var n=this;this._doneSettingPolarAxesRangeOnPostLayout?this._doneSettingPolarAxesRangeOnPostLayout=!1:this.setPolarAxesRange();var r=this.config(),i=r.classPrefix,a=r.defClassName,o=r.cornerRadius,c=r.padAngle,u=r.padRadius,s=r.transition,l=zs(e.transition,s),f=this.encodingFieldsInf().textField,h=Bs(a,this.id(),i),d=this._arcFn=xk().cornerRadius(o).startAngle((function(t){return vk(t.update.angle0)})).endAngle((function(t){return vk(t.update.angle)})).padAngle(c).padRadius(u).outerRadius((function(t){return t.update.radius})).innerRadius((function(t){return t.update.radius0}));this._points=this._normalizedData.map((function(t,e){return n.translatePoints(t,n._polarAxes[e])})).reduce((function(t,e){var n=e.filter((function(t){return!Number.isNaN(t.update.x)&&!Number.isNaN(t.update.y)}));return n.length?[].concat(dg()(t),[n]):t}),[]);var p=this._graphicElems={};this._linkedElems={};var g=dp(hp(t),"g",this._points,"".concat(h[0],"-group")).classed("".concat(h[1],"-group"),!0).attr("transform",(function(t){var e=fg()(t,1)[0];return"translate(".concat(e.update.x,",").concat(e.update.y,")")})),v=[],y=0;return dp(g,"g",(function(t){return t}),"".concat(h[0]),{update:function(t,e){var r=dp(t,"path",(function(t){return[t]}),"".concat(h[0],"-path")).style("fill",(function(t){return t.color})).each((function(t){p[t.rowId]=hp(this)}));l.disabled?r.attr("d",d):r=r.transition().duration(l.duration).on("end",n.registerAnimationDoneHook()).attrTween("d",(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return gk(d,e)})),r.attr("class",(function(t,e){var r=Xb(t,e,n._points,n);return"".concat(h[0],"-path ").concat(h[1],"-path-").concat(t.index,"\n                        ").concat(r)})),f&&n.animationDone().then((function(){var r=[e.text].filter((function(t){return!!t})),i=Cw(n,t.node(),r,{className:h[0]}).elems;n._linkedElems=bk(bk({},n._linkedElems),{},{text:Object.assign({},n._linkedElems.text,i)})}))},exit:function(t,e){var n=v[y],r=y;n?n[n.length-1].datum.index===e.index-1?n.push({elem:t,datum:e}):y++:n=[{elem:t,datum:e}],v[r]=n}}).attr("class",(function(t,e){return"".concat(h[0]," ").concat(h[1],"-").concat(e)})),function(t,e,n){t.length>0&&t.forEach((function(t){var r=t[0].datum.update.angle0,i=t[t.length-1].datum.update.angle,a=2*Math.PI*r/(2*Math.PI+r-i);t.forEach((function(t){var r=t.elem,i=t.datum;r.each((function(){var t=hp(this);t.selectAll("path").transition().duration(e.duration).attrTween("d",(function(){return function(t){return n(al()(i,{update:{angle0:a,angle:a,radius:i.radius,radius0:i.radius0}})(t))}})).remove(),t.remove()}))}))}))}(v,l,d),this.postRender(),this}},{key:"getPointsFromIdentifiers",value:function(t){if(!this.data())return[];var e,n=[],r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return yk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yk(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;this._pointMap[i]&&n.push(this._pointMap[i])}}catch(t){r.e(t)}finally{r.f()}var a=n[0];if(a){var o=this._arcFn.centroid(a);return[{x:o[0]+a.update.x,y:o[1]+a.update.y,width:2,height:2}]}return[]}},{key:"autoDetectTransformType",value:function(){return Og}},{key:"postLayout",value:function(){this.setPolarAxesRange(),this._doneSettingPolarAxesRangeOnPostLayout=!0}},{key:"calculateExtendDomainDiffs",value:function(){var t=this,e=this.axes(),n=e.x,r=e.y;if(n instanceof Oy&&r instanceof Oy)return{x:[0,0],y:[0,0]};var i={left:0,right:0,top:0,bottom:0},a=Math.abs(n.range()[1]-n.range()[0]),o=Math.abs(r.range()[1]-r.range()[0]);return this._normalizedData.forEach((function(e,n){var r={},c=t._polarAxes[n];e.forEach((function(n,u){var s=t.translateSinglePoint(n,u,e,r,c);if(s){var l=s.x,f=s.y,h=s.radius,d=l-h;d<0&&(i.left=Math.max(Math.abs(d),i.left));var p=a-(l+h);p<0&&(i.right=Math.max(Math.abs(p),i.right));var g=f-h;g<0&&(i.top=Math.max(Math.abs(g),i.top));var v=o-(f+h);v<0&&(i.bottom=Math.max(Math.abs(v),i.bottom))}}))})),{x:[i.left,i.right],y:[i.top,i.bottom]}}},{key:"getPointsWithinRange",value:function(){return[]}}],[{key:"defaultConfig",value:function(){return dk}},{key:"formalName",value:function(){return"arc"}},{key:"defaultPolicy",value:function(t,e){var n=Js(t,e),r=n.encoding.radius.range,i=r;return i||(i=function(t){return t}),"function"!=typeof i&&(i=function(){return r}),n.encoding.radius.range=i,n}}]),n}(t)},wk=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return"arc"}}]),n}(of(bw).with(mw,_k)),kk=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return Vg}}]),n}(of(bw).with(mw,rk));function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Mk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sk(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Ok={defClassName:"layer-text",classPrefix:Sg,className:"",transform:{},interaction:{highlight:{style:{"border-color":"black"}},focusStroke:{style:{"border-color":"black"}},doubleStroke:{style:{"border-color":"black"}}},crossline:!1,transition:{effect:"cubic",duration:1e3},encoding:{color:{},size:{},radius:{},angle:{},text:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ek(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ek(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Sw),"border-color":{value:""}},align:Zg};n(97);var Ck=function(t,e,n){for(var r=[],i=n.axes(),a=i.color,o=n.config().encoding.text,c=o.field,u=o.value,s=c?n.data().getFieldIndex(c):-1,l=jg.X,f=jg.Y,h=function(e,o){var h=t[e],d=h.source,p=c?d[s]:u,g=[l,f].map((function(t){return i[t]?i[t].getScaleValue(h[t])+i[t].getUnitWidth()/2:0})),v=fg()(g,2),y=v[0],m=v[1],b=a.getColor(h.color,a),x=lx({values:{x:y,y:m,text:p,color:b},data:h},e,t,n),_=Ow(n,{x:x.x,y:x.y,color:x.color,text:x.text},h,e,t);_&&!bt.isInvalid(_.text)&&(_.xIndex=i.x?i.x.getIndex(h.x):null,_.yIndex=i.y?i.y.getIndex(h.y):null,r.push(_),n.cachePoint(h.rowId,_))},d=0,p=t.length;d<p;d++)h(d);return r=(r=nx(n,r)).filter((function(t){var e=t.update;return!isNaN(e.x)&&!isNaN(e.y)}))},Ak=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._rtree=new Po,t}return yg()(n,[{key:"elemType",value:function(){return"text"}},{key:"getPointTranslator",value:function(){return Ck}},{key:"translatePoints",value:function(t){return Ck(t,0,this)}},{key:"render",value:function(t){var e=this,n=this.config(),r=this._normalizedData,i=r.length?this.translatePoints(r[0],{},this):[];this._points=i;var a=n.className,o=Bs(n.defClassName,this.id(),n.classPrefix);hp(t).classed("".concat(o.join(" ")," ").concat(a),!0).style("width","inherit").style("height","inherit"),this._graphicElems={},this._linkedElems={},"html"===this.renderer()?this.renderHTML(t,i):_p({data:r,append:"g",selector:"g",container:t,each:function(t,n){var r=n.node(),i=e.translatePoints(t,{},e);xp(r,{"text-anchor":Fg}),function(t,e,n,r){var i=e.filter((function(t){return!!t})),a=Cw(r,t,i,n),o=(a.selection,a.elems);r._graphicElems=o,r._linkedElems=Mk(Mk({},r._linkedElems),{},{text:Object.assign({},r._linkedElems.text,o)})}(r,i,{className:o[0]},e)}});var c=this.dependencies().smartLabel;c.setStyle(Ap(hp(t),o[0]));var u=this._points.flat().filter((function(t){return null!==t})).map((function(t){var e=t.update,n=e.x,r=e.y,i=c.getOriSize(t.text),a=i.width,o=i.height;return{minX:n-a/2,maxX:n+a/2,minY:r-o/2,maxY:r+o/2,width:a,height:o,data:t.data,point:t,x:n,y:r}}));return this._rtree=new Po,this._rtree.load(u),this.postRender(),this}},{key:"renderHTML",value:function(t,e){var n={},r=hp(t),i=[],a=this.axes(),o=a.x,c=a.y,u=this.dependencies().smartLabel,s=this.config(),l=s.classPrefix,f=s.align;e.forEach((function(t){var e=t.xIndex,n=t.yIndex;i[n]||(i[n]=[]),i[n][e]=t}));var h=c.scale(),d=o.scale(),p=h.paddingInner()*h.step(),g=d.paddingInner()*d.step(),v=this.config().encoding.color.field,y=dp(r,"div",[1],"muze-layer-text-grid-container"),m=Math.ceil(o.getUnitWidth()+g),b=c.domain().length,x=o.domain().length,_=Math.ceil(c.getUnitWidth()+p);y.style("width","inherit").style("height","inherit").style("display","grid").style("grid-template-columns","repeat(".concat(o.domain().length,", 1fr)")).style("grid-template-rows","repeat(".concat(c.domain().length,", 1fr)")),u.useEllipsesOnOverflow(!0);for(var w=[],k=0;k<b;k++)for(var S=0;S<x;S++){var M=i[k]&&i[k][S];M?w.push(M):w.push({xIndex:S,yIndex:k})}var E="muze-layer-text-cell",O=dp(y,"div",w,E),C="".concat(E," ").concat(l,"-text-row-odd"),A="".concat(E," ").concat(l,"-text-row-even");O.each((function(t){var e=hp(this),r=t.yIndex,i=t.text,a=t.rowId,o=(r+1)%2==0?A:C;if(e.attr("class",o),v&&e.style("color",t.color),f&&e.style("text-align",f),i){var c=Us(t,"text"),s=u.getSmartText(c,m,_,!0);this.textContent=s.text,n[a]=e}else this.textContent=null})),this._graphicElems=n}},{key:"getNearestPoint",value:function(t,e,n){var r=n.event;if(r||(r=Op()),"html"===this.renderer())return this.getDataFromEvent(r);var i=this._rtree.search({minX:Math.max(t-1,0),minY:Math.max(e-1,0),maxX:t+1,maxY:e+1});return i.length?this.getDataFromEvent(r,i[0].point):null}},{key:"getDataFromEvent",value:function(t,e){return bx(this,t,e)}},{key:"autoDetectTransformType",value:function(){return Og}},{key:"getBoundBox",value:function(t){if("html"!==this.renderer()){var e=t.update,n=e.x,r=e.y,i=this._rtree.search({minX:Math.max(n-1,0),minY:Math.max(r-1,0),maxX:n+1,maxY:r+1});return{x:i[0].x,y:i[0].y,width:i[0].width,height:i[0].height}}var a=t.update,o=this.axes(),c=o.x,u=o.y,s=u.scale(),l=c.scale(),f=s.paddingInner()*s.step(),h=l.paddingInner()*l.step();return a.width=c.getUnitWidth()+h,a.height=u.getUnitWidth()+f,a.x-=a.width/2,a.y-=a.height/2,a}}],[{key:"defaultConfig",value:function(){return Ok}},{key:"formalName",value:function(){return"text"}}]),n}(t)},Pk=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return"text"}}]),n}(of(bw).with(mw,Ak));function Dk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Rk={defClassName:"layer-point",className:"",classPrefix:Sg,defColorStyle:"stroke",interaction:{highlight:{className:"highlight-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"center"},focusStroke:{className:"focus-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},commonDoubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},brushStroke:{className:"brush-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},doubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},fade:{style:{fill:function(){return{diff:{a:-.8}}}}},focus:{style:{fill:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},innerPadding:.1,nearestPointThreshold:5,transform:{},transition:{effect:"cubic",duration:1e3,disabled:!0},encoding:{size:{value:30},color:{},stroke:{value:"#000"},"stroke-width":{value:0},fill:{},shape:{value:"circle"},x:{},y:{},text:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dk(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Sw),"stroke-opacity":{value:1},"fill-opacity":{value:.5},strokePosition:{value:"center"},interaction:{anchors:"highlight","persistent-anchors":"focusStroke","brush-anchors":"brushStroke"}},shapes:["circle","cross","diamond","square","star","wye","triangle"],sizes:[20,30,40,50,60,70],interactive:!0},Ik=(n(98),function(t){var e=t.data,n=t.datum,r=t.i,i=t.layerInst,a=t.xPx,o=t.yPx,c=i.axes(),u=c.shape,s=c.color,l=c.size,f=u.getShape(n.shape),h=l.getSize(n.size),d=s.getColor(n.color),p=i.config().encoding,g=p.stroke.value,v=p["stroke-width"].value,y=i.encodingFieldsInf().textField,m=lx({values:{x:a,y:o,color:d,stroke:g,"stroke-width":v,size:h,shape:f,data:n,text:n.text},data:n},r,e,i),b=n.rowId,x=n.source;f=m.shape,h=m.size;var _,w={fill:d=m.color,stroke:m.stroke,"stroke-width":m["stroke-width"]},k=m.x,S=m.y;y&&(_=Ow(i,{x:0,y:0,text:m.text,color:kw},n,r,e));var M={x:k,y:S};return{enter:M,update:M,shape:f,source:x,rowId:b,style:w,data:n.dataObj,meta:Object.assign({layerId:i.id()},fx(w,{strokePosition:p.strokePosition.value})),size:h,text:_}}),Tk=function(t,e,n){for(var r=[],i=n.config().encoding,a=n.axes(),o=n.measurement(),c=e.offset,u=c.x,s=c.y,l=function(e,c){var l=t[e],f=[jg.X,jg.Y].map((function(t){var e=null===l[t]?void 0:l[t],n=t===jg.X?o.width:o.height;return i[t].field?a[t].getScaleValue(e):n/2})),h=fg()(f,2),d=h[0],p=h[1];if(d+=u,p+=s,!isNaN(d)&&!isNaN(p)){var g=Ik({data:t,datum:l,i:e,layerInst:n,xPx:d,yPx:p});g.className=Xb(l,e,t,n),r.push(g),n.cachePoint(l.rowId,g)}},f=0,h=t.length;f<h;f++)l(f);return r=nx(n,r)},Nk="center",Fk="inside",jk="outside",Lk=function(t,e){return t===Nk?-e:t===Fk?-e*Math.PI:+e*Math.PI},Bk={},zk=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._voronoi=new Vs,t._bandScale=Ll.band(),t._overlayPath={},t.formattedUids=[],t._rtree=null,t}return yg()(n,[{key:"elemType",value:function(){return"g"}},{key:"translatePoints",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Tk(t,e,this)}},{key:"render",value:function(t){var e,n=this,r=0,i=this.config(),a=this._transformedData.getUniqueValues(),o=i.transition,c=i.className,u=i.defClassName,s=i.classPrefix,l=this._normalizedData,f=hp(t),h=Bs(u,this.id(),s);this._points=[],this._pointMap={},this._overlayPath={},f.classed(h.join(" "),!0).classed(c,!0),this._points=this.generateDataPoints(l,a),this._graphicElems={},this._linkedElems={};var d=this.data().getSchema();return dp(t,"g",this._points,null,{update:function(t,a){r=Math.max.apply(Math,[r].concat(dg()(a.map((function(t){return t.size||0}))))),e="".concat(h[0]),n.constructor.drawFn()({layer:n,container:t.node(),points:a,interpolate:i.interpolate,className:e,transition:o,keyFn:function(t){return sx(t.source,d)}})}},(function(t){return t[0].rowId})),this._maxSize=2*r,this.postRender(),this}},{key:"postRender",value:function(){if(Sv()(kg()(n.prototype),"postRender",this).call(this),this.config().interactive){this.attachDataToVoronoi(this._points);var t=this.getBoundBoxes().flat().filter((function(t){return null!==t}));this._rtree=new Po,this._rtree.load(t)}}},{key:"attachDataToVoronoi",value:function(t){Jb(this._voronoi,t)}},{key:"generateDataPoints",value:function(t,e){var n=this,r=ix(this,e),i=fg()(r,2),a=i[0],o=i[1],c=a.offsetValues||[],u=o.offsetValues||[];return t.map((function(t,e){var r=n.getMeasurementConfig(c[e],u[e],a.span,o.span);return n.translatePoints(t,r)})).filter((function(t){return t.length}))}},{key:"getMeasurementConfig",value:function(t,e,n,r){return{offset:{x:(t||0)+n/2,y:(e||0)+r/2},span:{x:n,y:r}}}},{key:"getShapeRadius",value:function(t){return t?t.data.data.size:0}},{key:"getNearestPoint",value:function(t,e){var n=this.config().nearestPointThreshold,r=Math.max(this._maxSize,n);if(!this.data())return null;var i=this._voronoi.find(t,e,r),a=i&&i.data.data.update,o=this.getShapeRadius(i);if(i&&ff({x:a.x,y:a.y,r:o+n},{x:t,y:e})){var c=i.data.data,u=c.source,s=c.rowId;return{id:this.getIdentifiersFromData(u,s),dimensions:[{x:a.x,y:a.y,width:o,height:o}],point:i.data.data,layerId:this.id()}}return null}},{key:"addOverlayPathAndStyles",value:function(t,e,n,r,i){if(n.strokeProps[n.type]){var a,o=t.parentElement;if(this._overlayPath[e.rowId])a=this._overlayPath[e.rowId];else{if(!i.apply)return;(a=Ep("path",o)).attr("class","muze-layer-path-highlight"),this._overlayPath[e.rowId]=a}if(i.apply&&"stroke-width"===n.type){var c=e.size*e.size*Math.PI;if("string"==typeof e.shape){var u="".concat(e.shape,"-").concat(Math.round(c)),s=Bk[u];s||(s=Bk[u]=Pl(e.shape).size(c)),a.attr("d",s)}}var l=n.value;"function"==typeof l&&(l=l(a.style(n.type))),a.style(n.type,l),e.isPathPresent||(gp(t,a.node()),e.isPathPresent=!0)}}},{key:"getBoundBoxes",value:function(){return mx(this._points.flat())}},{key:"applyElementStyles",value:function(t,e,n){var r=t.select("path");e.forEach((function(t){r.style(t,n[t])}))}},{key:"getOverlayPathMount",value:function(){return null}},{key:"autoDetectTransformType",value:function(){return Og}},{key:"calculateExtendDomainDiffs",value:function(){var t=this,e=this.axes(),n=e.x,r=e.y,i=e.size,a=this.config().encoding;if(n instanceof Oy&&r instanceof Oy)return{x:[0,0],y:[0,0]};var o={left:0,right:0,top:0,bottom:0},c=Math.abs(n.range()[1]-n.range()[0]),u=Math.abs(r.range()[1]-r.range()[0]),s=this._transformedData.getUniqueValues(),l=ix(this,s),f=fg()(l,2),h=f[0],d=f[1],p=h.offsetValues||[],g=d.offsetValues||[];return this._normalizedData.forEach((function(e,n){for(var r=t.getMeasurementConfig(p[n],g[n],h.span,d.span).offset,s=r.x,l=r.y,f=function(n,r){var f=e[r],h=[jg.X,jg.Y].map((function(e){var n=null===f[e]?void 0:f[e],r=e===jg.X?c:u;return a[e].field?t.axes()[e].getScaleValue(n):r/2})),d=fg()(h,2),p=d[0],g=d[1];if(p+=s,g+=l,!isNaN(p)&&!isNaN(g)){var v=lx({values:{x:p,y:g,size:i.getSize(f.size)},data:f},r,e,t),y=v.x,m=v.y,b=v.size,x=y-b;x<0&&(o.left=Math.max(Math.abs(x),o.left));var _=c-(y+b);_<0&&(o.right=Math.max(Math.abs(_),o.right));var w=m-b;w<0&&(o.top=Math.max(Math.abs(w),o.top));var k=u-(m+b);k<0&&(o.bottom=Math.max(Math.abs(k),o.bottom))}},v=0,y=e.length;v<y;v++)f(0,v)})),{x:[o.left,o.right],y:[o.top,o.bottom]}}}],[{key:"defaultConfig",value:function(){return Rk}},{key:"drawFn",value:function(){return Dw}}]),n}(t)},Hk=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return Gg}}]),n}(of(bw).with(zk)),Wk=function(t){var e=t.layer,n=t.points,r=t.container,i=t.keyFn,a=t.className,o=e._graphicElems,c={enter:function(t,e){!function(t,e){var n=t,r=e.enter||{};Object.entries(r).forEach((function(t){return!isNaN(t[1])&&n.attr(t[0],t[1])}))}(t,e)},update:function(n,r,i){o[r.rowId]=n,function(t,e,n,r,i){var a=i.transition,o=a.duration,c=a.disabled,u=a.effect,s=e,l=c?s:s.transition().duration(o).ease(Os[u]).on("end",t.registerAnimationDoneHook()),f=n.update||n,h=n.style||{};n.className&&s.classed(n.className,!0),Object.entries(f).forEach((function(t){return!isNaN(t[1])&&l.attr(t[0],t[1])})),Object.entries(h).forEach((function(t){return s.style(t[0],t[1])}))}(e,n,r,0,t)}};return dp(r,"g",n,null,{update:function(t,e){dp(t.node(),"rect",(function(t){return[t]}),null,c,i),t.attr("class","".concat(a,"-").concat(e.rowId)),t.classed(e.className,!0)}},i)};function Vk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var Uk={classPrefix:Sg,defClassName:"layer-bar",className:"",interaction:{highlight:{style:{stroke:"black","stroke-width":"1px"},strokePosition:"center"},focusStroke:{className:"focus-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},brushStroke:{className:"brush-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},doubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},commonDoubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},fade:{style:{fill:function(){return{diff:{a:-.3}}}}},focus:{style:{fill:function(){return{diff:{a:-.5}}}}},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlight:{style:{fill:function(){return{diff:{a:-.5}}}}}},transform:{},transition:{effect:"cubic",duration:1e3},innerPadding:.1,encoding:{color:{},detail:{},x:{},y:{},x0:{},y0:{},size:{value:10},stroke:{value:"#000"},strokeWidth:{value:"0px"},strokePosition:{value:"center"},text:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vk(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Sw)},highlightExactPoint:!1},Gk=(n(47),n(28)),qk=n.n(Gk);function Yk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xk(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yk(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yk(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $k={center:function(){return{M:{x:0,y:0},L1:{x:0,y:0},L2:{x:0,y:0},L3:{x:0,y:0}}},inside:function(t){return{M:{x:+t,y:+t},L1:{x:-t,y:+t},L2:{x:-t,y:-t},L3:{x:+t,y:-t}}},outside:function(t){return{M:{x:-t,y:-t},L1:{x:+t,y:-t},L2:{x:+t,y:+t},L3:{x:-t,y:+t}}}},Kk=function(t){return!(t.axes().x instanceof Ey)},Qk=function(t,e){var n=t._dependencies.smartLabel,r=e.width,i=e.height,a=e.text,o=n.getOriSize(a),c=o.width,u=o.height;if(Kk(t)){if(u>i)return!0}else if(c>r)return!0;return!1},Zk=function(t,e,n,r){var i,a,o=t.size,c=t.x,u=t.y,s="object"===qk()(e)?e.value():e,f=n.orientation;a=n.offset;var h="x"===f?c:u;return s&&!bt.isInvalid(s)&&[l.TIME,l.BAND].includes(h.constructor.type())?(i=o.getSize(s),a+=(n.size-i)/2):i=c&&c.constructor.type()===l.LINEAR&&u&&u.constructor.type()===l.LINEAR?r.size.value:n.size,{offset:a,span:i}},Jk=function(t){var e=t.data,n=t.config,r=t.axes,i=t.encoding,a=t.context,o=n.sizeConfig,c=function(t,e,n,r){return Zk(t,e,{offset:n.barWidthOffset,size:n.barWidth,orientation:"x"},r)}(r,e.size,o,i),u=function(t,e,n,r){return Zk(t,e,{offset:n.barHeightOffset,size:n.barHeight,orientation:"y"},r)}(r,e.size,o,i),s=tS(r.x,Xk(Xk({d:e},c),{},{measurement:a.measurement()})),l=eS(r.y,Xk(Xk({d:e},u),{},{measurement:a.measurement()})),f=rS(r,Xk(Xk({d:e},u),{},{measurement:a.measurement()})),h=nS(r,Xk(Xk({d:e},c),{},{measurement:a.measurement()})),d=Math.abs(s-h),p=Math.abs(l-f);s=Math.min(s,h),l=Math.min(l,f);var g=Kk(a);return{enter:{x:g?s:r.x?r.x.getScaleValue(r.x.domain()[0]):0,y:g?r.y?r.y.getScaleValue(r.y.domain()[0]):0:l,width:g?d:0,height:g?0:p},update:{x:s,y:l,width:d,height:p}}},tS=function(t,e){if(!t)return 0;var n=e.d,r=e.offset;return t.getScaleValue(n.x)+r},eS=function(t,e){var n=e.d,r=e.offset;return t?t.getScaleValue(n.y)+r:0},nS=function(t,e){if(!t.x)return e.measurement.width;var n=e.span,r=e.d,i=e.offset,a=r.x0;return null==a&&(a=t.x&&t.x.constructor.type()===l.LINEAR&&t.y&&t.y.constructor.type()===l.LINEAR?r.x:t.x&&t.x.constructor.type()===l.LINEAR?0:r.x),t.x.getScaleValue(a)+n+i},rS=function(t,e){if(!t.y)return e.measurement.height;var n=e.span,r=e.d,i=e.offset,a=r.y0;return null==a&&(a=t.y.constructor.type()===l.LINEAR?0:r.y),t.y.getScaleValue(a)+n+i};function iS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function aS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?iS(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var oS=ft.CONTINUOUS,cS=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._plotPadding={x:0,y:0},t._plotSpan={x:0,y:0},t._pointMap={},t._overlayPath={},t._rtree=null,t}return yg()(n,[{key:"elemType",value:function(){return"rect"}},{key:"calculateDomainFromData",value:function(t,e){var r=Sv()(kg()(n.prototype),"calculateDomainFromData",this).call(this,t,e),i=bt.FieldSubtype.TEMPORAL;return["x","y"].forEach((function(t){e["".concat(t,"FieldAs")]===oS&&e["".concat(t,"FieldSubType")]!==i&&Us(r[t],"length")&&(e["".concat(t,"0Field")]?r[t]=r[t].sort((function(t,e){return t-e})):(r[t][0]=Math.min(r[t][0],0),r[t][1]=Math.max(0,r[t][1])))})),r}},{key:"translatePoints",value:function(t,e){return function(t,e,n){for(var r=[],i=t.config().encoding,a=t.axes(),o=a.color,c=i.size||{},u=t.encodingFieldsInf(),s=u.x0Field,l=u.y0Field,f=u.textField,h=t.measurement(),d=t.transformType(),p=0,g=e.length;p<g;p++){var v=e[p],y=Jk({data:v,config:{x0Field:s,y0Field:l,transformType:d,measurement:h,sizeConfig:n,sizeEncoding:c},axes:a,encoding:i,context:t}),m=o.getColor(v.color),b=y.update,x=lx({values:{x:b.x,y:b.y,width:b.width,height:b.height,color:m,text:v.text},data:v},p,e,t);m=x.color;var _=x.x,w=x.y,k=x.width,S=x.height,M={fill:m,stroke:i.stroke.value,"stroke-width":i.strokeWidth.value},E={strokePosition:i.strokePosition.value};if(!isNaN(_)&&!isNaN(w)){var O=void 0;f&&(O=Ow(t,{x:_+k/2,y:w+S/2,text:x.text,color:xw(o,v.color)},v,p,e))&&(O.text=Qk(t,{width:x.width,height:x.height,text:O.text})?"":O.text);var C={enter:y.enter,update:{x:_,y:w,width:k,height:S},text:O,source:v.source,rowId:v.rowId,data:v.dataObj,style:M,meta:Object.assign({layerId:t.id()},fx(M,E))};C.className=Xb(v,p,e,t),r.push(C),t.cachePoint(v.rowId,C)}}return nx(t,r)}(this,t,e)}},{key:"render",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.config(),i=this.encodingFieldsInf(),a=i.textField,o=zs(n.transition,r.transition),c=this._normalizedData,u=this._transformedData,s=u.getUniqueValues(),l=this.axes(),f=l.y&&l.y.scale().range()[0],h=l.x&&l.x.scale().range()[1],d=r.defClassName,p=Bs(d,this.id(),r.classPrefix),g=r.className,v=hp(t);v.classed(p.join(" "),!0),v.classed(g,!0),wp(t,{x:0,y:0,width:h,height:f},"id-".concat(this.id())),this._points=this.generateDataPoints(c,s),this._graphicElems={},this._linkedElems={};var y=Object.keys(this._overlayPath);y.forEach((function(t){return e._overlayPath[t].remove()})),this._overlayPath={};var m=dp(v,"g",[1],"muze-layer-bars",{},null);this._overlayMount=dp(v,"g",[1],"muze-overlay-paths",{},null).node(),_p({data:this._points,container:m.node(),selector:"g",append:"g",each:function(t,n,r){var i="".concat(p[0],"-").concat(s[r]||r).toLowerCase();n.style("display","block"),Wk({layer:e,container:n.node(),points:t,className:i,transition:o,style:{},keyFn:function(t){return t.rowId}}),a&&e.animationDone().then((function(){var r=t.map((function(t){return t.text})).filter((function(t){return!!t})),i=Cw(e,n.node(),r,{className:p[0]}).elems;e._linkedElems=aS(aS({},e._linkedElems),{},{text:Object.assign({},e._linkedElems.text,i)})}))}});var b=this.getBoundBoxes().flat().filter((function(t){return null!==t}));return this._rtree=new Po,this._rtree.load(b),this.postRender(),this}},{key:"generateDataPoints",value:function(t,e){var n=this,r=ix(this,e),i=fg()(r,2),a=i[0],o=i[1],c=a.offsetValues||[],u=o.offsetValues||[];return this._plotSpan={x:a.groupSpan||0,y:o.groupSpan||0},this._plotPadding={x:a.padding||0,y:o.padding||0},this._pointMap={},t.map((function(t,e){return n.translatePoints(t,{barWidth:a.span,barWidthOffset:c[e]||0,barHeight:o.span,barHeightOffset:u[e]||0})}))}},{key:"getPlotPadding",value:function(){return this._plotPadding}},{key:"resolveTransformType",value:function(){return this._transformType=ux(this),this._transformType}},{key:"getNearestPoint",value:function(t,e){if(!this.data())return null;var n=this._rtree.search({minX:Math.max(t-1,0),minY:Math.max(e-1,0),maxX:t+1,maxY:e+1});return n.length?this.getDataFromEvent(null,n[0].point):null}},{key:"getDataFromEvent",value:function(t,e){return bx(this,t,e)}},{key:"getPlotSpan",value:function(){return this._plotSpan}},{key:"hasPlotSpan",value:function(){return!0}},{key:"addOverlayPathAndStyles",value:function(t,e,n,r,i){if(n.strokeProps[n.type]){var a,o,c;if(this._overlayPath[e.rowId])a=this._overlayPath[e.rowId];else{if(!i.apply)return;var u=dp(i.mountPoint,"g",[1],null,{},(function(t){return"".concat(t.x," ").concat(e.rowId)}));(a=dp(u,"path",[e],null,{},(function(t){return"".concat(t.update.x," ").concat(e.rowId)}))).style("fill","none"),a.style("fill-opacity",0),a.attr("id",e.rowId),this._overlayPath[e.rowId]=a}if("stroke-width"===n.type){var s=(c=(o={width:parseInt(n.value,10),position:r}).width/2,$k[o.position](c)),l=s.L1,f=s.L2,h=s.L3,d=s.M;a.attr("d",(function(t){return"M ".concat(t.update.x+d.x," ").concat(t.update.y+d.y,"\n            L ").concat(t.update.x+t.update.width+l.x," ").concat(t.update.y+l.y,"\n            L ").concat(t.update.x+t.update.width+f.x," ").concat(t.update.y+t.update.height+f.y,"\n            L").concat(t.update.x+h.x," ").concat(t.update.y+t.update.height+h.y," Z")}))}var p=n.value;"function"==typeof p&&(p=p(a.style(n.type))),a.style(n.type,p),e.isPathPresent||(gp(i.mountPoint,a.node()),e.isPathPresent=!0)}}},{key:"getBoundBoxes",value:function(){return this._points.flat().map((function(t){var e=t.update,n=e.x,r=e.y;return{minX:n,maxX:n+e.width,minY:r,maxY:r+e.height,data:t.data,point:t}}))}},{key:"getBoundBox",value:function(t){var e=this.measurement(),n=t.update;return n.x=Math.max(n.x,0),n.y=Math.max(n.y,0),n.x+n.width>e.width&&(n.width=e.width-n.x),n.y+n.height>e.height&&(n.height=e.height-n.y),n}}],[{key:"defaultConfig",value:function(){return Uk}}]),n}(t)},uS=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return qg}}]),n}(of(bw).with(mw,cS));function sS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var lS={defClassName:"layer-tick",className:"",classPrefix:Sg,nearestPointThreshold:10,interaction:{fade:{style:{stroke:function(){return{diff:{a:-.8}}}}},focus:{style:{stroke:function(){return{diff:{a:-.5}}}}},highlight:{className:"highlight-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"center"},focusStroke:{className:"focus-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},commonDoubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},brushStroke:{className:"brush-stroke-class",style:{stroke:"black","stroke-width":"1px"},strokePosition:"outside"},doubleStroke:{style:{stroke:"black","stroke-width":"2px"},strokePosition:"outside"},brushFocus:{style:{fill:function(){return{diff:{a:-.5}}}}},selectionHighlightFocus:{style:{fill:function(){return{diff:{a:-.5}}}}}},innerPadding:.1,transform:{},transition:{effect:"cubic",duration:1e3},interpolate:"linear",encoding:{color:{},x:{},y:{},x0:{},y0:{},radius:{},radius0:{},angle:{},angle0:{},strokeOpacity:{value:.5},fillOpacity:{value:.5},text:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sS(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Sw)},interactive:!0},fS=jl.line,hS=function(t){var e=t.points,n=t.container,r=t.keyFn,i=t.className,a=t.interpolate,o=t.layer,c=t.transition,u=c.disabled,s=hp(n),l=o._graphicElems;return s.attr("class",i),dp(s,"g",e,null,{enter:function(t,e){var n=e.enter||{};Object.entries(n).forEach((function(e){return!isNaN(e[1])&&t.attr(e[0],e[1])}))},update:function(t,e){var n=dp(t,"path",[1]);l[e.rowId]=t;var r=e.update,s=e.style;t.attr("class",i),t.classed(e.className,!0);var f=void 0!==r.x0?r.x0:r.x,h=void 0!==r.y0?r.y0:r.y,d=Fl[a],p=fS().curve(d).x((function(t){return t[0]})).y((function(t){return t[1]}));e.className&&t.classed(e.className,!0),n.attr("d",p([[r.x,r.y],[f,h]])),u||(t=t.transition().duration(c.duration).on("end",o.registerAnimationDoneHook())),Object.entries(s).forEach((function(e){return t.style(e[0],e[1])}))},exit:function(t){t.remove()}},r)},dS=(n(99),{center:function(){return{M:{x:0,y:0},L:{x:0,y:0}}},inside:function(t){return{M:{x:+t,y:+t},L:{x:-t,y:+t}}},outside:function(t){return{M:{x:-t,y:-t},L:{x:+t,y:-t}}}});function pS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gS(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pS(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var vS,yS,mS,bS,xS,_S=function(t){return function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"elemType",value:function(){return"path"}},{key:"translatePoints",value:function(t,e){return function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=n.axes(),i=[],a=r.x,o=r.y,c=n.encodingFieldsInf(),u=c.xField,s=c.yField,l=c.x0Field,f=c.y0Field,h=n.measurement(),d=r.color,p=e.offset,g=p.x,v=p.y,y=e.span,m=y.x,b=y.y,x=0,_=t.length;x<_;x++){var w=void 0,k=void 0,S=void 0,M=void 0,E=t[x],O=E.source;u&&(k=(w=a.getScaleValue(E.x)+g)+m),s&&(S=null!==(M=o.getScaleValue(E.y)+v)?M+b:null),u||(w=0,k=h.width,isNaN(M)||(S=M+=b/2)),s||(M=0,S=h.height,k=w+=m/2),l&&(k=a.getScaleValue(E.x0)+m,M+=b/2,S-=b/2),f&&(S=o.getScaleValue(E.y0)+b,w+=m/2,k-=m/2);var C=d.getColor(E.color),A=lx({values:{x:w,y:M,x0:k,y0:S,color:C},data:E},x,t,n),P={stroke:A.color};if(!isNaN(w)&&!isNaN(M)){var D={enter:{},update:{x:A.x,y:A.y,x0:A.x0,y0:A.y0},style:P,source:O,rowId:E.rowId,data:E.dataObj,meta:gS(gS({},{layerId:n.id()}),fx(P))};D.className=Xb(E,x,t,n),i.push(D),n.cachePoint(E.rowId,D)}}return nx(n,i)}(t,e,this)}},{key:"attachDataToVoronoi",value:function(t){Jb(this._voronoi,t,(function(t){var e=t.update,n=e.x,r=e.x0,i=e.y;return{x:n+(r-n)/2,y:i+(e.y0-i)/2}}))}},{key:"getMeasurementConfig",value:function(t,e,n,r){return{offset:{x:t||0,y:e||0},span:{x:n,y:r}}}},{key:"addOverlayPathAndStyles",value:function(t,e,n,r){var i;this._overlayPath[e.rowId]?i=this._overlayPath[e.rowId]:((i=dp(t,"path",[e.update],null,{},(function(t){return"".concat(t.x," ").concat(e.rowId)}))).style("fill","none"),i.style("fill-opacity",0),i.attr("id",e.rowId),this._overlayPath[e.rowId]=i);var a,o,c,u,s={x:0,y:0},l={x:0,y:0};if("stroke-width"===n.type){var f=(u=(o=(a={width:parseInt(n.value,10),position:r}).width)?o/2:1,dS[void 0===(c=a.position)?"center":c](u)),h=f.L,d=f.M;s=d,l=h}i.attr("d",(function(t){return t.update?"M ".concat(t.update.x+s.x," ").concat(t.update.y+s.y,"\n                    L ").concat(t.update.x0+l.x," ").concat(t.update.y0+l.y):"M ".concat(t.x+s.x," ").concat(t.y+s.y,"\n                L ").concat(t.x0+l.x," ").concat(t.y0+l.y)}));var p=n.value;"function"==typeof p&&(p=p(i.style(n.type))),i.style(n.type,p),e.isPathPresent||(gp(t,i.node()),e.isPathPresent=!0)}},{key:"getShapeRadius",value:function(t){if(t){var e=t.data.data.update,n=Math.abs(e.x-e.x0),r=Math.abs(e.y-e.y0);return Math.max(n,r)/2}return 0}},{key:"autoDetectTransformType",value:function(){return Og}}],[{key:"defaultConfig",value:function(){return lS}},{key:"formalName",value:function(){return"tick"}},{key:"drawFn",value:function(){return hS}}]),n}(t)},wS=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,null,[{key:"formalName",value:function(){return"tick"}}]),n}(of(bw).with(mw,zk,_S)),kS="area",SS="arc",MS="line",ES="text",OS="point",CS="bar",AS="tick",PS="simple",DS="base",RS=(vS={},rv()(vS,kS,fk),rv()(vS,SS,wk),rv()(vS,MS,kk),rv()(vS,ES,Pk),rv()(vS,OS,Hk),rv()(vS,AS,wS),rv()(vS,CS,uS),rv()(vS,DS,bw),vS),IS=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RS,e=Object.assign({},t),n={register:function(t){var r=t.formalName();return e[r]=t,n},get:function(){return e}};return n},TS="data",NS="config",FS="measurement",jS="domain",LS="mount",BS=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).setApplyChecker({source:function(e,n,r){if(e.unitId===n.unitId){var i=t._payload?t._payload.criteria:null;return!pf(i,r.criteria)||0!==r.dragDiff}return!0}}),t}return yg()(n,[{key:"dispatch",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return this.active=r[0].dragging,this.start=r[0].dragStart,(t=Sv()(kg()(n.prototype),"dispatch",this)).call.apply(t,[this].concat(r))}},{key:"setSelectionSet",value:function(t,e){var n=e.getEntrySet();if(null===t)e.reset();else if(t.length)if(this.firebolt.getPropagationInf().sourceId){e.reset(),e.add(t);var r=Tx([e.getCompleteSet()],dg()(e.getEntrySet()));e.remove(r)}else{var i=Tx(n,[t]),a=t.filter((function(t){return!n[0].has(t)&&!n[1].has(t)}));e.updateExitSet(),e.remove(i),e.updateEntrySet(),e.add(a),i=Tx([e.getCompleteSet()],[].concat(dg()(e.getEntrySet()),dg()(e.getExitSet()))),e.remove(i)}else{var o=Tx([e.getCompleteSet()],dg()(e.getExitSet()));e.remove(o)}}}],[{key:"formalName",value:function(){return p.BRUSH}}]),n}(s_),zS=Object.assign({},h,{pointLayerHelpers:m}),HS={BarLayerMixin:cS,BaseLayerMixin:mw,LineLayerMixin:rk,AreaLayerMixin:lk,PointLayerMixin:zk,TextLayerMixin:Ak,TickLayerMixin:_S,ArcLayerMixin:_k},WS=function(t,e){var n={};for(var r in t.forEach((function(t){var r=t.encodingFieldsInf(),i=r.colorField,a=r.sizeField,o=r.shapeField,c=r.xField,u=r.yField,s=t.config().encoding,l=["x","y"],f=[c,u].filter((function(t,e){return s[l[e]]&&"continuous"===s[l[e]].as}));[i,a,o].forEach((function(t){var r;e.isDimension(t)&&f.length&&(!n[t]&&(n[t]=[]),(r=n[t]).push.apply(r,dg()(f)))}))})),n)({}).hasOwnProperty.call(n,r)&&(n[r]=dg()(new Set(n[r])));return n},VS=function(t,e){var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){var i=t[r];n[r]=i(e)}return n},US=function(t,e,n,r){var i=n,a=t._dependencies,o=t.metaInf(),c=t.facetFieldsMap();if(!n){i=qw.getLayerInstance(e);var u=t.store();Cl(i).forEach((function(t){t.dependencies(a).store(u)}))}var s={},l=Cl(i);return(e=Cl(e)).reduce((function(e,n,i){var a=l[i];return Us(n.encoding.color,"field")in c&&(n.transform.type=zs(n.transform.type,"identity")),a.config(n),a.renderer(r),a.valueParser(t.valueParser()),a.interactionRegistry(t.registry().interactions),a.dataProps({timeDiffs:t._timeDiffs}),a.metaInf({unitRowIndex:o.rowIndex,unitColIndex:o.colIndex,canvasAlias:t.parentAlias(),unitId:t.id()}),n.name&&a.alias(n.name),a.createFirebolt(),s[a.alias()]=a,e}),{}),s},GS=function(t,e){var n=t.config().encodingTransform||{},r=n.resolvable,i=[];if(r){var a=r(e);i=a.depArr,t.encodingTransform(a.fn)}else n instanceof Function&&t.encodingTransform(n);return i},qS=function(t){var e=[];return t.forEach((function(t,n){var r=t.def,i=t.mark;if(r)r.name||(r.name="".concat(i,"-").concat(n)),e.push(t);else{var a=qw.getSerializedConf(t.mark,t);a.name||(a.name="".concat(i,"-").concat(n)),e.push({mark:t.mark,def:a})}})),e},YS=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t._cache,a=t.config(),o=a.autoGroupBy,c=t._customLayerDataModels;e.forEach((function(e){var a;if(c)a=c[e.id()];else{var u=e.config(),s=u.source,l=u.encoding,f=Object.keys(l).map((function(t){return l[t].field})).filter((function(t){return!!t})).flat(),h=Us(r,s)||s;a=n;var d=(a=h instanceof Function?h(a):a).getDimensions();a=a.project(f);var p=!1,g=[],v=l.detail&&l.detail.field?l.detail.field:t.detailFields();f.push.apply(f,dg()(new Set(v||[]))),d.forEach((function(t){f.includes(t)?g.push(t):p=!0})),p&&!o.disabled&&(a=a.groupBy(g))}i?e.enableCaching():e.disableCaching(),e.data(a)}))},XS=function(t,e){e.forEach((function(e){var n={},r=e.config();Ws(t,(function(i){var a,o=t[i]||[],c=Us(r.encoding,i,"field");if(c){var u=Us(r.encoding,i,"as")||dt(e.data().getField(c));a=o.findIndex((function(t){var e=t.config(),n=e.fieldInstance;return n?n.getMembers().includes(c)&&e.fieldAs===u:e.field===c&&e.fieldAs===u}))}else{var s=o.findIndex((function(t){return t.isGlobal&&t.isGlobal()}));a=-1!==s?s:0}t[i]&&(n[i]=zs(t[i][a]))})),Object.keys(n).length&&e.axes(n)}))},$S=jg.X,KS=jg.Y,QS=jg.RADIUS,ZS=jg.ANGLE,JS=jg.ANGLE0,tM=jg.RADIUS0,eM=function(t,e){var n={};return t.forEach((function(t){var r=t.config(),i=r.axis,a=r.encoding,o=t.id();[$S,KS,ZS,JS,QS].forEach((function(t){var r,c=Us(a,t,"field"),u=t===QS?zs(c,Us(a,tM,"field")):Us(a,t,"field"),s=zs(Us(i,t),u);r=e[t]&&e[t].length?e[t].findIndex((function(t){return-1!==t.getMembers().indexOf(s)})):0,!n[o]&&(n[o]={}),n[o][t]=r}))})),n},nM=function(t,e){var n={};return(t=t.filter((function(t){return t.getDataDomain()}))).forEach((function(t){var r={},i=t.config(),a=t.getDataDomain(),o=t.config().encoding;null!==a&&!1!==i.calculateDomain&&(r=Object.entries(a),n=r.reduce((function(t,n){var r=n[0],i=Us(o,r,"field"),a=Us(o,r,"as"),c=(e[r]||[]).find((function(t){return t.getMembers().includes(i)}));!t[r]&&(t[r]={});var u=t[r];if(c){var s="".concat(c);u[s]=u[s]||[],u[s]=function(t,e,n,r){return n===ZS||n===JS?t.concat(e.filter((function(e){return-1===t.indexOf(e)}))):ks([t,e],r)}(u[s],n[1],r,a)}return t}),n))})),n},rM=function(t,e,n,r,i){t._lifeCycleManager.notify({client:n,action:"beforedraw",formalName:"layer"});var a=t.renderer(),o=t.config().classPrefix,c=n.sort((function(t,e){return t.config().order-e.config().order})),u="html"===a?"div":"g",s=dp(e,u,[1],"".concat(o,"-layer-group"));s.style("width","inherit").style("height","inherit");var l=Hs(t._layerDepOrder),f={};dp(s,u,c,null,{update:function(t,e){f[e.alias()]={group:t,layer:e}}}),l.map((function(t){return f[t]})).filter((function(t){return void 0!==t})).forEach((function(e){var n=e.layer,a=e.group;n.measurement(r),n.dataProps({timeDiffs:t._timeDiffs}),!1!==n.config().render&&n.mount(a.node(),i)}))},iM=function(t,e){var n=bt.FieldSubtype,r=n.CONTINUOUS,i=n.TEMPORAL,a=t.fields();if(!a.x.length||!a.y.length)return null;var o=t.data(),c=t.axes(),u=Us(a,"x",0),s=Us(a,"y",0),l=[["x",u],["y",s]].find((function(t){var e=fg()(t,2)[1];return"discrete"===e.as()||"temporal"===e.subtype()}));if(!l||u.subtype()!==r&&s.subtype()!==r)return null;var f="".concat(l[1]),h=c[l[0]][0].invert(e[l[0]]);if(l[1].subtype()===i&&l[1].as()===r){var d=dg()(new Set(o.getFieldData(f)));h=Rs(d,h)}return void 0!==h?[[f],[h]]:null},aM=function(t,e,n){return t.filter((function(t){return("type"===e?t.constructor.formalName():t.alias())===n}))},oM=function(t,e,n){t.filter((function(t){return("type"===e?t.config().mark:t.alias())!==n||(t.remove(),!1)}))},cM=function(t,e){return dp(t,"g",[1],e).node()},uM=function t(e){e._renderedPromise.then((function(){e._renderedPromise=new Promise((function(t){e._renderedResolve=t})),t(e)}))},sM=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.innerRadius,i=n.outerRadius;return[r||0,i||Math.min(e,t)/2]},lM=function(t){var e=t.axes().radius;e&&e.forEach((function(e){e.range(sM(t.width(),t.height()))}))},fM=function(t){var e,n=t._graphics.rootSvg,r=t.config().classPrefix,i=t._graphics;if(t.layers().find((function(t){return t.config().mark===Wg}))||"html"===t.renderer())i.tracker&&i.tracker.remove(),i.tracker=null;else{var a="".concat(r,"-tracker");i.trackerGroup=dp(i.rootSvg,"g",[1],"".concat(a,"-group")),i.tracker=dp(i.trackerGroup,"rect",[1],a),yp(i.tracker,{x:0,y:0,width:t.width(),height:t.height(),class:a}),((e=n).node().__on||[]).forEach((function(t){var n=t.type;e.on(n,null)}))}},hM="config",dM="data",pM="axes",gM="layerDef",vM="width",yM="height",mM="mount",bM="transform",xM="transformedData",_M="dataDomain",wM="fields",kM="layers",SM="domain",MM="muze",EM="__id__",OM="grid-lines",CM="grid-bands",AM="grid-parent-group",PM="band",DM="tick",RM="gridBands",IM="gridLines",TM="consolidated",NM="fragmented",FM="facetByFields",jM="retinalFields",LM="parentAlias",BM="layers",zM="cachedData",HM="store",WM=function(t,e,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e&&r.sourceCanvas===n.sourceCanvas()){var o=n.data().getMeasures().join(",");i=t.filter((function(t){var n=e.get(t);if(n){var r=n.has(o);return a?!(r&&1===n.size):r}return!0}))}else i=t;return i},VM=function(t,e,n){var r=n.measureNames,i={};if(e){var a=e.getUids();i={criteria:{uids:WM(a,r,t,n,!0)}}}else i={criteria:null};return Object.assign({},n,i)},UM=(yS={brush:function(t,e,n,r){var i={};if(n.criteria&&n.criteria.range){var a=function(t,e){var n=e.getMeasures(),r=null;return null!==t&&(r=nf(t.getMeasures(),n).reduce((function(e,n){return e[n]=t.getDomain(n),e}),{})),r}(e,t.data());i.criteria={range:a}}else i=UM.__default(t,e,n,r);return Object.assign({},n,i)},__default:function(t,e,n){var r=n.measureNames,i={};if(e){var a=e.getUids(),o=t.data().getUidMap(),c=a.filter((function(t){return t in o}));i={criteria:{uids:c=WM(c,r,t,n,!1)}}}else i={criteria:null};return Object.assign({},n,i)}},rv()(yS,"selection-highlight",VM),rv()(yS,"brush-highlight",VM),yS),GM=function(t,e){var n=t._cacheMap={};return function(r){if(!(n=t._cacheMap)[r]){for(var i=e.getUids(),a=e.getRowsCount(),o={},c=function(t){var n=r.map((function(n){return e.getValueAtIndex(n,t)}));!o[n]&&(o[n]=[]),o[n].push(i[t])},u=0;u<a;u++)c(u);n[r]=o}return n[r]}},qM=function(t,e,n){var r=n.groupFirebolt();if(t===p.BRUSH&&e.dragDiff>3){var i=r.getEntryExitSet(p.SELECT);i&&i.mergedEnter.length&&n.groupFirebolt().propagate(p.SELECT,{criteria:null},{sourceId:n.id(),applyOnSource:!0})}else if(t===p.SELECT){var a=r.getEntryExitSet(p.BRUSH);a&&a.mergedEnter.length&&n.groupFirebolt().propagate(p.BRUSH,{criteria:null},{sourceId:n.id(),applyOnSource:!0})}},YM=(mS={},rv()(mS,lt.CARTESIAN,(function(t,e){var n=e.startPos,r=e.endPos;if(n.x===r.x&&n.y===r.y)return{criteria:null};var i=t.context.getRangeFromPositions({startPos:n,endPos:r},{brush:Us(t.config().behaviours.brush,"mode")}),a={};return a.x=[n.x,r.x],a.y=[n.y,r.y],{criteria:i,dimensions:a}})),rv()(mS,lt.POLAR,(function(){return{criteria:null}})),mS),XM=function(t,e){var n=t.context.coord();return YM[n](t,e)},$M=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._propagationDms={},t._entryExitSet={},t._payloads={},t._actionPayloadMap={hover:function(t,e,n){var r=t.context.layers(),i=r.find((function(t){return!1!==t.config().highlightExactPoint}))?{}:{getAllPoints:!0,detectEmptyArea:!!r.find((function(t){return t.config().detectHoverOnEmptyArea}))&&1===r.length},a=t.context.getNearestPoint(e.x,e.y,Object.assign(i,{data:n.data,event:n.event}));return{criteria:a.id?{dimensions:a.id}:null,target:(a||{}).target,position:e,layerId:(a||{}).layerId,targetData:Us(a,"targetData")}},drag:function(t,e,n){var r=e.startPos,i=e.endPos,a=t.context.getNearestPoint(r.x,r.y,{data:n.data,event:n.event}),o=XM(t,e);return o.dragging=n.isDragging,o.dragDiff=Math.abs(r.x-i.x)+Math.abs(r.y-i.y),o.dragEnd=n.dragEnd,o.dragEnd&&(o.hideSelBox=!0),o.dragStart=n.dragStart,o.target=a.id,o},selectiondrag:function(t,e,n){var r=e.startPos,i=e.endPos,a=XM(t,e);return a.dragging=n.isDragging,a.dragDiff=Math.abs(r.x-i.x)+Math.abs(r.y-i.y),a.dragEnd=n.dragEnd,a.dragEnd&&(a.hideSelBox=!0),a}},t.payloadGenerators(UM),t}return yg()(n,[{key:"data",value:function(){if(arguments.length){var t=null===(arguments.length<=0?void 0:arguments[0])?this.context.data():arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=this.context;return n.setCustomLayerData(e),n.enableCaching().data(t),n.clearCustomLayerData(),this}return this.context.data()}},{key:"disposeBehaviours",value:function(t){var e=t.exclude,n=this._actions.behavioural;for(var r in n)r!==e&&n[r].dispose()}},{key:"resetData",value:function(){var t=this.context,e=t.layers().reduce((function(t,e){return t[e.id()]=e.cachedData()[0],t}),{});return t.setCustomLayerData(e),t.clearCaching().resetData(),this}},{key:"target",value:function(){return"visual-unit"}},{key:"createSelectionSet",value:function(){for(var t,e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return(t=Sv()(kg()(n.prototype),"createSelectionSet",this)).call.apply(t,[this].concat(r)),this._dimsMapGetter=GM(this,this.data()),this}},{key:"remove",value:function(){return this.context.cachedData()[0].unsubscribe("propagation"),this}},{key:"id",value:function(){return this.context.id()}},{key:"getPropagationSource",value:function(){return this.context.cachedData()[0]}},{key:"sourceCanvas",value:function(){return this.context.parentAlias()}},{key:"propagate",value:function(t,e){this._groupFirebolt.propagate(t,e,{sourceId:this.id()})}},{key:"groupFirebolt",value:function(){return arguments.length?(this._groupFirebolt=arguments.length<=0?void 0:arguments[0],this):this._groupFirebolt}},{key:"dispatchBehaviour",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.layerId,a=Us(r,"propPayload","sourceId");a||(e.sourceUnit=this.id(),e.sourceCanvas=this.sourceCanvas(),e.sourceLayer=i,e.fields||(e.fields=e.criteria?Us(e.criteria,"dimensions",0):[]),qM(t,e,this));var o=i?this._childFirebolts.filter((function(t){return t.id()===i})):this._childFirebolts;o.forEach((function(i){e.sourceLayer=i.id();var a=i.dispatchBehaviour(t,e,r);e.action=t,a&&n.propagate(t,e)}))}},{key:"addChildFirebolts",value:function(t){var e=this;this._childFirebolts=t,this._propagationCount=new Map,t.forEach((function(n){n.onPropagationDone((function(n,r,i){var a=e._propagationCount.get(n.action)||0;a++,e._propagationCount.set(n.action,a),a===t.length&&(e.onLayerPropagationComplete(n,r,i),e._propagationCount.set(n.action,0))}))}))}},{key:"onLayerPropagationComplete",value:function(t,e,n){var r=this._childFirebolts,i=t.action,a=r.map((function(t){return t.getEntryExitSet(i)})).filter((function(t){return t}));this._entryExitSet[i]&&this._entryExitSet[i].dispose(!1),this._entryExitSet[i]=new Gx(a,{extraData:this.context.facetFieldsMap(),alias:"visual-unit",action:i}),this._payloads[i]=t,this._targetLayer=t.sourceLayer,this.dispatchSideEffects(i,t,n),this._onPropagationDone(t,e,n)}},{key:"getEntryExitSet",value:function(t){return this._entryExitSet[t]}},{key:"getSourceInfo",value:function(){var t=this,e=this.context.getSourceInfo().layers;return Object.assign({},this.context.getSourceInfo(),{targetLayer:e.find((function(e){return e.id()===t._targetLayer}))})}},{key:"layers",value:function(){return this.context.layers()}},{key:"getPlotPointsFromIdentifiers",value:function(){var t;return(t=this.context).getPlotPointsFromIdentifiers.apply(t,arguments)}},{key:"getDrawingContext",value:function(){return this.context.getDrawingContext()}},{key:"getPayloadFromEvent",value:function(t,e,n){var r=this._actionPayloadMap[t];return r?r(this,e,n):function(t,e,n){var r=t.context.getNearestPoint(e.x,e.y,{data:n.data,event:n.event});return{criteria:r.id?{dimensions:r.id}:null,target:(r||{}).target,position:e,layerId:(r||{}).layerId,targetData:Us(r,"targetData")}}(this,e,n)}},{key:"getPropagationIdentifiers",value:function(t){var e=this,n=this.context.layers().filter((function(t){return!1!==t.config().interactive})).map((function(t){return t.firebolt()})),r={conditions:[],operator:"or"},i=!0;return n.forEach((function(n){var a=n.getBehaviouralAction(t).propagationIdentifiers();if(a&&(a.interpolated?Object.keys(a.identifiers):a.identifiers).length){var o=n.context.data(),c=e.context.facetFieldsMap(),u=o.getQueryFromIds(a.identifiers,a.fields.map((function(t){return t.name})).filter((function(t){return o.isFieldPresent(t)})),!0,a.interpolated),s=[];for(var l in c)s.push({value:c[l],operator:"eq",field:l});u={conditions:[u].concat(s),operator:"and"},r.conditions=[].concat(dg()(r.conditions),[u])}i=i&&null===a})),i?null:{query:r}}}]),n}(Lx),KM=(bS={},rv()(bS,d.DRAG,{behaviours:[p.BRUSH],touch:!1}),rv()(bS,d.HOVER,{behaviours:[p.HIGHLIGHT]}),rv()(bS,d.LONGTOUCH,{behaviours:[p.SELECT],touch:!0}),rv()(bS,d.TOUCHDRAG,{behaviours:[p.BRUSH],touch:!0}),rv()(bS,d.CLICK,{behaviours:[p.SELECT],touch:!1}),bS),QM=n(56),ZM=n.n(QM),JM=b.BAR_LAYER,tE=b.TICK_LAYER,eE=ft.DISCRETE,nE=l.LINEAR,rE=function(t,e,n){return n[t]?t:e.CATEGORICAL},iE=ft.DISCRETE,aE=(xS={},rv()(xS,FM,{onset:function(t,e){var n=e[0].reduce((function(t,n,r){return t["".concat(n)]=e[1][r],t}),{});t.facetFieldsMap(n)}}),rv()(xS,"facetFieldsMap",{}),rv()(xS,jM,{}),rv()(xS,LM,{}),rv()(xS,zM,{}),rv()(xS,"detailFields",{}),rv()(xS,"axes",{defaultValue:{x:[],y:[]}}),rv()(xS,"fields",{defaultValue:{x:[],y:[]},sanitization:function(t,e){return Js({x:[],y:[]},e)}}),rv()(xS,"metaInf",{}),rv()(xS,"registry",{}),rv()(xS,"parentContainerInf",{}),rv()(xS,"valueParser",{defaultValue:function(t){return t}}),rv()(xS,"coord",{}),rv()(xS,"renderer",{defaultValue:"svg"}),xS),oE=(n(100),n(57)),cE=n.n(oE),uE={classPrefix:MM,defClassName:"visual-unit",className:"",trackerClassName:"visual-unit-tracker",minOuterRadius:10,gridLines:{defClassName:"axis-grid-lines",className:"",show:!0,color:"#efefef",zeroLineColor:"#b6b6b6"},gridBands:{defClassName:"axis-grid-bands",className:"",show:!1,y:{color:["#fff","#fbfbfb"]},x:{color:["#fff","#f9f9f9"]}},arcLayerClassName:"layer-arc",interaction:{tooltip:{mode:TM}},sideEffectClassName:"side-effect-container"};function sE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lE(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sE(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fE=function(){function t(e,n){var r=this;gg()(this,t),this._id=gs(),this._listeners={},function(t){return[{type:"registerImmediateListener",props:gM,listener:function(e,n){var r=t.fields();if(n&&r){!function(t,e){var n=e._layersMap,r={};for(var i in t.forEach((function(t,e){var n=zs(t.name,"".concat(t.mark,"-").concat(e));r[n]=!0})),n)i in r||(n[i].forEach((function(t){return t.remove()})),delete n[i])}(n,t);var i=t._queuedLayerDefs,a=n;i.forEach((function(t){a=[].concat(dg()(a),dg()(t(n)))})),t.addLayer(a),t.firebolt().addChildFirebolts(t.layers().filter((function(t){return!1!==t.config().interactive})).map((function(t){return t.firebolt()})));var o=t.layers().some((function(t){return t.hasPlotSpan()}));["x","y"].forEach((function(e){zs(Us(t.axes(),e),[]).forEach((function(t){t.config({adjustRange:o})}))})),t.layers().forEach((function(e){e.onRenderComplete((function(){t._layerRenderCount++,t._layerRenderCount===t.layers().length&&(t._renderedResolve(),t._layerRenderCount=0)}))}))}}},{type:"registerImmediateListener",props:dM,listener:function(e,n){if(n){var r=t.transform(),i=t.axes(),a={},o=t.metaInf().timeDiffObj;Object.entries(t.fields()).forEach((function(t){var e=fg()(t,2),n=e[0],r=fg()(e[1],1)[0];if(r){var c=o["".concat(r)];c&&r.as()!==iE&&(a[n]=c,i[n].forEach((function(t){return t.minDiff(c)})))}})),t._timeDiffsByField=o,t._timeDiffs=a,t.layers().forEach((function(e){e.dataProps({timeDiffs:t._timeDiffs})}));var c=t.axes(),u=t.layers();if(u&&c){YS(t,u,n,r),t._createGridLinesAndBands=t.createGridLinesAndBands();var s=t.calculateDomainFromData();t._dimensionMeasureMap=WS(t.layers(),t.data(),t.retinalFields()),t.dataDomain(s),XS(c,u)}}}}]}(this).forEach((function(t){r._listeners[t.props]=t.listener})),this._dependencies=n,qw.setLayerRegistry(e.layerRegistry),this._lifeCycleManager=n.lifeCycleManager,this._layersMap={},this._gridLinesSelection=null,this._gridBandsSelection=null,this._gridLines=[],this._gridBands=[],this._queuedLayerDefs=[],this._graphics={},this._renderedResolve=null,this._renderedPromise=null,qs(this,this.constructor.getterSetters()),this.registry(e),this.cachedData([]),this._renderedResolve=null,this._renderedPromise=new Promise((function(t){r._renderedResolve=t})),this._layerRenderCount=0,uM(this)}return yg()(t,[{key:"store",value:function(){return arguments.length?(this._store=arguments.length<=0?void 0:arguments[0],this):this._store}},{key:"initializeInteractionModel",value:function(){var t=this.firebolt();t.addChildFirebolts(this.layers().filter((function(t){return!1!==t.config().interactive})).map((function(t){return t.firebolt()})));var e=this.config().interaction;if(t.config(e),"fragmented"===e.tooltip.mode){var n=t._behaviourEffectMap,r=function(t){var e=n[t],r=e.find((function(t){return"tooltip"===t.name}));n[t]=e.filter((function(t){return!r||r.name!==t.name})),r&&n[t].push({name:w_})};for(var i in n)r(i)}}},{key:"createFireboltInstance",value:function(){var t=this.registry().interactions,e=this.getFireboltCls();return this.firebolt(new e(this,{physical:Object.assign({},t.physicalActions),behavioural:Object.assign({},t.behaviours),physicalBehaviouralMap:Object.assign({},t.physicalBehaviouralMap)},Object.assign({},t.sideEffects),Object.assign({},t.behaviourEffectMap))),this}},{key:"getFireboltCls",value:function(){return $M}},{key:"firebolt",value:function(){return arguments.length?(this._firebolt=arguments.length<=0?void 0:arguments[0],this):this._firebolt}},{key:"id",value:function(){return this._id}},{key:"lockModel",value:function(){return this.store().lockModel(),this}},{key:"unlockModel",value:function(){return this.store().unlockModel(),this}},{key:"lockLocalModel",value:function(){this._locked=!0}},{key:"unlockLocalModel",value:function(){this._locked=!1,this.triggerAllListeners(),this.initializeInteractionModel()}},{key:"timeDiffsByField",value:function(){return arguments.length?this:this._timeDiffsByField}},{key:"render",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t||(t=this.mount()),this.createRootContainers(t),lM(this),this.renderLayers(e);var n=this._graphics.rootSvg.node(),r=this.config(),i=r.sideEffectClassName,a=r.classPrefix;return fM(this),this._sideEffectGroup=cM(n,"".concat(a,"-").concat(i)),this.firebolt().mapActionsAndBehaviour(),this}},{key:"createRootContainers",value:function(t){var e=this.config(),n=e.defClassName,r=Bs(n,this.id(),e.classPrefix),i=this.renderer(),a=this.width(),o=this.height();this._container=hp(t);var c=hp(t).style("position","relative"),u="html"===i?"div":"svg",s=this._graphics.rootSvg&&this._graphics.rootSvg.node();("svg"===u&&s instanceof HTMLElement||"div"===u&&s instanceof SVGElement)&&this._graphics.rootSvg.remove(),this._graphics.rootSvg=dp(c,u,[1],r[1]).style("left","0px").style("top","0px").style("position","absolute").style("width","inherit").style("height","inherit");var l=this._graphics.rootSvg.node();return yp(l,{width:a,height:o,class:r.join(" ")}),this}},{key:"renderLayers",value:function(t){var e=this.width(),n=this.height(),r=this._graphics.rootSvg.node();return this._createGridLinesAndBands(),function(t,e){var n=t.config().classPrefix,r=t._gridLines,i=t._gridBands,a={width:t.width(),height:t.height()};if("svg"===t.renderer()){var o=dp(e,"g",[1],"".concat(n,"-").concat(AM));0===r.length&&0===i.length||[[r,"".concat(n,"-").concat(OM)],[i,"".concat(n,"-").concat(CM)]].forEach((function(e){var n=fg()(e,2),r=n[0],i=n[1],c=dp(o,"g",[1],".".concat(i)),u="".concat(i,"-group");dp(c,"g",r,".".concat(u),{update:function(e,n){n.dataProps({timeDiffs:t._timeDiffs}).measurement(a).mount(e.node())}})}))}}(this,r),rM(this,r,this.layers(),{width:e,height:n},t),this}},{key:"done",value:function(){return this._renderedPromise}},{key:"enableCaching",value:function(){return this._cache=!0,this}},{key:"clearCaching",value:function(){return this._cache=!1,this.cachedData([this.cachedData()[0]]),this}},{key:"getDrawingContext",value:function(){var t=this._graphics.rootSvg&&this._graphics.rootSvg.node(),e=this.width(),n=this.height(),r=this.parentContainerInf(),i=r.el,a=r.dimensions;return{htmlContainer:this.mount(),svgContainer:t,width:e,height:n,sideEffectGroup:this._sideEffectGroup,parentContainer:i,parentContainerDimensions:a,xOffset:0,yOffset:0}}},{key:"serialize",value:function(){return{layers:this.layers().map((function(t){return t.serialize()})),config:this.config(),axes:this.axes().map((function(t){return t.serialize()}))}}},{key:"mount",value:function(){return arguments.length?(this._mount=arguments.length<=0?void 0:arguments[0],this):this._mount}},{key:"addLayer",value:function(t){var e,n=this;if(t instanceof Function)return this._queuedLayerDefs.push(t),this;var r=this.renderer(),i=qS(Cl(t)),a=this._layersMap,o={},c={layers:{},components:{unit:this}},u=0,s=i.sort((function(t,e){return t.order-e.order})).reduce((function(t,e){var i,s=e.def,l=s.name,f=Cl(s);f.forEach((function(t){t.order=e.order+u})),u+=f.length;var h=US(n,s,a[l],r);c.layers=Object.assign(c.layers,h);var d=Object.values(h);return t=(i=t).concat.apply(i,dg()(d)),a[l]=d,o[l]=l,t}),[]);c.unit=this;var l={},f=(e=[]).concat.apply(e,dg()(Object.values(this._layersMap)));return f.forEach((function(t){var e=t.alias();c.layers[e]=t,l[e]=[]})),s.forEach((function(t){var e=GS(t,c);l[t.alias()]=e})),this._layerDepOrder=l,this.layers(f),s}},{key:"remove",value:function(){var t=this._dependencies.lifeCycleManager;t.notify({client:this,action:"beforeremove",formalName:"unit"});var e=this.layers();return hp(this.mount()).remove(),this.firebolt().remove(),this.firebolt().dispose(),t.notify({client:e,action:"beforeremove",formalName:"layer"}),[].concat(dg()(e),dg()(this._gridLines),dg()(this._gridBands)).forEach((function(t){return t.remove()})),t.notify({client:e,action:"removed",formalName:"layer"}),t.notify({client:this,action:"removed",formalName:"unit"}),this}},{key:"resetData",value:function(){return this.data(this.cachedData()[0]),this}},{key:"getSourceInfo",value:function(){return{dimensionMeasureMap:this._dimensionMeasureMap,fields:this.fields(),data:this.data(),axes:this.axes(),retinalFields:this.retinalFields(),layers:this.layers(),timeDiffs:this.timeDiffsByField()}}},{key:"dataDomain",value:function(){var t=this.metaInf(),e=t.namespace,n=this.store(),r="".concat(o.UNIT_GLOBAL_NAMESPACE,".").concat(k.DOMAIN);if(arguments.length){var i=arguments.length<=0?void 0:arguments[0];n.commit(r,(function(t){return Object.assign(t||{},rv()({},e,i))}))}var a=n.get(r);return Us(a,e)}},{key:"getDefaultTargetContainer",value:function(){var t=this.config(),e=t.classPrefix,n=t.defClassName,r=t.sideEffectClassName;return this._graphics.tracker?[".".concat(e,"-tracker-group"),".".concat(e,"-").concat(r)]:[".".concat(e,"-").concat(n)]}},{key:"getLayersByType",value:function(t){return aM(this.layers(),"type",t)}},{key:"getLayerByName",value:function(t){return aM(this.layers(),"name",t)[0]}},{key:"getLayerById",value:function(t){return this.layers().find((function(e){return e.id()===t}))}},{key:"getNearestPoint",value:function(t,e,n){var r=zs(n.getAllPoints,!1),i=zs(n.detectEmptyArea,!1),a=iM(this,{x:t,y:e}),o=this.getMarkInfFromLayers(t,e,lE(lE({},n),{},{dimValue:a}));o||(o={id:null,target:null,layerId:null});var c=o.layerId,u=o.point&&o.point.data?Object.keys(o.point.data).reduce((function(t,e){return[[].concat(dg()(t[0]),[e]),[].concat(dg()(t[1]),[o.point.data[e]])]}),[[],[]]):o.id,s=o.id;if(!r)return{id:o.id,target:s,targetData:u,layerId:c};var l=Object.assign({},o);return i&&a?(l.id=a,o.id&&1===o.id[0].length&&(o.id[1][0]=a[1][0]),l.target=s):o.id?(l.id=a||o.id,l.target=s):l.id=l.target=null,l.layerId=c,l.targetData=u,l}},{key:"getMarkInfFromLayers",value:function(t,e,n){for(var r=this.layers(),i=null,a=r.length-1;a>=0;a--){var o=r[a];if(!1!==o.config().interactive&&(i=o.getNearestPoint(t,e,n)),i)return i}return i}},{key:"getPlotPointsFromIdentifiers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=[];if(null===t)return[];for(var i=this.layers(),a=i.find((function(t){return t.id()===n})),o=a?[a]:i,c=0,u=o.length;c<u;c++){var s=o[c];!1!==s.config().interactive&&(r=[].concat(dg()(r),dg()(s.getPointsFromIdentifiers(t,e))))}return r}},{key:"removeLayerByName",value:function(t){return oM("name",t),this}},{key:"removeLayersByType",value:function(t){return oM("type",t),this}},{key:"calculateDomainFromData",value:function(){return nM(this.layers(),this.fields())}},{key:"getRangeFromIdentifiers",value:function(t){var e=t.criteria;return t.fields.reduce((function(t,n){return t[n]=e[n],t}),{})}},{key:"getRangeFromPositions",value:function(t){var e=t.startPos,n=t.endPos,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.fields(),a=i.x,o=i.y,c=this.axes(),u=a[0],s=o[0],l=this.data().getDimensions(),f=r.brush;if("x"===f){var h=c.x[0].invertExtent(e.x,n.x).sort((function(t,e){return t-e}));h="temporal"===u.subtype()&&"discrete"!==u.as()?h.map((function(t){return t.getTime()})):h;var d=u.getMembers(),p={};return d.forEach((function(t){p[t]=h})),{range:p}}if("y"===f){var g=c.y[0].invertExtent(e.y,n.y).sort((function(t,e){return t-e}));g="temporal"===s.subtype()&&"discrete"!==s.as()?g.map((function(t){return t.getTime()})):g;var v=s.getMembers(),y={};return v.forEach((function(t){y[t]=g})),{range:y}}if(u.isContinuous()&&s.isContinuous()){var m={x:c.x[0].invertExtent(e.x,n.x).sort((function(t,e){return t-e})),y:c.y[0].invertExtent(e.y,n.y).sort((function(t,e){return t-e}))},b={};if("".concat(u)==="".concat(s)){var x=m.x,_=m.y,w=x[0]>_[0]?_:x,k=w===_?x:_;w[1]<k[0]?b[u]=[]:b[u]=[k[0],w[1]<k[1]?w[1]:k[1]]}else{var S=u.getMembers();S.forEach((function(t){b[t]=m.x}));var M=s.getMembers();M.forEach((function(t){b[t]=m.y}))}return{range:b}}if(u.isDiscrete()||s.isDiscrete()){var E=this.getPointsWithinRange({minX:e.x,minY:e.y,maxX:n.x,maxY:n.y}),O=[[]];return l.forEach((function(t){O[0].push("".concat(t))})),E.forEach((function(t){var e=t.data,n=[];l.forEach((function(t){n.push(e[t])})),O.push(n)})),{dimensions:O}}return null}},{key:"getPointsWithinRange",value:function(t){return this.layers().filter((function(t){return!1!==t.config().interactive})).map((function(e){return e.getPointsWithinRange(t)})).flat()}},{key:"isSortedDomain",value:function(){return this.layers().some((function(t){return t.isSortedDomain()}))}},{key:"getRetinalFieldsDomain",value:function(){var t=this.layers().map((function(t){return t.getRetinalFieldsDomain()}));return Ms(t)}},{key:"calculateExtendDomainDiffs",value:function(){var t={topAxis:[],bottomAxis:[],leftAxis:[],rightAxis:[]};return this.layers().forEach((function(e){var n=e.axes();if(n.x&&n.y){var r=n.x.config().orientation,i=n.y.config().orientation,a=e.calculateExtendDomainDiffs(),o=a.x,c=a.y;"top"===r?t.topAxis.push(o):t.bottomAxis.push(o),"left"===i?t.leftAxis.push(c):t.rightAxis.push(c)}})),{topAxis:Ss(t.topAxis),bottomAxis:Ss(t.bottomAxis),leftAxis:Ss(t.leftAxis),rightAxis:Ss(t.rightAxis)}}},{key:"setCustomLayerData",value:function(t){this._customLayerDataModels=t}},{key:"clearCustomLayerData",value:function(){this._customLayerDataModels=null}},{key:"layers",value:function(){return arguments.length?(this._layers=arguments.length<=0?void 0:arguments[0],this):this._layers}},{key:"transform",value:function(){return arguments.length?(this._transform=arguments.length<=0?void 0:arguments[0],this):this._transform}},{key:"layerDef",value:function(){return arguments.length?(this._layerDef=qS(arguments.length<=0?void 0:arguments[0]),this.triggerListener("layerDef",this._prevLayerDef,this._layerDef),this):this._layerDef}},{key:"width",value:function(){return arguments.length?(this._width=arguments.length<=0?void 0:arguments[0],this):this._width}},{key:"height",value:function(){return arguments.length?(this._height=arguments.length<=0?void 0:arguments[0],this):this._height}},{key:"transformedData",value:function(){return arguments.length?(this._transformedData=arguments.length<=0?void 0:arguments[0],this):this._transformedData}},{key:"config",value:function(){if(arguments.length){var t=this._config,e=arguments.length<=0?void 0:arguments[0],n=Js(t||Js({},uE),e),r=this.renderer();return"html"===r&&(n.gridLines.show=!1,n.gridBands.show=!1),this._prevconfig=t,this._config=n,this.triggerListener("config",t,this._config),this}return this._config}},{key:"data",value:function(){if(arguments.length){var t=this._data;this._data=arguments.length<=0?void 0:arguments[0];var e=this._data;if(this._prevdata=t,this._cache){var n=this.cachedData();this.cachedData([].concat(dg()(n),[e]))}else{var r=this.cachedData()[0];r&&r.unsubscribe("propagation"),this.cachedData([e])}return this.triggerListener("data",this._prevdata,this._data),this}return this._data}},{key:"triggerListener",value:function(t,e,n){this._locked||this._listeners[t](e,n)}},{key:"triggerAllListeners",value:function(){var t=this._listeners;for(var e in t)t[e](this["_prev".concat(e)],this["_".concat(e)])}},{key:"createGridLinesAndBands",value:function(){var t=this,e=null,n=null,r=null;return function(){var i,a,o,c,u,s;a={gridLinesSelection:e,gridBandsSelection:n},o=(i=t).config(),c=i.metaInf(),u=i.store(),s=i._timeDiffs,[RM,IM].forEach((function(t){var e,n;t===RM?(e=JM,n=o.gridBands):(e=tE,n=o.gridLines);var r=function(t,e,n){return["x","y"].map((function(r){var i=t.axes();return i[r]&&i[r].length&&zs(e[r]&&e[r].show,function(t,e){return e.constructor.type()===nE&&t}(e.show,i[r][0]))?function(t,e,n,r){var i,a,o,c,u=t.config(),s=u.classPrefix,l=u.gridLines,f=u.gridBands,h=l.color,d=l.zeroLineColor,p=n===RM?f.defClassName:l.defClassName,g=f[r].color,v=e[r][0],y=v.constructor.type()===nE;n===RM&&y?(c={},rv()(c,r,"".concat(r,"value")),rv()(c,"".concat(r,"0"),"".concat(r,"value0")),o=c):o=rv()({},r,"".concat(r,y?"value":"dim")),o.color={value:function(t,e){var i=y&&v.domain()[0]<0;return n===RM?g[e%2]:i&&0===t[r]?d:h}};var m=t.axes(),b=m.color,x=m.shape,_=m.size;return{definition:(i={defClassName:"".concat(p,"-").concat(r),className:u.className,name:r,calculateDomain:!1,individualClassName:function(t,e){return y&&v.domain()[0]<0&&0===t.y&&n!==RM?"".concat(s,"-axis-zero-line"):"".concat(s,"-grid-").concat(n,"-").concat(r,"-").concat(e%2)}},rv()(i,"pad".concat(r.toUpperCase()),n===RM?0:void 0),rv()(i,"encoding",o),rv()(i,"interactive",!1),i),axes:(a={},rv()(a,r,v),rv()(a,"color",b[0]),rv()(a,"shape",x[0]),rv()(a,"size",_[0]),a)}}(t,i,n,r):null})).filter((function(t){return null!==t}))}(i,n,t),l="_".concat(t,"Selection");a[l]||(i[l]=tl(i[l],(function(n){var r=qw.getLayerInstance({mark:e});r.dependencies(i._dependencies);var a=n.definition.name;return r.metaInf({unitRowIndex:c.rowIndex,unitColIndex:c.colIndex,namespace:"".concat(c.namespace).concat(t).concat(a),parentNamespace:c.namespace}).store(u),r}),r,(function(t){return t.definition.name})),i[l].each((function(t,n){var r=n.definition,i=qw.getSerializedConf(e,r),a=n.axes;t.config(i).dataProps({timeDiffs:s}).axes(a)})),i["_".concat(t)]=i[l].getObjects())})),r=function(t,e){var n=t.axes(),r=t._gridLines,i=t._gridBands;if(r.length||i.length){var a,o=e;e||(e=o=function(t,e){var n=e.fields(),r=e._dependencies.DataStore,i=r.FieldType,a=i.MEASURE,o=i.DIMENSION,c=r.FieldSubtype,u=ZM()({},c),s={};return["x","y"].forEach((function(e){var i,l=t[e][0].getTickValues(),f=n[e][0].subtype(),h=n[e][0].as(),d=[{name:"yvalue",type:a},{name:"xvalue",type:a},{name:"yvalue0",type:a},{name:"xvalue0",type:a},{name:"xdim",type:o,subtype:rE(f,c,u)},{name:"ydim",type:o,subtype:rE(f,c,u)}],p=Math.max(l.length);l=f===c.TEMPORAL&&h!==eE?l.map((function(t){return t.getTime()})):l;for(var g=(i={},rv()(i,"".concat(e,"value"),[]),rv()(i,"".concat(e,"value0"),[]),rv()(i,"".concat(e,"dim"),[]),i),v=0;v<p;v+=1)g["".concat(e,"value")].push(l[v]),g["".concat(e,"value0")].push(l[v+1]),g["".concat(e,"dim")].push(l[v]);var y=Object.keys(g),m=d.filter((function(t){return y.includes(t.name)}));s[e]=new r({data:Object.values(g),schema:m})})),s}(n,t)),(a=[]).concat.apply(a,dg()(i).concat(dg()(r))).forEach((function(t){t.data(t.axes().x?o.x:o.y)}))}return e}(t,r),e=t._gridLinesSelection,n=t._gridBandsSelection}}}],[{key:"formalName",value:function(){return"VisualUnit"}},{key:"getState",value:function(){return[{domain:null}]}},{key:"getterSetters",value:function(){return aE}},{key:"localOptions",value:function(){return cE.a}},{key:"create",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ev()(this,e)}}]),t}(),hE=function(){function t(){gg()(this,t)}return yg()(t,[{key:"type",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"toString",value:function(){throw new Error(Zs.INTERFACE_IMPL)}}]),t}(),dE=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n),t=e.call(this);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.vars(i),t}return yg()(n,[{key:"vars",value:function(){return arguments.length?(this._vars=arguments.length<=0?void 0:arguments[0],this):this._vars}},{key:"as",value:function(t){return t?(this.vars().forEach((function(e){return e.as(t)})),this):this.vars()[0].as()}},{key:"data",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?(this.vars().forEach((function(t){return t.data(e[0])})),this._data=e[0],this):this._data}},{key:"getMembers",value:function(){return this.vars().map((function(t){return t.getMembers()[0]}))}},{key:"type",value:function(){return this.vars()[0].type()}},{key:"toString",value:function(){return this.vars().map((function(t){return t.toString()})).join(",")}},{key:"numberFormat",value:function(){return this.vars()[0].numberFormat()}},{key:"format",value:function(t){return this.vars()[0].format(t)}},{key:"getSchemaDef",value:function(){return this.vars()[0].getSchemaDef()}},{key:"subtype",value:function(){return this.vars()[0].subtype()}},{key:"getMinDiff",value:function(){return this.vars()[0].getMinDiff()}},{key:"displayName",value:function(){return this.vars().map((function(t){return t.displayName()})).join(",")}},{key:"isContinuous",value:function(){return"continuous"===this.as()}},{key:"isDiscrete",value:function(){return"discrete"===this.as()}}]),n}(hE),pE=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r){var i;return gg()(this,n),(i=e.call(this)).oneVar(t),i.as(r),i}return yg()(n,[{key:"oneVar",value:function(){return arguments.length?(this._oneVar=arguments.length<=0?void 0:arguments[0],this):this._oneVar}},{key:"as",value:function(t){return t?(this._as=t,this):this._as}},{key:"data",value:function(){return arguments.length?(this._data=arguments.length<=0?void 0:arguments[0],this):this._data}},{key:"toString",value:function(){return this._oneVarString||(this._oneVarString=this.oneVar()),this._oneVarString}},{key:"numberFormat",value:function(){return"measure"===this.type()?this.data().getField(this.oneVar()).schema().format:function(t){return t}}},{key:"format",value:function(t){var e=bt.FieldSubtype,n=bt.DateTimeFormatter;if(t&&this.subtype()===e.TEMPORAL){var r=new n(this.data().getField(this.oneVar()).schema().format);t=t.map((function(t){return r.getNativeDate(t)}))}return t}},{key:"rawFormat",value:function(){var t=bt.FieldSubtype,e=bt.DateTimeFormatter;if(this.subtype()===t.TEMPORAL){var n=this.data().getField(this.oneVar()).schema().format;return function(t){return e.formatAs(t,n)}}return function(t){return t}}},{key:"getMembers",value:function(){return[this.oneVar()]}},{key:"type",value:function(){return this.data().getField(this.oneVar()).type()}},{key:"subtype",value:function(){var t=this.data().getField(this.oneVar());return t.subtype()||t.type()}},{key:"getMinDiff",value:function(){return this.data().getFieldspace().fieldsObj()[this.oneVar()].minimumConsecutiveDifference()}},{key:"equals",value:function(t){return this.oneVar()===t.oneVar()}},{key:"displayName",value:function(){return Xl(this.data(),this.oneVar())}},{key:"getSchemaDef",value:function(){return this.data().getField(this.oneVar()).schema()}},{key:"isContinuous",value:function(){return"continuous"===this.as()}},{key:"isDiscrete",value:function(){return"discrete"===this.as()}}]),n}(hE),gE=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"type",value:function(){return"measure"}},{key:"subtype",value:function(){return"continuous"}}]),n}(pE),vE=function(t){return t instanceof gE},yE=r.SCALES,mE=function(t){return t.filter((function(t){return t.as()===yE.DISCRETE}))},bE=function(t){return t.filter((function(t){return t.as()===yE.CONTINUOUS}))},xE=function(t,e){for(var n=[],r=[],i=Math.max(t.length,e.length),a=0;a<i;a++){var o=t[a],c=e[a];vE(o)&&vE(c)||(o&&n.push(o),c&&r.push(c))}return[n,r]},_E=function(t,e){var n=[];return t.forEach((function(t){if(null===t)n.push(new gE(null,yE.CONTINUOUS));else if(t instanceof dE){var r=dt(e.model.getField(t.vars()[0].oneVar()));t.as(r),t.data(e),n.push(t)}else{var i,a;"string"==typeof t?(i=t,a=dt(e.model.getField(t))):(i=t.field,a="string"==typeof t.as?t.as:dt(e.model.getField(t.field))),n.push(new pE(i,a).data(e))}})),n},wE=function(t,e,n){var r=function(t,e){var n=[];return Array.isArray(t[0])?(n[0]=t[0]||[],n[1]=t[1]||[]):(n[0]="column"===e?[]:t,n[1]="column"===e?t:[]),n}(e,t),i=[_E(r[0],n),_E(r[1],n)];return"row"===t?function(t){var e=t[0],n=t[1],r=bE(e),i=bE(n),a=mE(e),o=mE(n),c=xE(r,i),u=fg()(c,2);r=u[0],i=u[1];var s=[];return r.length+i.length?(s[0]=[].concat(dg()(a),dg()(o),dg()(r)),s[1]=dg()(i)):(s[0]=a,s[1]=o),s}(i):function(t){var e=t[0],n=t[1],r=bE(e),i=bE(n),a=mE(e),o=mE(n),c=[],u=xE(r,i),s=fg()(u,2);return r=s[0],i=s[1],r.length+i.length?(c[0]=[].concat(dg()(a),dg()(o),dg()(r)),c[1]=dg()(i)):(c[0]=[].concat(dg()(a),dg()(o.slice(0,o.length-1))),c[1]=dg()(o.slice(o.length-1,o.length))),c}(i)},kE=lt.POLAR,SE=ft.DISCRETE,ME=ft.CONTINUOUS,EE=function(t){return[].concat(dg()(t[0]),dg()(t[1])).reduce((function(t,e){return e.as()===ME&&(t=!0),t}),!1)},OE=function(t){var e={};return[pb,gb,vb,"autoGroupBy"].forEach((function(n){void 0!==t[n]&&(e[n]=t[n])})),e},CE=function(t){return Object.keys(t).some((function(e){return t[e].length>0}))},AE=function(t,e,n){var r="";if(e===n-1&&t.length>n){for(var i=e;i<t.length-1;i++)r+="".concat(t[i].toString()," / ");return r+t[t.length-1].toString()}return t[e]?t[e].toString():""},PE=function(t,e,n,r){var i=r.classPrefix,a=r.labelManager,o=r.sanitizeCheck,c=t.length>0?t[0].map((function(r,o){return new n({type:yb,className:"".concat(i,"-grid-headers")},{labelManager:a}).source(AE(e,o,t[0].length)).config({show:r.config().show})})):[];return o&&function(t,e){if(e)for(var n=0;n<t.length;n++)0!==n?t[n].config({externalClassname:["".concat(Mb)]}):t[n].config({externalClassname:["".concat(Eb,"-").concat(Bm),"".concat(Mb)]});else for(var r=0;r<t.length;r++)for(var i=0;i<t[0].length;i++)t[r][i].config({externalClassname:["".concat(Mb)]})}(c,!0),c},DE=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.isBorderPresent,n=["color","showRowBorders","showColBorders","showValueBorders"];return!e||n.every((function(t){return!e[t]}))},RE=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n={};return Object.keys(t.format).map((function(r){var i=t.format[r];n[r]="function"==typeof i?function(e){return t.format[r](e)}:"temporal"===e.getField(r).subtype()?function(t){return bt.DateTimeFormatter.formatAs(t,i)}:function(t){return t}})),n},IE=function(t,e){var n=null;return[Dm,Im,Rm].forEach((function(e){(void 0).store.get(e)&&t===(void 0).store.get(e)[0]&&(n=e)})),n?{channel:n}:([Am,Cm].forEach((function(r){e["".concat(r,"Facets")].forEach((function(e){e.toString()===t&&(n={channel:xb,type:r===Cm?Pm:Am})}))})),n||([Am,Cm].forEach((function(r){e["".concat(r,"Projections")].forEach((function(e){e.forEach((function(e){e.toString()===t&&(n=r===Cm?cm:um)}))}))})),n?{channel:n}:null))},TE=function(t,e,n){var r=jm,i=t.getField(e);return i&&(r=(n||dt(i))===ft.CONTINUOUS?Lm:jm),r},NE=function(){return new rC},FE=function(t,e,n){var r=n[t],i="",a=t===Am?[Bm,zm]:[Wm,Hm],o=fg()(e,2),c=o[0],u=o[1],s=function(t){return c.length?c[t].type():null},l=function(t){return u.length?u[t].type():null};return s(c.length-1)===ym&&l(0)===ym?(i=r?a[1-a.indexOf(r)]:a[1],r=t===Pm&&c[c.length-1].toString()===u[0].toString()?Hm:r||a[0]):l(u.length-1)===ym?(i=t===Am?zm:Wm,r=t===Am?zm:Wm):(i=t===Am?Bm:Hm,r=t===Am?Bm:Hm),s(c.length-1)===mm&&l(0)===mm?r=t===Am?Bm:Hm:l(0)===mm?r=t===Am?zm:Wm:s(c.length-1)===mm&&(r=t===Am?Bm:Hm),[i,r]},jE=function(t,e){var n={top:!1,bottom:!1,left:!1,right:!1},r={top:!1,bottom:!1,left:!1,right:!1},i={top:!1,bottom:!1,left:!1,right:!1},a=t.rows,o=t.columns,c=t.values,u=t.cellRenderer,s=fg()(a,2),l=s[0],f=s[1],h=fg()(o,2),d=h[0],p=h[1],g=e.fieldInfo(),v=g.rows,y=g.columns,m=[].concat(dg()(v.flat().filter((function(t){return t.as()===SE}))),dg()(y.flat().filter((function(t){return t.as()===SE})))).length,b=[].concat(dg()(v.flat().filter((function(t){return t.as()===ME}))),dg()(y.flat().filter((function(t){return t.as()===ME})))).length,x=[].concat(dg()(v.flat().filter((function(t){return t.subtype()===cb}))),dg()(y.flat().filter((function(t){return t.subtype()===cb})))).length;if(e.constructor.type()===kE){if(!m)return{showRowBorders:n,showColBorders:r,showValueBorders:i}}else if(!b&&!x&&"html"!==u&&m<=2)return{showRowBorders:n,showColBorders:r,showValueBorders:i};return n=function(t,e,n){var r=n.cellRenderer,i=n.topColumns,a=n.bottomColumns,o={top:!1,bottom:!1,left:!1,right:!1};return t.length>1||e.length>1?(o.top=!0,o.bottom=!0,o.left=!0,o.right=!0):"html"===r&&(o.top=!!i.length,o.bottom=!!a.length,o.left=!0,o.right=!0),o}(l,f,{cellRenderer:u,topColumns:d,bottomColumns:p}),r=function(t,e,n){var r=n.cellRenderer,i=n.leftRows,a=n.rightRows,o={top:!1,bottom:!1,left:!1,right:!1};return(t.length||e.length)&&(t[0]&&t[0].length>1||e[0]&&e[0].length>1?(o.top=!0,o.bottom=!0,o.left=!0,o.right=!0):"html"===r&&(o.top=!0,o.bottom=!0,o.left=!!i.length,o.right=!!a.length)),o}(d,p,{cellRenderer:u,leftRows:l,rightRows:f}),i=function(t,e){var n={top:!0,left:!0,bottom:!0,right:!0},r=[Bm,zm],i=[Hm,Wm];return t.forEach((function(t,e){t[0]&&t[0].length?n[r[e]]=!0:n[r[e]]=!1})),e.forEach((function(t,e){t.length?n[i[e]]=!0:n[i[e]]=!1})),n}([l,f],[d,p]),c.length>1&&(i.top=!0,i.bottom=!0),c.length&&c[0].length>1&&(i.left=!0,i.right=!0),{showRowBorders:n,showColBorders:r,showValueBorders:i}},LE=function(t){var e,n=t.map((function(t){return t.encoding||{}})),r=(e=[]).concat.apply(e,dg()(n.map((function(t){return Object.values(t).flatMap((function(t){var e="object"===qk()(t)?t.field:t;return Array.isArray(e)?e:[e]}))}))));return dg()(new Set(r.filter((function(t){return t}))))},BE=function(t,e){var n,r=Object.values(t).map((function(t){var e,n,r=(e=[]).concat.apply(e,dg()(t));return(n=[]).concat.apply(n,dg()(r))}));return(n=[]).concat.apply(n,dg()(r).concat(dg()(e)))},zE=function(t){var e=[];return function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];Array.isArray(i)?n.push(i):t(i.values,n)}}(Tl({data:t,keys:t[0].map((function(t,e){return e}))}),e),e},HE=function(t,e,n){var r,i=n.data(),a=e.suppliedLayers,o=e.facetsAndProjections,c=e.globalConfig,u=c.autoGroupBy;i instanceof bt&&i.dispose();var s=t.getDimensions(),l=LE(a).filter((function(t){return s.includes(t)})),f=Array.from(BE(o,l)),h=dg()(new Set(f.flatMap((function(t){return t instanceof hE?t.getMembers():t})))),d=t.project(t.getFieldNames().filter((function(t){return t!==ut.ROW_ID})));if(n.data(d),u.disabled)r=d;else{var p=h.filter((function(e){return t.isDimension(e)})),g=u.measures,v=t.getMeasures(),y=Yl(t,v),m=Js(y,g),b=Object.keys(m).map((function(t){return{aggn:m[t],field:t}}));r=d.groupBy(p,b)}var x=c.sort;!function(t){t.autoSort.disabled&&Object.keys(t).forEach((function(e){"autoSort"!==e&&delete t[e]}))}(x);var _=Object.entries(x).filter((function(t){return"autoSort"!==t[0]}));return r=r.sort(_),n.transformedData(r),r},WE={layers:{},data:{},globalConfig:{}},VE=function(){function t(){gg()(this,t),qs(this,WE)}return yg()(t,[{key:"createAxis",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"setCommonDomain",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getLayerConfig",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"fieldInfo",value:function(){return arguments.length?(this._fieldInfo=Js(this._fieldInfo||{},arguments.length<=0?void 0:arguments[0]),this):this._fieldInfo}},{key:"sanitizeFields",value:function(t,e){return this.fieldInfo(function(t,e){var n=e.rows,r=e.columns;return{rows:wE("row",n,t),columns:wE("column",r,t)}}(t,e)),this.fieldInfo()}},{key:"axisFrom",value:function(){return arguments.length?(this._axisFrom=arguments.length<=0?void 0:arguments[0],this):this._axisFrom}},{key:"headerFrom",value:function(){return arguments.length?(this._headerFrom=arguments.length<=0?void 0:arguments[0],this):this.__headerFrom}},{key:"setAxisAndHeaders",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=FE(Am,e.rows,t),r=fg()(n,2),i=r[0],a=r[1],o=FE(Pm,e.columns,t),c=fg()(o,2),u=c[0],s=c[1];return this.axisFrom({row:a,column:s}),this.headerFrom({row:i,column:u}),this}},{key:"getProjectionFields",value:function(t){return LE(t)}},{key:"hasMandatoryFields",value:function(t){return CE(t)}}]),t}(),UE={linear:Ey,band:Oy,temporal:Cy,size:Zy,color:Xy,shape:nm},GE={default:2,facet:1,table:1},qE={className:"".concat(Pb,"-facet-header")},YE={dependencies:{},layerConfig:{},encoder:{},valueParser:{},data:{},transformedData:{},store:{}},XE=function(t,e,n,r,i){var a=[];e.forEach((function(e){var n=t.getValueAtIndex(e,0);a.push(n)}));var o=a.join(",");return void 0===n[o]&&(n[o]=i++,r.push(a)),a},$E=function(t){return t.map((function(t){return{keyArr:t,joinedKey:t.join(",")}}))},KE=function(t){return t.getMembers()},QE=function(t){return t.name},ZE=function(t){return Yu(t).flat()},JE=function(t,e,n){return t.map((function(){return Array.from($u(e,n))}))},tO=ft.DISCRETE,eO=function(t){var e=[];return t.forEach((function(t){var n=t.type,r=t.domains,i=r.map((function(t){return t.primary.domain})),a=r.map((function(t){return t.secondary.domain})),o=ks(i,n),c=ks(a,n);e.push([o,c])})),e},nO=function(t,e,n){return t.forEach((function(t){var r=t.type;t.domains.forEach((function(t){var i=t.primary,a=t.secondary,o=i.field,c=i.domain,u=a.field,s=a.domain;if(e[o]=ks([c,e[o]||[]],r),u&&(e[u]=ks([s,e[u]||[]],r),n.alignZeroLine)){var l=[e[o][1],e[u][1]],f=[e[o][0],e[u][0]],h=XO(l,f);e[o]=h[0],e[u]=h[1]}}))})),e},rO=function(t){var e=t.x,n=t.y;return{x:eO(e),y:eO(n)}},iO=function(t,e){var n={},r=t.x,i=t.y,a=[],o=[];return r[0].type!==tO?(nO(r,n,e.x),r.forEach((function(t){var e=t.domains,r=e[0].primary.field,i=e[0].secondary.field;a.push([n[r],i?n[i]:[]])}))):a=eO(r),i[0].type!==tO?(nO(i,n,e.y),i.forEach((function(t){var e=t.domains,r=e[0].primary.field,i=e[0].secondary.field;o.push([n[r],i?n[i]:[]])}))):o=eO(i),{x:a,y:o}},aO=function(t,e){return t.length?t.map((function(t,n){var r=e.length?e[n]:[];return[].concat(dg()(t),dg()(r))})):e},oO=function(t,e,n){var r=e.getSchemaDef(),i=r.format,a=r.subtype,o=e.oneVar();return n[o]?n[o](t):"temporal"===a&&i?"function"==typeof i?i(t):bt.DateTimeFormatter.formatAs(t,i):t},cO=function(){function t(e){gg()(this,t),this._dependencies=e,this.config({})}return yg()(t,[{key:"config",value:function(){return arguments.length?(this._config=arguments.length<=0?void 0:arguments[0],this):this._config}},{key:"clear",value:function(){this._dependencies={},this.config({})}}]),t}(),uO=function(t,e,n,r){return t.map((function(t){var i=new n.TextCell({className:e.className,useExternalCSS:e.useExternalCSS,style:e.style},{labelManager:r});return i.source(t).config(e),i}))};function sO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sO(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this,t))._cells={left:[],right:[]},r}return yg()(n,[{key:"props",value:function(t){this._props=t}},{key:"createPlaceHolders",value:function(t){this._cells={left:[],right:[]};var e=this.config(),n=e.takeHeaderFrom,r=e.facet,i=e.useExternalCSS,a=e.facetConfig,o=lO(lO({},a.labels.style),{},{"text-align":a.labels.align}),c=this.createHeaders(t,lO(lO({},r),{},{useExternalCSS:i,style:o,className:"".concat(this.config().className||""," ").concat(a.className||""," ").concat(r.className||"")}));"left"===n?this._cells.left=c:this._cells.right=c}},{key:"createHeaders",value:function(t,e){var n=this._dependencies,r=n.cellRegistry,i=n.smartLabel,a=lO(lO({},e),{},{type:mb});return t.map((function(t){return uO(t,a,r,i)}))}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this),this._cells={left:[],right:[]}}}]),n}(cO);function hO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hO(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this,t))._cells={top:[],bottom:[]},r}return yg()(n,[{key:"createPlaceHolders",value:function(t){this._cells={top:[],bottom:[]};var e=this.config(),n=e.takeHeaderFrom,r=e.facet,i=e.useExternalCSS,a=e.facetConfig,o=dO(dO({},a.labels.style),{},{display:"flex","justify-content":a.labels.align===Bm?"flex-start":a.labels.align===zm?"flex-end":a.labels.align}),c=this.createHeaders(t,dO(dO({},r),{},{useExternalCSS:i,style:o,className:"".concat(this.config().className||""," ").concat(a.className||""," ").concat(r.className||"")}));"top"===n?this._cells.top=c:this._cells.bottom=c}},{key:"createHeaders",value:function(t,e){var n=this._dependencies,r=n.cellRegistry,i=n.smartLabel,a=dO(dO({},e),{},{type:bb});return t.map((function(t){return uO(t,a,r,i)}))}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this),this._cells={top:[],bottom:[]}}}]),n}(cO),gO=ft.DISCRETE,vO=function(t,e){return t.map((function(t){return yO(t,t?t.config():{},e)}))},yO=function(t,e,n){var r=e.orientation,i=e.show,a=e.renderer;return t?(new n.AxisCell).source(t).config({isOffset:r===s.LEFT||r===s.TOP,show:i,renderer:a}):(new n.BlankCell).config({show:!1})},mO=function(t){var e=t.as(),n=t.subtype();return e===gO?Oy:n===cb?Cy:Ey},bO=function(t,e,n,r,i){var a=i.smartLabel;return new(mO(e))(function(t,e,n,r){var i=function(t,e,n,r){var i={fieldInstance:e,id:e.toString(),name:e.displayName(),field:e.toString(),fieldAs:e.as(),fieldType:e.type(),fieldSubtype:e.subtype(),numberFormat:e.numberFormat(),orientation:n,useExternalCSS:r.useExternalCSS,renderer:r.renderer};"html"===r.renderer&&(i.labels={rotation:0}),"function"==typeof r&&(r=r(e));var a=Us(r,"axes",t)||{},o=Us(a,"fields",e)||{};return Js(Js(i,a),o)}(t,e,n,r),a=mO(e);return r.columnTitle&&r.columnTitle.show&&(a===Oy||a===Cy)&&("showAxisName"in i||(i=Object.assign(i,{showAxisName:!1}))),i}(t,e,n,r),{labelManager:a})};function xO(t,e,n,r,i,a,o){if("discrete"===t&&"temporal"!==n)if("dimension"===e&&"continuous"!==n){var c=eC(r,i,a);o.sort((function(t,e){return Zl(c,t,e)}))}else{var u=eC(r,i,a);o.sort((function(t,e){return ef(u,t,e)}))}return o}var _O=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this,t))._cells={top:[],bottom:[]},r}return yg()(n,[{key:"getAxisFields",value:function(t,e){for(var n=[],r=[],i=t.length?t[t.length-1].length:1,a=0;a<i;a++)for(var o=0;o<e.length;o++){var c=fg()(e[o],2),u=c[0],s=c[1];n.push(u),r.push(s)}return{topAxisFields:n,bottomAxisFields:r}}},{key:"createAxisInstances",value:function(t,e,n){var r=this;return t.map((function(t){return t&&!vE(t)?bO(cm,t,e,n,r._dependencies):null}))}},{key:"createPlaceHolders",value:function(t){this._cells={top:[],bottom:[]};var e=this.config(),n=e.axisFrom,r=e.globalConfig,i=e.renderer,a=t.facetKeys,o=t.axisFields,c=this.getAxisFields(a,o),u=c.topAxisFields,s=c.bottomAxisFields;r.columnTitle=t.columnTitle;var l=Object.assign(r,{renderer:i,columnTitle:t.columnTitle}),f=this.createAxisInstances(u,"bottom"===n?"bottom":"top",l),h=this.createTopAxisCells(f),d=this.createAxisInstances(s,"bottom",r),p=d.every((function(t){return!t})),g=this.createBottomAxisCells(p?[]:d);this._cells={top:"bottom"===n?[]:h,bottom:"bottom"===n?h:g}}},{key:"createTopAxisCells",value:function(t){return vO(t,this._dependencies.cellRegistry)}},{key:"createBottomAxisCells",value:function(t){return vO(t,this._dependencies.cellRegistry)}},{key:"setDomains",value:function(t,e){var n=this._dependencies.cellRegistry.AxisCell,r=this.config(),i=r.axisFrom,a=r.globalConfig,c=this._cells,u=c.top,s=c.bottom,l={};("top"===i?[u,s]:[s,u]).forEach((function(e,r){e.forEach((function(e,i){if(e instanceof n){var o=e.source(),c=o.config(),u=c.field,s=c.fieldAs,f=c.fieldType,h=c.fieldSubtype,d=t[i][r];a.sort.autoSort.disabled||(d=xO(s,f,h,a,u,c,d)),o.domain(d),l["".concat(i,"-").concat(r)]=d}}))})),e.commit("".concat(o.GROUP_GLOBAL_NAMESPACE,".domain.x"),l)}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this),this._cells={top:[],bottom:[]}}},{key:"getCells",value:function(){return this._cells}}]),n}(cO),wO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this,t))._cells={left:[],right:[]},r}return yg()(n,[{key:"dependencies",value:function(t){this._dependencies=t}},{key:"getAxisFields",value:function(t,e){for(var n=[],r=[],i=t.length||1,a=0;a<i;a++)for(var o=0;o<e.length;o++){var c=fg()(e[o],2),u=c[0],s=c[1];n.push(u),r.push(s)}return{leftAxisFields:n,rightAxisFields:r}}},{key:"createAxisInstances",value:function(t,e,n){var r=this;return t.map((function(t){return t&&!vE(t)?bO(um,t,e,n,r._dependencies):null}))}},{key:"createPlaceHolders",value:function(t){this._cells={left:[],right:[]};var e=this.config(),n=e.globalConfig,r=e.renderer,i=t.facetKeys,a=t.axisFields,o=this.getAxisFields(i,a),c=o.leftAxisFields,u=o.rightAxisFields;n.rowTitle=t.rowTitle;var s=Object.assign(n,{renderer:r,rowTitle:t.rowTitle}),l=this.createAxisInstances(c,"left",s),f=this.createLeftAxisCells(l),h=this.createAxisInstances(u,"right",n),d=h.every((function(t){return!t})),p=this.createRightAxisCells(d?[]:h);this._cells={left:f,right:p}}},{key:"createLeftAxisCells",value:function(t){return vO(t,this._dependencies.cellRegistry)}},{key:"createRightAxisCells",value:function(t){return vO(t,this._dependencies.cellRegistry)}},{key:"setDomains",value:function(t,e){var n=this._dependencies.cellRegistry.AxisCell,r=this._cells,i=r.left,a=r.right,c=this.config().globalConfig,u={};[i,a].forEach((function(e,r){e.forEach((function(e,i){if(e instanceof n){var a=e.source(),o=a.config(),s=o.field,l=o.fieldAs,f=o.fieldType,h=o.fieldSubtype,d=t[i][r];c.sort.autoSort.disabled||(d=xO(l,f,h,c,s,o,d)),a.domain(d),u["".concat(i,"-").concat(r)]=d}}))})),e.commit("".concat(o.GROUP_GLOBAL_NAMESPACE,".domain.y"),u)}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this),this._cells={left:[],right:[]}}},{key:"getCells",value:function(){return this._cells}}]),n}(cO);function kO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var SO=function(t,e,n){for(var r=e==="".concat(zm)?"".concat(Mb):"".concat(Ob),i=t.length,a=t[0][0].source(),o=t[t.length-1][0].source(),c={},u=0;u<t.length;u++){for(var s=0;s<t[0].length;s++)t[u][s].config({externalClassname:[r]});t[u][0].source()!==a&&(c[u]=u,a=t[u][0].source())}for(var l=0;l<t.length;l++)for(var f=0;f<t[0].length;f++)0===f?(t[l][0].config().externalClassname.push("".concat(Eb,"-").concat(e)),t[l][f].source()===o?t[l][f].config().externalClassname.push("".concat(Cb,"-").concat(Wm)):t[l][0].config().externalClassname.push("".concat(Mb,"-").concat(Wm)),t[l][f]instanceof n&&(t[l][f].config().externalClassname.push("".concat(Eb,"-").concat(Hm)),t[l][f].config().externalClassname.push("".concat(Eb,"-").concat(Wm)))):f!==t[l].length-1&&t[l][f].config().externalClassname.push("".concat(Mb,"-").concat(e)),0===l?t[0][f].config().externalClassname.push("".concat(Cb,"-").concat(Hm)):l===i-1&&t[l][f].config().externalClassname.push("".concat(Cb,"-").concat(Wm)),c[l]&&t[l-1][f].config().externalClassname.push("".concat(Mb,"-").concat(Wm)),t[l][f]instanceof n&&(t[l][f].config().externalClassname.push("".concat(Eb,"-").concat(Bm)),t[l][f].config().externalClassname.push("".concat(Eb,"-").concat(zm)));return c},MO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._borderConfig={},t._mergedMatrices={leftMatrix:[],rightMatrix:[]},t._matrices={headers:new fO(t._dependencies),axes:new wO(t._dependencies)},t}return yg()(n,[{key:"generateHeaders",value:function(t){var e=this._matrices.headers;e.config(this.config().headers),e.createPlaceHolders(t)}},{key:"generateAxes",value:function(t){var e=this.config(),n=e.axes,r=e.renderer,i=this._matrices.axes;i.config(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?kO(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({renderer:r},n)),i.createPlaceHolders(t)}},{key:"generateMatrices",value:function(t){var e=t.axesInfo,n=t.headers,r=t.facets,i=t.facetHeaderFormatters;this.generateAxes(e);var a=this.config().sanitizeCheckBorder,o=this._matrices.axes._cells.left,c=o.length/n.length,u=n.length?o.map((function(t,e){return n[Math.floor(e/c)]})):[];u=u.map((function(t){return t.map((function(t,e){return oO(t,r.rowFacets[e],i)}))})),this.generateHeaders(u),this._mergedMatrices=this.merge(),this._borderConfig=a?this._sanitiseBorderMatrix():{}}},{key:"_sanitiseBorderMatrix",value:function(){var t=this.getMergedMatrices(),e=t.leftMatrix,n=t.rightMatrix,r=this._dependencies.cellRegistry.BlankCell,i={};return n.length&&(i=SO(n,"".concat(zm),r)),e.length&&(i=SO(e,"".concat(Bm),r)),i}},{key:"getPriority",value:function(){var t=this._matrices.axes._cells,e=t.left,n=t.right.length?1:-1;return e.length&&n++,n}},{key:"merge",value:function(){var t=this._matrices,e=t.headers,n=t.axes,r=e._cells,i=r.left,a=r.right,o=n._cells,c=o.left,u=o.right;return{leftMatrix:aO(i,c.map((function(t){return[t]}))),rightMatrix:aO(u.map((function(t){return[t]})),a)}}},{key:"getMergedMatrices",value:function(){return this._mergedMatrices}},{key:"getBorderConfig",value:function(){return this._borderConfig}},{key:"getAxes",value:function(){var t=this._matrices.axes._cells,e=t.left,n=t.right;return[].concat(dg()(e.map((function(t){return t.source()})).filter((function(t){return t}))),dg()(n.map((function(t){return t.source()})).filter((function(t){return t}))))}},{key:"getLeftAxes",value:function(){return this._matrices.axes._cells.left}},{key:"getRightAxes",value:function(){return this._matrices.axes._cells.right}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this);var t=this._matrices,e=t.axes,r=t.headers;e.clear(),r.clear(),this._borderConfig={},this._mergedMatrices={leftMatrix:[],rightMatrix:[]}}},{key:"matrices",value:function(){return this._matrices}}]),n}(cO);function EO(t,e){if(e)for(var n=0;n<t.length;n++)0!==n?t[n].config({externalClassname:["".concat(Mb)]}):t[n].config({externalClassname:["".concat(Eb,"-").concat(Bm),"".concat(Mb)]});else for(var r=0;r<t.length;r++)for(var i=0;i<t[0].length;i++)t[r][i].config({externalClassname:["".concat(Mb)]})}function OO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var CO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._mergedMatrices={topMatrix:[],bottomMatrix:[]},t._matrices={headers:new pO(t._dependencies),axes:new _O(t._dependencies)},t._title=null,t}return yg()(n,[{key:"generateColumnMatrixTitle",value:function(){var t=this.config(),e=t.columnVariables,n=void 0===e?[]:e,r=t.axes.globalConfig.axesHeaders.column.formatter,i=n.reduce((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(dg()(t),dg()(e.filter((function(t){return"discrete"===t.as()&&t.oneVar()!==gt||"temporal"===t.subtype()})).map((function(t){return t.displayName()}))))}),[]);this._title=r(i)}},{key:"getColumnTitle",value:function(){return this._title}},{key:"generateHeaders",value:function(t){var e=this._matrices.headers;e.config(this.config().headers),e.createPlaceHolders(t)}},{key:"generateAxes",value:function(t){var e=this.config(),n=e.axes,r=e.renderer,i=this._matrices.axes;i.config(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?OO(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({renderer:r},n)),i.createPlaceHolders(t)}},{key:"generateMatrices",value:function(t){var e=t.axesInfo,n=t.headers,r=t.facets,i=t.facetHeaderFormatters;this.generateAxes(e);var a=this.config().sanitizeCheckBorder,o=this._matrices.axes._cells,c=o.top,u=o.bottom,s=c.length?c:u,l=n.length?n[0].map((function(t,e){return n.map((function(t){return t[e]}))})):[],f=s.length/l.length,h=l.length?s.map((function(t,e){return l[Math.floor(e/f)]})):[];h=h.map((function(t){return t.map((function(t,e){return oO(t,r.colFacets[e],i)}))})),this.generateHeaders(h),this.generateColumnMatrixTitle(),this._mergedMatrices=this.merge(),a&&this._sanitiseBorderMatrix()}},{key:"_sanitiseBorderMatrix",value:function(){var t=this.getMergedMatrices(),e=t.topMatrix,n=t.bottomMatrix;e.length&&EO(e),n.length&&EO(n)}},{key:"getPriority",value:function(){var t=this._matrices.axes._cells,e=t.top,n=t.bottom.length?1:-1;return e.length&&n++,n}},{key:"merge",value:function(){var t=this._dependencies.cellRegistry,e=this._matrices,n=e.headers,r=e.axes,i=n._cells,a=i.top,o=i.bottom,c=[];a&&a.forEach((function(t){t.forEach((function(t,e){c[e]=c[e]||[],c[e].push(t)}))}));var u=r._cells,s=u.top,l=u.bottom;s.length&&c.push(s);var f=[];l.length&&f.push(l);var h=f.length;if(o&&o.forEach((function(t){t.forEach((function(t,e){f[e+h]=f[e+h]||[],f[e+h].push(t)}))})),!(c.length||f.length&&f[0].length)){var d=new t.BlankCell;f=[[d]]}return{topMatrix:c,bottomMatrix:f}}},{key:"getAxes",value:function(){var t=this._matrices.axes._cells,e=t.top,n=t.bottom;return[].concat(dg()(e.map((function(t){return t.source()})).filter((function(t){return t}))),dg()(n.map((function(t){return t.source()})).filter((function(t){return t}))))}},{key:"getTopAxes",value:function(){return this._matrices.axes._cells.top}},{key:"getBottomAxes",value:function(){return this._matrices.axes._cells.bottom}},{key:"getMergedMatrices",value:function(){return this._mergedMatrices}},{key:"matrices",value:function(){return this._matrices}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this);var t=this._matrices,e=t.axes,r=t.headers;e.clear(),r.clear(),this._title=null,this._mergedMatrices={topMatrix:[],bottomMatrix:[]}}}]),n}(cO),AO=function(t,e,n,r,i){!t[e]&&(t[e]={type:n,domains:[]});var a=i[0]?vE(i[0])?null:i[0]:null,o=i[1]?vE(i[1])?null:i[1]:null;t[e].domains.push({primary:{field:a,domain:r["".concat(i[0])]||[]},secondary:{field:o,domain:r["".concat(i[1])]||[]}})};function PO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function DO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?PO(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var RO=["".concat(Mb,"-").concat(zm)],IO=["".concat(Ob)],TO=IO.concat("".concat(Cb,"-").concat(Hm)),NO=IO.concat("".concat(Cb,"-").concat(Wm)),FO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._matrix=[],t._cellMap=new Map,t}return yg()(n,[{key:"_createVisualUnit",value:function(t,e){var n=t.rowIndex,r=t.columnIndex,i=t.timeDiffObj,a=t.renderer,o=this._dependencies,c=o.store,u=o.throwback,s=o.smartLabel,l=o.lifeCycleManager,f=o.layerRegistry,h=o.VisualUnit,d=o.DataStore,p=this.config().interactions,g=this.config(),v=g.alias,y=g.coord,m=g.valueParser,b=g.retinalConfig,x=g.fireboltDeps,_="unit".concat(n,"-").concat(r,"-").concat(gs());return e||((e=h.create({layerRegistry:f,interactions:p},{DataStore:d,throwback:u,smartLabel:s,fireboltDeps:x,lifeCycleManager:l})).metaInf({colIndex:r,rowIndex:n,namespace:_}),e.createFireboltInstance()),e.store(c).coord(y).parentAlias(v).valueParser(m).coord(y).renderer(a).metaInf(DO(DO({},e.metaInf()),{timeDiffObj:i})).retinalFields(b)}},{key:"_createGeomCell",value:function(t,e){var n=t.xAxes,r=t.yAxes,i=t.allFacets,a=t.dataStore,o=t.visualUnit,c=t.allFacetValues,u=t.rowProjections,s=t.columnProjections,l=t.unitConfig,f=t.layerConfig,h=this._dependencies.cellRegistry.GeomCell,d=this.config(),p=d.retinalAxes,g=d.detailFields,v=d.dataModelTransform;return e||(e=new h),e.data(a).config(l).layerDef(f).fields({x:s,y:u}).transform(v).detailFields(g).facetByFields([i,c]).source(o).axes(Object.assign({x:n,y:r},p)).updateModel()}},{key:"generateMatrix",value:function(t){var e=this,n=t.axes,r=t.borderConfig,i=t.dataModelMatrix,a=t.facets,o=a.rowFacets,c=a.colFacets,u=this._dependencies.store,s=this.config(),l=s.encoder,f=s.renderer,h=s.unitConfig,d=s.retinalConfig,p=s.suppliedLayers,g=s.visualGroupConfig,v=s.sanitizeCheckBorder,y=c.concat(o);u.lockModel();var m=function(t){var e={};return t.forEach((function(t){t.forEach((function(t){var n=t.dataStore;n.getTemporalFields().forEach((function(t){var r=n.getFieldData(t);if(r.length){var i=Ls(r);i>0&&(e[t]=Math.min(e[t]||1/0,i))}}))}))})),e}(i),b=this._cellMap,x=new Map,_=i.map((function(t,r){return t.map((function(t,i){var a=t.rowFacetValues,o=t.columnFacetValues,c=t.rowProjections,u=t.columnProjections,s=t.dataStore,v=o.concat(a),_=l.getLayerConfig({rowFields:c,columnFields:u},p,d,g),w="cell-".concat(r,"-").concat(i),k=b.get(w);x.set(w,!0);var S=e._createVisualUnit({renderer:f,rowIndex:r,columnIndex:i,layerConfig:_,timeDiffObj:m},k?k.source():null);return k=e._createGeomCell({allFacets:y,dataStore:s,visualUnit:S,allFacetValues:v,rowProjections:c,columnProjections:u,unitConfig:h,xAxes:[n.x.top[i],n.x.bottom[i]].filter((function(t){return t})),yAxes:[n.y.left[r],n.y.right[r]].filter((function(t){return t})),layerConfig:_},k),b.set(w,k),k}))}));this._matrix=_.map((function(t,e,n){var i=0===e,a=n.length,o=e===a-1;return t.map((function(t,a,c){var u,s=a===c.length-1;return t.config(Object.assign({},h,{externalClassname:(u=[],v&&(u=IO,i?u=TO:o&&(u=NO),s&&(u=u.concat(RO)),r[e]&&n[e-1][a].config().externalClassname.push("".concat(Mb,"-").concat(Wm))),u)}))}))}));var w,k,S,M=(w=b,k=x,S=new Map,w.forEach((function(t,e){!k.get(e)&&S.set(e,t)})),S);M.forEach((function(t,e){b.delete(e)})),u.unlockModel(),M.size&&this.removeExitCells(M)}},{key:"removeExitCells",value:function(t){t.forEach((function(t){t.remove()}))}},{key:"forEach",value:function(t){var e=this._matrix;e&&e.forEach((function(e,n){e.forEach((function(e,r){t(e,n,r)}))}))}},{key:"getXYDomains",value:function(){var t=[],e=[];return this.forEach((function(n,r,i){var a=n.source(),o=a.dataDomain(),c=a.fields(),u=a.axes(),s=u.x,l=u.y;if(s.length){var f=c.x[0].as(),h=o.x||{};AO(e,i,f,h,c.x)}if(l.length){var d=c.y[0].as(),p=o.y||{};AO(t,r,d,p,c.y)}})),{x:e,y:t}}},{key:"count",value:function(){var t=0;return this.forEach((function(){t++})),t}},{key:"getMatrix",value:function(){return this._matrix}},{key:"findPlaceHolderById",value:function(t){var e=null;return this.forEach((function(n){n.source().id()===t&&(e=n.source())})),e}},{key:"getAllDataModelIds",value:function(){var t=[];return this.forEach((function(e){t.push(e.source().data().id())})),t}},{key:"getUnits",value:function(){var t=[];return this.forEach((function(e){t.push(e.source())})),t}},{key:"findUnitByPayload",value:function(t){var e=this.getUnits()[0];if(t.sourceUnit){var n=this.findPlaceHolderById(t.sourceUnit);if(n)return n}var r=t.facets||{},i=Object.keys(r);return this.forEach((function(t){var n=t.source(),a=n.facetFieldsMap();i.every((function(t){return r[t]===a[t]}))&&(e=n)})),e}},{key:"findCellsByFacets",value:function(t){var e=[];return this.forEach((function(n){var r=n.source().facetFieldsMap();Object.keys(t).every((function(e){return r[e]===t[e]}))&&e.push(n)})),e}},{key:"getRetinalFieldsDomain",value:function(){var t=this.getUnits().map((function(t){return t.getRetinalFieldsDomain()}));return Ms(t)}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this),this._matrix=[],this._cellMap.clear()}}]),n}(cO);function jO(t,e,n){var r="";if(t=t.filter((function(t){return!vE(t)})),e===n-1&&t.length>n){for(var i=e;i<t.length-1;i++)r+="".concat(t[i].toString()," / ");return r+t[t.length-1].displayName()}return t[e]?t[e].displayName():""}function LO(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=r.classPrefix,a=r.labelManager,o=r.sanitizeCheckBorder,c=r.textAlign,u=void 0===c?"center":c,s=t.length>0?t.map((function(r,o){return new n({textAlign:u,type:yb,className:"".concat(i,"-grid-headers")},{labelManager:a}).source(jO(e,o,t.length)).config({show:r.config().show})})):[];return o&&EO(s,!0),s}var BO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._matrices={topLeft:[],topRight:[],bottomLeft:[],bottomRight:[]},t}return yg()(n,[{key:"getMatrices",value:function(){return this._matrices}},{key:"generateMatrices",value:function(t){var e=t.leftMatrix,n=t.rightMatrix,r=t.topMatrix,i=t.bottomMatrix,a={},o=this._dependencies,c=o.smartLabel,u=o.cellRegistry,s=u.TextCell,l=u.BlankCell,f=this.config(),h=f.renderer,d=f.classPrefix,p=f.showHeaders,g=f.rowHeaders,v=f.sanitizeCheckBorder,y=function(t){return(new l).config({show:t.config().show})},m=Us(g,0,0),b=!1;m&&(b=m.getMembers().includes(gt));var x={left:LO(e[0],g[0],!p&&"html"!==h||b?l:s,{classPrefix:d,labelManager:c,sanitizeCheckBorder:v,textAlign:"end"}),right:LO(n[0],g[1],p||"html"===h?s:l,{classPrefix:d,labelManager:c,sanitizeCheckBorder:v,textAlign:"end"})},_={left:null!=e[0]?e[0].map(y):[],right:null!=n[0]?n[0].map(y):[]},w=[Bm,zm].map((function(t){return r.map((function(e,n){return n===r.length-1?x[t]:_[t]}))})),k=fg()(w,2),S=k[0],M=k[1];if(a.topLeft=S,a.topRight=M,0===r.length){var E=[Bm,zm].map((function(t){return i.map((function(e,n){return 0===n?x[t]:_[t]}))})),O=fg()(E,2),C=O[0],A=O[1];a.bottomLeft=C,a.bottomRight=A}else{var P=i.map((function(){return null!=e[0]?e[0].map(y):[]})),D=i.map((function(){return null!=n[0]?n[0].map(y):[]}));a.bottomLeft=P,a.bottomRight=D}this._matrices=a}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this),this._matrices={topLeft:[],topRight:[],bottomLeft:[],bottomRight:[]}}}]),n}(cO);function zO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function HO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zO(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var WO=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this,t))._matrices={row:new MO(t),column:new CO(t),geom:new FO(t),headerTitle:new BO(t)},r}return yg()(n,[{key:"context",value:function(){return arguments.length?(this._context=arguments.length<=0?void 0:arguments[0],this):this._context}},{key:"generateMatrices",value:function(t){var e=t.axesInfo,n=t.headers,r=t.dataModelMatrix,i=t.facets,a=t.facetHeaderFormatters,o=e.x,c=e.y,u=n.rowKeys,s=n.columnKeys,l=this.row(),f=this.column(),h=this.config();this.generateRowMatrix({axesInfo:c,config:h.rows,headers:u,facets:i,facetHeaderFormatters:a}),this.generateColumnMatrix({axesInfo:o,config:HO(HO({},h.columns),{},{columnVariables:h.headerTitle.columnHeaders||[]}),headers:s,facets:i,facetHeaderFormatters:a});var d=f._matrices.axes._cells,p=d.bottom,g=d.top,v=l._matrices.axes._cells,y=v.left,m=v.right,b=l.getBorderConfig();this.generateGeomMatrix({facets:i,borderConfig:b,dataModelMatrix:r,config:h.geoms,axes:{x:{bottom:p.map((function(t){return t.source()})),top:g.map((function(t){return t.source()}))},y:{left:y.map((function(t){return t.source()})),right:m.map((function(t){return t.source()}))}}});var x=f.getMergedMatrices(),_=x.topMatrix,w=x.bottomMatrix,k=l.getMergedMatrices(),S=k.leftMatrix,M=k.rightMatrix;this.generateHeaderTitleMatrices({topMatrix:_,leftMatrix:S,rightMatrix:M,bottomMatrix:w,config:h.headerTitle})}},{key:"generateRowMatrix",value:function(t){var e=t.axesInfo,n=t.config,r=t.headers,i=t.facets,a=t.facetHeaderFormatters,o=this._matrices.row;o.config(n),o.generateMatrices({axesInfo:e,headers:r,facets:i,facetHeaderFormatters:a})}},{key:"generateColumnMatrix",value:function(t){var e=t.axesInfo,n=t.config,r=t.headers,i=t.facets,a=t.facetHeaderFormatters,o=this._matrices.column;o.config(n),o.generateMatrices({axesInfo:e,headers:r,facets:i,facetHeaderFormatters:a})}},{key:"generateHeaderTitleMatrices",value:function(t){var e=t.leftMatrix,n=t.rightMatrix,r=t.topMatrix,i=t.bottomMatrix,a=t.config,o=void 0===a?{}:a,c=this.headerTitle();c.config(o),c.generateMatrices({leftMatrix:e,rightMatrix:n,topMatrix:r,bottomMatrix:i})}},{key:"generateGeomMatrix",value:function(t){var e=t.axes,n=t.facets,r=t.borderConfig,i=t.dataModelMatrix,a=t.config,o=void 0===a?{}:a,c=this._matrices.geom;c.config(o),c.generateMatrix({axes:e,facets:n,borderConfig:r,dataModelMatrix:i})}},{key:"getMatrices",value:function(){var t=this._matrices,e=t.row,n=t.column,r=t.geom,i=t.headerTitle,a=e.merge(),o=a.leftMatrix,c=a.rightMatrix,u=n.merge();return{rows:[o,c],columns:[u.topMatrix,u.bottomMatrix],values:r.getMatrix(),headerTitles:i.getMatrices(),priority:{row:e.getPriority(),col:n.getPriority()}}}},{key:"row",value:function(){return this._matrices.row}},{key:"column",value:function(){return this._matrices.column}},{key:"geom",value:function(){return this._matrices.geom}},{key:"headerTitle",value:function(){return this._matrices.headerTitle}},{key:"sortAxisDomainsBasedOnRootData",value:function(t,e){var n=new Map,r=this._matrices,i=r.row,a=r.column;["x","y"].forEach((function(r){e[r].map((function(e,o){var c,u;"x"===r?(c=a._matrices.axes._cells.bottom[o],u=a._matrices.axes._cells.top[o]):(c=i._matrices.axes._cells.left[o],u=i._matrices.axes._cells.right[o]),[c,u].forEach((function(r,i){if(r&&r.source()instanceof Oy){var a=r.source().config().field;if(!n.has(a)){var o=t.getField(a).uniques().reduce((function(t,e,n){return t.set(e,n),t}),new Map);n.set(a,o)}var c=n.get(a);e[i]=e[i].sort((function(t,e){return c.get(t)-c.get(e)}))}}))}))}))}},{key:"setAxisDomains",value:function(){var t,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=this._dependencies.store,a=this._matrices,o=a.row,c=a.column,u=a.geom,s=this.column().config().axes,l=this.row().config().axes,f={x:s.globalConfig.axes.x,y:l.globalConfig.axes.y},h=u.getXYDomains();t=e?iO(h,f):rO(h),r.autoSort.disabled&&this.sortAxisDomainsBasedOnRootData(n,t),i.lockModel(),c._matrices.axes.setDomains(t.x,i),o._matrices.axes.setDomains(t.y,i),i.unlockModel()}},{key:"checkIfExtendDomainNeeded",value:function(){return this._matrices.geom.config().suppliedLayers.find((function(t){return"arc"===t.mark||"point"===t.mark}))}},{key:"checkIfExtendedAxisDomainCachePresent",value:function(){return[].concat(dg()(this.row().getAxes()),dg()(this.column().getAxes())).every((function(t){return t.cachedExtendedDomainDiffs()}))}},{key:"clearExtendedAxisDomainCache",value:function(){[].concat(dg()(this.row().getAxes()),dg()(this.column().getAxes())).forEach((function(t){t.cachedExtendedDomainDiffs(null)}))}},{key:"extendAxisDomainsIfNeeded",value:function(){if(this.checkIfExtendDomainNeeded()){var t,e=this._dependencies.cellRegistry.AxisCell,n=this._matrices,r=n.row,i=n.column,a=this.checkIfExtendedAxisDomainCachePresent();a||(t=this._matrices.geom._matrix.map((function(t){return t.map((function(t){return t.source().calculateExtendDomainDiffs()}))}))),["top","bottom"].forEach((function(n){i._matrices.axes._cells[n].forEach((function(r,i){if(r instanceof e){var o,c=r.source();((o=a?c.cachedExtendedDomainDiffs():Ss(t.map((function(t){return t[i]["".concat(n,"Axis")]}))))[0]||o[1])&&c.extendDomain(o),c.cachedExtendedDomainDiffs(o)}}))})),["left","right"].forEach((function(n){r._matrices.axes._cells[n].forEach((function(r,i){if(r instanceof e){var o,c=r.source();((o=a?c.cachedExtendedDomainDiffs():Ss(t[i].map((function(t){return t["".concat(n,"Axis")]}))))[0]||o[1])&&c.extendDomain(o),c.cachedExtendedDomainDiffs(o)}}))}))}}},{key:"clear",value:function(){Sv()(kg()(n.prototype),"clear",this).call(this),Object.values(this._matrices).forEach((function(t){t.clear()}))}}]),n}(cO);function VO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function UO(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?VO(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var GO,qO=ft.CONTINUOUS,YO=function(){function t(e){gg()(this,t),this._registry={},this._dependencies=e,this._facets={rowFacets:[],colFacets:[]},this._projections={rowProjections:[],colProjections:[]};var n=e.store,r=e.registry,i=e.smartlabel,a=e.throwback,o=e.lifeCycleManager;this._matrix=new WO({store:n,throwback:a,lifeCycleManager:o,cellRegistry:r.componentSubRegistry.cells.get(),smartLabel:i,VisualUnit:r.components.VisualUnit,layerRegistry:r.componentSubRegistry.layers.get(),interactions:r.interactions,DataStore:e.DataStore}),this._axes={radius:[],angle:[],angle0:[],color:[],shape:[],size:[]},this._placeholderInfo=null,this._groupedData=null,qs(this,this.constructor.getterSetters())}return yg()(t,[{key:"units",value:function(){var t=this._matrix.geom(),e=[];return t.forEach((function(t,n,r){!e[n]&&(e[n]=[]),e[n][r]=t.source()})),e}},{key:"context",value:function(t){return t?(this._context=t,this):this._context}},{key:"axes",value:function(){return arguments.length?(this._axes=Object.assign({},this._axes,arguments.length<=0?void 0:arguments[0]),this):this._axes}},{key:"facets",value:function(){var t=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach((function(e){t._facets[e[0]]=e[1]})),this):this._facets}},{key:"projections",value:function(){var t=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach((function(e){t._projections[e[0]]=e[1]})),this):this._projections}},{key:"optionalProjections",value:function(){var t,e={},n=[],r=[Im,Dm,Rm],i=this.context(),a=(t={},rv()(t,Dm,i.color()),rv()(t,Im,i.size()),rv()(t,Rm,i.shape()),rv()(t,Tm,i.detail()),t);r.forEach((function(t){if(a[t]&&a[t].field){var r=a[t];e[t]=r.field,n.push(r.field)}})),a[Tm]&&n.push.apply(n,dg()(a.detail));var o=this.encoder().simpleEncoder,c=this.layerConfig(),u=i.data().getSchema();return n.push.apply(n,dg()(o.getProjectionFields(c,u))),this.projections({optionalProjections:n}),this._optionalProjections=n,e}},{key:"setFacetsAndProjections",value:function(t){var e=t.fields,n=t.type,r=this.encoder().simpleEncoder.getFacetsAndProjections(e,n),i=r.facets,a=r.projections;return this.facets(rv()({},"".concat(n,"Facets"),i)),this.projections(rv()({},"".concat(n,"Projections"),a)),{facets:i,projections:a,fields:e}}},{key:"horizontalAxis",value:function(t){return t?(this._horizontalAxis=this.setFacetsAndProjections({type:Am,fields:t}),this):this._horizontalAxis}},{key:"verticalAxis",value:function(t){return t?(this._verticalAxis=this.setFacetsAndProjections({type:Cm,fields:t}),this):this._verticalAxis}},{key:"getAllFields",value:function(){var t=this.projections();return Object.entries(this.facets()).forEach((function(e){t[e[0]]=e[1]})),t}},{key:"setRetinalAxisDomain",value:function(){var t=this.context(),e=t._encoders.retinalEncoder,n=t.getAllRetinalEncodings(),r={domains:t.matrix().geom().getRetinalFieldsDomain(),axes:this.getRetinalAxes(),encoding:n};return r.axes.size.forEach((function(t){var e=t.config(),n=e.field,i=e.type,a=e.as,o=Us(r.domains,n,a);i===jm&&o&&(r.domains[n][a]=o.sort((function(t,e){return t>e?1:-1})))})),e.setCommonDomain(r),this}},{key:"getRetinalAxes",value:function(){var t=this.axes(),e=t.color,n=t.shape,r=t.size;return{color:dg()(e),shape:dg()(n),size:dg()(r)}}},{key:"createRetinalAxes",value:function(t,e){var n=this.context()._encoders.retinalEncoder.createAxis(t,{config:e,axes:this.axes()});return this.axes(n),this}},{key:"createHeaders",value:function(t){var e=[],n=[],r=t.rows,i=t.columns,a=this.context(),o=this.dependencies(),c=o.smartlabel,u=o.lifeCycleManager,s=a.config(),l=s.showHeaders,f=s.classPrefix,h=s.facet,d=a.registry().componentSubRegistry.cells.get(),p=d.TextCell,g=d.BlankCell,v=fg()(r,2),y=v[0],m=v[1],b=fg()(i,2),x=b[0],_=b[1],w=this.horizontalAxis().fields,k=function(t){return(new g).config({show:t.config().show})},S=DE(h),M={left:PE(y,w[0],l?p:g,{classPrefix:f,labelManager:c,sanitizeCheckBorder:S}),right:PE(m,w[1],l?p:g,{classPrefix:f,labelManager:c,sanitizeCheckBorder:S})},E={left:y.length>0?y[0].map(k):[],right:m.length>0?m[0].map(k):[]},O=[Bm,zm].map((function(t){return x.map((function(e,n){return n===x.length-1?M[t]:E[t]}))})),C=fg()(O,2),A=C[0],P=C[1];if(0===x.length){var D=[Bm,zm].map((function(t){return _.map((function(e,n){return 0===n?M[t]:E[t]}))})),R=fg()(D,2);e=R[0],n=R[1]}else e=_.map((function(){return y.length>0?y[0].map(k):[]})),n=_.map((function(){return m.length>0?m[0].map(k):[]}));return u.notify({client:[A,P,e,n],action:Xm,formalName:eb}),{topLeft:A,topRight:P,bottomLeft:e,bottomRight:n}}},{key:"generateMatrices",value:function(){var t,e=this.getAllFields(),n=this.horizontalAxis().fields,r=this.verticalAxis().fields,i=this.context(),a=i.config(),o=a.sort,c=a.groupBy,u=a.facetsUserConfig,s=e.rowFacets,l=e.colFacets,f=e.colProjections,h=e.rowProjections,d=s.length>0||l.length>0;d&&(a.isFacet=!0);var p=d&&DE(u),g=d?RE(u,i.data()):{},v=i._encoders.simpleEncoder,y=v.serializeLayerConfig(this.context().layers()),m=i.getAllRetinalEncodings(),b=!(y.length>0)||y.some((function(t){return"text"!==t.mark})),x=[].concat(dg()(h.flat()),dg()(f.flat())).some((function(t){return t.as()===qO})),_=[].concat(dg()(h),dg()(f)).some((function(t){return t.length>1})),w=b||x||_?"svg":"html",k=y.flatMap((function(t){var e=t.encoding.detail;return e&&Array.isArray(e.field)?e.field:[]}));(t=e.optionalProjections).push.apply(t,dg()(k));var S=this._groupedData=HE(i.data(),{facetsAndProjections:e,suppliedLayers:y,groupBy:c,globalConfig:a},this);v.data(S);var M=function(t,e){var n=e.colFacets,r=void 0===n?[]:n,i=e.rowFacets,a=void 0===i?[]:i,o=e.optionalProjections,c=void 0===o?[]:o,u=e.colProjections,s=void 0===u?[]:u,l=e.rowProjections,f=void 0===l?[]:l,h={},d={},p=[],g=[],v=t.getData({excludeFields:[ut.ROW_ID]}).schema.map(QE),y=r.flatMap(KE),m=a.flatMap(KE),b=m.concat(y),x=f.map((function(t){return s.map((function(e){return{rowProjections:t,colProjections:e,combinedProjections:[].concat(dg()(t),dg()(e)).flatMap(KE)}}))}));if(0===b.length)return f.length&&s.length?{matrix:x.map((function(e){var n=JE(e,v,c);return t.splitByColumn(n,c).map((function(t,n){return{dataStore:t,rowFacetValues:[],columnFacetValues:[],rowProjections:e[n].rowProjections,columnProjections:e[n].colProjections}}))})),rowKeys:[],columnKeys:[]}:{matrix:[[{dataStore:t,rowProjections:dg()(f.flat()),columnProjections:dg()(s.flat()),columnFacetValues:[],rowFacetValues:[]}]],rowKeys:[],columnKeys:[]};var _=t.splitByRow(b).reduce((function(t,e){var n=XE(e,m,h,p,0),r=XE(e,y,d,g,1);return t.set("".concat(n,"-").concat(r),e)}),new Map);p=zE(p),g=zE(g);var w=$E(p),k=$E(g);if(y.length>0&&0===m.length){var S=k.map((function(e){var n=e.keyArr,r=e.joinedKey,i="-".concat(r);return{facetedDataStore:_.has(i)?_.get(i):t.createEmptyDm(),columnFacetValues:n}}));return{matrix:x.map((function(t){var e=JE(t,v,c);return S.flatMap((function(n){var r=n.columnFacetValues;return n.facetedDataStore.splitByColumn(e,c).map((function(e,n){return{dataStore:e,columnFacetValues:r,rowFacetValues:[],rowProjections:t[n].rowProjections,columnProjections:t[n].colProjections}}))}))})),rowKeys:p,columnKeys:Yu(g)}}if(m.length>0&&0===y.length){var M=w.map((function(e){var n=e.keyArr,r=e.joinedKey,i="".concat(r,"-");return{facetedDataStore:_.has(i)?_.get(i):t.createEmptyDm(),rowFacetValues:n}}));return{matrix:ZE(x.map((function(t){var e=JE(t,v,c);return M.map((function(n){var r=n.rowFacetValues;return n.facetedDataStore.splitByColumn(e,c).map((function(e,n){return{dataStore:e,rowFacetValues:r,columnFacetValues:[],rowProjections:t[n].rowProjections,columnProjections:t[n].colProjections}}))}))}))),rowKeys:p,columnKeys:Yu(g)}}var E=w.map((function(e){var n=e.keyArr,r=e.joinedKey;return k.map((function(e){var i=e.keyArr,a=e.joinedKey,o="".concat(r,"-").concat(a),c=_.has(o)?_.get(o):t.createEmptyDm();return{rowFacetValues:n,facetedDataStore:c,columnFacetValues:i}}))}));return{matrix:ZE(x.map((function(t){var e=JE(t,v,c);return E.map((function(n){return n.flatMap((function(n){var r=n.rowFacetValues,i=n.columnFacetValues;return n.facetedDataStore.splitByColumn(e,c).map((function(e,n){return{dataStore:e,rowFacetValues:r,columnFacetValues:i,rowProjections:t[n].rowProjections,columnProjections:t[n].colProjections}}))}))}))}))),rowKeys:p,columnKeys:Yu(g)}}(S,e),E=M.rowKeys,O=M.columnKeys,C=M.matrix;this.createRetinalAxes(i.data(),UO({},m));var A=a.classPrefix,P=a.showHeaders,D=this._matrix;this.resolveAxisBandwidthConfig(),D.config({rows:UO({renderer:w,sanitizeCheckBorder:p},this.prepareRowMatrixConfig()),columns:UO({renderer:w,sanitizeCheckBorder:p},this.prepareColumnMatrixConfig()),headerTitle:{renderer:w,rowHeaders:n,showHeaders:P,classPrefix:A,columnHeaders:r,sanitizeCheckBorder:p},geoms:{alias:i.alias(),coord:v.constructor.type(),encoder:v,unitConfig:OE(a||{}),retinalAxes:this.getRetinalAxes(),valueParser:this.valueParser(),renderer:w,retinalConfig:m,suppliedLayers:y,sanitizeCheckBorder:p,visualGroupConfig:a,detailFields:i.detail(),dataModelTransform:i.transform(),interactions:i.interactionRegistry()}}),D.generateMatrices({facets:this.facets(),facetHeaderFormatters:g,headers:{rowKeys:E,columnKeys:O},axesInfo:{x:{facetKeys:O,axisFields:f,columnTitle:i.config().axesHeaders.column},y:{facetKeys:E,axisFields:h,rowTitle:i.config().axesHeaders.row}},dataModelMatrix:C}),D.setAxisDomains(a.uniformAxisDomains,S,o),this.setRetinalAxisDomain();var R=EE(n),I=EE(r);return Object.assign(D.getMatrices(),{cellRenderer:w,isRowSizeEqual:R,isColumnSizeEqual:I,priorityMinWidths:{row:R?null:.25},priorityMaxWidths:{row:R?null:1}})}},{key:"arcMarkFound",value:function(){return!!(this.context().layers()||[]).find((function(t){return"arc"===t.mark}))}},{key:"resolveAxisBandwidthConfig",value:function(){var t=this.context().config(),e=this.context().layers()||[],n=this.axes().size,r=0,i=0;if(e.find((function(t){return"arc"===t.mark}))&&(r=Ab),e.find((function(t){return"bar"===t.mark}))){var a=n.filter((function(t){return t.config().field})).map((function(t){return t.range()}));if(a.length){var o=[Math.min.apply(Math,dg()(a.map((function(t){return t[0]})))),Math.max.apply(Math,dg()(a.map((function(t){return t[1]}))))];i=o[1]+o[1]/3}}var c=Math.max(r,i),u=t.axes;c&&[cm,um].forEach((function(t){u[t].bandwidth||(u[t].bandwidth=c)}))}},{key:"prepareRowMatrixConfig",value:function(){var t=this.encoder().simpleEncoder,e=this.context().config(),n=Js(e.rows.facets,e.facets.rows);return{headers:{facet:UO(UO({},qE),t._headerFrom),takeHeaderFrom:t._headerFrom.row,useExternalCSS:e.useExternalCSS,facetConfig:n},axes:{axisFrom:t._axisFrom.row,globalConfig:e},globalBorderConfig:e.border}}},{key:"prepareColumnMatrixConfig",value:function(){var t=this.encoder().simpleEncoder,e=this.context().config(),n=Js(e.columns.facets,e.facets.columns);return{headers:{facet:t._headerFrom,takeHeaderFrom:t._headerFrom.column,useExternalCSS:e.useExternalCSS,facetConfig:n},axes:{axisFrom:t._axisFrom.column,globalConfig:e}}}},{key:"clear",value:function(){this._matrix.clear(),this._groupedData.dispose()}}],[{key:"getterSetters",value:function(){return YE}}]),t}(),XO=function(t,e){var n=t[0]/(t[0]-e[0]),r=t[1]/(t[1]-e[1]),i=!1;return e[0]>0&&e[1]>0&&e[1]>0&&t[1]>0&&(i=!0,e[0]=0,e[1]=0),e[0]<0&&e[1]<0&&e[1]<0&&t[1]<0&&(i=!0,t[0]=0,t[1]=0),i||n===r||(n<r?e[1]=e[0]/t[0]*t[1]:e[0]=e[1]/t[1]*t[0]),[[e[0],t[0]],[e[1],t[1]]]},$O=function(t,e){[Dm,Rm,Im].forEach((function(n){var r=t[n];if(r){var i=r.find((function(t){return t.isGlobal}));e.forEach((function(t){t.encoding=t.encoding||{},!t.encoding[n]&&(t.encoding[n]={}),t.encoding[n].field||i&&(t.encoding[n].field=i.field,t.encoding[n].as=i.as)}))}}))},KO=function(t,e){var n=t.as(),r=e.as(),i=t.subtype(),a=e.subtype();return n===ft.DISCRETE||r===ft.DISCRETE?ub:i===cb&&n===ft.CONTINUOUS||a===cb&&r===ft.CONTINUOUS?sb:lb},QO=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.axisType,i=[],a=UE[r];return n.forEach((function(e){var n=e.field;e.type=e.type?e.type:TE(t,n||null,e.as),e.fieldAs=e.as;var r=new a(e);r.isGlobal&&r.isGlobal(!!e.isGlobal),i.push(r)})),i},ZO=function(t,e){for(var n=0,r=-1;-1===r&&n<t.length;)t[n].toString()===e.toString()&&(r=n),n++;return r},JO=function(t,e,n){return n.filter((function(n){var r,i,a,o=n instanceof Array?n:[n],c=(r=[]).concat.apply(r,dg()(o.map((function(t){return t.encoding})).filter((function(t){return void 0!==t}))));if(!c.length)return!0;var u=(i=[]).concat.apply(i,dg()(c.map((function(t){return[t.x&&t.x.field,t.x0&&t.x0.field]})))).filter((function(t){return null!=t})),s=(a=[]).concat.apply(a,dg()(c.map((function(t){return[t.y&&t.y.field,t.y0&&t.y0.field]})))).filter((function(t){return null!=t}));if(!u.length&&!s.length)return!0;var l=!!u.length&&u.every((function(e){return-1!==t.indexOf(e)})),f=!!s.length&&s.every((function(t){return-1!==e.indexOf(t)}));return u.length&&s.length?l&&f:l||f}))},tC=function(t,e,n){var r=n.rowIndex,i=n.columnIndex,a=n.axesObj,o=t.config,c=t.facetFields,u=t.resolver.axes();[jg.RADIUS,jg.ANGLE,ib].forEach((function(t){var n=u[t];n[r]||(n[r]=[]),n[r][i]=a[t];var s=Us(o.axes,t)||{};a[t].forEach((function(n,a){var o=s;s instanceof Function&&(o=s(r,i,{axisFields:[e[t][a]],facetFields:c})),n.config(o)}))}))},eC=function(t,e,n){return 0!==Object.keys(t.sort).filter((function(t){return"autoSort"!==t})).length?t.sort[e]:n.defaultSort},nC=lt.CARTESIAN,rC=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getFacetsAndProjections",value:function(t,e){for(var n=[],r=[],i=0,a=[],o=[],c=t[0],u=t[1],s=c.length,l=u.length,f=this.axisFrom(),h=0;h<s;h++){var d=[c[h]],p=c[h];if(p.isContinuous()){var g=u[i];g&&g.isContinuous()&&(i++,d=[p,g]),r.push(d)}else n.push(p),a.push(p)}if(l>i)for(var v=i;v<l;v++){var y=u[v],m=[y];y.isContinuous()?r.push(m):(n.push(y),o.push(y))}if((a.length||o.length)&&!r.length)if(f[e=e===Cm?Pm:e]!==Bm&&f[e]!==Hm||!a.length){var b=o[0];r=[[b]];var x=ZO(a,b);x>-1&&(r=[[b,b]],a.splice(x,1)),o.splice(0,1)}else{var _=a.length-1,w=a[_];r=[[w]];var k=ZO(o,w);k>-1&&(r=[[w,w]],o.splice(k,1)),a.splice(_,1)}return{facets:n=(n=[].concat(a,o)).filter((function(t,e,n){return e===n.findIndex((function(e){return e.toString()===t.toString()}))})),projections:r}}},{key:"fieldSanitizer",value:function(t,e){return Sv()(kg()(n.prototype),"fieldSanitizer",this).call(this,t,e)}},{key:"serializeLayerConfig",value:function(t){var e=[];return t.length&&t.forEach((function(t,n){var r=qw.sanitizeLayerConfig(t);r.order=n,e.push(r)})),e}},{key:"setRetinalFieldsInLayers",value:function(t,e){var n=[];return e.forEach((function(e){var r=Cl(e.def);$O(t,r),n.push(e)})),n}},{key:"getLayerConfig",value:function(t,e,n,r){var i=[],a=t.columnFields,o=t.rowFields,c=r.sort;return a.forEach((function(t){if(!vE(t)){var n=t.toString(),r=t.as();o.forEach((function(a){if(!vE(a)){var o,u=a.toString(),s=a.as(),l={x:{field:n,as:r},y:{field:u,as:s}},f=KO(t,a),h=[{mark:f,def:{mark:f,encoding:l,transform:Object.assign({},{sort:c})}}],d=JO(t.getMembers(),a.getMembers(),e||[]);o=d.length?d.map((function(t){var e=Js(Js({},h[0].def),t),n=qw.getSerializedConf(e.mark,e);return{mark:e.mark,order:e.order,def:n}})):h,i.push.apply(i,dg()(o))}}))}})),this.setRetinalFieldsInLayers(n,i.length?i:e.map((function(t){return{mark:t.mark,def:t}})))}}],[{key:"type",value:function(){return nC}}]),n}(VE),iC=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"createAxis",value:function(t,e){var n=e.config,r={};return[Dm,Rm,Im].forEach((function(e){r["".concat(e)]=QO(t,{axisType:e},n[e])})),r}},{key:"setCommonDomain",value:function(t){var e=t.domains,n=t.axes,r=t.encoding;return Object.entries(r).forEach((function(t){var r=fg()(t,2),i=r[0];r[1].forEach((function(t,r){if(t.field){var a=n[i][r],o=Us(e,t.field,t.as);!t.domain&&o&&a.updateDomain(o)}}))})),n}}],[{key:"type",value:function(){return"retinal"}}]),n}(VE),aC=n(21),oC=n.n(aC),cC=function(){function t(){gg()(this,t)}return yg()(t,[{key:"data",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"config",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"measurement",value:function(){throw new Error(Zs.INTERFACE_IMPL)}}]),t}(),uC=function(t){var e=fE.getState(),n=fg()(e,1)[0];t.store().append(o.UNIT_GLOBAL_NAMESPACE,n)},sC=function(t){var e=t.constructor.getState()[0];t.store().append(o.GROUP_GLOBAL_NAMESPACE,e)},lC=function(t){t.store().append(o.LAYER_GLOBAL_NAMESPACE,{})},fC=(GO={alias:{},data:{preset:function(t){t._prevData=null}},cornerMatrices:{defaultValue:{topLeft:[],topRight:[],bottomLeft:[],bottomRight:[]}},metaData:{defaultValue:{border:{}}},resolver:{},valueParser:{defaultValue:function(t){return t}}},rv()(GO,hm,{}),rv()(GO,Mm,{}),rv()(GO,Em,{}),rv()(GO,Dm,{}),rv()(GO,Rm,{}),rv()(GO,Im,{}),rv()(GO,Tm,{}),rv()(GO,Nm,{}),rv()(GO,Fm,{}),GO);function hC(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dC(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hC(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hC(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pC=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r){var i;gg()(this,n),(i=e.call(this))._registry=t,i._dependencies=r,qs(oC()(i),i.constructor.getterSetters()),i.store(r.store),i._encoders={simpleEncoder:i.createEncoderInstance(),retinalEncoder:new iC},i._data=[],i._prevData=null,i._groupedDataModel=[],i._mount=null,i._placeholderInfo={};var a=new YO(dC(dC({registry:t},i._dependencies),{},{store:i.store()}));return a.encoder(i._encoders),a.context(oC()(i)),i.resolver(a),i}return yg()(n,[{key:"store",value:function(){return arguments.length?(this._store=arguments.length<=0?void 0:arguments[0],sC(this),uC(this),lC(this),this):this._store}},{key:"registry",value:function(){return this._registry}},{key:"matrixInstance",value:function(){return arguments.length?this:this.composition().matrices}},{key:"composition",value:function(){return arguments.length?this:this._composition}},{key:"where",value:function(t){return IE(t,this.resolver().getAllFields())}},{key:"getAxes",value:function(t){if(t===Vm)return this.resolver().getRetinalAxes();var e=this.matrix(),n=e.row(),r=e.column();return"x"===t?r.getAxes():"y"===t?n.getAxes():[]}},{key:"getGroupByData",value:function(){return this.resolver()._groupedData}},{key:"placeholderInfo",value:function(){return this._placeholderInfo}},{key:"createMatrices",value:function(){var t=this.layers(),e=this.resolver(),n=this.config();this.store().unsubscribe("unionDomain");var r=this._encoders.simpleEncoder,i=r.sanitizeFields(this.data(),{rows:this.rows(),columns:this.columns()});r.setAxisAndHeaders(n.axisFrom,i),e.layerConfig(t).valueParser(this.valueParser()).horizontalAxis(i.rows).verticalAxis(i.columns).optionalProjections({rows:i.rows,columns:i.columns});var a=e.generateMatrices();this._placeholderInfo=a,this.cornerMatrices(a.headerTitles),this._dependencies.throwback.commit(st.MATRIX_CREATED,!0);var c=e.getAllFields(),u=c.colFacets,s=c.rowFacets,l=c.colProjections,f=c.rowProjections,h=s.length>0||u.length>0,d=l.length>1||f.length>1;return Js(n,function(t,e,n,r){var i={};if(r&&(t||e)){var a=r.facetsUserConfig,o=void 0===a?{}:a,c=r.border,u=o.isBorderPresent,s=void 0===u?{}:u,l=o.isGridLinePresent,f=void 0===l?{}:l,h=Object.keys(f).length,d=c.width,p=c.color,g=c.style,v=c.showValueBorders,y=c.showRowBorders,m=c.showColBorders,b={},x={};0!==Object.keys(s).length&&s.width?Object.assign(x,d?{width:d}:null,p?{color:p}:null,v?{showValueBorders:v}:null,y?{showRowBorders:y}:null,m?{showColBorders:m}:null,g?{style:g}:null):x={width:GE[xb]},h<=0&&(b={x:{show:!1}}),i={border:x,gridLines:b}}else"html"===n&&(i={border:{width:GE[_b]}});return i}(h,d,a.cellRenderer,n)),this.metaData({border:jE(a,r)}),function(t){var e=t.store();e.registerChangeListener(["".concat(o.UNIT_GLOBAL_NAMESPACE,".domain")],(function(){var n=t.config();e.lockModel(),t.matrix().setAxisDomains(n.uniformAxisDomains,t.resolver()._groupedData,n.sort),t.matrix().extendAxisDomainsIfNeeded(),e.unlockModel()}),!1,"unionDomain")}(this),this}},{key:"remove",value:function(){var t=this.placeholderInfo();this.resolver().clear(),t.rows=null,t.columns=null,t.values=null}},{key:"createEncoderInstance",value:function(){var t=this.layers();return NE(t)}},{key:"groupedData",value:function(){return arguments.length?(this._groupedDataModel=arguments.length<=0?void 0:arguments[0],this):this.getGroupByData()}},{key:"resetData",value:function(){var t=this._originalGroupedData;return t&&(this._groupedDataModel=t),this}},{key:"matrix",value:function(){return this.resolver()._matrix}},{key:"extractAllRetinalEncodingsFor",value:function(t){var e,n=this,r=this.layers()||[],i=this[t](),a={},o=Object.keys({color:Ry,shape:Jy,size:$y}[t]),c=Us(this.config(),"legend",t)||{},u=vf(o,c);r.forEach((function(e){var r=(e.encoding||{})[t];if("object"===qk()(r)&&null!==r||(r={field:r}),r.field){var i=r.as||dt(n.data().getField(r.field));a[r.field]=Object.assign({},a[r.field],rv()({},i,!0))}})),i.field&&(e=i.as||dt(this.data().getField(i.field)),a[i.field]=Object.assign({},a[i.field],rv()({},e,!0)));var s=[dC({field:null},u)];return Object.keys(a).forEach((function(t){var n=a[t];[ft.CONTINUOUS,ft.DISCRETE].forEach((function(r){if(n[r]){var a=Us(c,"fields",t)||{},l=Us(a,r)||{},f=Js(dC({},u),Js(vf(o,a),vf(o,l)));s.push(dC({field:t,as:r,isGlobal:t===i.field&&r===e},f))}}))})),s}},{key:"getAllColorEncodings",value:function(){return this.extractAllRetinalEncodingsFor("color")}},{key:"getAllShapeEncodings",value:function(){return this.extractAllRetinalEncodingsFor("shape")}},{key:"getAllSizeEncodings",value:function(){return this.extractAllRetinalEncodingsFor("size")}},{key:"getAllRetinalEncodings",value:function(){return{color:this.getAllColorEncodings(),shape:this.getAllShapeEncodings(),size:this.getAllSizeEncodings()}}},{key:"interactionRegistry",value:function(){return arguments.length?(this._interactionRegistry=arguments.length<=0?void 0:arguments[0],this):this._interactionRegistry}}],[{key:"getState",value:function(){return[{domain:{x:null,y:null,radius:null,angle:null,angle0:null}},{}]}},{key:"formalName",value:function(){return"VisualGroup"}},{key:"getterSetters",value:function(){return fC}}]),n}(cC),gC=(n(48),n(58)),vC=n(59),yC=n.n(vC),mC=n(17),bC=n.n(mC),xC=n(8),_C=n.n(xC);n(29);var wC,kC,SC,MC,EC,OC,CC,AC,PC=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"setSelectionSet",value:function(t,e){if(null===t)e.reset();else if(t.length){var n=this.firebolt.getPropagationInf(),r=fg()(e._exitSet,2),i=r[0],a=r[1],o=t.filter((function(t){return a.has(t)||i.has(t)}));if(n.sourceId)e.reset(),e.add(t);else{if(o.length)e.updateEntrySet(),e.add(o);else if(e.updateExitSet(),e.remove(t),!e.getEntrySetLength()){var c=Tx([e.getCompleteSet()],[].concat(dg()(e.getEntrySet()),dg()(e.getExitSet())));e.add(c)}var u=e.getCompleteSetLength();e.getExitSetLength()!==u&&e.getEntrySetLength()!==u||e.reset()}}else e.remove(e.getCompleteSet());return this}}],[{key:"formalName",value:function(){return"select"}}]),n}(s_),DC=(wC={},rv()(wC,d.DRAG,{target:".".concat("muze","-gradient-rect"),behaviours:[p.BRUSH]}),rv()(wC,d.HOVER,{target:[".".concat("muze","-legend-columns")],behaviours:[p.HIGHLIGHT]}),rv()(wC,d.CLICK,{target:[".".concat("muze","-legend-columns")],behaviours:[p.SELECT]}),wC),RC=(kC={},rv()(kC,p.SELECT,[p.FILTER]),rv()(kC,p.BRUSH,[p.HIGHLIGHT]),rv()(kC,p.HIGHLIGHT,[p.HIGHLIGHT]),kC),IC=(SC={},rv()(SC,"brush",["selectionBox",{name:"highlighter",options:{strategy:"fade"}}]),rv()(SC,"select",[{name:"highlighter",options:{strategy:"fade"}}]),rv()(SC,"highlight",[{name:"highlighter",options:{strategy:"brighten"}}]),SC),TC=(MC={},rv()(MC,"brush",[{name:"highlighter",options:{strategy:"fade"}}]),rv()(MC,"highlight",[{name:"highlighter",options:{strategy:"fade"}}]),rv()(MC,"select",[{name:"filter"}]),MC),NC={circle:6,square:6,default:6},FC={size:"getSize",shape:"getShape",color:"getColor"},jC="horizontal",LC="value",BC=(EC={},rv()(EC,"left","vertical"),rv()(EC,"right","vertical"),rv()(EC,"top",jC),rv()(EC,"bottom",jC),EC),zC=(OC={},rv()(OC,"left","right"),rv()(OC,"right","left"),OC),HC={__default:function(t,e){if(null===t)return Object.assign({},e,{criteria:null});var n=t.getData({excludeFields:[ut.ROW_ID]}),r=n.schema,i=Object.assign({},e);r=n.schema;var a=n.data,o=r.map((function(t){return t.name}));return i.criteria=a.length?{dimensions:[o].concat(dg()(a))}:null,i},brush:function(t,e){var n=e.criteria,r=Object.assign({},e);return r.criteria=n?{range:n.range}:null,r}},WC=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._propagationDms={},t.initializeSideEffects(),t}return yg()(n,[{key:"propagate",value:function(t,e,n){!function(t,e){var n,r=t.context,i=r.metaData(),a=r.constructor.type(),o=r.fieldName(),c=i.getField(o).type(),u={},s=t.actions().behavioural[e],l=s.getSelectionSet(),f=s.getPayload(),h=l.getEntrySet(),d=r.data();if(null===f.criteria||l.resetted())n={identifiers:null};else if("step"===a||"discrete"===a&&"measure"===c){var p=r.data().filter((function(t){return h[0].has(t.id)||h[1].has(t.id)})).map((function(t){return t.range}));n={identifiers:rv()({},o,p),interpolated:!0}}else if("gradient"===a)n={identifiers:f.criteria.range,interpolated:!0};else{var g=h.map((function(t){return dg()(t)})).flat().map((function(t){return bt.isInvalid(t)?null:d[d.findIndex((function(e){return e.rawVal===t}))].rawVal}));n={fields:Object.keys(f.criteria.dimensions),identifiers:g}}u.action=RC[e]||e,u.sideEffects=TC[e],u.sourceCanvas=r.canvasAlias(),u.sourceType="legend",u.propagationSourceId=t.id();var v=Object.assign({},u,{sourceId:t.id(),criteria:n.identifiers,action:u.action,sourceAction:e,interpolated:n.interpolated,fields:[o]});i.propagate(n.identifiers,v,{resolveId:!1,save:"filter"===u.action[0],targetDms:[i.id()]})}(this,t)}},{key:"getAddSetFromCriteria",value:function(t){var e,n,r=this.context.constructor.type(),i=this.context.fieldName(),a=this.data().getField(i).type();if(null===t)return{uids:null,model:null};var o=t.dimensions;if("discrete"===r&&"measure"===a)e=Object.values(o),n=this.context.data().filter((function(t){return-1!==e.indexOf(t.range)})).map((function(t){return t.id}));else if("step"===r)e=Object.values(o),n=this.context.data().filter((function(t){return-1!==e.indexOf(t.range)})).map((function(t){return t.id}));else if("gradient"===r)n=[];else{var c;(e=o)instanceof Array?(e=e.slice(1,e.length),n=dg()(new Set((c=[]).concat.apply(c,dg()(e))))):(e=e[i],n=this.context.data().filter((function(t){return-1!==e.indexOf(t.rawVal)})).map((function(t){return t.rawVal})))}return{uids:n,model:null}}},{key:"onDataModelPropagation",value:function(){var t=this;return function(e,n){if(t._propagationDms[n.sourceAction]&&t._propagationDms[n.sourceAction].dispose(),t._propagationDms[n.sourceAction]=e,t.context.mount()){var r=(HC[n.action]||HC.__default)(e,n),i={propagate:!1,data:e,sourceId:n.propagationSourceId},a=n.sourceId===t.id(),o=r.action[0];a||"highlight"!==o||"legend"===n.sourceType||t.dispatchBehaviour("highlight",r,i)}}}},{key:"data",value:function(){return this.context.metaData()}},{key:"id",value:function(){return"legend-".concat(this.context._id)}},{key:"sourceCanvas",value:function(){return this.context.canvasAlias()}},{key:"shouldApplyHighlightEffect",value:function(t){var e=this.getEntryExitSet("highlight"),n=this.getEntryExitSet("select");if(e&&n){var r,i=e.mergedEnter.uids,a=n.mergedExit.uids;if("highlight"===t&&(r=[]).concat.apply(r,dg()(i)).filter((function(t){var e;return(e=[]).concat.apply(e,dg()(a)).includes(t)})).length)return!1}return!0}}]),n}(Lx),VC=(CC={},rv()(CC,"drag",(function(t){return function(e,n){var r,i={},a={},o=Cp(),c=t.context,u=c.measurement().gradientDimensions,s="horizontal"===c.config().align?"x":"y",l=c.axis().source().scale(),f=l.range()["x"===s?0:1];e.call(o().on("start",(function(){var t=Op();i={x:t.x,y:t.y}})).on("drag",(function(){var e=Op();(a={x:e.x,y:e.y}).x=Math.max(0,Math.min(a.x,u.width)),a.y=Math.max(0,Math.min(a.y,u.height)),r={criteria:{range:rv()({},c.fieldName(),[l.invert(i[s]+2*f),l.invert(a[s]+2*f)].sort((function(t,e){return t-e})))}},n.forEach((function(e){return t.dispatchBehaviour(e,r)}))})).on("end",(function(){var e=Op();(a={x:e.x,y:e.y}).x=Math.max(0,Math.min(a.x,u.width)),a.y=Math.max(0,Math.min(a.y,u.height)),r=i[s]===a[s]?{criteria:null}:{criteria:{range:rv()({},c.fieldName(),[l.invert(i[s]+2*f),l.invert(a[s]+2*f)].sort((function(t,e){return t-e})))}},n.forEach((function(e){return t.dispatchBehaviour(e,r)}))})))}})),rv()(CC,"hover",(function(t){return function(e){var n=function(e){var n=t.context.getCriteriaFromData(e),r={criteria:{dimensions:n},fields:Object.keys(n)};t.triggerPhysicalAction("hover",r)};e.on("mouseover",n).on("mousemove",n).on("mouseout",(function(){t.triggerPhysicalAction("hover",{criteria:null})}))}})),rv()(CC,"click",(function(t){return function(e,n){e.on("click",(function(e){var r=t.context.getCriteriaFromData(e),i={criteria:{dimensions:r},fields:Object.keys(r)};n.forEach((function(e){return t.dispatchBehaviour(e,i)}))}))}})),CC),UC=function(t,e,n){var r=[],i=e.axisScale,a=e.axisType,o=n.startPos,c=n.endPos,u=n.selectionBoxMeasure,s=n.drawingInfMeasure,l=n.offset,f=t[a];return r=o[a]===c[a]?[]:f+u>=s+l?[i.invert(s+l-u),i.invert(s+l)]:f-l<l?[i.invert(2*l),i.invert(u+2*l)]:[i.invert(f),i.invert(f+u)],"x"===a||r.reverse(),r},GC="horizontal",qC="vertical",YC={height:30,width:30,maxWidth:1/0,maxHeight:1/0,padding:2,margin:2,marginHorizontal:3,paddingRight:4,border:1},XC={text:"",orientation:function(t){return"left"===t||"right"===t?"left":"center"}},$C={buffer:(AC={},rv()(AC,GC,10),rv()(AC,qC,10),AC),classPrefix:"muze",borderStyle:"solid",borderColor:"rgba(0,0,0,0)",formatter:{bounds:{lower:"less than",upper:"more than"}},marker:{text:{formatter:function(t){return t}}},item:{text:{orientation:"right",width:10,formatter:function(t,e,n,r){return r.valueParser()(t)}},icon:{className:"legend-icon",height:20,width:20,color:"rgba(192,192,192,0.6)",type:"square"}}},KC=Js({},$C),QC=Js(KC,{item:{text:{formatter:function(t){return"".concat(t[0]," - ").concat(t[1])}}}});n(105);var ZC=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._graphicElems={rect:null},t}return yg()(n,[{key:"apply",value:function(t,e){var n,r,i,a,o=this.firebolt,c=o.context,u=this.config(),s=c.axis().source(),l="".concat(u.classPrefix,"-").concat(u.className),f=e.criteria,h=this._graphicElems.rect;if(null===f)return h&&h.remove(),this;var d=f.range[o.context.fieldName()],p=s.scale(),g=d?[s.getScaleValue(d[0]),s.getScaleValue(d[1])]:[],v=c.config().align===jC?"x":"y",y=o.context.measurement().gradientDimensions["x"===v?"height":"width"],m=p.range()["x"===v?0:1],b=c.getDrawingContext().svgContainer,x=dp(b,"g",[1],"".concat(u.classPrefix,"-selection-box-group"));o.context.config().align===jC?(n=g[0]-m||0,r=12,i=g[1]-g[0]||0,a=y):(n=12,r=g[1]-m||0,a=g[0]-g[1]||0,i=y);var _=dp(x,"rect",[{domain:d,x:n,y:r,width:i,height:a}],l,{enter:function(t){!function(t){return function(e,n){var r,i={},a={},o=Cp(),c=t.context,u=c.axis().source().scale(),s=c.config().align===jC?"x":"y",l={drawingInfMeasure:c.measurement().gradientDimensions["x"===s?"width":"height"],offset:u.range()["x"===s?0:1]},f={};e.call(o().on("start",(function(){var t=Op();i=Sp(this,t.sourceEvent),f=t.subject})).on("drag",(function(){var e=Op(),o=f["x"===s?"width":"height"];f.x+=e.dx,f.y+=e.dy,l.selectionBoxMeasure=o,l.startPos=i,l.endPos=a;var h=UC(f,{axisScale:u,axisType:s},l);r={criteria:{range:rv()({},c.fieldName(),h)},fadeOut:!0},t.dispatchBehaviour(n[0],r)})).on("end",(function(){var e=Op(),o=f["x"===s?"width":"height"];l.selectionBoxMeasure=o,l.startPos=i,l.endPos=a;var h=UC(e,{axisScale:u,axisType:s},l);r={criteria:{range:rv()({},c.fieldName(),h)},fadeOut:!0,config:{transition:{duration:200}}},t.dispatchBehaviour(n[0],r)})))}}(o)(t,["brush"])}});return _.attr("y",r).attr("x",n).attr("width",i).attr("height",a),this._graphicElems.rect=_,this}}],[{key:"formalName",value:function(){return"selectionBox"}},{key:"defaultConfig",value:function(){return{className:"legend-selection-box",classPrefix:"muze"}}},{key:"target",value:function(){return"all"}}]),n}(O_),JC=function(t){var e=t.context,n=function(t,n,r){var i=e.config().classPrefix;hp(e.mount()).selectAll(".".concat(i,"-legend-columns")).filter((function(e){return t.uids.has(e.id)})).selectAll("div").classed(n,r)};return{fade:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.config().classPrefix;t.mergedEnter.length||t.mergedExit.length?(n(t.mergedExit,r.className||"".concat(i,"-legend-brighten"),!1),n(t.mergedExit,r.className||"".concat(i,"-legend-fadeout"),!0),n(t.mergedEnter,r.className||"".concat(i,"-legend-fadeout"),!1)):n(t.completeSet,r.className||"".concat(i,"-legend-fadeout"),!1)},brighten:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.config().classPrefix;t.mergedEnter.length||t.mergedExit.length?(n(t.mergedEnter,r.className||"".concat(i,"-legend-brighten"),!0),n(t.mergedExit,r.className||"".concat(i,"-legend-brighten"),!1)):n(t.completeSet,r.className||"".concat(i,"-legend-brighten"),!1)}}},tA=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._strategies=JC(t.firebolt),t._strategy="brighten",t}return yg()(n,[{key:"apply",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._strategies[n.strategy||this._strategy];r(t,this)}}],[{key:"formalName",value:function(){return"highlighter"}}]),n}(M_);n(106);var eA,nA,rA,iA,aA,oA=3*Math.sqrt(3),cA=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){var t;gg()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i)))._graphicElements={markerElement:null,legendmarkerTextContainer:null,legendmarkerText:null},t}return yg()(n,[{key:"apply",value:function(t,e){var n,r,i=this,a="".concat(this.config().classPrefix,"-").concat(this.config().className);if(e.criteria&&e.targetData&&e.targetData[0].some((function(t){return t===i.firebolt.context.fieldName()}))){var o,c=this.firebolt,u=c.context.labelManager,s=c.context,l=c.context.config(),f=c.context.scale(),h=l.marker.text.formatter,d=this.config(),p=s.axis().source(),g=s.metaData(),v=f.domain(),y=s.fieldName(),m=g.getField(y).schema(),b=m.type,x=m.subtype;if("dimension"===b&&e.target){var _=e.target[0].findIndex((function(t){return t===y}));o=parseFloat(e.target[1][_])}else o=parseFloat(e.criteria.dimensions[1][0]);var w,k,S,M="temporal"===x?new Date(o).getFullYear():+o.toFixed(1),E=p.getScaleValue(M),O=s.getDrawingContext().svgContainer,C={top:0,left:0,labelText:M},A=(n=s._canvasMount,{top:(r=O.node()).getBoundingClientRect().top-n.getBoundingClientRect().top,left:r.getBoundingClientRect().left-n.getBoundingClientRect().left}),P=A.top,D=A.left,R=u().getSmartText(C.labelText),I=R.oriTextHeight,T=R.oriTextWidth,N=d.size,F=d.shape;s.config().align===jC?(w=E-Math.sqrt(N/oA)+1,k=5,S=180,C.top=P+k-30,C.left=w+D-T/2-5):(k=E+Math.sqrt(N/(2*oA))-1,w=5,S=90,C.top=P+k-28+I/2,C.left=w+D-T-10);var j=dp(O,"g",[1],"".concat(d.classPrefix,"-").concat(d.className,"-group"));this._graphicElements.markerElement||(this._graphicElements.markerElement=dp(j,"path",[{value:null}],a)),this._graphicElements.legendmarkerTextContainer||(this._graphicElements.legendmarkerTextContainer=dp(s._canvasMount,"div",[1],"".concat(a,"-text-container")),this._graphicElements.legendmarkerText=dp(this._graphicElements.legendmarkerTextContainer,"div",[1],"".concat(a,"-text")));var L=function(t,e,n){var r=new(0,n.TextCell)({type:"text",className:"".concat(t,"-text")},{labelManager:e()}).config({maxLines:1});return r._minTickDiff={height:0,width:0},r}(a,u,s._cells);this._graphicElements.markerElement.data([{value:e.criteria}]).attr("transform","translate(".concat(w,",").concat(k,") rotate(").concat(S,")")).attr("d",Pl(F).size(N*N)()).classed("".concat(a,"-show"),!0).classed("".concat(a,"-hide"),!1),L.source(h(C.labelText,v,g)),L.render(this._graphicElements.legendmarkerText.node()),this._graphicElements.legendmarkerText.attr("style","top: ".concat(C.top,"px; left:").concat(C.left-10,"px")).classed("".concat(a,"-show"),!0).classed("".concat(a,"-hide"),!1)}else this._graphicElements.markerElement&&this._graphicElements.legendmarkerText&&(this._graphicElements.markerElement.data([{value:null}]).classed("".concat(a,"-show"),!1).classed("".concat(a,"-hide"),!0),this._graphicElements.legendmarkerText.classed("".concat(a,"-show"),!1).classed("".concat(a,"-hide"),!0))}}],[{key:"formalName",value:function(){return"marker"}},{key:"defaultConfig",value:function(){return{className:"legend-marker",classPrefix:"muze",size:8,shape:"triangle"}}}]),n}(M_),uA={config:{sanitization:function(t,e){return Js(t._config||{},e)}},data:{},fieldName:{},legendContainer:{},measurement:{sanitization:function(t,e){var n=Js(t._measurement,e);return["padding","border","margin"].forEach((function(t){n[t]=Math.min(n[t]>0?n[t]:0,.1*n.maxWidth,.1*n.maxHeight)})),n}},logicalSpace:{},metaData:{onset:function(t,e){return t.firebolt().attachPropagationListener(e)}},range:{sanitization:function(t,e){return t.scale().range(e),t.resetLogicalSpace(),t.store().commit("range",e),e}},scale:{},smartTicks:{},store:{},title:{sanitization:function(t,e){return Js(t._title||{},e)}},labelManager:{},minTickDistance:{},valueParser:{defaultValue:function(t){return t}}},sA=function(t){var e=t.constructor.type(),n=t.uniqueValues(),r=t.config();return{scaleType:e,domain:n,steps:r.stops||1,scaleFn:FC[e],as:r.as}},lA=function(t,e,n){var r,i=n.smartLabel,a=n.measures,o=a.maxWidth,c=a.maxHeight,u=n.alignment,s=i.getOriSize(t[1].toFixed(2));return e=(e=Math.round(e))<1?e+1:e,r="top"===u||"bottom"===u?Math.floor(o/s.width):Math.floor(c/s.height),e=Math.min(e,r),sf(t,e)},fA=function(t,e,n){var r=[],i=t.data(),a=t._labelManager;return i.forEach((function(i,o){var c=e?i[e]:i,u=n(c,o,t.metaData(),t),s=a.getOriSize(u),l=s.height,f=s.width;r[o]={height:l,width:f}})),r},hA=function(t,e,n){var r=t.maxItemSpaces,i=t.margin,a=t.itemSpaces,o=n.position,c=n.buffer,u=BC[o],s=0;if(u===jC){var l=c[u];s=a.reduce((function(t,e){return t+e.width+l}),0)}else s=r.width<e?e+2*i:r.width;return s},dA=function(){function t(e){gg()(this,t);var n=e.registry.interactions;this._data=[],this._metaData=[],this._mount=null,this._fieldName=null,this._title=Object.assign({},XC),this._metaData=null,this._labelManager=e.labelManager,this._cells=e.cells,this._id=gs(),this._measurement=Object.assign({},this.constructor.defaultMeasurement()),this._config=Js({},this.constructor.defaultConfig());var r=e.labelManager.getOriSize("w");this._minTickDistance={width:3*r.width/4,height:r.height/2},qs(this,uA),this._computedStyle=Ap(hp("body"),"".concat(this.config().classPrefix,"-legend-item-info")),this._firebolt=new WC(this,{behavioural:Object.assign({},n.behaviours.get(),A),physical:VC,physicalBehaviouralMap:DC},P,IC)}return yg()(t,[{key:"id",value:function(){return this._id}},{key:"firebolt",value:function(){return arguments.length?this:this._firebolt}},{key:"elemType",value:function(){return"path"}},{key:"canvasAlias",value:function(){return arguments.length?(this._canvasAlias=arguments.length<=0?void 0:arguments[0],this):this._canvasAlias}},{key:"mount",value:function(){return arguments.length?(this._mount=arguments.length<=0?void 0:arguments[0],this.render(),this):this._mount}},{key:"getLabelSpaces",value:function(){var t=this.config(),e=t.item,n=t.classPrefix;return this._labelManager.setStyle(Ap(hp("body"),"".concat(n,"-legend-item-info"))),fA(this,LC,e.text.formatter)}},{key:"setLegendMeasures",value:function(){var t=this.measurement(),e=t.width,n=t.height,r=t.maxWidth,i=t.maxHeight,a=t.padding,o=t.margin,c=t.border,u=this.config().align,s=2*a,l=2*c,f=2*o;this.data(this.dataFromScale());var h=this.getTitleSpace(),d=h.height>0?h.height+s:0,p=h.width+s,g=this.getLabelSpaces(s,u),v=function(t,e,n){var r=0,i=0,a={width:0,height:0},o=e.effPadding,c=e.titleWidth,u=e.labelSpaces,s=e.titleHeight,l=e.maxWidth,f=e.maxHeight,h=o,d=t.item,p=t.align,g=d.icon,v=d.text.orientation,y=[],m=[],b=0;return u.forEach((function(t,e){var c={width:0,height:0},u={width:0,height:0},s=n[e]||{};"left"===v||"right"===v?(t.width+=o,u.width=(s.size?2*s.size:g.width)+o,b=Math.max(u.width,b),c.width=t.width+b,t.height=Math.max(t.height,g.height)+o,u.height=t.height,c.height=t.height):(t.width=Math.max(t.width,s.size?2*s.size:g.width)+o,u.width=t.width,c.width=t.width,b=Math.max(u.width,b),t.height+=o,u.height=g.height+o,c.height=t.height+u.height),"horizontal"===p?r=Math.max(r,c.height):(r+=c.height,i=Math.max(i,c.width)),a={width:Math.max(c.width,a.width),height:Math.max(c.height,a.height)},y.push(c),m.push(u)})),y.forEach((function(t,e){if("horizontal"===p)t.height=r,"left"===v||"right"===v?(u[e].height=r,m[e].height=r,y[e].width=u[e].width+m[e].width+2*o):(u[e].width=m[e].width,y[e].width=m[e].width,u[e].width=m[e].width),i+=y[e].width;else if("top"===v||"bottom"===v)u[e].width=i,m[e].width=i,b=i;else{var n=u[e].width,c=a.width-b;m[e].width=b,y[e].width=n+b,u[e].width=Math.max(n,c),i=Math.max(i,t.width)}})),i=Math.ceil(Math.max(i,c))+o+h,r+=s+o+h,"horizontal"===p?i=i>l?l:i:r=r>f?f:r,r=Math.ceil(r),i=Math.ceil(i),{totalHeight:r,totalWidth:i,itemSpaces:y,iconSpaces:m,maxItemSpaces:a,maxIconWidth:b}}(this.config(),{effPadding:s,titleWidth:p,labelSpaces:g,titleHeight:d,maxWidth:.8*r,maxHeight:.8*i},this.data()),y=v.totalHeight,m=v.totalWidth,b=v.itemSpaces,x=v.iconSpaces,_=v.maxItemSpaces,w=v.maxIconWidth;return this.measurement({width:Math.max(m,e)+f+l,height:Math.max(y,n)+f+l,labelSpaces:g,iconSpaces:x,itemSpaces:b,maxItemSpaces:_,maxIconWidth:w,titleSpaces:{width:Math.min(r,this.measurement().width)-f-l,height:d}}),this}},{key:"getTitleSpace",value:function(){return this._labelManager.setStyle(Ap(hp("body"),"".concat(this.config().classPrefix,"-legend-title"))),this._labelManager.getOriSize(this.title().text?this.title().text:"")}},{key:"renderTitle",value:function(t){var e=this.measurement(),n=e.titleSpaces,r=e.border,i=e.padding,a=e.maxWidth,o=hA(this.measurement(),this._labelManager.getOriSize(this._title.text).width,this.config()),c=this.config(),u=c.borderStyle,s=c.borderColor;return function(t,e,n,r){var i=r.item.text.orientation,a="left",o=n.maxWidth,c=n.width,u=n.height,s=n.border,l=n.padding;"top"!==i&&"bottom"!==i&&n.alignment!==jC||(a="center");var f=Math.min(o,c),h=dp(t,"table",[1],"".concat(r.classPrefix,"-legend-title")).style("width","".concat(f,"px")).style("height","".concat(u,"px")).style("border-bottom","".concat(s,"px ").concat(r.borderStyle," ").concat(r.borderColor)).style("text-align",e.orientation instanceof Function?e.orientation(r.position):e.orientation);return dp(h,"td",[1],"".concat(r.classPrefix,"-legend-title-text")).style("width","".concat(f,"px")).style("max-width","".concat(o,"px")).style("height","100%").style("line-height",1).style("padding","".concat(l,"px")).text(e.text).style("text-align",a).style("overflow-x","scroll").node()}(t,this.title(),{height:n.height,width:o,maxWidth:a,border:r,padding:i,borderStyle:u,borderColor:s,alignment:BC[this.config().position]},this.config())}},{key:"render",value:function(){var t,e=this.config(),n=e.classPrefix,r=e.borderStyle,i=e.borderColor,a=e.position,o=this.measurement(),c=o.border,u=o.marginHorizontal,s=o.maxHeight,l=o.height,f=o.width,h=o.maxWidth,d=this.measurement().margin,p=dp(hp(this.mount()),"div",[1],"".concat(n,"-legend-box"));switch(a){case"top":t="margin-".concat("bottom"),d=u;break;case"left":t="margin-".concat("right");break;case"bottom":t="margin-".concat("top"),d=u;break;default:t="margin-".concat("left")}p.classed("".concat(n,"-legend-box-").concat(this._id),!0),p.style("float","left");var g=hA(this.measurement(),this._labelManager.getOriSize(this._title.text).width,this.config()),v=Math.min(h,g);return f<v&&hp(this.mount()).style("width","".concat(v,"px")),p.style("width","".concat(v,"px")).style("height","".concat(Math.min(s,l),"px")).style("".concat(t),"".concat(d,"px")).style("border","".concat(c,"px ").concat(r," ").concat(i)),this.legendContainer(p.node()),this.renderTitle(p),this.firebolt().attachPropagationListener(this.metaData()),p}},{key:"getCriteriaFromData",value:function(t){var e=this.fieldName();return"measure"===this.metaData().getSchema()[0].type?rv()({},e,t.range):rv()({},e,[t.rawVal])}},{key:"getRangeFromIdentifiers",value:function(t){var e=t.fields,n=t.entrySet,r=this.data().reduce((function(t,e){return t[e.id]=e,t}),{});return e.reduce((function(t,e){return t[e]=n.reduce((function(t,e){return e in r&&t.push(r[e].range),t}),[]),t}),{})}},{key:"setParentInfo",value:function(t){this._canvasMount=t.canvasRoot}},{key:"dispose",value:function(){this.firebolt().dispose()}}],[{key:"create",value:function(e){return new t(e)}},{key:"defaultConfig",value:function(){return $C}},{key:"defaultMeasurement",value:function(){return YC}}]),t}(),pA=(eA={},rv()(eA,jC,{datasets:function(t){return{row:[1],column:t}},itemContainerMeasures:function(t,e){var n=t.iconSpaces,r=t.itemSpaces,i=t.labelSpaces,a=e.padding,o=e.buffer,c=e.item.text.orientation,u=e.step,s=r.reduce((function(t,e){return t+e.width+o[jC]}),0).toString().concat("px"),l="top"===c||"bottom"===c?r.reduce((function(t,e,r){var a=Math.max(i[r].width,n[r].width);return Math.max(t,a)}),0):i.reduce((function(t,e,r){var c=i[r].width+a+n[r].width+o[jC];return Math.max(t,c)}),0),f=u?l.toString().concat("px"):function(t,e){return"".concat(r[e].width+a+o[jC],"px")};return{row:{width:s,padding:"".concat(0,"px")},column:{width:f,padding:"".concat(0,"px")}}},getStepSpacesInfo:function(t){var e=t.maxItemSpaces;return{iconHeight:t.height,iconWidth:e.width,stepPadding:{horizontal:!0,vertical:!1}}}}),rv()(eA,"vertical",{datasets:function(t){return{row:t,column:function(t){return[t]}}},itemContainerMeasures:function(t,e){var n=t.iconSpaces,r=t.itemSpaces,i=t.labelSpaces,a=e.padding,o=e.buffer,c=e.item.text.orientation,u="top"===c||"bottom"===c?r.reduce((function(t,e,r){var a=Math.max(i[r].width,n[r].width);return Math.max(t,a)}),0):i.reduce((function(t,e,r){var c=i[r].width+a+n[r].width+o.vertical;return Math.max(t,c)}),0);return{row:{width:"100%",padding:"".concat(a,"px")},column:{width:"".concat(u,"px"),padding:"".concat(0,"px")}}},getStepSpacesInfo:function(t){var e=t.maxItemSpaces,n=t.width;return{iconHeight:e.height,iconWidth:n,stepPadding:{horizontal:!1,vertical:!0}}}}),eA),gA=(nA={},rv()(nA,"left",pA.vertical),rv()(nA,"right",pA.vertical),rv()(nA,"top",pA[jC]),rv()(nA,"bottom",pA[jC]),nA),vA=(rA={},rv()(rA,"left","end"),rv()(rA,"right","start"),rv()(rA,"top","center"),rv()(rA,"bottom","center"),rA),yA=(iA={},rv()(iA,"left",[LC,"shape"]),rv()(iA,"right",["shape",LC]),rv()(iA,"top",[LC,"shape"]),rv()(iA,"bottom",["shape",LC]),iA),mA={circle:function(t){return t*t*Math.PI},square:function(t){return t*t},cross:function(t){return 2*t*(2*t)*5},diamond:function(t){return t},star:function(t){return t*t/.8908130915292852},triangle:function(t){return t},wye:function(t){return t*t*(3*(1/Math.sqrt(12)/2+1))}},bA=function(t,e,n,r){var i,a,o,c,u=t.measurement(),s=u.margin,l=u.border,f=u.titleSpaces,h=u.width,d=u.height,p=u.maxWidth,g=u.maxHeight,v=u.itemSpaces,y=t.config().align;a=d-(f.height+2*s+2*l),i=h-(2*s+2*l),o=g-(f.height+2*s+2*l),c=p-(2*s+2*l);var m=dp(e,"div",[1],"".concat(n,"-legend-body"));m.style("width","".concat(i,"px")),m.style("height","".concat(a,"px")),y===jC&&m.style("margin","auto"),m.select(".".concat(n,"-legend-overflow")).remove(),c&&c<i&&(m=m.style("width","".concat(c,"px")).style("overflow-x","scroll")),o&&o<a&&m.style("height","".concat(o,"px")).style("overflow-y","scroll");var b=t.config(),x=gA[b.position],_=x.datasets(r),w=x.itemContainerMeasures(u,b);return parseInt(w.row.width)>h&&(m=m.style("overflow-y","scroll")),v.reduce((function(t,e){return t+e.height+b.buffer[jC]}),0)>d&&(m=m.style("overflow-x","scroll")),{legendItem:function(t,e,n,r){var i=e.config().classPrefix,a=e.measurement().itemSpaces,o=dp(t,"div",n.row,"".concat(i,"-legend-row"));o.style("height",(function(t,e){return"".concat(a[e].height,"px")})),o.style("width",r.row.width),o.style("padding",r.row.padding),o.style("display","flex");var c=dp(o,"div",n.column,"".concat(i,"-legend-columns"));return c.style("width",r.column.width),c.style("padding",r.column.padding),c}(m=dp(m,"div",[1],"".concat(n,"-legend-overflow")).style("padding","2px"),t,_,w)}},xA=function(t,e){var n=t.config(),r=n.classPrefix,i=n.item.text.orientation,a=yA[i],o=dp(e,"div",(function(e,n){return a.map((function(r){return[r,e[r],e.color,e.size,e.value,t.fieldName(),n]}))}),"".concat(r,"-legend-item-info")),c=vA[i];return o.classed(c,!0),{itemSkeleton:o}},_A=function(t,e,n,r){var i=r.measurement(),a=i.padding,o=i.labelSpaces,c=i.iconSpaces,u=i.maxIconWidth,s=r.config().align.align,l=n?2*-a:0;return t[0]===LC?"".concat(o[t[6]][e],"px"):"".concat("width"!==e||n||"vertical"!==s?s===jC?u:c[t[6]][e]-l:u,"px")},wA=function(t,e,n,r){var i=r.classPrefix,a=r.iconHeight,o=r.padding,c=r.color,u=r.iconWidth,s=r.align,l=r.maxIconWidth;s===jC&&(l=u+2*o);var f=dp(e,"svg",(function(t){return[t]}),"".concat(i,"-legend-icon-svg")).attr("width",l).attr("height",a).style("width","".concat(Math.ceil(l),"px")).style("height","".concat(a,"px")),h=l/2-o;"rect"!==t?function t(e,n,r){var i,a=n,o=e[1]||r,c=NC[o]||NC.default,u=e[3]||c;if(o instanceof Promise)o.then((function(r){return e.shape=r,t(e,n)}));else{if(o instanceof Element){var s=o.cloneNode(!0);if("img"===s.nodeName.toLowerCase()){var l=s.src||s.href;(s=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("href",l)}return hp(s).attr("transform","scale(".concat(u/100,")")),hp(a.node().appendChild(s))}if("string"==typeof o){var f;if(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(i=o)&&/[\dz]$/i.test(i)&&i.length>4)f=o;else{var h=o?mA[o](u):u;f=function(t){return t&&"string"==typeof t?Pl(t):t}(o).size(h)()}return dp(a,"path",(function(t){return[t]})).attr("d",f)}}return e[1]="circle",t(e,n,"circle")}(n,dp(f,"g",[n[1]],"".concat(i,"-legend-icon")),t).attr("transform","translate(".concat(h," ").concat(a/2,")")).attr("fill",n[2]||c).attr("stroke",n[2]||c):dp(f,"rect",[n[1]],"".concat(i,"-legend-icon")).attr("x",0).attr("y",0).attr("width",l).attr("height",a).attr("fill",n[2]||c)},kA=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"dataFromScale",value:function(){var t=this.config(),e=bt.FieldType.MEASURE,n=bt.FieldSubtype.TEMPORAL,r=this.scale(),i=sA(r),a=i.scaleType,o=i.domain,c=i.scaleFn,u=i.steps,s=i.as,l=this.metaData().getField(this.fieldName()),f=l.schema(),h=f.type,d=f.subtype,p=[],g=(p=s===ft.DISCRETE?dg()(new Set(o)):"size"===a&&h===e?u instanceof Array?u:sf(o,o.length):d===n?dg()(new Set(l.data())):dg()(new Set(o))).length;if(p=p.map((function(t,i){var o,u=0,s=0,f=p[i];if(h===e){u=parseFloat(p[i],10);var v=parseInt(p[i+1]?p[i+1]:p[i],10);s=[Math.floor(u),i===g-1?v:v-1],Number.isInteger(u)||(u=new Number(u).toFixed(2))}else{var y=bt.getActualValue(f);d===n&&(y=Vl(p[i],l.minimumConsecutiveDifference())),u=y,s=[y]}return o={},rv()(o,a,r[c](t)),rv()(o,"value",u),rv()(o,"id",f),rv()(o,"range",s),rv()(o,"rawVal",f),o})).filter((function(t){return null!==t.value})),"size"===a)p=p.sort((function(t,e){return t[a]-e[a]}));else if(!t.sort.autoSort.disabled){var v,y=t.sort[this.fieldName()]||"asc";v="function"==typeof y?y:"asc"===y?"continuous"===d?function(t,e){return Kl(t.value,e.value)}:function(t,e){return $l(t.value,e.value)}:"continuous"===d?function(t,e){return Kl(e.value,t.value)}:function(t,e){return $l(e.value,t.value)},p=p.sort(v)}return p}},{key:"render",value:function(){var t=this.firebolt(),e=this.data(),r=this.config().classPrefix,i=Sv()(kg()(n.prototype),"render",this).call(this,this.mount()),a=bA(this,i,r,e).legendItem;return function(t,e){var n=t._labelManager,r=t.config(),i=r.item,a=r.classPrefix,o=r.shape,c=r.align,u=t.measurement(),s=u.maxIconWidth,l=u.padding,f=u.margin,h=u.border,d=i.icon,p=d.width,g=d.height,v=d.color,y=d.className,m=i.text.orientation,b=i.text.formatter;n.useEllipsesOnOverflow(!0),pp(e,{width:function(e){return _A(e,"width",!1,t)},height:function(e){return _A(e,"height",!1,t)},"text-align":"center",padding:"".concat(l,"px")});var x="top"!==m&&"bottom"!==m&&l&&f&&h?10:0;n.setStyle(t._computedStyle);var _=t.metaData(),w=zC[m]||"left";e.each((function(e,n){e[0]===LC?hp(this).text(b(e[1],n,_,t)).style("padding-".concat(w),"0px").style("margin-".concat(w),"".concat(c===jC?2:x,"px")):(hp(this).classed("".concat(a,"-").concat(y),!0),hp(this).classed("".concat(a,"-").concat(y,"-").concat(n),!0),wA(o,hp(this),e,{classPrefix:a,iconWidth:2*e[3]||p,iconHeight:g,maxIconWidth:s,padding:l,color:v,align:c}))}))}(this,xA(this,a).itemSkeleton),i.selectAll("div").filter((function(t,e,n){return!n[e].classList.contains("".concat(r,"-legend-body"))})).style("float","left"),t.mapActionsAndBehaviour(),t.createSelectionSet({keys:this.data().map((function(t){return t.rawVal}))}),i}}],[{key:"create",value:function(t){return new n(t)}},{key:"type",value:function(){return"discrete"}}]),n}(dA),SA=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r){return gg()(this,n),e.call(this,t,r)}return yg()(n,[{key:"getTickValues",value:function(){var t=this.config().orientation,e=this.renderConfig().tickValues||this.scale().ticks(),n=this.range(),r=this.axis(),i=Math.abs(n[0]-n[1]),a=this.axisComponentDimensions().largestTickDimensions;return e||function(t,e,n,r){var i=0,a=[],o=r.config().numberOfTicks,c=n.scale().ticks().length,u=r._minTickDistance.width;return i=c,c*(e+u)>t&&(i=Math.floor(t/(e+u))),o=o||i,i=Math.min(o,Math.max(2,i)),(a=n.scale().ticks(i)).length>i&&(a=a.filter((function(t,e){return 0===t||e%2==0}))),2===i&&(a=[(a=n.scale().ticks(10))[0],a[a.length-1]]),a}(i,a[t===iv||t===av?"width":"height"],r,this)}},{key:"getMinTickDifference",value:function(){var t=this.getTickValues();return zl(t)}},{key:"getLogicalSpace",value:function(){var t,e,n,r,i,a,o,c;return this.logicalSpace()||this.logicalSpace(function(t){var e=t.range(),n=t.getAxisDimensions(),r=t.config().orientation,i=t.renderConfig(),a=i.show,o=i.showAxisName,c=n.axisNameDimensions;if(!1===a)return{width:0,height:0};var u=c.width;if(r===av||r===iv){var s=function(t,e,n){var r,i,a=t.domain(),o=t._minTickDistance.width,c=e.tickSize,u=e.tickDimensions,s=e.axisNameDimensions,l=t.config().axisNamePadding,f=t.getTickValues(),h=t.renderConfig().showAxisName,d=s.height,p=u.height,g=u.width;if(r=n&&n.length?n[1]-n[0]:3*(g+o),i=0,f){var v=t.getMinTickDifference(),y=[Math.min.apply(Math,dg()(f).concat(dg()(a))),Math.max.apply(Math,dg()(f).concat(dg()(a)))];r=(y[1]-y[0])/Math.abs(v)*(g+t._minTickDistance.width)}return i=n&&n.length?p:Math.max(g,p),{width:r,height:i+=(h?d+l:0)+c}}(t,n,e),l=s.width,f=s.height;return{width:Math.max(l,u),height:f}}var h=function(t,e){var n,r,i=t.domain(),a=e.tickSize,o=e.tickDimensions,c=e.axisNameDimensions,u=t.config().axisNamePadding,s=t.getTickValues(),l=t.renderConfig().showAxisName,f=c.height,h=o.height;if(n=0,r=o.width,s){var d=t.getMinTickDifference(),p=[Math.min.apply(Math,dg()(s).concat(dg()(i))),Math.max.apply(Math,dg()(s).concat(dg()(i)))];n=(p[1]-p[0])/Math.abs(d)*h}return{height:n,width:r+=(l?f+8:0)+a+(s?u:0)}}(t,n),d=h.width,p=h.height;return{width:d,height:Math.max(p,o?u:0)}}(this)),e=0,n=0,r=(t=this).logicalSpace(),a=(i=t.config()).orientation,o=i.xOffset,c=i.yOffset,a===ov&&(e=void 0===o?r.width:o),a===av&&(n=void 0===c?r.height:c),t.renderConfig({xOffset:e,yOffset:n}),this.logicalSpace()}}]),n}(Ey),MA=function(t){return"number"==typeof t[0].value?t.reduce((function(t,e){return[Math.min(e.value,t[0]),Math.max(e.value,t[1])]}),[Number.MAX_VALUE,Number.MIN_VALUE]):t.map((function(t){return t.value}))},EA=function(t,e,n,r){var i=t.axis();i.source().config({tickFormat:function(e,n){return t.config().item.text.formatter(e,n,t.metaData(),t)}}),i.setAvailableSpace(r,n),i.render(e.node()),i.source().render()},OA=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"axis",value:function(){return arguments.length?(this._axis=arguments.length<=0?void 0:arguments[0],this):this._axis}},{key:"dataFromScale",value:function(){var t=[],e=this.scale(),n=this.metaData().getField(this.fieldName()).schema().subtype,r=sA(e),i=r.scaleType,a=r.domain,o=r.steps,c=r.scaleFn,u={smartLabel:this.labelManager(),measures:this.measurement(),alignment:this.config().position,minTickDistance:this.minTickDistance()};o instanceof Array?(a[0]<o[0]&&(t[0]=a[0]),t=[].concat(dg()(t),dg()(o)),a[a.length-1]>o[o.length-1]&&t.push(a[1]),t=function(t,e){var n,r,i=t[t.length-1],a=Math.ceil(t[1]-t[0]),o=Math.ceil(i-t[0]),c=e.alignment,u=e.smartLabel,s=e.measures,l=e.minTickDistance,f=u.getOriSize(i),h=f.height,d=f.width;return Number.isInteger(i)||(i=i.toFixed(2)),a=a<1?1:a,n=Math.abs(o)/Math.abs(a)*(d+l.width),n-=Math.abs(o),r=Math.abs(o)/Math.abs(a)*h,function(t,e,n,r){var i,a,o=r[r.length-1],c=t.measureParam,u=t.smartLabelCalc,s=n[c]/o;if(n[c]>=e[c])return r;i=u.getOriSize(r[0])[c];for(var l=1;l<r.length-1;l++)a=Math.floor(i/s+r[l-1]),r[l]<a&&(r.splice(l,1),l-=1),i=u.getOriSize(r[l])[c];return r}({smartLabelCalc:u,measureParam:"top"===c||"bottom"===c?"width":"height"},{height:r-=Math.abs(o),width:n},{height:s.maxHeight,width:s.maxWidth},t)}(t=dg()(new Set(t)).sort((function(t,e){return t-e})),u)):t=lA(a,o-1,u);var s=new Set;return t=t.map((function(r,a){var o,u=t[a];return o={},rv()(o,i,"size"===i?e[c](r)*e.getScaleFactor():e[c](r)),rv()(o,"value","temporal"===n?new Date(u).getFullYear():+u.toFixed(1)),rv()(o,"id",a),o})).filter((function(t){return null!==t.value&&!s.has(t.value)&&(s.add(t.value),!0)})).sort((function(t,e){return t.value-e.value}))}},{key:"getLabelSpaces",value:function(t){this.config({item:{text:{orientation:this.config().position}}});var e,n,r,i,a,o=(n=(e=this).data(),r=e.config().align,i=e._cells.AxisCell,(a=new SA({id:"legend-".concat(e._id),orientation:r===qC?"right":"bottom",style:e._computedStyle,nice:!0,showAxisName:!1,fixedBaseline:!1,labels:{rotation:null}},{labelManager:e._labelManager})).domain(MA(n)),a.range([1,1]),(new i).source(a).config({margin:{left:0,bottom:0,top:0,right:0}})),c=o.getLogicalSpace(),u={width:c.width-t,height:c.height-t},s=o.source().domain().length,l=new Array(s).fill(u);return this.axis(o),l}},{key:"getDrawingContext",value:function(){return{svgContainer:this._legendGradientSvg}}},{key:"render",value:function(){var t=this.config(),e=t.align,r=t.classPrefix,i=this.firebolt(),a=Sv()(kg()(n.prototype),"render",this).call(this,this.mount());return function(t,e){var n,r,i=t.config(),a=i.align,o=i.classPrefix,c=i.item,u=function(t,e,n,r){var i=MA(n),a=dp(t,"div",[1],"".concat(e,"-legend-body")),o=dp(a,"svg",[1],"".concat(e,"-gradient")),c=dp(o,"g",[1],"".concat(e,"-gradient-group"));return{legendContainer:a,legendGradCont:c,legendGradSvg:o,linearGradient:function(t,e,n,r){var i=dp(t,"defs",[1]),a=dp(i,"linearGradient",[1]).attr("id","linear-gradient-".concat(r)).attr("x1","0%").attr("y2","0%");return dp(a,"stop",e,"stop-gradient").attr("offset",(function(t){return"".concat(100*(t.value-n[0])/(n[1]-n[0])||1,"%")})).attr("stop-color",(function(t){return t.color})),a}(o,n,i,r),legendRect:dp(c,"rect",[1],"".concat(e,"-gradient-rect"))}}(e,o,t.data(),t._id),s=u.legendContainer,l=u.legendGradSvg,f=u.legendGradCont,h=u.linearGradient,d=u.legendRect,p=t.axis().source().getAxisDimensions().tickDimensions,g=t.measurement(),v=g.padding,y=g.margin,m=g.border,b=g.titleSpaces,x=g.maxItemSpaces,_=g.maxHeight,w=g.maxWidth,k=g.height,S=g.width,M={};n=Math.floor(Math.min(k,_)-(b.height+2*y+2*m)),r=Math.floor(Math.min(S,w)-(2*y+2*m));var E=12;a===GC?(M.height=c.icon.height,M.width=r-2*v-p.width/2,h.attr("x2","100%").attr("y1","0%"),f.attr("transform","translate( ".concat(p.width/2," ").concat(E,")")),EA(t,s,n-c.icon.height-v,r-2*v-1),pp(s,{height:"".concat(x.height+m+v,"px"),width:"".concat(Math.min(S,w),"px"),padding:"".concat(v,"px"),margin:"auto"}),d.attr("height",M.height),d.attr("width",M.width-p.width/2)):(M.height=n-2*v-p.height/2,M.width=c.icon.width,h.attr("x2","0%").attr("y1","100%"),f.attr("transform","translate(".concat(E," ").concat(p.height/2,")")),EA(t,s,n-2*v-1,r-(M.width+E)-2*v),pp(s,{height:"".concat(Math.min(k,_),"px"),width:"".concat(Math.min(S,w),"px"),padding:"".concat(v,"px")}),d.attr("height",M.height-p.height/2),d.attr("width",M.width)),pp(l,{height:"".concat(M.height+E,"px"),width:"".concat(M.width+E,"px")}),pp(d,{fill:"url(#linear-gradient-".concat(t._id,")")}),l.attr("height",M.height+E),l.attr("width",M.width+E),t.measurement({gradientDimensions:M}),t._legendGradientSvg=l}(this,a),a.selectAll("div").style("float","left"),e===jC&&a.selectAll(".".concat(r,"-legend-body")).style("float","none"),i.mapActionsAndBehaviour(),i.mapSideEffects(rv()({},"highlight",["marker"])),i.createSelectionSet({keys:this.data().map((function(t){return t.id}))}),a}},{key:"getCriteriaFromData",value:function(t){return[[this.fieldName()],[t.value]]}},{key:"getRangeFromIdentifiers",value:function(t){var e=t.fields,n=t.criteria;return e.reduce((function(t,e){return t[e]=n[e],t}),{})}}],[{key:"create",value:function(t){return new n(t)}},{key:"type",value:function(){return"gradient"}}]),n}(dA),CA=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"dataFromScale",value:function(){var t=[],e=this.scale(),n=sA(e),r=n.scaleType,i=n.domain,a=n.steps,o=n.scaleFn,c=function(t){return t%1!=0},u={smartLabel:this.labelManager(),measures:this.measurement(),alignment:this.config().position,minTickDistance:this.minTickDistance()};return a instanceof Array?(i[0]<a[0]&&(t[0]=i[0]),t=[].concat(dg()(t),dg()(a)),i[i.length-1]>a[a.length-1]&&t.push(i[1]),t=dg()(new Set(t)).sort((function(t,e){return t-e}))):t=lA(i,a,u),t=(t=dg()(new Set(t)).sort((function(t,e){return t-e}))).map((function(n,i){var a,u,s=null;if(i<t.length-1){var l=c(n)?n.toFixed(1):n,f=+t[i+1],h=c(f)?f.toFixed(1):f;s="".concat(l," - ").concat(h),u=[l,h]}else if(1===t.length){s=c(n)?n.toFixed(1):n;var d=+t[i+1];u=[s,c(d)?d.toFixed(1):d]}return a={},rv()(a,r,"size"===r?e[o](n)*e.getScaleFactor():e[o](n)),rv()(a,"value",s),rv()(a,"id",i+1),rv()(a,"range",u),a})).filter((function(t){return null!==t.value}))}},{key:"getLabelSpaces",value:function(){this.config({item:{text:{orientation:this.config().position}}});var t=this.config().item;return fA(this,"range",t.text.formatter)}},{key:"elemType",value:function(){return"rect"}},{key:"render",value:function(){var t=this.firebolt(),e=this.config(),r=e.classPrefix,i=e.position,a=e.align,o=function(t){var e;return e={},rv()(e,"left",t.reverse()),rv()(e,"right",t.reverse()),rv()(e,"top",t),rv()(e,"bottom",t),e}(this.data())[i],c=Sv()(kg()(n.prototype),"render",this).call(this,this.mount()),u=bA(this,c,r,o).legendItem;return function(t,e){var n=t._labelManager,r=t.config(),i=r.item,a=r.position,o=r.classPrefix,c=r.align,u=t.measurement(),s=u.maxItemSpaces,l=u.maxIconWidth,f=u.padding,h=i.icon,d=h.width,p=h.height,g=h.color,v=i.text.formatter;n.useEllipsesOnOverflow(!0);var y=gA[a].getStepSpacesInfo({maxItemSpaces:s,height:p,width:d}),m=y.iconHeight,b=y.iconWidth,x=y.stepPadding;pp(e,{width:function(e){return _A(e,"width",x.horizontal,t)},height:function(e){return _A(e,"height",x.vertical,t)},"text-align":"center",padding:c===jC?"0px":"".concat(f,"px")}),n.setStyle(t._computedStyle);var _=t.metaData(),w=t.data();e.each((function(e,n){if(c===jC&&hp(this).style("width","".concat(l,"px")),e[0]===LC){var r=v([w[e[6]].range[0],w[e[6]].range[1]],n,_,t);hp(this).text(r)}else wA("rect",hp(this),e,{classPrefix:o,iconWidth:b,iconHeight:m,maxIconWidth:l,color:g})}))}(this,xA(this,u).itemSkeleton),c.selectAll("div").style("float","left"),a===jC&&c.selectAll(".".concat(r,"-legend-body")).style("float","none"),t.mapActionsAndBehaviour(),t.createSelectionSet({keys:this.data().map((function(t){return t.id}))}),c}},{key:"getCriteriaFromData",value:function(t){var e=this.fieldName();return rv()({},e,t.range)}}],[{key:"create",value:function(t){return new n(t)}},{key:"type",value:function(){return"step"}},{key:"defaultConfig",value:function(){return QC.buffer[jC]=0,QC}}]),n}(dA),AA="rows",PA="columns",DA="padding",RA="border",IA="margin",TA="title",NA=["script","style"],FA={true:"circle",false:"square"},jA=(aA={},_C()(aA,"".concat("ordinal","-",!0,"-").concat("color"),kA),_C()(aA,"".concat("ordinal","-",!0,"-").concat("size"),kA),_C()(aA,"".concat("ordinal","-",!0,"-").concat("shape"),kA),_C()(aA,"".concat("ordinal","-",!1,"-").concat("color"),kA),_C()(aA,"".concat("ordinal","-",!1,"-").concat("shape"),kA),_C()(aA,"".concat("ordinal","-",!1,"-").concat("size"),kA),_C()(aA,"".concat("linear","-",!1,"-").concat("size"),kA),_C()(aA,"".concat("linear","-",!0,"-").concat("size"),kA),_C()(aA,"".concat("linear","-",!1,"-").concat("shape"),kA),_C()(aA,"".concat("linear","-",!0,"-").concat("color"),CA),_C()(aA,"".concat("linear","-",!1,"-").concat("color"),OA),aA),LA="left",BA="right",zA="bottom",HA="top",WA="grid";function VA(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var UA=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return yC()(dE,bC()(e.map((function(t){return new pE(t)}))))};function GA(t){if(t.nodeType===Node.ELEMENT_NODE)if(-1!==NA.indexOf(t.tagName.toLowerCase()))t.parentNode.removeChild(t);else{var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return VA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VA(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(t.childNodes);try{for(n.s();!(e=n.n()).done;)GA(e.value)}catch(t){n.e(t)}finally{n.f()}}}function qA(t){for(var e="",n=arguments.length<=1?0:arguments.length-1,r=0;r<n;++r)e+=t[r]+(r+1<1||arguments.length<=r+1?void 0:arguments[r+1]);e+=t[r];var i=document.createDocumentFragment(),a=document.createElement("div");i.appendChild(a),a.innerHTML=e,GA(a);var o=a.innerHTML;return function(){return o}}var YA,XA=n(12),$A=n.n(XA),KA=n(13),QA=n.n(KA);function ZA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function JA(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ZA(Object(n),!0).forEach((function(e){_C()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tP,eP=(YA={},_C()(YA,p.BRUSH,[{name:"selectionBox"},{name:"highlighter",options:{strategy:"fadeOnBrush",setTransform:function(t,e,n){return null===e.criteria||e.sourceLayer===n.firebolt.id()?t:null}}},{name:"highlighter",options:{strategy:"brushHighlight"}},{name:"brush-line-anchors"},{name:"brush-area-anchors"}]),_C()(YA,p.HIGHLIGHT,[{name:"tooltip",options:{contents:[{name:"highlightSummary",setTransform:function(t,e,n){return Us(n.firebolt.getPayload("brush"),"dragging")?null:t}},{name:"selectionSummary",setTransform:function(t,e,n){if(Us(n.firebolt.getPayload("brush"),"dragging"))return null;var r=n.firebolt.getEntryExitSet(p.SELECT),i=n.firebolt.getEntryExitSet(p.BRUSH);if(r||i){var a=new Set,o=null;if(Us(r,"mergedEnter","length")?(a=r.mergedEnter.uids,o=r):Us(i,"mergedEnter","length")&&(a=i.mergedEnter.uids,o=i),uf(e.uids,a))return o}return null}}]}},{name:v.AXIS_LABEL_HIGHLIGHTER,options:{setTransform:function(t,e,n){return Us(n.firebolt.getPayload("brush"),"dragging")?null:t}}},"crossline",{name:"highlighter",options:{strategy:"highlight"}},{name:"line-anchors"},{name:"area-anchors"}]),_C()(YA,p.SELECT,[{name:"tooltip",options:{contents:[{name:"selectionSummary"}]}},{name:"highlighter",options:{strategy:"focus"}},{name:"persistent-line-anchors"},{name:"persistent-area-anchors"},{name:"highlighter",options:{strategy:"selectionHighlight",setTransform:function(t,e,n){return n.firebolt.getMatchingEntryExitSet(e)}}}]),_C()(YA,"filter",[{name:"filter"}]),YA),nP=function(t){var e=t.map((function(t){return t.alias()}));return{behaviours:{"*":function(t){return!t.canvasId||-1!==e.indexOf(t.canvasId)}},sideEffects:{"*":function(t){return!t.canvasId||-1!==e.indexOf(t.canvasId)}}}},rP=function(t){var e={};for(var n in t){var r=t[n];e[r.formalName()]=r}return e},iP=new(function(){function t(){$A()(this,t),this._registrableComponents=[],this._registry={behaviours:cf(JA(JA({},rP(g)),_C()({},BS.formalName(),BS))),physicalActions:cf(p_),sideEffects:cf(rP(y)),behaviourEffectMap:cf(eP),physicalBehaviouralMap:cf(KM)}}return QA()(t,[{key:"for",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._registrableComponents=e,this}},{key:"registerPhysicalActions",value:function(t){return this._registry.physicalActions.register(t),this}},{key:"registerBehaviouralActions",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._registry.behaviours.register(rP(e)),this}},{key:"registerPhysicalBehaviouralMap",value:function(t){return this._registrableComponents.forEach((function(e){return e.firebolt().registerPhysicalBehaviouralMap(t)})),this}},{key:"registerPropagationBehaviourMap",value:function(t){return this._registrableComponents.forEach((function(e){return e.firebolt().registerPropagationBehaviourMap(t)})),this}},{key:"mapSideEffects",value:function(t){return this._registrableComponents.forEach((function(e){return e.firebolt().mapSideEffects(t)})),this}},{key:"registry",value:function(){return this._registry}},{key:"registerSideEffects",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._registry.sideEffects.register(rP(e)),this}},{key:"dissociateBehaviour",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._registrableComponents.forEach((function(t){var n;return(n=t.firebolt()).dissociateBehaviour.apply(n,e)})),this}},{key:"dissociateSideEffect",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._registrableComponents.forEach((function(t){var n;return(n=t.firebolt()).dissociateSideEffect.apply(n,e)})),this}},{key:"enableCrossInteractivity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this._registrableComponents,n=Js(Js({},nP(e)),t);return e.forEach((function(t){t.firebolt().interactionPolicy(n)})),this}}]),t}()),aP=n(14),oP=n.n(aP),cP=n(15),uP=n.n(cP),sP=n(10),lP=n.n(sP),fP=function(){function t(e,n,r){gg()(this,t),this._seed=r,this._boundBox={height:n.height,width:n.width,top:null,left:null},this._renderAt=null,this._alignWith=null,this._alignment=null,this._target=null,this._position=null,this._componentName=e,this._className=null}return yg()(t,[{key:"getLogicalSpace",value:function(){throw new Error("getLogicalSpace is not defined")}},{key:"setSpatialConfig",value:function(){throw new Error("setSpatialSpace is not defined")}},{key:"name",value:function(t){return t&&(this._componentName=t),this._componentName}},{key:"target",value:function(t){return t&&(this._target=t),this._target}},{key:"position",value:function(t){return t&&(this._position=t),this._position}},{key:"alignment",value:function(t){return t&&(this._alignment=t),this._alignment}},{key:"alignWith",value:function(t){return t&&(this._alignWith=t),this._alignWith}},{key:"renderAt",value:function(t){return t&&(this._renderAt=t),this._renderAt}},{key:"boundBox",value:function(t){return t&&Object.assign(this._boundBox,t),this._boundBox}},{key:"className",value:function(t){return t&&(this._className=t),this._className}},{key:"draw",value:function(){throw new Error("draw is not defined")}},{key:"attachListener",value:function(){return this}}]),t}(),hP=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getLogicalSpace",value:function(){return{width:this.boundBox().width,height:this.boundBox().height}}},{key:"setSpatialConfig",value:function(t){return this.boundBox({top:t.y,left:t.x}),this.newDimensions={width:t.width,height:t.height},this.renderAt(t.renderAt),this}},{key:"draw",value:function(){if(!this.component)throw new Error("Component not set for ".concat(this.componentName));return this.component.mount(document.getElementById(this.renderAt)),this}}]),n}(fP),dP={classPrefix:"muze",interaction:{sideEffects:{tooltip:{common:!0},selectionBox:{}},behaviours:{highlight:{common:!0},select:{common:!0},brush:{common:!1},filter:{common:!0}},tooltip:{}},pagination:"scroll",scrollBar:{thickness:10,speed:2,vertical:{align:"right"},horizontal:{align:"bottom"}},legend:{show:!0,position:"right",height:20,width:20,color:{padding:1,margin:3,border:1},shape:{padding:1,margin:3,border:1},size:{padding:1,margin:3,border:1}},showHeaders:!1,axesHeaders:{row:{show:!1,position:HA},column:{show:!0,position:HA,align:"center",padding:4,maxLines:1,className:"".concat("muze","-column-header-container"),formatter:function(t){return t.join(" / ")}}},minWidth:100,minHeight:100,facet:{rows:{minCharacters:3},columns:{maxLines:2,verticalAlign:"middle",minCharacters:1}},facets:{rows:{labels:{align:LA},className:""},columns:{labels:{align:LA},className:""}},border:{style:"solid",color:"#d6d6d6",width:2,collapse:!0,spacing:0},autoGroupBy:{disabled:!1},invalidValues:{},sort:{autoSort:{disabled:!1}},axisFrom:{},axes:{x:{},y:{}},useExternalCSS:!1,rows:{facets:{labels:{style:{"font-size":"12px","line-height":"15px",color:"#5f5f5f","font-weight":"400","font-family":"'Source Sans Pro','Helvetica Neue', Helvetica, Arial, sans-serif","white-space":"nowrap","transform-origin":"0 0"}}}},columns:{facets:{labels:{style:{"font-size":"12px","line-height":"15px",color:"#5f5f5f","font-weight":"400","font-family":"'Source Sans Pro','Helvetica Neue', Helvetica, Arial, sans-serif","white-space":"nowrap","transform-origin":"0 0"}}}}},pP=["sort"],gP="".concat(dP.classPrefix,"-layout-container-component"),vP="".concat(dP.classPrefix,"-layout-container"),yP=function(){function t(e){gg()(this,t),this._host=e.host||null,this._cut=e.cut||null,this._ratioWeight=0===e.ratioWeight?0:e.ratioWeight||1,this._preferred=e.preferred||!1,this._lanes=e.lanes||[],this._remainingHeight=0,this._remainingWidth=0}return yg()(t,[{key:"host",value:function(t){return t&&(this._host=t),this._host}},{key:"preferred",value:function(t){return t&&(this._preferred=t),this._preferred}},{key:"cut",value:function(t){return t&&(this._cut=t),this._cut}},{key:"ratioWeight",value:function(t){return t&&(this._ratioWeight=t),this._ratioWeight}},{key:"lanes",value:function(t){return t&&(this._lanes=t),this._lanes}},{key:"remainingHeight",value:function(t){return t&&(this._remainingHeight=t),this._remainingHeight}},{key:"remainingWidth",value:function(t){return t&&(this._remainingWidth=t),this._remainingWidth}}]),t}(),mP=(tP=0,function(){return"".concat(vP,"-").concat(++tP)});function bP(t){var e=0;if("v"===t.getCutType())e=function(t){var e=Number.MAX_SAFE_INTEGER;return t.children().forEach((function(t){var n=bP(t);n<e&&(e=n)})),e}(t);else if("h"===t.getCutType())t.children().forEach((function(t){e+=bP(t)}));else if(t.model().host()&&t.model().host().getLogicalSpace){var n=t.boundBox().height,r=t.model().host().getLogicalSpace().height;(e=n-r)<0&&(e=0)}else e=0;return e}function xP(t){var e=0;if("h"===t.getCutType())e=function(t){var e=Number.MAX_SAFE_INTEGER;return t.children().forEach((function(t){var n=xP(t);n<e&&(e=n)})),e}(t);else if("v"===t.getCutType())t.children().forEach((function(t){e+=xP(t)}));else if(t.model().host()&&t.model().host().getLogicalSpace){var n=t.boundBox().width,r=t.model().host().getLogicalSpace().width;(e=n-r)<0&&(e=0)}else e=0;return e}function _P(t,e,n){var r=new hP(0,{height:t,width:e});return r.name("placeHolder"),r.position(n),r}function wP(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="",a=1,o=1,c=0,u=0;if(!e)return{first:t,second:t};var s=e.getLogicalSpace(),l=s.height,f=s.width,h=e.position();"top"===h||"bottom"===h?(i="h",a=l/t.remainingHeight(),c=t.remainingHeight()-l,u=t.remainingWidth()):(i="v",a=f/t.remainingWidth(),u=t.remainingWidth()-f,c=t.remainingHeight()),o=1-a,t.cut(i);var d={host:e.name(),cut:null,ratioWeight:a,preferred:!r&&n,lanes:[]},p=new yP(d);p.remainingHeight(l),p.remainingWidth(f);var g={host:null,cut:null,ratioWeight:o,preferred:!r&&!n,lanes:[]},v=new yP(g);return v.remainingHeight(c),v.remainingWidth(u),n?t.lanes([p]):"top"===h||"left"===h?t.lanes([p,v]):t.lanes([v,p]),{first:p,second:v}}var kP=function(){function t(e){gg()(this,t),this._model=e,this._parent=null,this._children=[],this._parentCut=null,this._boundBox={top:null,left:null,height:null,width:null},this._id=this._model.host()instanceof fP&&this._model.host().renderAt()?this._model.host().renderAt():mP()}return yg()(t,[{key:"addChildren",value:function(t){var e,n=this;(e=this._children).push.apply(e,dg()(t)),t.forEach((function(t){t.parent(n)}))}},{key:"isRoot",value:function(){return null===this._parent}},{key:"isLeaf",value:function(){return!this._children.length}},{key:"getCutType",value:function(){return this._model.cut()}},{key:"isPreferred",value:function(){return!!this._model.preferred()}},{key:"children",value:function(t){return t&&(this._children=t),this._children}},{key:"parent",value:function(t){return t&&(this._parent=t),this._parent}},{key:"parentCut",value:function(t){return t&&(this._parentCut=t),this._parentCut}},{key:"id",value:function(t){return t&&(this._id=t),this._id}},{key:"model",value:function(t){return t&&(this._model=t),this._model}},{key:"boundBox",value:function(t){return t&&(this._boundBox={top:t.top,left:t.left,height:t.height,width:t.width}),this._boundBox}},{key:"updateNode",value:function(t){var e=this;this._id===t._id?(this._model.cut(t.cut),this._model.ratioWeight(t.ratioWeight)):this._children.forEach((function(n){if(n._id===t._id)return n.model.cut(t.cut),void n.model.ratioWeight(t.ratioWeight);e.searchNode(n,t)}))}},{key:"searchNode",value:function(t,e){var n=this;t.children().forEach((function(t){t.id()===e._id?(t.model().cut(e.cut),t.model().ratioWeight(e.ratioWeight)):n.searchNode(t,e)}))}},{key:"delete",value:function(t){var e=this;this._children.forEach((function(n){if(n.id()===t){var r=e._children.indexOf(n);e._model.lanes().splice(r,1)}e.deleteSearchNode(n,t)}))}},{key:"deleteSearchNode",value:function(t,e){var n=this;t.children().forEach((function(r){if(r.id()===e){var i=t.children().indexOf(r);t.model().lanes().splice(i,1)}else n.deleteSearchNode(r,e)}))}}]),t}();function SP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var MP=function(){function t(e,n){gg()(this,t),this._measurements=e,this._config=n,this._root=this.createTree(this._config,null),this.setBoundBox()}return yg()(t,[{key:"createTree",value:function(t,e){var n=new kP(t);e?(n.parentCut(e.getCutType()),e.addChildren([n])):this._root=n;var r,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return SP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(t.lanes());try{for(i.s();!(r=i.n()).done;){var a=r.value;this.createTree(a,n)}}catch(t){i.e(t)}finally{i.f()}return this._root}},{key:"setBoundBox",value:function(){this._root.boundBox({top:0,left:0,width:this._measurements.width,height:this._measurements.height}),function t(e){var n=e.children().map((function(t){return t.model().ratioWeight()})).reduce((function(t,e){return t+e}),0);e.children().forEach((function(e,r,i){var a=i[r-1],o=e.model().ratioWeight()/n;"h"===e.parentCut()?e.boundBox({top:r?a.boundBox().top+a.boundBox().height:0,left:e.parent().boundBox().left,height:e.parent().boundBox().height*o,width:e.parent().boundBox().width}):e.boundBox({top:e.parent().boundBox().top,left:r?a.boundBox().left+a.boundBox().width:0,height:e.parent().boundBox().height,width:e.parent().boundBox().width*o}),t(e)}))}(this._root)}},{key:"setHostPosition",value:function(e){var n=this;e.children().forEach((function(e){t.setHostSpatialConfig(e),n.setHostPosition(e)}))}},{key:"negotiate",value:function(){return function t(e){for(var n,r,i,a=0,o=e.children().length,c=0;c<o;c++){var u,s=void 0,l=e.children()[c];"h"===l.parentCut()?(s=bP,r="height",i="width"):(s=xP,r="width",i="height"),l.isPreferred()?n=l:(a+=u=s(l),l.boundBox()[r]-=u,l.boundBox()[i]=l.parent().boundBox()[i],t(l))}n&&(n.boundBox()[r]+=a,n.boundBox()[i]=n.parent().boundBox()[i],t(n))}(this._root),function t(e){e.children().forEach((function(e,n,r){var i=function(t,e,n,r){if(e){var i=n[e-1].boundBox(),a=i.top,o=i.left,c=i.height,u=i.width;return{width:t.width,height:t.height,top:"h"===r.parentCut()?a+c:a,left:"h"===r.parentCut()?o:o+u}}var s=r.parent().boundBox(),l=s.top,f=s.left;return{width:t.width,height:t.height,top:l,left:f}}(e.boundBox(),n,r,e);e.boundBox(i),t(e)}))}(this._root),this}},{key:"broadcast",value:function(){return this.setHostPosition(this._root),this}},{key:"tree",value:function(){return this._root}}],[{key:"setHostSpatialConfig",value:function(t){var e=t.boundBox(),n=t.model().host();if(n&&n.setSpatialConfig){var r={x:e.left,y:e.top,width:e.width,height:e.height,renderAt:t.id()};n.setSpatialConfig(r)}}}]),t}(),EP={top:0,center:1,bottom:2},OP={0:"top",1:"center",2:"bottom"},CP={0:"left",1:"middle",2:"right"},AP="vertical",PP="horizontal",DP=function(){function t(){gg()(this,t)}return yg()(t,null,[{key:"isDOMElement",value:function(t){return t instanceof Element}},{key:"getID",value:function(t){return t.id}},{key:"getElement",value:function(t){return document.getElementById(t)}},{key:"findContainer",value:function(t){return t.filter((function(t){return null==t.parent}))[0]}},{key:"removeDiv",value:function(t){null!==document.getElementById(t)&&document.getElementById(t).remove()}}]),t}(),RP=function(){function t(e){gg()(this,t),this._node=e,this._className=e.model().host()instanceof fP?e.model().host().className():gP}return yg()(t,[{key:"node",value:function(){return this._node}},{key:"hasHost",value:function(){return this._node.model().host()instanceof fP}},{key:"className",value:function(){return this._className||gP}}]),t}(),IP=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(){return gg()(this,n),e.apply(this,arguments)}return yg()(n,[{key:"getCoordinates",value:function(){return Sv()(kg()(n.prototype),"defaultDataPointLogic",this).call(this)}}]),n}(function(){function t(e){gg()(this,t),this._data=e}return yg()(t,[{key:"defaultDataPointLogic",value:function(){var t=[];return function t(e,n){var r=new RP(e);n.push(r),e.children().forEach((function(e){t(e,n)}))}(this._data,t),t}}]),t}());function TP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function NP(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?TP(Object(n),!0).forEach((function(e){rv()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var FP=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this))._data=t,r._coordinates=new IP(r._data).getCoordinates(),r}return yg()(n,[{key:"createhtml",value:function(t,e){var r=this,i=t;Sv()(kg()(n.prototype),"initRenderer",this).call(this,i,this._data),this.parentDiv=this.createAndCustomiseParent(e),this._coordinates.forEach((function(t){if(t.hasHost()){var e=t.node();r.parentDiv.appendChild(r.createAndPositionDiv(NP(NP({},e.boundBox()),{},{id:e.id(),className:t.className()})))}})),i.appendChild(this.parentDiv)}},{key:"createAndPositionDiv",value:function(t){var e=t.top,n=t.left,r=t.height,i=t.width,a=t.className,o=t.id,c=document.getElementById(o)||document.createElement("div");return c.style.position="absolute",c.style.left="".concat(n,"px"),c.style.top="".concat(e,"px"),c.style.height="".concat(r,"px"),c.style.width="".concat(i,"px"),c.id=o,c.className=a,c}},{key:"createAndCustomiseParent",value:function(t){var e=DP.findContainer(this._coordinates),n=e.node(),r=this.createAndPositionDiv(NP(NP({},n.boundBox()),{},{id:n.id(),className:e.className()}));return r.className=t,r.style.position="relative",r}},{key:"destroyParent",value:function(){this.parentDiv.remove()}},{key:"coordinates",value:function(){return this._coordinates}}]),n}(function(){function t(){gg()(this,t)}return yg()(t,[{key:"initRenderer",value:function(t,e){t.__logicalTree=e}}]),t}()),jP=function(t,e){return t.renderer().coordinates().find((function(t){return t.node().id()===e}))},LP=function(){function t(e,n,r){gg()(this,t),this._data=e.tree,this._componentMap=e.componentMap,this._layoutClassName=e.layoutClassName,this._renderer=n,this._mount=DP.isDOMElement(r)?r:DP.getElement(r)}return yg()(t,[{key:"destroyRoot",value:function(){this.renderer().destroyParent()}},{key:"draw",value:function(){return function(t){!function(t){t.renderer(new FP(t.data())),t.renderer().createhtml(t.mount(),t.className())}(t)}(this),function t(e,n){n.children().forEach((function(n){var r=n.model().host();if(r instanceof fP&&r.alignWith()){var i=e.componentMap().get(r.alignWith());if(i){var a=jP(e,n.id()).node(),o=a.boundBox(),c=jP(e,i.renderAt()).node().boundBox(),u=function(t,e){var n={},r=e.node,i=e.refNode;switch(t){case"left":n={top:r.top,left:i.left,height:r.height,width:Math.abs(r.width-Math.abs(i.left-r.left))};break;case"right":n={top:r.top,left:r.left,height:r.height,width:Math.abs(r.width-Math.abs(r.left+r.width-(i.left+i.width)))};break;case"top":n={top:i.top,left:r.left,height:Math.abs(r.height-Math.abs(i.top-r.top)),width:r.width};break;case"bottom":n={top:r.top,left:r.left,height:Math.abs(r.top-i.top+i.height),width:r.width};break;case"h-center":n={top:r.top,left:i.left,height:r.height,width:i.width};break;case"v-center":n={top:i.top,left:r.left,height:i.top,width:r.width}}return n}(r.alignment(),{node:o,refNode:c});Object.assign(u,{id:a.id(),className:r.className()}),e.renderer().createAndPositionDiv(u),e.componentMap().get(r.name()).setSpatialConfig({x:u.left,y:u.top,height:u.height,width:u.width})}}t(e,n)}))}(this,this._data),function t(e){e.children().forEach((function(e){var n=e.model().host();n instanceof fP&&n.draw(),t(e)}))}(this._data),this}},{key:"data",value:function(t){return t&&(this._data=t),this._data}},{key:"componentMap",value:function(t){return t&&(this._componentMap=t),this._componentMap}},{key:"className",value:function(t){return t&&(this._layoutClassName=t),this._layoutClassName}},{key:"renderer",value:function(t){return t&&(this._renderer=t),this._renderer}},{key:"mount",value:function(t){return t&&(this._mount=t),this._mount}}]),t}(),BP=function(){function t(e,n,r,i){gg()(this,t),this._componentMap=e,this._prioritySequence=n,this._totalHeight=r,this._totalWidth=i,this._targetComponentMap=null}return yg()(t,[{key:"generateConfigModel",value:function(){var t;(t=this).targetComponentMap(new Map),t.componentMap().forEach((function(e){if(t.targetComponentMap().has(e.target()))t.targetComponentMap().get(e.target()).push(e);else{var n=[];n.push(e),t.targetComponentMap().set(e.target(),n)}}));var e=this._targetComponentMap.get("canvas"),n=new yP({}),r=n;n.remainingHeight(this._totalHeight),n.remainingWidth(this._totalWidth);var i=null;return this._prioritySequence.forEach((function(t){i=function(t,e){var n=t.find((function(t){return t.name()===e}));return n&&-1!==n?n:null}(e,t),r="grid"!==t?wP(r,i).second:function(t,e){for(var n=t,r=e.length,i=r?e[0].length:0,a=e.reduce((function(t,e){return t+e[0].getLogicalSpace().height}),0),o=0;o<i;o++){var c=o===i-1,u=wP(n,_P(a,e[0][o].getLogicalSpace().width,"left"),c),s=u.first,l=u.second;n=s;for(var f=0;f<r;f++){var h=f===r-1;n=wP(n,e[f][o],h,!0).second}n=l}return n}(r,i.component)})),n}},{key:"componentMap",value:function(t){return t&&(this._componentMap=t),this._componentMap}},{key:"targetComponentMap",value:function(t){return t&&(this._targetComponentMap=t),this._targetComponentMap}}]),t}(),zP=function(){function t(){gg()(this,t),this._componentMap=new Map,this._layoutDefinition=null}return yg()(t,[{key:"addComponent",value:function(t){this._componentMap.set(t.name(),t)}},{key:"layoutDefinition",value:function(t){return t&&(this._layoutDefinition=t),this._layoutDefinition}},{key:"addMultipleComponent",value:function(t){var e=this;t.forEach((function(t){e.addComponent(t)}))}},{key:"sanitizedDefinition",value:function(){return function t(e,n){var r=n.host();n.lanes()&&n.lanes().length&&n.lanes().forEach((function(n){return t(e,n)})),null!=r&&"string"==typeof r&&void 0!==e.componentMap().get(r)&&n.host(e.componentMap().get(r))}(this,this._layoutDefinition),this.layoutDefinition()}},{key:"componentMap",value:function(){return this._componentMap}},{key:"resetComponentMap",value:function(){this._componentMap.clear()}}]),t}();function HP(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var WP,VP,UP=function(){function t(e){gg()(this,t),this._renderAt=e.renderAt,this._layoutClassName=e.className,this._dimension={width:e.width||600,height:e.height||400},this._skeletonType=e.skeletonType||"html",this._layoutDefinition=null,this._layoutDef=new zP,this._drawingManager=null,this._prioritySequence=[],this.tree=null,this._rootNodeID=null}return yg()(t,[{key:"layoutDef",value:function(t){return t&&(this._layoutDef=t),this._layoutDef}},{key:"prioritySequence",value:function(t){return t&&(this._prioritySequence=t),this._prioritySequence}},{key:"dimension",value:function(t){return t&&Object.assign(this._dimension,t),this._dimension}},{key:"addComponent",value:function(t){this._layoutDef.addComponent(t)}},{key:"addMultipleComponent",value:function(t){this._layoutDef.addMultipleComponent(t)}},{key:"resetNode",value:function(t){this.con&&this.con.resetNode(t)}},{key:"updateNode",value:function(t){this.tree.updateNode(t),this._layoutDefinition=this.tree.model,this.compute()}},{key:"compute",value:function(){var t,e,n,r;DP.isDOMElement(this._renderAt)?this._renderAt._layout=this:document.getElementById(this._renderAt)._layout=this,this._layoutDefinition=(n=(e=(t=this).dimension()).height,r=e.width,new BP(t.layoutDef().componentMap(),t.prioritySequence(),n,r).generateConfigModel()),this._layoutDef.layoutDefinition(this._layoutDefinition),this._layoutDefinition=this._layoutDef.sanitizedDefinition(),this._layout=new MP({width:this._dimension.width,height:this._dimension.height},this._layoutDefinition),this.tree=this._layout.negotiate().tree(),this._layout.broadcast(),this._drawingManager=new LP({tree:this.tree,componentMap:this._layoutDef.componentMap(),layoutClassName:this._layoutClassName},this._skeletonType,this._renderAt),this._rootNodeID?this.tree.id(this._rootNodeID):this._rootNodeID=this.tree.id(),this._drawingManager.draw()}},{key:"getRootNodeId",value:function(){return this._rootNodeID}},{key:"registerComponents",value:function(t){var e=this;return this._prioritySequence.length=0,this._layoutDef.resetComponentMap(),t.forEach((function(t){t&&(e._prioritySequence.push(t.name()),e.addComponent(t),"grid"===t.name()&&t.component.forEach((function(t){t.forEach((function(t){e.addComponent(t)}))})))})),this}},{key:"getComponent",value:function(t){return this._layoutDef.componentMap().get(t)}},{key:"deleteElement",value:function(t,e){var n;this._layoutDef.componentMap().delete(e),(n=t.renderAt())&&hp("#".concat(n)).remove()}},{key:"removeComponent",value:function(t){var e=this,n=this.getComponent(t);return n?"grid"===t?n.component.map((function(t){return t.map((function(t){return e.deleteElement(t,t.name())}))})):this.deleteElement(n,t):this}},{key:"removeAllComponents",value:function(){var t=this.layoutDef().componentMap().keys();this._drawingManager.destroyRoot();var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return HP(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?HP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;this.removeComponent(r)}}catch(t){n.e(t)}finally{n.f()}}},{key:"renderAt",value:function(t){return t&&(this._renderAt=t),this._renderAt}}]),t}(),GP=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(){return $A()(this,n),e.apply(this,arguments)}return QA()(n,[{key:"getLogicalSpace",value:function(){var t=this.boundBox();return{width:t.width,height:t.height}}},{key:"setSpatialConfig",value:function(t){this.boundBox({top:t.y,left:t.x}),this.newDimensions={width:t.width,height:t.height},this.renderAt(t.renderAt)}},{key:"getBoundBox",value:function(){return this.boundBox()}},{key:"updateWrapper",value:function(){throw Error("Update is not implemented")}},{key:"setParams",value:function(){throw Error("set params is not implemented")}},{key:"setComponentInfo",value:function(){throw Error("setComponentInfo is not implemented")}}]),n}(fP),qP=function(t){return Array.from(Array(t.length).keys())},YP=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.order,i=n.keyFn,a=e.slice(),o=t.slice(),c=o.slice();if(r=r||Array.from(Array(a.length).keys()),i=i||function(t){return t},0===o.length){var u=[];return r.forEach((function(t){u.push(a[t])})),{prevStack:c,currStack:a,arr:u}}for(var s="",l="",f=[],h=r.length-1;h>=0;h--){var d=r[h];if((s+=i(a[d]))===(l+=i(o[d])))f[d]=null;else{l="";for(var p=h;p<r.length;p++){var g=r[p],v=a[g];f[g]=v,o[g]=v,l=s}}}var y=[];return r.forEach((function(t){y.push(f[t])})),{prevStack:c,currStack:o,arr:y}},XP=function(t,e,n,r){if(!t)return function(){return null};var i={row:function(t){return n[r+t]&&n[r+t][e]},column:function(t){return n[r][e+t]}};return function(t){for(var e=1,n=!1;!n;)null===i[t](e)?e+=1:n=!0;return e}},$P=function(t,e){return{row:function(){var n=[];return t.map((function(t){var r=YP(n,t,{keyFn:function(t){return t.valueOf()},order:e}),i=r.currStack,a=r.arr;return n=i,a}))},column:function(){var n=[],r=[];return t.length&&t[0].forEach((function(i,a){var o=[];t.forEach((function(t){o.push(t[a])}));var c=YP(n,o,{keyFn:function(t){return t.valueOf()},order:e}),u=c.currStack,s=c.arr;n=u,t.forEach((function(t,e){r[e]=r[e]||[],r[e][a]=s[e]}))})),r}}},KP=function(t){return{row:function(){var e=[];return t.forEach((function(n,r){e[r]=e[r]||[],n.forEach((function(n,i){if(t[r][i]){var a=XP(n,i,t,r)("row");a&&e[r].push(a)}}))})),e},column:function(){return t.map((function(e,n){return e.map((function(e,r){return XP(e,r,t,n)("column")})).filter((function(t){return null!==t}))}))}}},QP=function(){return{row:function(t){return qP(t[0])},column:function(t){return qP(t)}}},ZP=(WP={},rv()(WP,"".concat("top","-1"),{orderGetter:QP().column,viewMatrixMaker:function(){return $P.apply(void 0,arguments).column},spanMaker:function(){return KP.apply(void 0,arguments).column}}),rv()(WP,"".concat("bottom","-1"),{orderGetter:QP().column,viewMatrixMaker:function(){return $P.apply(void 0,arguments).column},spanMaker:function(){return KP.apply(void 0,arguments).column}}),rv()(WP,"".concat("center","-0"),{orderGetter:QP().row,viewMatrixMaker:function(){return $P.apply(void 0,arguments).row},spanMaker:function(){return KP.apply(void 0,arguments).row}}),rv()(WP,"".concat("center","-2"),{orderGetter:QP().row,viewMatrixMaker:function(){return $P.apply(void 0,arguments).row},spanMaker:function(){return KP.apply(void 0,arguments).row}}),WP);function JP(t,e,n){var r=null,i=t,a=function(t){return ZP[t]||{orderGetter:function(){return null},viewMatrixMaker:function(t){return function(){return t}},spanMaker:function(){return function(){return null}}}}("".concat(e,"-").concat(n)),o=a.orderGetter,c=a.viewMatrixMaker,u=a.spanMaker;return t.length&&(r=u(i=c(t,o(t))())()),{viewMatrix:i,spans:r}}var tD=function(t,e,n,r,i){var a=0;t.attr(i,(function(t,o){0===o&&(a=0);var c=e[t.rowIndex][o],u=t.placeholder,s={row:t.rowIndex,col:a};return function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=n.availHeight(),c=n.availWidth(),u=r.border.width,s=r.dimensions,l=s.unitWidths,f=s.unitHeights,h=i.row,d=i.col,p=a.startRowIdx,g=void 0===p?0:p,v=a.startColIdx,y=void 0===v?0:v;return t={},rv()(t,"rowSpan",(function(){var t=f.primary[g+h];if(e>1){for(var r=0,i=h;i<h+e;i++)r+=f.primary[g+i]-u;n.setAvailableSpace(c,r+u)}else t&&(n.setAvailableSpace(c,t-u),hp(this).style("height","".concat(t,"px")));hp(this).style("width","".concat(c,"px"))})),rv()(t,"colSpan",(function(){var t=l.primary[y+d];if(e>1){for(var r=0,i=d;i<d+e;i++)r+=l.primary[y+i]-u;n.setAvailableSpace(r+u,o)}else t&&n.setAvailableSpace(t-u,o);hp(this).style("height","".concat(o,"px"))})),t}(c,u,n,s,r)[i].bind(this)(),a+=c,c}))},eD=(VP={},rv()(VP,"".concat("top","-0"),null),rv()(VP,"".concat("top","-1"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return tD.apply(void 0,e.concat(["colSpan"]))})),rv()(VP,"".concat("top","-2"),null),rv()(VP,"".concat("center","-0"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return tD.apply(void 0,e.concat(["rowSpan"]))})),rv()(VP,"".concat("center","-1"),null),rv()(VP,"".concat("center","-2"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return tD.apply(void 0,e.concat(["rowSpan"]))})),rv()(VP,"".concat("bottom","-0"),null),rv()(VP,"".concat("bottom","-1"),(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return tD.apply(void 0,e.concat(["colSpan"]))})),rv()(VP,"".concat("bottom","-2"),null),VP),nD=function(t,e,n,r,i){var a=eD[r];a&&a(t,e,n,i||{})},rD=function(t){var e=t.borderTypes,n=t.showBorders,r=t.cells,i=t.borderInfo,a=t.name,o=t.isFacet,c=i.color,u=i.style,s=i.width;e.forEach((function(t){!function(t){var e=t.type,n=t.borderWidth,r=t.borderStyle,i=t.color;t.cells.style("border-".concat(e),"".concat(n,"px ").concat(r," ").concat(i))}({cells:r,color:n[t]?c:"transparent",type:t,borderWidth:s,borderStyle:u,name:a,isFacet:o})}))},iD=function(t){var e=t.cells,n=t.border,r=t.row,i=t.column,a=t.isFacet,o=t.showHeaders,c="".concat(OP[EP[r]],"-").concat(CP[i]),u=function(t,e,n,r){var i,a=e.showRowBorders,o=e.showColBorders,c=e.showValueBorders;return i={},rv()(i,"row",(function(){return rD({borderTypes:["top","bottom"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),rv()(i,"column",(function(){return rD({borderTypes:["left","right"],showBorders:o,cells:t,borderInfo:e,name:n,isFacet:r})})),rv()(i,"center",(function(){return rD({borderTypes:["left","right","top","bottom"],showBorders:c,cells:t,borderInfo:e,name:n,isFacet:r})})),rv()(i,"left",(function(){return rD({borderTypes:["left"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),rv()(i,"right",(function(){return rD({borderTypes:["right"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),rv()(i,"".concat("center").concat("left"),(function(){return rD({borderTypes:["left","top","bottom"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),rv()(i,"".concat("center").concat("right"),(function(){return rD({borderTypes:["right","top","bottom"],showBorders:a,cells:t,borderInfo:e,name:n,isFacet:r})})),i}(e,n,c,a),s=function(t,e){var n;return n={},rv()(n,"".concat("top","-").concat("left"),t&&e?"left":null),rv()(n,"".concat("top","-").concat("middle"),"column"),rv()(n,"".concat("top","-").concat("right"),t&&e?"right":null),rv()(n,"".concat("center","-").concat("left"),t?"".concat("center").concat("left"):"row"),rv()(n,"".concat("center","-").concat("middle"),"center"),rv()(n,"".concat("center","-").concat("right"),t?"".concat("center").concat("right"):"row"),rv()(n,"".concat("bottom","-").concat("left"),null),rv()(n,"".concat("bottom","-").concat("middle"),"column"),rv()(n,"".concat("bottom","-").concat("right"),null),n}(a,o)[c];s&&u[s]()};n(107);var aD=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r;return $A()(this,n),(r=e.call(this,t.name,t.config.dimensions,0)).setParams(t),r.className(t.config.className),r._mount=null,r}return QA()(n,[{key:"mount",value:function(){return arguments.length?(this._mount=arguments.length<=0?void 0:arguments[0],this):this._mount}},{key:"applyScroll",value:function(t){var e=this.params.config.row,n=this.params.config.column,r=this.params.config.scrollInfo,i=r.horizontal,a=r.vertical;t.style("overflow","visible"),t.style("width","auto"),t.style("height","auto"),i&&1===n&&(t.style("overflow","hidden"),t.style("width","100%")),a&&"center"===e&&(t.style("overflow","hidden"),t.style("height","100%"))}},{key:"render",value:function(){var t=this.params.config,e=t.classPrefix,n=t.row,r=t.column,i=t.dimensions,a=t.border,o=t.isFacet,c=t.showHeaders,u=this.mount(),s=dp(u,"div",[1],"".concat(e,"-grid-").concat(n,"-").concat(r+1)).classed("".concat(e,"-grid-").concat(n),!0).classed("".concat(e,"-grid"),!0);this.applyScroll(s);var l=JP(this.component,n,r),f=l.viewMatrix,h=l.spans,d=this.renderTable(s,"".concat(e,"-grid"),f).cells;nD(d,h,{dimensions:i,border:a},"".concat(n,"-").concat(r)),function(t){t.each((function(t){t.placeholder.render(this)}))}(d),d.exit().each((function(t){t.placeholder.remove()})),iD({cells:d,border:a,row:n,column:r,isFacet:o,showHeaders:c})}},{key:"renderTable",value:function(t,e,n){var r=dp(t,"table",["layout"],"".concat(e,"-table")),i=dp(r,"tbody",["layout"],"".concat(e,"-body")),a=dp(i,"tr",n,"".concat(e,"-tr"));return{table:r,body:i,rows:a,cells:dp(a,"td",(function(t,e){return t.map((function(t,n){return{placeholder:t,rowIndex:e,colIndex:n}})).filter((function(t){return null!==t.placeholder}))}),"".concat(e,"-td"),{update:function(t,n){var r=n.placeholder.config().externalClassname;r&&r.map((function(n){return t.classed("".concat(e,"-").concat(n),!0)}))}},(function(t){return t.placeholder.id}))}}},{key:"draw",value:function(t){this.mount(t||document.getElementById(this.renderAt())),this.render()}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.boundBox(t.config.dimensions),this.setParams(t),this}},{key:"setParams",value:function(t){this.component=t.component,this.params=t,this.target(t.config.target),this.position("top"),this.className(t.config.className)}}]),n}(GP),oD=function(t,e,n,r){var i=e-n;return Math.round(t)>=i?2*r:0},cD=function(t,e){for(var n=new Array(e),r=0,i=0;i<e;i++)n[i]=r,r+=t[i];return{positions:n,totalMatrixContentDim:r}},uD=function(t,e,n){for(var r=null,i=null,a=0;a<t.length;a++){var o=t[a],c=t[a+1];if(a===t.length-1){null===r&&(r=a),null===i&&(i=a);break}if(o<=e&&c>e&&(r=a),o<n+e&&c>=n+e){i=a;break}}return{startIdx:r=null===r?0:r,endIdx:i=null===i?t.length-1:i,shift:e-t[r]}};function sD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sD(Object(n),!0).forEach((function(e){_C()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fD,hD,dD,pD,gD,vD=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r;return $A()(this,n),(r=e.call(this,t)).renderingState={rowPositions:[],colPositions:[],totalContentWidth:0,totalContentHeight:0,prevViewportRanges:{rowRange:[0,-1],colRange:[0,-1]}},r}return QA()(n,[{key:"draw",value:function(t){this.mount(t||document.getElementById(this.renderAt())),this.initializeRenderingState()}},{key:"initializeRenderingState",value:function(){var t=this.params,e=t.config,n=t.gridLayout,r=e.row,i=e.column,a=n.viewInfo().layoutDimensions,o=a.unitWidths.primary,c=a.unitHeights.primary,u=this.component,s=[],l=[],f=0,h=0;if(u.length&&"center"===r){var d=cD(c,u.length);s=d.positions,h=d.totalMatrixContentDim}if(u.length&&1===i){var p=cD(o,u[0].length);l=p.positions,f=p.totalMatrixContentDim}this.renderingState={rowPositions:s,colPositions:l,totalContentWidth:f,totalContentHeight:h,prevViewportRanges:{rowRange:[0,-1],colRange:[0,-1]}}}},{key:"updateVirtualScrollContent",value:function(t,e,n){var r,i,a=this.params.config,c=a.row,u=a.column,s=this.calculateViewableMatrix(t,e);"center"===c&&1===u&&(i=s,(r=this.params.store).lockModel(),r.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.rowStart"),i.rowRange[0]),r.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.rowEnd"),i.rowRange[1]),r.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.colStart"),i.colRange[0]),r.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.colEnd"),i.colRange[1]),r.unlockModel()),this.render(lD(lD({},s),n)),this.renderingState.prevViewportRanges={rowRange:s.rowRange,colRange:s.colRange}}},{key:"calculateViewableMatrix",value:function(t,e){var n=this.params.config,r=n.row,i=n.column,a=n.border,o=this.renderingState,c=o.rowPositions,u=o.colPositions,s=o.totalContentWidth,l=o.totalContentHeight,f=this.getBoundBox(),h=f.width,d=f.height,p=this.component,g=a.width,v=0,y=p.length-1,m=0,b=p.length?p[0].length-1:-1,x=0,_=0;if(p.length&&"center"===r){var w=uD(c,e,d);v=w.startIdx,y=w.endIdx,x=w.shift+oD(e,l,d,g)}if(p.length&&1===i){var k=uD(u,t,h);m=k.startIdx,b=k.endIdx,_=k.shift+oD(t,s,h,g)}return{rowRange:[v,y],colRange:[m,b],shifts:[x,_]}}},{key:"render",value:function(t){var e=this.params.config,n=e.classPrefix,r=e.row,i=e.column,a=e.dimensions,o=e.border,c=e.isFacet,u=e.showHeaders,s=this.renderingState.prevViewportRanges,l=dp(this.mount(),"div",[1],"".concat(n,"-grid-").concat(r,"-").concat(i+1)).classed("".concat(n,"-grid-").concat(r),!0).classed("".concat(n,"-grid"),!0);this.applyScroll(l);var f="".concat(n,"-grid"),h=dp(l,"table",["layout"],"".concat(f,"-table")),d=dp(h,"tbody",["layout"],"".concat(f,"-body")),p=t.rowRange,g=t.colRange,v=t.shifts,y=t.transition,m=t.forceRender,b=I()(p,2),x=b[0],_=b[1],w=I()(g,2),k=w[0],S=w[1],M=I()(v,2),E=M[0],O=M[1],C=JP(this.component.slice(x,_+1).map((function(t,e){var n=t.slice(k,S+1);return n._key=x+e,n})),r,i),A=C.viewMatrix,P=C.spans;A=A.map((function(t,e){return t._key=x+e,t}));var D=dp(d,"tr",A,"".concat(f,"-tr"),{},(function(t){return t._key})),R=dp(D,"td",(function(t,e){return t.map((function(t,n){return{placeholder:t,rowIndex:e,colIndex:n}})).filter((function(t){return null!==t.placeholder}))}),"".concat(f,"-td"),{update:function(t,e){var n=e.placeholder.config().externalClassname;(n=bC()(new Set(n)))&&n.map((function(e){return t.classed("".concat(f,"-").concat(e),!0)}))}},(function(t){return t.placeholder.id}));nD(R,P,{dimensions:a,border:o},"".concat(r,"-").concat(i),{startRowIdx:x,startColIdx:k}),function(t,e,n,r,i){t.each((function(t){var a,o=t.placeholder,c=t.rowIndex,u=t.colIndex,s=e.startRowIdx,l=e.startColIdx;if("TextCell"===o.constructor.name)a=!0;else{var f=function(t,e){var n=t.rowIndex,r=t.colIndex,i=e.rowRange,a=e.colRange;return n>=i[0]&&n<=i[1]&&r>=a[0]&&r<=a[1]}({rowIndex:s+c,colIndex:l+u},n);a=r||!f}a&&o.render(this,{transition:i.transition})}))}(R,{startRowIdx:x,startColIdx:k},s,m,{transition:y},this._componentName),R.exit().each((function(t){t.placeholder.remove()})),iD({cells:R,border:o,row:r,column:i,isFacet:c,showHeaders:u}),"center"===r&&l.property("scrollTop",E),1===i&&l.property("scrollLeft",O)}}]),n}(aD),yD={leading:!0,trailing:!0},mD=function(t,e,n,r){hp(t).selectAll(".".concat(e,"-grid")).property(r,n)},bD=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r;return $A()(this,n),(r=e.call(this,t.name,t.config.dimensions,0)).gridComponents=[],r.setParams(t),r._prevScrollLeft=null,r._prevScrollTop=null,r}return QA()(n,[{key:"sanitizeGrid",value:function(){for(var t=0,e=0,n=this.component.viewInfo(),r=n.viewMatricesInfo,i=n.layoutDimensions,a=this.component.scrollInfo(),o=i.viewHeight,c=i.viewWidth,u=i.unitHeights,s=i.unitWidths,l=0;l<3;l++){this.gridComponents.length&&this.gridComponents[l]instanceof Array||(this.gridComponents[l]=[]);for(var f=0;f<3;f++){var h={height:o[l],width:c[f],unitHeights:u,unitWidths:s},d=r.matrices["".concat(OP[l])][f],p="".concat(OP[l],"-").concat(CP[f]),g=OP[l],v=f,y={dimensions:h,border:i.border,classPrefix:this.params.config.classPrefix,scrollInfo:a,row:g,column:v};if(this.gridComponents[l][f]instanceof GP){var m=this.params.component.config(),b=m.isFacet,x=m.showHeaders;y.isFacet=b,y.showHeaders=x,this.gridComponents[l][f].updateWrapper({name:p,component:d,config:y,gridLayout:this.params.component,store:this.params.store})}else{var _=this.params.component.config(),w=_.isFacet,k=_.showHeaders;y.isFacet=w,y.showHeaders=k;var S=new("center"===g||1===v?vD:aD)({name:p,component:d,config:y,gridLayout:this.params.component,store:this.params.store});this.gridComponents[l].push(S)}0===l&&(e+=h.width),0===f&&(t+=h.height)}}this.boundBox({height:t,width:e}),this.component=this.gridComponents,this.allComponents=this.gridComponents}},{key:"scrollBarManager",value:function(){return arguments.length?(this._scrollBarManager=arguments.length<=0?void 0:arguments[0],this):this._scrollBarManager}},{key:"attachScrollListener",value:function(){var t=this.scrollBarManager();return hp("#".concat(this.component[1][1].renderAt())).on("wheel",(function(){var e=Op(),n=e.wheelDeltaX,r=e.wheelDeltaY;0!==n&&Math.abs(n)>Math.abs(r)&&t.preventBrowserScroll("horizontal",e).triggerScrollBarAction("horizontal",n/30),0!==r&&Math.abs(n)<Math.abs(r)&&t.preventBrowserScroll("vertical",e).triggerScrollBarAction("vertical",r/30)})),this}},{key:"performScrollAction",value:function(t,e){var n,r,i;return(n=e,r=this,i=r.params.config.classPrefix,{horizontal:function(){[0,1,2].forEach((function(t){var e=r.component[t][1];e instanceof vD||mD("#".concat(e.renderAt()),i,n,"scrollLeft")}))},vertical:function(){[0,1,2].forEach((function(t){var e=r.component[1][t];e instanceof vD||mD("#".concat(e.renderAt()),i,n,"scrollTop")}))}})[t](),this}},{key:"getBoundBox",value:function(){var t=this.component[0][0].boundBox(),e=t.top,n=t.left,r=this.boundBox();return{top:e,left:n,height:r.height,width:r.width}}},{key:"updateWrapper",value:function(t){return this._prevScrollLeft=null,this._prevScrollTop=null,this.name(t.name),this.boundBox(t.config.dimensions),this.setParams(t),this}},{key:"setParams",value:function(t){return this.component=t.component,this.params=t,this.target(t.config.target),this.className(t.config.className),this.sanitizeGrid(),this}},{key:"attachListener",value:function(){return this.attachScrollListener(),this}},{key:"updateScrollableRowsCompsContent",value:function(t,e,n){var r=this;[0,1,2].forEach((function(i){var a=r.allComponents[1][i];a instanceof vD&&a.updateVirtualScrollContent(t,e,n)}))}},{key:"updateScrollableColumnsCompsContent",value:function(t,e,n){var r=this;[0,1,2].forEach((function(i){var a=r.allComponents[i][1];a instanceof vD&&a.updateVirtualScrollContent(t,e,n)}))}},{key:"updateScrollableAllCompsContent",value:function(t,e,n){var r=this;[0,1,2].forEach((function(i){[0,1,2].forEach((function(a){var o=r.allComponents[i][a];o instanceof vD&&o.updateVirtualScrollContent(t,e,n)}))}))}},{key:"updateScrollableCompsContent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._prevScrollLeft,i=this._prevScrollTop,a=t!==r||e!==i,o={forceRender:n};!a||null===r&&null===i||(o.transition={disabled:!0}),t!==r&&e!==i||n?this.updateScrollableAllCompsContent(t,e,o):t!==r?this.updateScrollableColumnsCompsContent(t,e,o):e!==i&&this.updateScrollableRowsCompsContent(t,e,o),this._prevScrollLeft=t,this._prevScrollTop=e}}]),n}(GP),xD=n(31),_D=n.n(xD),wD={position:"top",align:"left",padding:4,className:"".concat("muze","-title-container")},kD={position:"top",align:"left",padding:4,maxLines:2,className:"".concat("muze","-subtitle-container")},SD={className:"".concat("muze","-message-container"),baseFontLimit:16,upperFontLimit:24,baseSizeLimit:100,upperSizeLimit:300,fractionImage:.8,fractionChild:.7},MD=(fD={},_C()(fD,AA,{value:null,meta:{typeCheck:"constructor",typeExpected:"Array"}}),_C()(fD,PA,{value:null,meta:{typeCheck:"constructor",typeExpected:"Array"}}),_C()(fD,"color",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(t){return"string"!=typeof t&&t?t:{field:t}}}}),_C()(fD,"shape",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(t){return"string"!=typeof t&&t?t:{field:t}}}}),_C()(fD,"size",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(t){return"string"!=typeof t&&t?t:{field:t}}}}),_C()(fD,"detail",{value:[],meta:{typeCheck:"constructor",typeExpected:"Array"}}),_C()(fD,"layers",{value:[],meta:{typeCheck:"constructor",typeExpected:"Array"}}),_C()(fD,"transform",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object"}}),fD),ED=(hD={},_C()(hD,TA,{value:[null,null],meta:{takesMultipleParams:!0,typeCheck:function(t){var e=I()(t,2),n=e[0],r=e[1];return"function"==typeof n&&"object"===_D()(r)},sanitization:function(t){var e=I()(t,2),n=e[0],r=e[1],i=n;"string"!=typeof n&&"number"!=typeof n&&n||(i=function(){return n});var a=Js({},wD);return[i,Js(a,r)]}}}),_C()(hD,"subtitle",{value:[null,null],meta:{takesMultipleParams:!0,typeCheck:function(t){var e=I()(t,2),n=e[0],r=e[1];return"function"==typeof n&&"object"===_D()(r)},sanitization:function(t){var e=I()(t,2),n=e[0],r=e[1],i=n;"string"!=typeof n&&"number"!=typeof n&&n||(i=function(){return n});var a=Js({},kD);return[i,Js(a,r)]}}}),hD),OD=function(t){return[new t._registry.components.VisualGroup(t._registry,Object.assign({throwback:t._throwback,store:t._store},t.dependencies()))]},CD=function(t){var e=t.dependencies().lifeCycleManager;e.notify({client:t,action:"beforeupdate"});var n=t.composition().visualGroup,r=t.registry().interactions;t.firebolt().registerPhysicalActions(r.physicalActions.get()).registerBehaviouralActions(r.behaviours.get()).registerSideEffects(r.sideEffects.get());var i=t._allOptions;for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)){var o=t[a]();null!==o&&n[a]&&n[a](o)}var c=t.config().invalidValues;n.valueParser(ql(c)),n.interactionRegistry(t.firebolt().getInteractions()),function(t,e){return e.every((function(e){var n=t[e]();switch(e){case AA:case PA:return null!==n;case"data":return n instanceof bt&&!n.isEmpty()&&n.hasOneValue();default:return!0}}))}(t,[AA,PA,"data"])&&n.createMatrices(),t._cachedProps={},e.notify({client:t,action:"initialized"}),e.notify({client:t,action:"updated"})},AD=function(t,e){var n=function(){return!1};return!t.every((function(t,r){switch(t){case AA:case PA:case"detail":n=$s("Array");break;case"shape":case"size":case"color":case"data":case"config":n=$s("Object");break;default:n=function(){return!0}}var i=e[r][0],a=e[r][1];return n(i,a)}))},PD=function(t,e){return e>=t.rowStart&&e<=t.rowEnd},DD=function(t,e){return e>=t.colStart&&e<=t.colEnd},RD=function(t,e,n){return PD(t,e)&&DD(t,n)},ID=function(t){var e=t.composition().visualGroup.matrix(),n=e.geom(),r=e.row(),i=e.column(),a=[],o=t.store().get("virtualScrolling.viewport");n.forEach((function(t,e,n){RD(o,e,n)&&a.push(t.valueOf().done())}));var c=t.lifeCycle();a.length?Promise.all(a).then((function(){c.notify({client:t,action:"drawn"});var e=[];n.forEach((function(t,n,r){RD(o,n,r)&&t.valueOf().layers().forEach((function(t){e.push(t.animationDone())}))})),r.getLeftAxes().forEach((function(t,n){return PD(o,n)&&t&&t.source()&&e.push(t.source().animationDone())})),r.getRightAxes().forEach((function(t,n){return PD(o,n)&&t&&t.source()&&e.push(t.source().animationDone())})),i.getTopAxes().forEach((function(t,n){return DD(o,n)&&t&&t.source()&&e.push(t.source().animationDone())})),i.getBottomAxes().forEach((function(t,n){return DD(o,n)&&t&&t.source()&&e.push(t.source().animationDone())})),Promise.all(e).then((function(){c.notify({client:t,action:"animationend"})}))})):c.notify({client:t,action:"animationend"})},TD=function(t){return null===t||!!Array.isArray(t)&&!t.flat().length},ND=function(t){return t.every((function(t){return t.isContinuous()}))},FD=function(t){var e=pC.getState(),n=I()(e,2),r=n[0],i=n[1],a=t._store;a.append("app.group",r),a.append("local.group",i)},jD=function(t){return t===LA||t===BA?"vertical":"horizontal"},LD={data:{value:null,meta:{typeCheck:function(t){return t&&(t instanceof bt.DataModel()||t instanceof bt)},sanitization:function(t){return t?t=t instanceof bt?t:new bt(t):t}}},width:{value:0,meta:{sanitization:Gs,typeCheck:Number.isInteger}},height:{value:0,meta:{sanitization:Gs,typeCheck:Number.isInteger}},minUnitWidth:{value:50,meta:{sanitization:Gs,typeCheck:Number.isInteger}},minUnitHeight:{value:60,meta:{sanitization:Gs,typeCheck:Number.isInteger}},config:{value:[null,null],meta:{typeCheck:"constructor",typeExpected:"Object",takesMultipleParams:!0,sanitization:function(t,e){var n=I()(t,2),r=n[0],i=n[1],a=(void 0===i?{}:i).reset,o=void 0!==a&&a,c={},u=function(t){if(t){var e={},n=t.border,r=t.gridLines;return r&&(e.x=!!r.x,e.y=!!r.y),{facetsUserConfig:{isBorderPresent:n||{},isGridLinePresent:e,format:t.facets&&t.facets.format?t.facets.format:function(t){return t}},isFacet:!1}}return{}}(r);r=Js(r,u),o||(c=Js({},null===r?{}:e),c=Object.assign(c,function(t,e){var n={};return e.forEach((function(e){t&&t[e]&&Object.keys(t[e]).length&&(n[e]={})})),n}(r,pP)));var s=Js(c,dP),l=Us(r,"axesHeaders","column","className");l&&(r.axesHeaders.column.className="".concat(s.axesHeaders.column.className," ").concat(l));var f=Js(s,r),h=f.axes;return h.x.alignZeroLine&&(h.x.nice=!1),h.y.alignZeroLine&&(h.y.nice=!1),function(t){return t.scrollBar.thickness=Math.min(50,Math.max(10,t.scrollBar.thickness)),t}(f)}}}},BD=n(27),zD=n.n(BD),HD=function(){function t(e,n,r,i){gg()(this,t),this._config={},this._measurement={},this._matrices=[],this._dependencies=i,this.measurement(n),this.mountPoint(e),this.config(r)}return yg()(t,[{key:"serialize",value:function(){return{measurement:this.measurement(),config:this.config(),matrices:this.matrices()}}},{key:"config",value:function(t){return t?(this._config=Js(this._config||{},t),this._config.border.width=Math.max(0,this._config.border.width),this):this._config}},{key:"measurement",value:function(t){return t?(this._measurement=Js(this._measurement||{},t),this):this._measurement}},{key:"matrices",value:function(t){return t?(this._matrices=ms.typeObj(["top","center","bottom"],t),this):this._matrices}},{key:"rowMatrix",value:function(t){return t?(this._rowMatrix=t,this):this._rowMatrix}},{key:"columnMatrix",value:function(t){return t?(this._columnMatrix=t,this):this._columnMatrix}},{key:"centerMatrix",value:function(t){return t?(this._centerMatrix=t,this):this._centerMatrix}},{key:"mountPoint",value:function(t){return t?(this._mountPoint=t,this):this._mountPoint}}]),t}(),WD=(pD={},rv()(pD,"border",(dD={},rv()(dD,"style","solid"),rv()(dD,"color","#d6d6d6"),rv()(dD,"width",2),rv()(dD,"collapse",!0),rv()(dD,"spacing",0),dD)),rv()(pD,"pagination","scroll"),rv()(pD,"buffer",20),rv()(pD,"gutterSpace",{rows:[],columns:[]}),rv()(pD,"distribution",{rows:[],columns:[]}),rv()(pD,"breakPage",{rows:[],columns:[]}),rv()(pD,"isRowSizeEqual",!1),rv()(pD,"isColumnSizeEqual",!1),rv()(pD,"columnPointer",0),rv()(pD,"rowPointer",0),pD),VD=(gD={},rv()(gD,"width",100),rv()(gD,"height",100),rv()(gD,"unitWidth",100),rv()(gD,"unitHeight",100),gD),UD=jl.nest,GD=function(t){return t?{firstMeasure:"height",secondMeasure:"width"}:{firstMeasure:"width",secondMeasure:"height"}},qD=function(t,e){var n=0;for(var r in e)if(t<e[r]){n=r;break}return n},YD=function(t,e){var n=e.isTransposed,r=t[0].length>0?t[0]:t[1];return n?(r=t[0].length>0?dg()(t[0]):[],r=t[1].length>0?[].concat(dg()(r),dg()(t[1])):r):r=r.map((function(e,n){var r=[];return t[0].length>0&&(r=dg()(t[0][n])),t[1].length>0&&(r=[].concat(dg()(r),dg()(t[1][n]))),r})),r},XD=function(t,e){return t?{height:0,width:e.width}:{height:e.height,width:0}},$D=function(t,e,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=e.firstMeasure,o=e.secondMeasure,c=0,u=0;return t.values.forEach((function(e){var r,s=0,l=0;e.forEach((function(t,e){t.setAvailableSpace();var r=t.shouldConsideredInLayoutCalculation()?t.getLogicalSpace():{width:0,height:0},c=t.getMinMeasures(n[o]);l=Math.max(l,+r[o],c),i[e]=Math.max(i[e]||0,r[a]),s+=+i[e]})),u+=l,c=Math.max(c,s),t.space=(r={},rv()(r,o,Math.ceil(u)),rv()(r,a,Math.ceil(c)),r)})),r={},rv()(r,o,u),rv()(r,a,c),r},KD=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=n.isTransposed,a=void 0!==i&&i,o=n.unitMeasures,c=GD(a),u=c.firstMeasure,s=c.secondMeasure,l=e.values,f=XD(a,o),h=l;if(h.length&&h[0].key){var d,p=(d={},rv()(d,u,0),rv()(d,s,0),d);return h.forEach((function(e){var i=t(e,n,r);p[u]=Math.max(p[u],i[u],f[u]),p[s]+=+i[s]})),e.space=p,p}return $D(e,{firstMeasure:u,secondMeasure:s},f,r)},QD=function t(e,n){if(e.values[0].key){var r=[];return e.values.forEach((function(e){n?t(e,n).forEach((function(t,e){var n;r[e]=r[e]||[],(n=r[e]).push.apply(n,dg()(t))})):r.push.apply(r,dg()(t(e,n)))})),e.matrix=r,r}return e.matrix=n?e.values[0].map((function(t,n){return e.values.map((function(t){return t[n]}))})):e.values,e.matrix},ZD=function(t,e,n){var r=[],i=[];return e?t.forEach((function(t,e){e>=n?i.push(t):r.push(t)})):t.forEach((function(t,e){t.forEach((function(t,a){a>=n?(i[e]=i[e]||[],i[e].push(t)):(r[e]=r[e]||[],r[e].push(t))}))})),[r,i]},JD=function(t,e,n){return t.slice(e,-n)},tR={config:{sanitization:function(t,e){return Js(t._config||{},e)}},maxMeasures:{},availableSpace:{},logicalSpace:{}},eR={distribution:[],classPrefix:"muze",isDistributionEqual:!0,unitMeasures:{height:100,width:100,border:1},isTransposed:!1,facet:"primary",extraCellLengths:[]},nR=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gg()(this,t),this._lastLevelKey=0,this._primaryMatrix=e[0]||[],this._secondaryMatrix=e[1]||[],this._maxMeasures=[],this._availableSpace={},qs(this,tR);var r=Object.assign({},this.constructor.defaultConfig());this.config(Js(r,n)),this._layoutMatrix=YD([e[0]||[],e[1]||[]],this.config())}return yg()(t,[{key:"computeLogicalSpace",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"computeViewableSpaces",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"removeExtraCells",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getPriorityDistribution",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"calculateDepth",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"redistributeSpaces",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"redistributeViewSpaces",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getCellDimensions",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"primaryMatrix",value:function(){return arguments.length?this:this._primaryMatrix}},{key:"secondaryMatrix",value:function(){return arguments.length?this:this._secondaryMatrix}},{key:"tree",value:function(){return arguments.length?this:this._tree}},{key:"createTree",value:function(){var t=function(t){var e={},n=0,r="primary",i=UD(),a=[],o=t._layoutMatrix,c=t.primaryMatrix(),u=t.secondaryMatrix(),s=t.config(),l=s.isTransposed,f=s.breakPage;if(l){if(r=0===c.length?"primary":0===u.length?"secondary":c.length>=u.length?"primary":"secondary",c.length>0){for(var h=0;h<c.length-1;h++)a.push(h);a.push(c.length-1),"secondary"===r&&(n=c.length-1)}if(u.length>0){for(var d=c.length,p=u.length-1;p>0;p--)a.push(p+d);a.push(d),"primary"===r&&(n=d)}var g;a.forEach((function(t){var e=-1;return i.key((function(n){return e++,"".concat(n[t].valueOf(),"-").concat(qD(e,f))}))})),g=o[0].map((function(t,e){return o.map((function(t){return t[e]}))})),e=i.entries(g)}else{if(r=0===c.length?"primary":0===u.length?"secondary":c.length>=u.length?"primary":"secondary",c.length>0){for(var v=0;v<c[0].length-1;v++)a.push(v);a.push(c[0].length-1),"secondary"!==r&&0!==u.length||(n=c[0].length-1)}if(u.length>0){for(var y=c.length>0?c[0].length:0,m=u[0].length-1;m>0;m--)a.push(m+y);a.push(y),"primary"===r&&(n=y)}else n=c.length>0?c[0].length-1:0;a.forEach((function(t){var e=-1;return i.key((function(n){return e++,"".concat(n[t].valueOf(),"-").concat(qD(e,f))}))})),e=i.entries(o)}return{tree:e,lastLevelKey:n}}(this),e=t.tree,n=t.lastLevelKey;return this._lastLevelKey=n,e}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){this.availableSpace({width:t,height:e});var n=this.tree(),r=this.populateMaxMeasures("height",n),i=this.populateMaxMeasures("width",n),a=this.calculateDepth(i,r);return this.viewableMatrix=this.createViewPortMatrix(a),this.viewableMeasures=this.redistributeSpaces(t,e),this}},{key:"populateMaxMeasures",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(i[r]=Math.max(i[r]||0,e.space[t]),e.values){var a=r+1;e.values.forEach((function(e){e.space&&(i=n.populateMaxMeasures(t,e,a,i))}))}return i}},{key:"getViewableSpaces",value:function(){return this.viewableMeasures}},{key:"getViewableMatrices",value:function(){return this.viewableMatrix}},{key:"createViewPortMatrix",value:function(t){var e=[];return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,a=i._breakPointer,o=i.config(),c=o.isTransposed,u=r.tree,s=r.layoutMatrix;if(0===n){var l=ZD(u.matrix,c,a);return e.push({matrix:u.matrix,primaryMatrix:l[0],secondaryMatrix:l[1],space:u.space}),e}var f=n-1;return u.values.forEach((function(n){t(e,f,{tree:n,layoutMatrix:s},i)})),e}(e,t,this.removeExtraCells(),this),e}}],[{key:"defaultConfig",value:function(){return eR}}]),t}(),rR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gg()(this,n);var a=(r=e.call(this,t,i)).config();r._breakPointer=t[0].length>0?t[0][0].length:0,r._layoutMatrix=YD([t[0]||[],t[1]||[]],a);var o=a.cellRenderer,c=a.centerMatrixDetails,u=fg()(a.extraCellLengths,2),s=u[0],l=u[1];return r.ignoreHeaderAndBlankCell(),c&&"html"===o&&r._layoutMatrix.slice(s,r._layoutMatrix.length-l).forEach((function(t,e){t[t.length-1].overrideDimension({height:c[e]})})),r._tree={key:"rowRoot",values:r.createTree()},r._logicalSpace=r.computeLogicalSpace(),r}return yg()(n,[{key:"ignoreHeaderAndBlankCell",value:function(){var t=this.config(),e=fg()(t.extraCellLengths,2),n=e[0],r=e[1],i=this._layoutMatrix,a=i.slice(0,n),o=i.slice(i.length-r,i.length);[].concat(dg()(a),dg()(o)).forEach((function(t){return t.forEach((function(t){return t.shouldConsideredInLayoutCalculation(!1)}))}))}},{key:"computeLogicalSpace",value:function(){var t=this.tree();return QD(t,!1),KD(t,this.config(),this.maxMeasures())}},{key:"computeViewableSpaces",value:function(t){var e=this,n=t.maxHeights,r=t.maxWidths,i=t.height;return this.viewableMatrix.map((function(t,a){var o={matrixInst:t,maxWidths:r,maxHeights:n,matrixIndex:a},c=e.getCellDimensions(o),u=c.widths,s=c.rowHeights,l=c.columnWidths,f=[i,i],h=u;return{rowHeights:{primary:s[0],secondary:s[1]},columnWidths:{primary:l[0],secondary:l[1]},height:{primary:f[0],secondary:f[1]},width:{primary:h[0],secondary:h[1]}}}))}},{key:"removeExtraCells",value:function(){var t=this.config(),e=t.isTransposed,n=t.extraCellLengths,r=this._layoutMatrix,i=Js({},this.tree()),a=n[0],o=n[1]||Number.NEGATIVE_INFINITY,c=e?r.slice(0).map((function(t){return JD(t,a,o)})):JD(r,a,o);return i.values=JD(i.values,a,o),i.matrix=JD(i.matrix,a,o),{tree:i,layoutMatrix:c}}},{key:"getPriorityDistribution",value:function(t){var e,n,r=[],i=[],a=t.matrix,o=t.width,c=t.maxMeasures,u=t.maxWidth,s=t.height,l=this.config(),f=l.priority,h=l.priorityMinWidths,d=l.priorityMaxWidths,p=this.primaryMatrix().length?this.primaryMatrix()[0].length:0,g=[];e=o,n=u,(i=2===f?[p-1,p]:0===f?[p-1]:[p]).forEach((function(t){var r;g[t]=c[t],r=null!==h?Math.min(Math.max(c[t]/n,h/i.length),d/i.length)*e:c[t],g[t]=r,e-=r,n-=c[t]})),a[0].forEach((function(t,r){-1===i.indexOf(r)&&(g[r]=e*(c[r]/n))}));var v=[];a.forEach((function(t){return t.forEach((function(t,e){if(-1===i.indexOf(e)){t.setAvailableSpace(g[e],s);var n=t.getMinWidth();r[e]=Math.max(r[e]||0,Math.floor(t.getLogicalSpace().width)),v[e]=Math.max(n,v[e]||0)}else r[e]=g[e]}))}));var y=v.reduce((function(t,e){return t+(e||0)}),0);e-=y,r.forEach((function(t,a){if(-1===i.indexOf(a)){var o=c[a]/n;r[a]=Math.max(v[a]+o*e,0)}}));var m=Math.max(o-r.reduce((function(t,e){return t+e})),0);return i.forEach((function(t){r[t]=Math.floor(g[t]+m/i.length)})),r}},{key:"calculateDepth",value:function(t,e){var n,r=this.availableSpace().height;for(n=0;n<e.length&&!(e[n]<=r);n++);return Math.min(t.length-1,n)}},{key:"redistributeSpaces",value:function(t,e){var n=this,r=[],i=[],a=this.maxMeasures(),o=a.reduce((function(t,e){return t+e})),c=this.getPriorityDistribution({matrix:this._layoutMatrix,maxWidth:o,maxMeasures:a,width:t,height:e});return this.viewableMatrix.forEach((function(a){var o={mWidth:0,mHeight:0,matrix:a.matrix,width:t,height:e,maxHeights:r,maxWidths:i,logicalWidths:c},u=n.redistributeViewSpaces(o);i=u.maxWidths,r=u.maxHeights})),this.computeViewableSpaces({height:e,width:t,maxHeights:r,maxWidths:i})}},{key:"redistributeViewSpaces",value:function(t){var e,n,r=[],i=this.maxMeasures(),a=this.config(),o=a.isDistributionEqual,c=a.distribution,u=a.isTransposed,s=a.gutter,l=a.cellRenderer,f=t.matrix,h=t.height,d=t.maxHeights,p=t.maxWidths,g=t.logicalWidths;n=function(t,e){var n=0,r=0;return t.forEach((function(t){var i=t[e].getLogicalSpace();r=Math.max(r,i.width),n+=i.height})),{width:r,height:n}}(f,this._lastLevelKey).height;var v=i.reduce((function(t,e){return t+e}));t.maxMeasures=i,t.maxWidth=v,r=v>0?g:i.map((function(){return 0})),e=function(t){var e,n=0,r=0,i=t.isTransposed,a=t.distribution,o=t.availableHeight,c=t.height,u=t.isDistributionEqual,s=t.gutter,l=t.matrix,f=t.cIdx,h=t.cellRenderer;a&&void 0!==a[0]&&(n=a.reduce((function(t,e){return t+e}))),s&&void 0!==s[0]&&(r=s.reduce((function(t,e){return t+e}))),e=o-Math.floor(o*r);var d=l.length;return l.map((function(r,o){var s=r[f].getLogicalSpace().height,l="html"===h?s:s+s/c*(e-c);return i||(a.length>0&&d===a.length?l=e*a[o]/n:(u||0===t.height)&&(l=e/d)),Math.floor(l)}))}({matrix:f,cIdx:this._lastLevelKey,height:n,availableHeight:h,isDistributionEqual:o,distribution:c,isTransposed:u,gutter:s,cellRenderer:l}),p.length>0&&(r=r.map((function(t,e){return Math.max(t,p[0][e]||0)}))),p.push(r);for(var y=0;y<p.length;y++)p[y]=r;return d.push(e),{maxWidths:p,maxHeights:d}}},{key:"getCellDimensions",value:function(t){var e=this,n=this.config().unitMeasures.border,r=t.matrixInst,i=t.maxWidths,a=t.maxHeights,o=t.matrixIndex,c=r.matrix,u=[[0],[0]],s=[[0],[0]],l=[0,0],f=this._breakPointer;return c.forEach((function(t,r){t.forEach((function(t,c){var h=a[o][r]||0,d=i[o][c];t.setAvailableSpace(d-n,h-n),0===r&&c<f?(s[0][c]=d,l[0]=(l[0]||0)+d):0===r&&c>=f&&(s[1][c-f]=d,l[1]=(l[1]||0)+d),c===e._lastLevelKey&&(u[0][r]=h,u[1][r]=h)}))})),{heights:[0,0],widths:l,rowHeights:u,columnWidths:s}}}]),n}(nR),iR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};gg()(this,n);var a=(r=e.call(this,t,i)).config();r._breakPointer=t[0].length;var o=a.cellRenderer,c=a.centerMatrixDetails,u=fg()(a.extraCellLengths,2),s=u[0],l=u[1];if(c&&"html"===o){var f=r._layoutMatrix[r._layoutMatrix.length-1];f.slice(s,f.length-l).forEach((function(t,e){t.overrideDimension({width:c[e]})}))}return r._tree={key:"columnRoot",values:r.createTree()},r._logicalSpace=r.computeLogicalSpace(),r}return yg()(n,[{key:"computeLogicalSpace",value:function(){var t=this.tree();return QD(t,!0),KD(t,this.config(),this.maxMeasures())}},{key:"computeViewableSpaces",value:function(t){var e=this,n=t.maxHeights,r=t.maxWidths,i=t.height,a=t.width;return this.viewableMatrix.map((function(t,o){var c={matrixInst:t,maxWidths:r,maxHeights:n,matrixIndex:o,height:i},u=e.getCellDimensions(c),s=u.heights,l=u.rowHeights,f=u.columnWidths,h=s,d=[a,a];return{rowHeights:{primary:l[0],secondary:l[1]},columnWidths:{primary:f[0],secondary:f[1]},height:{primary:h[0],secondary:h[1]},width:{primary:d[0],secondary:d[1]}}}))}},{key:"removeExtraCells",value:function(){var t=this.config(),e=t.isTransposed,n=t.extraCellLengths,r=this._layoutMatrix,i=Js({},this.tree()),a=n[0],o=n[1]||Number.NEGATIVE_INFINITY,c=e?r.slice(0).map((function(t){return JD(t,a,o)})):JD(r,a,o);return i.values=JD(i.values,a,o),i.matrix=i.matrix.map((function(t){return JD(t,a,o)})),{tree:i,layoutMatrix:c}}},{key:"getPriorityDistribution",value:function(t){var e=t.height,n=t.maxHeights,r=e,i=[],a=[],o=2,c=this.config().priority,u=this.primaryMatrix().length;return 2===c?(a=[u-1,u],o=2):(a=0===c?[u-1]:[u],o=1),n.forEach((function(t,e){-1===a.indexOf(e)&&(i[e]=t,r-=t)})),r<0?i=i.map((function(){return 0})):a.forEach((function(t){i[t]=Math.min(n[t],r/o)})),i}},{key:"calculateDepth",value:function(t){var e,n=this.availableSpace().width;for(e=0;e<t.length&&!(t[e]<=n);e++);return Math.min(t.length-1,e)}},{key:"redistributeSpaces",value:function(t,e){var n=this,r=[],i=[];return this.viewableMatrix.forEach((function(a){var o={mWidth:0,mHeight:0,matrix:a.matrix,width:t,height:e,maxHeights:r,maxWidths:i},c=n.redistributeViewSpaces(o);i=c.maxWidths,r=c.maxHeights})),this.computeViewableSpaces({height:e,width:t,maxHeights:r,maxWidths:i})}},{key:"redistributeViewSpaces",value:function(t){var e=[],n=t.matrix,r=t.width,i=t.maxHeights,a=t.maxWidths,o=this.config().unitMeasures.border,c=function(t){var e=0,n=0;return t.forEach((function(t){var r=t.getLogicalSpace();e=Math.max(e,r.height),n+=r.width})),{width:n,height:e}}(n[this._lastLevelKey]).width,u=function(t,e){var n=t.availableWidth,r=t.width,i=t.row,a=e.isDistributionEqual,o=e.isTransposed,c=e.distribution,u=e.cellRenderer,s=0;return c&&c[0]&&(s=c.reduce((function(t,e){return t+e}))),i.map((function(t,e){var l=t.getLogicalSpace().width,f="html"===u?l:l+l/r*(n-r);if(o)if(c.length>0)f=n*c[e]/s;else if(a||0===r){var h=i.length;f=n/h}return Math.floor(f)}))}({row:n[this._lastLevelKey],width:c,availableWidth:r},this.config());n.forEach((function(t,n){return t.forEach((function(t,r){var i=t.getLogicalSpace();t.setAvailableSpace(u[r]-o,i.height),e[n]=Math.max(e[n]||0,Math.floor(t.getLogicalSpace().height))}))})),i.length>0&&(e=e.map((function(t,e){return Math.max(t,i[0][e])}))),i.push(e);for(var s=0,l=i.length;s<l;s++)i[s]=e;return a.push(u),{maxHeights:i,maxWidths:a}}},{key:"getCellDimensions",value:function(t){var e=this,n=this.config().unitMeasures.border,r=t.matrixInst,i=t.height,a=t.maxWidths,o=t.maxHeights,c=t.matrixIndex,u=r.matrix,s=[[0],[0]],l=[[0],[0]],f=[0,0],h=this._breakPointer,d=this.getPriorityDistribution({height:i,maxHeights:o[0]||[]});return u.forEach((function(t,r){t.forEach((function(t,i){var o=d[r]||0,u=a[c][i];t.setAvailableSpace(u-n,o),0===i&&r<h?(s[0][r]=o,f[0]=(f[0]||0)+o):0===i&&r>=h&&(s[1][r-h]=o,f[1]=(f[1]||0)+o),r===e._lastLevelKey&&(l[0][i]=u,l[1][i]=u)}))})),{heights:f,widths:[0,0],rowHeights:s,columnWidths:l}}}]),n}(nR);function aR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var oR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gg()(this,n),(r=e.call(this,[t],i))._logicalSpace="html"===i.cellRenderer?r.computeLogicalSpace():{detail:{}},r}return yg()(n,[{key:"computeLogicalSpace",value:function(){var t=this.primaryMatrix().map((function(t){return t.map((function(t){var e=t.source(),n=e.layers(),r=e.data(),i=n.reduce((function(t,e){var n=e.axes(),i=n.x,a=n.y,o=e.config().mark,c=e.dependencies().smartLabel,u=e.encodingFieldsInf(),s=u["".concat(o,"Field")],l=u["".concat(o,"FieldSubType")],f=r.getField(s)?r.getField(s).domain():[],h="";if("categorical"===l){var d,p=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return aR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){c=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(f);try{for(p.s();!(d=p.n()).done;){var g=d.value.toString();if(g.length>="WWWWWWWWWWWWWWWWWWWW".length){h="WWWWWWWWWWWWWWWWWWWW";break}g.length>h.length&&(h=g)}}catch(t){p.e(t)}finally{p.f()}}else h=(null==f[1]?"":f[1].toString()).length>="WWWWWWW".length?f[1].toString():"WWWWWWW";var v=c.getOriSize(h),y=v.width,m=v.height;return{width:Math.max(t.width,(y+12)*i.domain().length),height:t.height+(m+12)*a.domain().length}}),{width:0,height:0});return{width:i.width,height:i.height}}))})),e=t.map((function(t){var e=t.map((function(t){return t.height}));return Math.max.apply(Math,dg()(e))})),n=Yu(t).map((function(t){var e=t.map((function(t){return t.width}));return Math.max.apply(Math,dg()(e))}));return{width:Ku(n),height:Ku(e),detail:{rowHeights:e,columnWidths:n}}}}]),n}(nR);function cR(t,e){return t?t.getLogicalSpace()[e]:0}var uR,sR,lR,fR,hR,dR,pR,gR=function(t,e,n){t.forEach((function(t,r){t.forEach((function(t,i){t.setAvailableSpace(e[i],n[r])}))}))},vR=function(t,e,n){var r=t.config()["".concat(e,"Pointer")];return n.length-1<r&&(r=0,t.config(rv()({},"".concat(e,"Pointer"),r))),r},yR={column:{maxMeasure:"maxWidthAvailableForColumnMatrix",matrix:"columnMatrix",measureType:"width",scrollType:PP},row:{maxMeasure:"maxHeightAvailableForRowMatrix",matrix:"rowMatrix",measureType:"height",scrollType:AP}},mR=function(t,e,n,r){return function(t,e,n,r){var i=t.config(),a=i.pagination,o=i.cellRenderer,c=e.matrix,u=e.measureType,s=e.scrollType;switch(a){case"holistic":return n;default:var l=cR(t[c](),u)+r;return"html"===o?t.centerMatrix().getLogicalSpace()[u]+r>n&&t.scrollInfo(rv()({},s,!0)):l>n&&t.scrollInfo(rv()({},s,!0)),Math.max(n,l)}}(t,yR[e],n,r)},bR={isScroll:!0,pagination:"scroll"},xR=function(t){var e=t.rowMatrix(),n=t.columnMatrix(),r=function(t){var e=t.rowMatrix(),n=t.columnMatrix(),r=t.measurement().width,i=t.config(),a=i.border,o=i.buffer,c=a.width,u=cR(e,"width"),s=cR(n,"width"),l=Math.max(1-s/r,.5),f=Math.min(u+o,r*l),h=r-f-c;return{rowMatrixWidth:u,maxRowMatrixWidth:f,columnMatrixWidth:mR(t,"column",h,0),maxWidthAvailableForColumnMatrix:h}}(t),i=r.rowMatrixWidth,a=r.maxRowMatrixWidth,o=r.maxWidthAvailableForColumnMatrix,c=r.columnMatrixWidth,u=function(t,e){var n=t.measurement().height,r=t.config().buffer,i=function(t,e){var n=t.measurement().height,r=t.columnMatrix(),i=Math.min(r.getLogicalSpace().height,n/2);r.setAvailableSpace(e,i);var a=r.getViewableSpaces()[t.config().columnPointer];return{columnMatrixHeight:a.height.primary+a.height.secondary,maxColumnMatrixHeight:i}}(t,e),a=i.columnMatrixHeight,o=i.maxColumnMatrixHeight,c=n-Math.min(o,a);return{columnMatrixHeight:a,maxColumnMatrixHeight:o,rowMatrixHeight:mR(t,"row",c,r),maxHeightAvailableForRowMatrix:c}}(t,c),s=u.columnMatrixHeight,l=u.rowMatrixHeight,f=u.maxHeightAvailableForRowMatrix,h=function(t){var e=t.config().buffer,n=[PP,AP].map((function(n){return function(t,e){var n=t.scrollInfo(),r={pagination:t.config().pagination,isScroll:n[e]};return Object.keys(bR).every((function(t){return bR[t]===r[t]}))}(t,n)?e:0})),r=fg()(n,2);return{horizontalBuffer:r[0],verticalBuffer:r[1]}}(t),d=h.horizontalBuffer,p=h.verticalBuffer;e.setAvailableSpace(a-p,l-d);var g=e.getViewableSpaces(),v=n.getViewableSpaces();return vR(t,"row",g),vR(t,"column",v),function(t,e,n){var r,i,a,o,c,u=t.centerMatrix().primaryMatrix(),s=t.config().border,l=t.matrices(),f=l.top,h=l.bottom,d=s.width,p=(r=[]).concat.apply(r,dg()(e.map((function(t){return t.rowHeights.primary})))),g=(i=[]).concat.apply(i,dg()(e.map((function(t){return t.columnWidths.primary})))),v=(a=[]).concat.apply(a,dg()(e.map((function(t){return t.columnWidths.secondary})))),y=(o=[]).concat.apply(o,dg()(n.map((function(t){return t.columnWidths.primary})))),m=n[0].rowHeights.primary,b=(c=[]).concat.apply(c,dg()(n.map((function(t){return t.rowHeights.secondary}))));u.forEach((function(t,e){t.forEach((function(t,n){t.setAvailableSpace(y[n]-d,p[e]-d)}))})),gR(f[0],g,m),gR(f[2],v,m),gR(h[0],g,b),gR(h[2],v,b)}(t,g,v),{rowMatrixHeight:l-d,rowMatrixWidth:i-p,maxHeightAvailableForRowMatrix:f-d,columnMatrixHeight:s,columnMatrixWidth:c,maxWidthAvailableForColumnMatrix:o}},_R=function(t){return t.reduce((function(t,e){return t+e}),0)},wR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r,i,a){var o;return gg()(this,n),(o=e.call(this,r,i,a)).matrices(t),o.config(o.constructor.defaultConfig()),o._layoutId=gs(),o._scrollInfo={horizontal:!1,vertical:!1},o}return yg()(n,[{key:"matrices",value:function(t){return t?(this._matrices=function(t,e){var n,r,i=[],a=[],o=[],c=[],u=t.config(),s=u.isRowSizeEqual,l=u.isColumnSizeEqual,f=u.gutterSpace,h=u.distribution,d=u.border,p=u.breakPage,g=u.priority,v=u.cellRenderer,y=u.priorityMinWidths,m=u.priorityMaxWidths,b=t.measurement(),x=b.minUnitHeight,_=b.minUnitWidth,w=e.top,k=e.center,S=e.bottom,M=fg()(w,3),E=M[0],O=M[1],C=M[2],A=fg()(k,3),P=A[0],D=A[1],R=A[2],I=fg()(S,3),T=I[0],N=I[1],F=I[2];P.length>0&&(i=[].concat(dg()(E),dg()(P),dg()(T))),R.length>0&&(a=[].concat(dg()(C),dg()(R),dg()(F))),O.length>0&&O[0].length>0&&(o=O.map((function(t,e){return[].concat(dg()(E[e]),dg()(t),dg()(C[e]))}))),N.length>0&&N[0].length>0&&(c=N.map((function(t,e){return[].concat(dg()(T[e]),dg()(t),dg()(F[e]))})));var j=new oR(D,{cellRenderer:v});t.centerMatrix(j);var L=j.getLogicalSpace().detail,B=L.rowHeights,z=L.columnWidths;return t.rowMatrix(new rR([i,a],{isDistributionEqual:s,distribution:h.rows,gutter:f.rows,unitMeasures:{width:_,height:x,border:d.width},priority:g.row,breakPage:p.rows.map((function(t){return t+Math.max(E.length,C.length)})),extraCellLengths:[E.length,T.length],centerMatrixDetails:B,cellRenderer:v,priorityMinWidths:y.row,priorityMaxWidths:m.row})),n=E.length>0?E[0].length:T.length>0?T[0].length:0,r=C.length>0?C[0].length:F.length>0?F[0].length:0,t.columnMatrix(new iR([o,c],{isDistributionEqual:l,distribution:h.columns,gutter:f.columns,isTransposed:!0,unitMeasures:{width:_,height:x,border:d.width},priority:g.col,breakPage:p.columns,extraCellLengths:[n,r],centerMatrixDetails:z,cellRenderer:v})),e}(this,t),this):Sv()(kg()(n.prototype),"matrices",this).call(this,t)}},{key:"triggerReflow",value:function(){this.scrollInfo({horizontal:!1,vertical:!1});var t=xR(this),e=t.maxHeightAvailableForRowMatrix,n=t.maxWidthAvailableForColumnMatrix;return this.setViewInformation(e,n),this}},{key:"gotoPage",value:function(t,e){var n=t.toLowerCase(),r=this.viewInfo().viewMatricesInfo["".concat(n,"Pages")],i=Math.min(Math.max(1,e),r);return this.config(rv()({},"".concat(n,"Pointer"),i-1)),this.setViewInformation(),this.renderGrid(),this}},{key:"pages",value:function(t){var e=this.viewInfo().viewMatricesInfo,n=t.toLowerCase();return{totalPages:e["".concat(n,"Pages")],currentPage:this.config()["".concat(n,"Pointer")]+1}}},{key:"viewInfo",value:function(){return arguments.length?(this._viewInfo=arguments.length<=0?void 0:arguments[0],this):this._viewInfo}},{key:"scrollInfo",value:function(){return arguments.length?(this._scrollInfo=Js(this._scrollInfo,arguments.length<=0?void 0:arguments[0]),this):this._scrollInfo}},{key:"setViewInformation",value:function(t,e){var n=this.config(),r=n.rowPointer,i=n.columnPointer,a=n.border,o=function(t,e,n){for(var r=t.rowMatrix(),i=t.columnMatrix(),a=t.centerMatrix().primaryMatrix(),o=t.matrices(),c=r.getViewableMatrices(),u=i.getViewableMatrices(),s={row:0,column:0},l=e-1;l>=0;l--){var f=Math.max(c[l].primaryMatrix.length,c[l].secondaryMatrix.length);s.row+=f}for(var h=n-1;h>=0;h--){var d=u[h],p=d.primaryMatrix,g=d.secondaryMatrix,v=Math.max(p[0]?p[0].length:0,g[0]?g[0].length:0);s.column+=v}o.top[1]=u[n].primaryMatrix,o.bottom[1]=u[n].secondaryMatrix,o.center[0]=c[e].primaryMatrix,o.center[2]=c[e].secondaryMatrix;var y=Math.max(o.center[0].length,o.center[2].length),m=Math.max(o.top[1][0]?o.top[1][0].length:0,o.bottom[1][0]?o.bottom[1][0].length:0);return o.center[1]=a.slice(s.row,s.row+y).map((function(t){return t.slice(s.column,s.column+m)})),{matrices:o,rowPages:c.length,columnPages:u.length}}(this,r,i),c=function(t,e,n){var r=t.rowMatrix(),i=t.columnMatrix(),a=t.config(),o=a.columnPointer,c=a.rowPointer,u=r.getViewableSpaces()[c],s=i.getViewableSpaces()[o],l=u.rowHeights,f=u.width,h=s.columnWidths,d=s.height,p=f.primary,g=f.secondary,v=d.primary,y=d.secondary,m=_R(l.primary),b=_R(h.primary),x=[p,Math.min(b,n),g],_=[v,Math.min(m,e),y];return{viewWidth:x,viewHeight:_,actualCenterMeasures:{height:m,width:b},totalMeasures:{width:_R(x),height:_R(_)},unitHeights:l,unitWidths:h}}(this,t,e);return c.border=a,this.viewInfo({viewMatricesInfo:o,layoutDimensions:c}),this}},{key:"remove",value:function(){Object.values(this.matrices()).forEach((function(t){t.forEach((function(t){t.forEach((function(t){t.forEach((function(t){t.remove()}))}))}))}))}}],[{key:"defaultViewInfo",value:function(){return Object.assign({},{layoutDimensions:{border:this.defaultConfig().border,viewHeight:[0,0,0],viewWidth:[0,0,0]},viewMatricesInfo:{columnPages:0,rowPages:0,matrices:{top:[],center:[],bottom:[]}}})}},{key:"defaultMeasurement",value:function(){return VD}},{key:"defaultConfig",value:function(){return WD}},{key:"create",value:function(){return new n(null,null,this.defaultMeasurement(),this.defaultConfig())}}]),n}(HD),kR=function(){function t(){$A()(this,t)}return QA()(t,[{key:"data",value:function(){throw new Error(Zs.INTERFACE_IMPl)}},{key:"width",value:function(){throw new Error(Zs.INTERFACE_IMPl)}},{key:"height",value:function(){throw new Error(Zs.INTERFACE_IMPl)}},{key:"config",value:function(){throw new Error(Zs.INTERFACE_IMPl)}}]),t}(),SR="left",MR="right",ER="bottom",OR="top",CR="data",AR="axes",PR="facetByFields",DR="fields",RR="transform",IR="layerDef",TR="config",NR="detailFields",FR=function(){function t(e){gg()(this,t),this._id=gs();var n=Js({},this.constructor.defaultConfig());this._config=Js(n,e||{}),this._mount=null,this._shouldConsideredInLayoutCalculation=!0}return yg()(t,[{key:"type",get:function(){return"simple"}},{key:"valueOf",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"id",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getLogicalSpace",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"setAvailableSpace",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"render",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"remove",value:function(){throw new Error(Zs.INTERFACE_IMPL)}},{key:"getMinMeasures",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return t}},{key:"shouldConsideredInLayoutCalculation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 0==t&&(this._shouldConsideredInLayoutCalculation=!1),this._shouldConsideredInLayoutCalculation}}],[{key:"formalName",value:function(){return"SimpleCell"}},{key:"defaultConfig",value:function(){return{}}}]),t}(),jR=(hR={},rv()(hR,"margin",(uR={},rv()(uR,SR,0),rv()(uR,MR,0),rv()(uR,OR,0),rv()(uR,ER,0),uR)),rv()(hR,"spaceFixer",2),rv()(hR,"isOffset",!1),rv()(hR,"verticalAlign",null),rv()(hR,"textAlign","center"),rv()(hR,"show",!0),rv()(hR,"maxLines",0),rv()(hR,"minCharacters",0),rv()(hR,"rotation",null),rv()(hR,"padding",(sR={},rv()(sR,SR,8),rv()(sR,MR,8),rv()(sR,OR,3),rv()(sR,ER,0),sR)),rv()(hR,"headerPadding",(lR={},rv()(lR,SR,8),rv()(lR,MR,5),rv()(lR,OR,2),rv()(lR,ER,5),lR)),rv()(hR,"titlePadding",(fR={},rv()(fR,SR,0),rv()(fR,MR,0),rv()(fR,OR,0),rv()(fR,ER,0),fR)),hR),LR={mount:{},availHeight:{},availWidth:{},config:{sanitization:function(t,e){return Js(t._config,e)}},logicalSpace:{},minSpacing:{},source:{}},BR=(dR={},rv()(dR,"geom",Js({data:{},caption:{},config:{},axes:{},facetByFields:{},fields:{},transform:{},layerDef:{},detailFields:{}},LR)),rv()(dR,"text",Js({smartText:{}},LR)),rv()(dR,"axis",LR),rv()(dR,"blank",LR),dR),zR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this,t))._axis=null,r._availHeight=null,r._availWidth=null,r._logicalSpace=null,r._overriddenDimension={},qs(oC()(r),BR.axis),r}return yg()(n,[{key:"type",get:function(){return"axis"}},{key:"valueOf",value:function(){return this.source().id}},{key:"id",get:function(){return this._id}},{key:"serialize",value:function(){return{type:"axis",axis:this.source().serialize()}}},{key:"overrideDimension",value:function(t){return null==t?this._overriddenDimension:(this._overriddenDimension=t,this)}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(function(t){var e,n,r=t.source(),i=t.config(),a=i.spaceFixer,o=i.margin,c=t.overrideDimension();r.overrideDimension&&r.overrideDimension(c);var u=r.getLogicalSpace(),s=u.width,l=u.height;return!0===r.config().show?(n=c.height?l:Math.floor(l+o.top+o.bottom+a),e=c.width?s:Math.floor(s+o.left+o.right+a)):(e=s,n=l),{width:e,height:n}}(this)),this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){this.availWidth(t),this.availHeight(e);var n=this.config(),r=n.margin,i=n.isOffset;return t||e?(this.source().setAvailableSpace(t,e,r,i),this.source().logicalSpace(null)):this.source().resetLogicalSpace(),this.logicalSpace(null),this}},{key:"render",value:function(t,e){if(!t)return this;var n=0,r=0,i=this.source(),a=this.availHeight(),o=this.availWidth(),c=this.config().margin,u=c.top,s=c.bottom,l=c.left,f=c.right,h=i.config(),d=h.show,p=h.orientation,g=dp(hp(t),"div",[this],"".concat("muze","-").concat("axis-cell")),v=dp(g,"html"===this.config().renderer?"div":"svg",[1],"".concat("muze","-axis-container"));return v.classed("".concat("muze","-axis-container-").concat(p),!0),this.mount(t),o||v.attr("width","".concat(0,"px")),a||v.attr("height","".concat(0,"px")),n=o,r=a,d||(n=p===OR||p===ER?o:0,r=p===OR||p===ER?0:a),g.style("width","".concat(n,"px")).style("height","".concat(r,"px")).style("margin-top",u).style("margin-bottom",s).style("margin-left",l).style("margin-right",f),i.mount(v.node()),i.render(i.mount(),e),v}},{key:"remove",value:function(){return this.source()&&this.source().remove(),this.mount()&&this.mount().remove(),this}},{key:"getMinWidth",value:function(){return this.getLogicalSpace().width}}],[{key:"formalName",value:function(){return"AxisCell"}},{key:"defaultConfig",value:function(){return jR}}]),n}(FR),HR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),r=e.call(this,t),qs(oC()(r),BR.blank),r}return yg()(n,[{key:"type",get:function(){return"blank"}},{key:"valueOf",value:function(){return this.id}},{key:"id",get:function(){return this._id}},{key:"serialize",value:function(){return{type:"blank"}}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()?this.logicalSpace():{width:this.width||0,height:this.height||0}}},{key:"setAvailableSpace",value:function(t,e){return this.availWidth(t),this.availHeight(e),this.logicalSpace(null),this}},{key:"render",value:function(t){if(t){var e=this.config().style;this.mount(t);var n=hp(t),r=dp(n,"div",[this.id]);r.classed("".concat("muze","-").concat("blank-cell"),!0),r.style("width","".concat(this.availWidth(),"px")),r.style("height","".concat(this.availHeight(),"px")),r.html(""),e&&pp(r,e)}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this}},{key:"getMinMeasures",value:function(){return 0}},{key:"getMinWidth",value:function(){return 0}}],[{key:"defaultConfig",value:function(){return jR}},{key:"formalName",value:function(){return"BlankCell"}}]),n}(FR),WR=(n(108),function(t){var e=t.source(),n=t.minSpacing(),r=n.height,i=n.width,a=t.config(),o=a.margin,c=a.rotation,u=o.left,s=o.right,l=o.top+o.bottom+r,f=u+s+i,h=t.availHeight()-l,d=t.availWidth()-f,p=t.dependencies().labelManager;return p.setStyle(t._computedStyle),!c&&t.smartText(p.getSmartText(e,d,h,!1)),c&&t.smartText(p.getSmartText(e,h,d,!0)),t}),VR=function(t){var e=!1;return t!=="".concat("title")&&t!=="".concat("subtitle")&&"columnHeader"!==t||(e=!0),e},UR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t,r){var i;gg()(this,n),(i=e.call(this,t))._dependencies=r,i._overriddenDimension={},i._className=i._config.className||("header"===i._config.type?"".concat("muze","-").concat("header","-cell"):"".concat("muze","-").concat("text","-cell")),!1===i._config.useExternalCSS?i._computedStyle=i._config.style:i._computedStyle=Ap(hp("body"),i._className),i._dependencies.labelManager.setStyle(i._computedStyle),qs(oC()(i),BR.text);var a=i._dependencies.labelManager.getOriSize("w");return i._minTextSpace=a.width,i.minSpacing({width:Math.floor(3*a.width/4),height:Math.floor(a.height/2)}),WR(oC()(i)),i}return yg()(n,[{key:"type",get:function(){return"text"}},{key:"valueOf",value:function(){return this.source()}},{key:"id",get:function(){return this._id}},{key:"dependencies",value:function(){return this._dependencies}},{key:"serialize",value:function(){return{text:this.source(),type:"text"}}},{key:"overrideDimension",value:function(t){return null==t?this._overriddenDimension:(this._overriddenDimension=t,this)}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(function(t){var e=t.dependencies().labelManager,n=t.minSpacing(),r=n.height,i=n.width,a=t.config(),o=a.margin,c=a.show,u=a.maxLines,s=a.minCharacters,l=o.left,f=o.right,h=o.top,d=o.bottom,p=t.overrideDimension(),g=p.height?0:h+d+r,v=p.width?0:l+f+i,y=t.availHeight()-g,m=t.availWidth()-v,b=t.source(),x=t.smartText(),_=new Array(s).fill("W").join(""),w=e.getOriSize(_);if(t.config({rotation:!1}),x.width>(m||0)&&u&&(x.height=x.oriTextHeight*u),m&&m<x.width&&(x.width=w.width),m&&m<Math.min(w.width,x.oriTextWidth)){var k=e.getSmartText(b,y,w.height,!0),S=k.height,M=k.width;x.width=M,x.height=S,t.config({rotation:!0}),t.smartText(k)}var E=t.config(),O=E.subType,C=E.headerPadding;return VR(O)||(x.width+=C[SR]+C[MR]),c?p.height?(x.height=p.height,{width:Math.ceil(x.width)+v,height:x.height}):p.width?(x.width=p.width,{width:x.width,height:Math.ceil(x.height)+g}):{width:Math.ceil(x.width)+v,height:Math.ceil(x.height)+g}:{width:0,height:0}}(this)),this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){return this.availWidth(t),this.availHeight(e),WR(this),this.logicalSpace(null),this}},{key:"render",value:function(t){var e=this.availWidth(),n=this.availHeight(),r=this.config(),i=r.margin,a=r.show,o=r.verticalAlign,c=r.textAlign,u=r.rotation,s=r.padding,l=r.type,f=r.headerPadding,h=r.className,d=r.titlePadding,p=r.useExternalCSS,g=this._computedStyle.display;if(this.mount(t),a){var v=hp(t),y=dp(v,"div",[this.id],"".concat("muze","-").concat("text-cell")),m=o||u?"middle":"top",b=this.smartText(),x=b.width,_=b.height,w=this.minSpacing().height,k={top:x+w/2,middle:x/2+w,bottom:w};v.style("vertical-align",m),y.classed(this._className,!0),!1===p&&Object.entries(this._computedStyle).forEach((function(t){var e=fg()(t,2),n=e[0],r=e[1];y.style(n,r)})),y.style("display",g||"inline"),y.style("transform",u?"translate(".concat(_/2,"px,\n                ").concat(k[m],"px) rotate(-90deg)"):""),y.style("width",e?"".concat(e,"px"):"100%"),[OR,ER,SR,MR].forEach((function(t){v.style("margin-".concat(t),"".concat(i[t],"px"))}));var S=function(t){var e,n=t.headerPadding,r=t.padding,i=t.type,a=t.titlePadding,o=t.availWidth;return VR(t.className)?e=a:"header"===i?e=n:"rowFacetHeader"===i?o<(e=Object.assign({},r)).left+e.right&&(e.left=0,e.right=0):e=r,e}({className:h,headerPadding:f,padding:s,type:l,titlePadding:d});y=function(t,e){return[OR,ER,SR,MR].forEach((function(n){t.style("padding-".concat(n),"".concat(e[n],"px"))})),t}(y,S),"muze-grid-headers"===this._className&&y.style("text-align",c),y.style("display",g||"inline"),this._dependencies.labelManager.setStyle(this._computedStyle);var M=this._dependencies.labelManager.getSmartText(this.source(),e-S[SR]-S[MR],n,!0).text;if("columnFacetHeader"===l){var E=dp(y,"div",[null]);E.text(M),E.style("position","sticky"),E.style("left","0")}else"rowFacetHeader"===l?(y.text(M),y.style("position","sticky"),y.style("top","0")):y.html(M)}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this}},{key:"getMinWidth",value:function(){var t=this.config().padding;return t.left+t.right+this._minTextSpace}}],[{key:"defaultConfig",value:function(){return jR}},{key:"formalName",value:function(){return"TextCell"}}]),n}(FR),GR=function(t){bg()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=kg()(t);if(e){var i=kg()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _g()(this,n)}}(n);function n(t){var r;return gg()(this,n),(r=e.call(this,t))._unit=null,r._layers=null,r._axes={},r._datamodel={},r._facetByFields={},r._fields=null,r._transform=null,r._caption=null,qs(oC()(r),BR.geom),r}return yg()(n,[{key:"type",get:function(){return"geom"}},{key:"valueOf",value:function(){return this.source()}},{key:"id",get:function(){return this.source().id()}},{key:"serialize",value:function(){return{type:"geom",unit:this.source().serialize(),caption:this.caption()}}},{key:"updateModel",value:function(){var t=this,e=this.source();return e.clearCaching(),e.lockLocalModel(),[PR,NR,AR,DR,TR,RR,IR,CR].forEach((function(n){t[n]()&&e[n](t[n]())})),e.unlockLocalModel(),this}},{key:"getCaptionSpace",value:function(){var t=this.caption(),e={width:0,height:0};return t&&(e=t.getLogicalSpace()),e}},{key:"getLogicalSpace",value:function(){var t,e,n,r;return this.logicalSpace()||this.logicalSpace((n=(e=(t=this).source().config()).width,r=e.height,{width:Math.ceil(n),height:Math.ceil(r+t.getCaptionSpace().height)})),this.logicalSpace()}},{key:"setAvailableSpace",value:function(t,e){var n=this.source();return this.availWidth(t),this.availHeight(e),n.lockModel().width(t).height(e-this.getCaptionSpace().height).unlockModel(),this.logicalSpace(null),this}},{key:"render",value:function(t,e){if(t){this.mount(t);var n=this.availHeight(),r=this.availWidth(),i=this.caption(),a=dp(hp(t),"div",[1],"".concat("muze","-").concat("geom-cell"));if(i){var o=dp(a,"div",[i],"".concat("muze","-unit-caption")).node();i.render(o)}var c=dp(a,"div",[1],"".concat("muze","-unit"));a.style("width","".concat(r,"px")).style("height","".concat(n,"px")),c.style("width","".concat(r,"px")).style("height","".concat(n-this.getCaptionSpace().height,"px")),this.source().mount(c.node()).render(this.source().mount(),e)}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this.source().remove(),this}}],[{key:"formalName",value:function(){return"GeomCell"}},{key:"defaultConfig",value:function(){return jR}}]),n}(FR),qR=(pR={},rv()(pR,"SimpleCell",FR),rv()(pR,"TextCell",UR),rv()(pR,"AxisCell",zR),rv()(pR,"GeomCell",GR),rv()(pR,"BlankCell",HR),pR),YR=function t(){var e=qR;return{register:function(n){var r=n.formalName();return r in e&&(e[r]=n),t},get:function(){return e}}},XR=function(t){return"function"!=typeof t||t._sanitize?El(t()):t()};function $R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function KR(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$R(Object(n),!0).forEach((function(e){_C()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var QR,ZR=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r;return $A()(this,n),(r=e.call(this,t.name,t.component.getLogicalSpace(),0)).setParams(t),r}return QA()(n,[{key:"renderHeader",value:function(t){var e=this.params.config;t=hp(t);var n=e.align,r=t.selectAll(".".concat(e.classPrefix,"-inner-container")).data([this.name]);r.exit().remove();var i=r.enter().append("div").merge(r);i.classed("".concat(e.classPrefix,"-inner-container"),!0);var a=this.boundBox(),o=a.height,c=a.width;this.component.setAvailableSpace(c,o),this.component&&this.component.render(i.node()),i.selectAll("div").classed("".concat(e.classPrefix,"-inner-content"),!0),i.style("width","".concat(100,"%")),e&&this.component&&i.style("float",LA).style("text-align",n)}},{key:"draw",value:function(t){this.renderHeader(t||document.getElementById(this.renderAt()))}},{key:"updateWrapper",value:function(t){return this.setParams(t),this.name(t.name),this.boundBox(t.component.getLogicalSpace()),this}},{key:"setParams",value:function(t){this.component=t.component,this.params=t,this.target(t.config.target),this.position(t.config.position),this.className(t.config.className),this.alignWith(t.config.alignWith),this.alignment(t.config.alignment)}},{key:"setSpatialConfig",value:function(t){this.boundBox({top:t.y,left:t.x,width:t.width,height:t.height}),this.renderAt(t.renderAt)}}]),n}(GP),JR=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r;$A()(this,n);var i=t.config.position;return(r=e.call(this,t.name,t.config.measurement.legendSpace[i],0)).setParams(t),r}return QA()(n,[{key:"renderLegend",value:function(t){t=hp(t);var e=[],n=this.params.config,r=n.position,i=n.classPrefix,a=dp(t,"div",[this.components],"".concat(i,"-inner-content"),{},(function(t){return t}));a.classed("".concat(i,"-legend"),!0);var o=r===LA||r===BA?"vertical":"horizontal",c=this.newDimensions.width,u=this.newDimensions.height;if([t,a].forEach((function(t){t.style("width","".concat(Math.floor(c),"px")).style("height","".concat(u,"px")).style("float",LA)})),"vertical"===o){var s=-1,l=u,f=0;this.components.forEach((function(t){var n=t.legend;n.measurement().height>l?(s++,f=0,l=u):s<0&&s++,e[s]=e[s]||[],l-=Math.min(n.measurement().height,l),f=Math.max(Math.min(n.measurement().width,n.measurement().maxWidth),f),e[s].push({legend:n,legendHeight:u,legendWidth:f})}));var h=dp(a,["div"],e,"".concat(i,"-legend-section"));h.classed("".concat(i,"-legend-vertical-section"),!0).style("width",(function(t){return"".concat(t[0].legendWidth,"px")})),dp(h,["div"],(function(t){return t}),"".concat(i,"-legend-components"),{},(function(t){return t.legend.id()})).each((function(t){t.legend.mount(this)})).style("width",(function(t){return"".concat(t.legendWidth,"px")}))}else{var d=dp(a,"div",[1],"".concat(i,"-legend-section"));d.classed("".concat(i,"-legend-horizontal-section"),!0),d.classed("".concat(i,"-legend-section-",0),!0).style("width","".concat(c,"px")),dp(d,"div",this.components,"".concat(i,"-legend-components"),{},(function(t){return t.legend.id()})).style("width",(function(t){return"".concat(t.legend.measurement().width,"px")})).each((function(t){t.legend.mount(this)}))}}},{key:"draw",value:function(t){this.renderLegend(t||document.getElementById(this.renderAt()))}},{key:"updateWrapper",value:function(t){var e=t.config.position;return this.name(t.name),this.boundBox(t.config.measurement.legendSpace[e]),this.setParams(t),this}},{key:"setParams",value:function(t){this.components=t.component,this.params=t,this.target(t.config.target),this.position(t.config.position);var e=function(t){var e=null,n="".concat(OP[1],"-").concat(CP[1]);switch(t){case HA:case zA:e="h-center";break;case LA:case BA:e="v-center";break;default:e="v-center"}return{alignment:e,alignWith:n}}(t.config.position),n=e.alignWith,r=e.alignment;this.className(t.config.className),this.alignWith(t.config.alignWith||n),this.alignment(t.config.alignment||r)}},{key:"setComponentInfo",value:function(t){var e=t.rootNode;this.components.forEach((function(t){t.legend.setParentInfo({canvasRoot:e})}))}}]),n}(GP),tI=n(32),eI=n.n(tI),nI=(n(110),Cp()),rI={left:"width",right:"width",top:"height",bottom:"height"},iI=function(t,e,n){var r=0;return(t.primary&&t.primary.length?t.primary:t.secondary).map((function(t){var i=100*r/(e-n);return r+=t,i}))},aI=function(t,e,n){var r=n.classPrefix,i=n.thickness,a=dp(t,"div",[e],"".concat(r,"-scroll-arrow-").concat(e));return a.classed("".concat(r,"-scroll-arrow"),!0),a.style(rI[e],"".concat(i,"px")),dp(a,"div",[1],"".concat(r,"-scroll-arrow-chevron")).attr("id","".concat(r,"-scroll-arrow-chevron-").concat(e)),a},oI=function(t,e){var n=e.classPrefix,r=dp(t,"div",[1],"".concat(n,"-scroll-rect"));return{rect:r,mover:dp(r,"div",[1],"".concat(n,"-scroll-mover"))}},cI=function(t,e,n){var r=t.mover,i=t.rect,a=r.node().getBoundingClientRect(),o=a.x,c=a.y,u=i.node().getBoundingClientRect(),s=u.x,l=u.y;e.changeMoverPosition({x:o-s+n,y:c-l+n})},uI=function(t,e,n,r){var i="",a=t._components[n],o=Pp();a.on(o?"touchstart":"mousedown",(function(){Op().preventDefault(),clearInterval(i),i=setInterval((function(){cI(e,t,r)}),100)})).on(o?"touchend":"mouseup",(function(){Op().preventDefault(),clearInterval(i)})).on("click",(function(){clearInterval(i),cI(e,t,r)})).on("mouseout",(function(){clearInterval(i)}))},sI=function(t,e,n,r){var i=e.classPrefix,a=dp(hp(t),"div",[1],"#".concat(i,"-scroll-bar-").concat(r));return a.classed("".concat(i,"-scroll-bar"),!0),a.style("width","".concat(n.width,"px")),a.style("height","".concat(n.height,"px")),a},lI={config:{sanitization:function(t,e){return Js(t._config,e)}},manager:{},unitPositions:{},logicalSpace:{}},fI=function(){function t(){$A()(this,t),this._components={},this._logicalSpace={},this._attachedScrollAction=function(){},this._config={thickness:10,speed:2},this._unitPositions=null,qs(this,lI)}return QA()(t,[{key:"emptyScrollAreaClick",value:function(){throw new Zs("Method not implemented")}},{key:"changeMoverPosition",value:function(){throw new Zs("Method not implemented")}},{key:"scrollTo",value:function(){throw new Zs("Method not implemented")}},{key:"scrollDeltaTo",value:function(){throw new Zs("Method not implemented")}},{key:"createScroll",value:function(t){var e=this.config();return{scrollBarContainer:sI(t,e,this.logicalSpace(),this.constructor.type())}}},{key:"attachScrollAction",value:function(t){return this._attachedScrollAction=t,this}},{key:"detachScrollAction",value:function(){return this._attachedScrollAction=function(){},this}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()}},{key:"registerListeners",value:function(){return function(t){var e=t._components.moverRect,n=t.config().speed;uI(t,e,"prevArrow",-n),function(t,e){var n={},r=0,i=0,a={},o=e.mover,c=e.rect;o.call(nI().on("start",(function(){var t=Op();r=o.node().getBoundingClientRect(),i=c.node().getBoundingClientRect(),n={x:t.x,y:t.y}})).on("drag",(function(){var e=Op(),o=Is(),c=(a={x:e.x,y:e.y}).x-n.x,u=a.y-n.y,s={x:r.x+c-i.x+o.pageXOffset,y:r.y+u-i.y+o.pageYOffset};t.changeMoverPosition(s)})))}(t,e),function(t,e){e.rect.on("click",(function(){var e=Op();t.emptyScrollAreaClick(e)}))}(t,e),uI(t,e,"nextArrow",n)}(this),this}},{key:"remove",value:function(){return this._components.scrollBarContainer.remove(),this}}],[{key:"type",value:function(){throw new Zs("Method not implemented")}}]),t}(),hI={horizontal:function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(){return $A()(this,n),e.apply(this,arguments)}return QA()(n,[{key:"createScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.logicalSpace(),r=this.config(),i=eI()(lP()(n.prototype),"createScroll",this).call(this,t,r,e),a=i.scrollBarContainer,o=aI(a,"left",r),c=oI(a,r),u=aI(a,"right",r),s=c.mover,l=c.rect,f=this.logicalSpace(),h=f.height,d=f.width,p=f.totalLength,g=f.viewLength,v=f.unitWidths,y=d-2*h;l.style("width","".concat(e.width-2*h,"px")),l.style("height","".concat(100,"%")),s.style("width","".concat(g*y/p,"px")),s.style("height","".concat(100,"%")),s.style(LA,"".concat(0,"px")),this._components={prevArrow:o,nextArrow:u,moverRect:c,scrollBarContainer:a},this._scrollBarWithouArrowLength=y,this.unitPositions(iI(v,p,g)),this.registerListeners()}},{key:"emptyScrollAreaClick",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=this.config().speed,a=n.node().getBoundingClientRect(),o=a.x,c=a.y,u=r.node().getBoundingClientRect(),s=u.x,l=u.y,f=10*i;t.x<o&&(f=10*-i),this.changeMoverPosition({x:o-s+f,y:c-l+f})}},{key:"changeMoverPosition",value:function(t){var e,n=this._components.moverRect,r=n.mover,i=n.rect.node().getBoundingClientRect(),a=r.node().getBoundingClientRect(),o=this.logicalSpace().totalLength;e=t.x<0?0:t.x+a.width>i.width?i.width-a.width:t.x,r.style(LA,"".concat(e,"px"));var c=e*o/this._scrollBarWithouArrowLength;this.manager().performAttachedScrollFunction(this.constructor.type(),c)}},{key:"scrollDeltaTo",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=n.node().getBoundingClientRect(),a=r.node().getBoundingClientRect();return this.changeMoverPosition({y:0,x:i.x-a.x-t}),this}},{key:"scrollTo",value:function(t){var e=this._components.moverRect.mover.node().getBoundingClientRect(),n=t*(this._scrollBarWithouArrowLength-e.width)/100;return this.changeMoverPosition({y:0,x:n}),this}}],[{key:"type",value:function(){return"horizontal"}}]),n}(fI),vertical:function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(){return $A()(this,n),e.apply(this,arguments)}return QA()(n,[{key:"createScroll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.logicalSpace(),r=this.config(),i=eI()(lP()(n.prototype),"createScroll",this).call(this,t,e),a=i.scrollBarContainer,o=aI(a,"top",r),c=oI(a,r),u=aI(a,"bottom",r),s=c.mover,l=c.rect,f=this.logicalSpace(),h=f.height,d=f.width,p=f.totalLength,g=f.viewLength,v=f.unitHeights,y=h-2*d;l.style("height","".concat(y,"px")),l.style("width","".concat(100,"%")),s.style("width","".concat(100,"%")),s.style("height","".concat(g*y/p,"px")),s.style(HA,"".concat(0,"px")),this._components={prevArrow:o,nextArrow:u,moverRect:c,scrollBarContainer:a},this._scrollBarWithouArrowLength=y,this.unitPositions(iI(v,p,g)),this.registerListeners()}},{key:"emptyScrollAreaClick",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=this.config().speed,a=n.node().getBoundingClientRect(),o=a.x,c=a.y,u=r.node().getBoundingClientRect(),s=u.x,l=u.y,f=10*i;t.y<c&&(f=10*-i),this.changeMoverPosition({x:o-s+f,y:c-l+f})}},{key:"changeMoverPosition",value:function(t){var e,n=this._components.moverRect,r=n.mover,i=n.rect,a=this.logicalSpace().totalLength,o=i.node().getBoundingClientRect(),c=r.node().getBoundingClientRect();e=t.y<0?0:t.y+c.height>o.height?o.height-c.height:t.y,r.style(HA,"".concat(e,"px"));var u=e*a/this._scrollBarWithouArrowLength;this.manager().performAttachedScrollFunction(this.constructor.type(),u)}},{key:"scrollDeltaTo",value:function(t){var e=this._components.moverRect,n=e.mover,r=e.rect,i=n.node().getBoundingClientRect(),a=r.node().getBoundingClientRect();return this.changeMoverPosition({y:i.y-a.y-t,x:0}),this}},{key:"scrollTo",value:function(t){var e=this._components.moverRect.mover.node().getBoundingClientRect(),n=t*(this._scrollBarWithouArrowLength-e.height)/100;return this.changeMoverPosition({x:0,y:n}),this}}],[{key:"type",value:function(){return"vertical"}}]),n}(fI)},dI=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r;$A()(this,n);var i=hI[t.config.type];return t.component=new i,t.component.config(t.config.scrollBarComponentConfig),t.component.logicalSpace(t.dimensions),(r=e.call(this,t.name,t.component.getLogicalSpace(),0)).setParams(t),r}return QA()(n,[{key:"manager",value:function(){return arguments.length?(this.component.manager(arguments.length<=0?void 0:arguments[0]),this):this.component.manager()}},{key:"scrollDeltaTo",value:function(t){return this.component.scrollDeltaTo(t),this}},{key:"scrollTo",value:function(t){return this.component.scrollTo(t),this}},{key:"scrollToUnitIndex",value:function(t){var e=this.component.unitPositions(),n=Math.min(Math.max(0,t),e.length-1);return this.component.scrollTo(e[n]),this}},{key:"getScrollPositionsForUnits",value:function(){return this.component.unitPositions()}},{key:"draw",value:function(t){return this.component.createScroll(t||document.getElementById(this.renderAt())),this}},{key:"attachScrollAction",value:function(t){return this.component.attachScrollAction(t),this}},{key:"detachScrollAction",value:function(){return this.component.detachScrollAction(),this}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.component.config(t.config.scrollBarComponentConfig),this.component.logicalSpace(t.dimensions),this.boundBox(this.component.getLogicalSpace()),this.setParams(t),this}},{key:"setParams",value:function(t){this.component=t.component||this.component,this.params=t,this.target(t.config.target),this.position(t.config.position),this.className(t.config.className),this.alignWith(t.config.alignWith),this.alignment(t.config.alignment)}},{key:"remove",value:function(){this.component.remove()}}]),n}(GP),pI=function(t,e){var n=SD.baseFontLimit,r=SD.upperFontLimit,i=SD.baseSizeLimit,a=SD.upperSizeLimit,o=r,c=t<e&&0!==t?t:e;return 0===c?o=0:c<=i?o=n:c>i&&c<a&&(o=n+(a-c)/((a-i)/(r-n))),o},gI=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r;return $A()(this,n),(r=e.call(this,t.name,t.config.dimensions,0)).setParams(t),r}return QA()(n,[{key:"render",value:function(t){var e=hp(t),n=this.params.config,r=n.classPrefix.className,i=dp(e,"div",[1],r),a=n.dimensions,o=a.height,c=a.width,u=o>SD.baseSizeLimit?SD.fractionChild*o:0,s=n.message;pp(i,{width:"".concat(c,"px"),height:"".concat(o,"px")});var l=dp(i,"div",[1],"".concat(r,"-child")),f=dp(l,"div",[1],"".concat(r,"-child-img")),h=dp(l,"div",[1],"".concat(r,"-child-message"));pp(l,{width:c,height:"".concat(u,"px")}),pp(f,{width:c,height:"".concat(u*SD.fractionImage,"px")}),f.html('<svg width="215px" height="199px" viewBox="0 0 215 199" \nversion="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n\x3c!-- Generator: Sketch 60.1 (88133) - https://sketch.com --\x3e\n\n<title>Group 23</title>\n    <desc>Created with Sketch.</desc>\n    <defs>\n        <polygon id="path-1" points="0.149161328 0.420711883 72.119 0.420711883 \n        72.119 71.9995421 0.149161328 71.9995421"></polygon>\n        <polygon id="path-3" points="0 0.08 186.190753 0.08 186.190753 88.592 0 88.592"></polygon>\n    </defs>\n    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Group-23" transform="translate(0.000000, -1.000000)">\n            <g id="Group-3" transform="translate(142.000000, 127.920000)">\n                <mask id="mask-2" fill="white">\n                    <use xlink:href="#path-1"></use>\n                </mask>\n                <g id="Clip-2"></g>\n                <path d="M0.163,36.1555 C0.163,28.8495 0.126,21.5445 0.173,14.2395 \n                C0.226,6.1165 4.776,0.7895 12.76,0.6405 C28.362,0.3505 43.979,0.3335 \n                59.58,0.6735 C67.574,0.8475 72.079,6.2375 72.096,14.3735 C72.125,28.9835 \n                72.129,43.5935 72.094,58.2045 C72.074,66.4205 67.223,71.7225 58.955,71.8405 \n                C43.682,72.0565 28.4,72.0515 13.128,71.8315 C4.928,71.7135 0.221,66.4315 \n                0.172,58.0705 C0.129,50.7655 0.163,43.4605 0.163,36.1555" id="Fill-1" \n                fill="#8c8d8e" mask="url(#mask-2)"></path>\n            </g>\n            <g id="Group-6" transform="translate(0.000000, 0.920000)">\n                <mask id="mask-4" fill="white">\n                    <use xlink:href="#path-3"></use>\n                </mask>\n                <g id="Clip-5"></g>\n                <path d="M183.4677,4.615 C174.5697,3.72 165.6917,2.607 156.8037,1.597 C152.7477,1.136 \n                147.5417,-0.986 144.9347,0.755 C142.0737,2.664 143.7187,8.515 142.6187,12.488 C141.7057,\n                15.785 143.1607,16.531 146.0297,16.716 C149.3127,16.928 152.5717,17.483 156.6277,17.987 \n                C137.8927,32.589 119.9087,46.473 102.1267,60.61 C99.4257,62.757 98.2077,62.204 96.1947,\n                60.05 C85.5357,48.644 74.6947,37.409 64.0607,25.979 C61.8547,23.608 60.5757,23.002 57.8627,\n                25.586 C51.9777,31.188 45.6137,36.286 39.4547,41.6 C26.7597,52.553 14.0947,63.54 1.3487,\n                74.433 C-0.2963,75.838 -0.4833,76.732 1.0457,78.354 C4.1127,81.609 6.9717,85.061 10.0567,\n                88.592 C26.7507,74.17 43.3037,59.87 59.9757,45.469 C71.5287,57.708 82.9977,69.719 94.2677,\n                81.914 C96.5347,84.368 98.0097,84.604 100.6707,82.492 C116.3907,70.016 132.2397,57.704 \n                148.0587,45.353 C153.9727,40.736 159.9197,36.162 165.9517,31.491 C167.0647,36.458 163.2367,\n                42.055 165.8357,44.513 C168.4597,46.994 174.2387,46.065 178.6037,46.814 C180.5447,47.148 \n                181.1657,46.627 181.4047,44.671 C182.9067,32.336 184.5297,20.016 186.1377,7.696 C186.4127,\n                5.593 185.6327,4.833 183.4677,4.615" id="Fill-4" fill="#8c8d8e" mask="url(#mask-4)"></path>\n            </g>\n            <path d="M68.7436,89.5418 C63.2716,89.6988 57.7836,89.7768 52.3196,89.5178 C49.1866,89.3688 \n            48.3926,90.4028 48.4386,93.4328 C48.6076,104.5468 48.5056,115.6668 48.5056,126.7838 C48.5056,\n            138.0668 48.5916,149.3518 48.4436,160.6328 C48.4076,163.4118 49.1436,164.3578 52.0056,164.2518 \n            C57.8066,164.0398 63.6226,164.0938 69.4276,164.2338 C71.7586,164.2898 72.5516,163.6408 72.5416,\n            161.1938 C72.4536,138.4608 72.4326,115.7288 72.556775,92.9968 C72.5736,89.9318 71.3526,89.4668 \n            68.7436,89.5418" id="Fill-7" fill="#8c8d8e"></path>\n            <path d="M144.3769,91.2962 C138.9019,91.4772 133.4019,91.5912 127.9409,91.2652 C124.4229,91.0562 \n            123.8999,92.4662 123.9449,95.5182 C124.1039,106.3102 124.0069,117.1072 124.0069,127.9012 C124.0079,\n            137.3672 124.0079,146.8332 124.0079,156.3002 C124.0079,164.4422 124.0079,164.3082 132.1549,\n            164.2632 C134.9749,164.2472 135.8559,163.4702 135.7569,160.6292 C135.5449,154.6582 135.6479,\n            148.6742 135.6999,142.6952 C135.7679,135.0662 138.3559,128.6922 145.3599,124.8822 C147.2959,\n            123.8292 147.7519,122.5322 147.7349,120.5452 C147.6649,111.9092 147.6109,103.2722 147.7569,\n            94.6382 C147.8009,92.0132 146.9799,91.2102 144.3769,91.2962" id="Fill-9" fill="#8c8d8e"></path>\n            <path d="M110.3095,117.074 C110.3265,114.616 109.4485,113.950948 107.1345,113.998 C101.3365,\n            114.117 95.5265,114.204 89.7365,113.96 C86.7245,113.833 86.2185,115.041 86.2735,117.672 C86.4225,\n            124.795 86.3255,131.923 86.3245,139.049 C86.3245,146.34 86.4355,153.634 86.2645,160.922 C86.2035,\n            163.546 86.9745,164.336 89.6015,164.249 C95.3955,164.057 101.2015,164.133 107.0005,164.217 C109.1175,\n            164.247 110.3385,163.986 110.3185,161.321 C110.2015,146.573 110.2115,131.823 110.3095,117.074" \n            id="Fill-11" fill="#8c8d8e"></path>\n            <path d="M31.1347,116.1951 C25.3367,116.4001 19.5237,116.3591 13.7217,116.2131 C11.2637,116.1521 \n            10.6717,117.0871 10.6857,119.3921 C10.7747,133.3221 10.7877,147.2541 10.6847,161.1851 C10.6667,163.6601 \n            11.5637,164.2771 13.8597,164.2291 C19.6617,164.1061 25.4757,164.0161 31.2717,164.2601 C34.2827,164.3871 \n            34.7937,163.2071 34.7267,160.5531 C34.5597,153.9241 34.6717,147.2871 34.6717,140.6531 C34.6717,133.6881 \n            34.5377,126.7181 34.7367,119.7581 C34.8177,116.9131 33.9317,116.0961 31.1347,116.1951" id="Fill-13" \n            fill="#8c8d8e"></path>\n            <path d="M182.5937,62.2083 C175.8157,62.4493 169.0307,62.4883 162.2477,62.6073 L162.2467,62.6073 \n            C161.0087,63.1583 161.4327,64.2813 161.4317,65.1903 C161.4087,83.2963 161.4087,101.4033 161.4347,\n            119.5103 C161.4357,120.4033 160.9787,121.5473 162.2837,122.0423 C169.0747,122.1203 175.8697,122.1063 \n            182.6567,122.3223 C185.0277,122.3973 185.2947,121.3543 185.2887,119.3853 C185.2347,101.3103 \n            185.2377,83.2343 185.290773,65.1593 C185.2967,63.1633 184.9367,62.1253 182.5937,62.2083" \n            id="Fill-15" fill="#8c8d8e"></path>\n            <path d="M178.6747,133.095 C186.1527,133.096 193.6297,133.02 201.1057,133.12 C206.6837,133.197 \n            209.9207,136.107 209.9837,141.656 C210.1537,156.606 210.1427,171.56 209.9877,186.51 C209.9317,\n            192.015 206.6527,195.159 201.1977,195.197 C185.9127,195.303 170.6257,195.306 155.3397,195.216 \n            C149.4057,195.182 146.3497,192.185 146.3107,186.367 C146.2127,171.582 146.2197,156.795 146.3047,\n            142.01 C146.3387,136.149 149.3577,133.194 155.2477,133.118 C163.0557,133.019 170.8657,133.094 \n            178.6747,133.095" id="Fill-17" fill="#fbc0af"></path>\n            <path d="M186.1288,150.0833 C184.6798,156.9563 182.9098,165.3223 181.1508,173.6913 C180.7868,\n            175.4293 179.7388,176.1553 177.9798,176.1143 C176.1458,176.0713 175.3328,175.0033 174.9608,\n            173.4093 C173.0558,165.2363 171.0608,157.0593 170.2818,148.6993 C169.8138,143.6663 173.1078,\n            140.3553 177.7748,140.2323 C182.7748,140.1013 186.1058,143.4083 186.1288,150.0833" \n            id="Fill-19" fill="#FDFDFC"></path>\n            <path d="M177.7314,188.0823 C175.7614,187.9153 174.3044,186.6683 174.3184,184.3533 C174.3334,\n            182.0403 175.8334,180.6253 178.1304,180.6793 C180.3624,180.7313 182.0564,182.0443 181.9314,\n            184.4023 C181.8194,186.5383 180.5864,188.1203 177.7314,188.0823" id="Fill-21" fill="#FCF6F3"></path>\n        </g>\n    </g>\n    </svg>');var d=dp(h,"text",[1]);pp(h,{"font-size":"".concat(pI(c,o),"px")}),d.html(s)}},{key:"draw",value:function(t){this.render(t||document.getElementById(this.renderAt()))}},{key:"updateWrapper",value:function(t){return this.name(t.name),this.boundBox(t.config.dimensions),this.setParams(t),this}},{key:"setParams",value:function(t){var e=t.config,n=e.target,r=e.className;return this.component=t.component,this.params=t,this.target(n),this.className(r),this.position(t.config.position),this}}]),n}(GP);function vI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vI(Object(n),!0).forEach((function(e){_C()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mI,bI={title:{headerCell:"titleCell",configType:wD},subtitle:{headerCell:"subtitleCell",configType:kD},columnHeader:{headerCell:"columnHeaderCell",configType:{}}},xI=(QR={},_C()(QR,LA,LA),_C()(QR,BA,BA),_C()(QR,"center","h-center"),QR),_I=function(t,e,n){var r=null,i=n.components,a=n.layoutConfig,o=bI[t],c=o.headerCell,u=o.configType;if(i.headers&&i.headers[c]){var s=t===TA||"subtitle"===t?a[t]:a.axesHeaders.column,l={name:t,component:i.headers[c],config:s=Object.assign({},s,yI(yI({classPrefix:a.classPrefix},{target:"canvas"}),{},{alignWith:"".concat(OP[0],"-").concat(CP[1]),alignment:xI[s.align],className:u.className||s.className}))},f=e.getComponent(t);r=f?f.updateWrapper(l):new ZR(l)}return r},wI=function(t,e,n,r,i){if(i){var a=n.layoutConfig,o=a.scrollBar,c=r.viewInfo().layoutDimensions,u=c.actualCenterMeasures,s=c.unitHeights,l=c.unitWidths,f=(O=o[t],{vertical:{componentName:"verticalScrollBar",width:"thickness",height:"layoutBasedMeasure",layoutBasedMeasure:"height",viewMeasure:"viewHeight",rowAlign:1,colAlign:"right"===O.align?2:0,position:O.align,alignment:HA},horizontal:{componentName:"horizontalScrollBar",width:"layoutBasedMeasure",layoutBasedMeasure:"width",viewMeasure:"viewWidth",height:"thickness",rowAlign:"top"===O.align?0:2,colAlign:1,position:O.align,alignment:LA}})[t],h=f.componentName,d=f.layoutBasedMeasure,p=f.width,g=f.height,v=f.rowAlign,y=f.colAlign,m=f.viewMeasure,b=f.position,x=f.alignment,_={thickness:o.thickness,layoutBasedMeasure:c[m][1]},w=r.scrollInfo()[t],k=u[d],S=c[m][1],M={name:h,config:Object.assign({},yI(yI({classPrefix:a.classPrefix},{target:"canvas"}),{},{scrollBarComponentConfig:yI(yI({},o),{},{classPrefix:a.classPrefix}),type:t,alignWith:"".concat(OP[v],"-").concat(CP[y]),alignment:x,position:b})),dimensions:{width:_[p],height:_[g],totalLength:k,viewLength:S,unitHeights:s,unitWidths:l}},E=e.getComponent(h);return w?E?E.updateWrapper(M):new dI(M):(E&&E.remove(),null)}var O;return null},kI=function(t,e,n,r){if(n){var i=null,a=e.components,o=e.measurement,c=a.mappedLegends[r],u=c.legends,s=c.config;if(u&&u.length){var l=yI(yI(yI({},s),{target:"canvas"}),{},{measurement:o}),f=function(t){return t===Hm?"topLegend":t===Wm?"bottomLegend":t===LA?"leftLegend":"rightLegend"}(r),h={name:f,component:u,config:l},d=t.getComponent(f);i=d?d.updateWrapper(h):new JR(h)}return i}return null},SI=function(t,e,n){var r,i=t._layoutManager,a=function(t){var e,n=t.components,r=n.rows,i=n.columns,a=n.values;return e={rows:r,columns:i,values:a},Object.keys(e).every((function(t){return e[t]}))}(n);return r={},_C()(r,TA,_I(TA,i,n)),_C()(r,"subtitle",_I("subtitle",i,n)),_C()(r,"columnHeader",_I("columnHeader",i,n)),_C()(r,"message",function(t,e,n){for(var r=e.components,i=e.measurement,a=0,o=0,c=Object.values(r.headers);o<c.length;o++)a+=c[o].logicalSpace().height;if(!n){var u={height:i.canvasHeight-a,width:i.canvasWidth},s=t.getComponent(WA),l=s&&s.getBoundBox()||u,f=l.height,h=l.width,d={name:"message",component:null,config:yI(yI({},{target:"canvas"}),{},{dimensions:{height:f,width:h},message:"Insufficient data or incorrect configurations",classPrefix:SD,position:HA})},p=t.getComponent("message");return p?p.updateWrapper(d):new gI(d)}return null}(i,n,a)),_C()(r,"topLegend",kI(i,n,a,HA)),_C()(r,"bottomLegend",kI(i,n,a,Wm)),_C()(r,"leftLegend",kI(i,n,a,LA)),_C()(r,"rightLegend",kI(i,n,a,BA)),_C()(r,WA,function(t,e,n,r,i){if(r){var a=e.layoutConfig,o=yI(yI({},{target:"canvas"}),{},{pagination:a.pagination,classPrefix:a.classPrefix,dimensions:{height:0,width:0}}),c={name:WA,component:n,config:o,store:i},u=t.getComponent(WA);return u?u.updateWrapper(c):new bD(c)}return null}(i,n,e,a,t._store)),_C()(r,"verticalScrollBar",wI("vertical",i,n,e,a)),_C()(r,"horizontalScrollBar",wI("horizontal",i,n,e,a)),r},MI=function(){function t(e){$A()(this,t),this._scrollBarComponents={},this._attachedComponents={},this._dependencies=e,this.updateStoreHorizontalScroll=B()(this.updateStoreHorizontalScroll.bind(this),50,yD),this.updateStoreVerticalScroll=B()(this.updateStoreVerticalScroll.bind(this),50,yD)}return QA()(t,[{key:"dependencies",value:function(){return arguments.length?(this._dependencies=arguments.length<=0?void 0:arguments[0],this):this._dependencies}},{key:"scrollBarComponents",value:function(){return arguments.length?(this._scrollBarComponents=arguments.length<=0?void 0:arguments[0],this):this._scrollBarComponents}},{key:"attachedComponents",value:function(){return arguments.length?(this._attachedComponents=arguments.length<=0?void 0:arguments[0],this):this._attachedComponents}},{key:"preventBrowserScroll",value:function(t,e){return this.scrollBarComponents()[t]&&e.preventDefault(),this}},{key:"updateStoreHorizontalScroll",value:function(t){this._dependencies.store.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".scrollLeft"),t)}},{key:"updateStoreVerticalScroll",value:function(t){this._dependencies.store.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".scrollTop"),t)}},{key:"performAttachedScrollFunction",value:function(t,e){return"horizontal"===t?this.updateStoreHorizontalScroll(e):this.updateStoreVerticalScroll(e),Object.values(this.attachedComponents()).forEach((function(n){n.performScrollAction(t,e)})),this}},{key:"triggerScrollBarAction",value:function(t,e){return this.scrollBarComponents()[t]&&this.scrollBarComponents()[t].scrollDeltaTo(e),this}}]),t}();function EI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function OI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?EI(Object(n),!0).forEach((function(e){_C()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EI(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var CI,AI,PI,DI=function(t,e){var n=Js({},t.config()),r=e.getBoundingClientRect(),i=r.height,a=r.width,o=t.height(),c=t.width(),u=t.composition().visualGroup,s=u.placeholderInfo(),l=s.isColumnSizeEqual,f=s.isRowSizeEqual,h=s.priority,d=s.rows,p=s.columns,g=s.values,v=s.cellRenderer,y=s.priorityMaxWidths,m=s.priorityMinWidths,b=t.config(),x=b.minWidth,_=b.minHeight,w=b.classPrefix,k=b.showHeaders,S=b.legend,M=b.pagination,E=b.scrollBar,O=b.axesHeaders,C=t.title()[1],A=t.subtitle()[1],P=function(t){var e,n=t.config().legend,r=t.title()[1],i=t.subtitle()[1],a=(e={},_C()(e,"".concat(HA,"-").concat(HA),[TA,"subtitle","group"]),_C()(e,"".concat(zA,"-").concat(zA),["group","subtitle",TA]),_C()(e,"".concat(HA,"-").concat(zA),[TA,"group","subtitle"]),_C()(e,"".concat(zA,"-").concat(HA),["subtitle","group",TA]),e),o=[["legend","layout"],["layout","legend"]],c=r.position||HA,u=i.position||HA;return{headers:a["".concat(c,"-").concat(u)],legends:n.position===LA||n.position===HA?o[0]:o[1]}}(t);i=Math.floor(i),a=Math.floor(a);var D=Math.max(o>0?o:i,_),R=Math.max(c>0?c:a,x),I=function(t,e,n){var r=0,i={},a=t.subtitle(),o=XR(a[0]),c=t.config().axesHeaders.column.show?[TA,"subtitle","columnHeader"]:[TA,"subtitle"];return e>=200&&n>=200&&c.forEach((function(e){var n={},c="";if("columnHeader"===e?(n=t.config().axesHeaders.column,c=t.composition().visualGroup.matrix().column().getColumnTitle()):(n=t[e](),c=XR(n[0])),c){var u=e===TA||"subtitle"===e?n[1]:n;u.width=t.width(),u.height=t.height(),u.classPrefix=t.config().classPrefix,u.content=c,u.padding=e===TA&&o&&!o.length?a[1].padding:u.padding;var s=function(t,e,n,r){return t?function(t,e,n,r){var i,a=t.content,o=t.classPrefix,c=t.maxLines,u=r||new UR({type:e===TA?"header":"text",className:"".concat(o,"-").concat(e,"-cell"),subType:e},{labelManager:n}).config({maxLines:c}).minSpacing({width:0,height:0});return u.source(a),u._minTickDiff={height:0,width:0},i=t.position===HA?{top:0,bottom:t.padding}:{top:t.padding,bottom:0},u.config({margin:i}),{height:u.getLogicalSpace().height,cell:u}}(t,e,n,r):""}(u,e,t.dependencies().smartlabel,t["".concat(e,"Cell")]),l=s.height,f=s.cell;i["".concat(e,"Cell")]=f,t._composition[e]=f,r+=l}})),{headerHeight:r,headers:i}}(t,D,R),T=I.headers,N=I.headerHeight,F=function(t,e,n,r){var i={height:n,width:r,headerHeight:e},a=t.config(),o=a.legend,c=o.show,u=o.position;o.sort=Js(o.sort||{},a.sort),o.classPrefix=t.config().classPrefix;var s=jD(u);return o.show=c?"vertical"===s&&r>200||"horizontal"===s&&n>200:c,o.align=s,function(t,e,n){var r=[],i=n.height,a=n.width,o=n.headerHeight,c=function(t){var e=[],n=t.getRetinalAxes();return Object.entries(n).forEach((function(n){var r=n[0];n[1].forEach((function(n){if(n){var i=n.config(),a=i.field,o=i.type,c=i.step;if(a&&n.domain()){var u="boolean"==typeof c&&c,s=jA["".concat(o,"-").concat(u,"-").concat(r)];e.push({scale:n,canvas:t,fieldName:a,title:Xl(t.data(),a),LegendCls:s,scaleType:r})}}}))})),e}(e),u=e.config().invalidValues,s=e.registry().interactions,l=ql(u);return c.forEach((function(n){var c={},u=n.LegendCls,f=n.scale,h=n.fieldName,d=n.title,p=n.scaleType;t[p].show=void 0!==t[p].show?t[p].show:t.show;var g=Js(KR({},yf(["color","shape","size"],t)),t[p]||{}),v=Us(g,"fields",h)||{},y=Us(v,f.config().as)||{},m=Js(KR({},g),Js(KR({},v),y));m.align=jD(m.position);var b=m.title||{};if(b.text=b.text||d,m.show){var x=m.align,_=null;_||(_=u.create({labelManager:e._dependencies.smartlabel,cells:{AxisCell:zR,TextCell:UR},registry:{interactions:s}})),c.maxHeight="vertical"===x?i-o:.2*i,c.maxWidth="horizontal"===x?a:.2*a,c.width=Math.min(c.maxWidth,m.width),c.height=Math.min(c.maxHeight,m.height),[DA,RA,IA].forEach((function(t){c[t]=m[t]}));var w=_.metaData();w instanceof bt&&w.dispose();var k=e.composition().visualGroup.matrix().geom().getMatrix()[0][0].source().layers();m.shape=function(t,e){var n=t.map((function(t){return t.config().mark}));return FA[("color"===e||"size"===e)&&n.includes("point")]}(k,p),_.scale(f).valueParser(l).title(b).fieldName(h).config(m).metaData(e.composition().visualGroup.getGroupByData().project([h])).measurement(c).canvasAlias(e.alias()).setLegendMeasures().setParentInfo({canvasRoot:e.mount()}),r.push({canvas:e,legend:_,scaleType:p})}})),r}(o,t,i,t.composition().legend)}(t,N,D,R),j=[HA,zA,LA,BA].reduce((function(t,e){return t[e]={legends:[],config:Js(OI({},S),{position:e,align:jD(e)})},t}),{}),L=F.reduce((function(t,e){var n=e.legend.config().position;return t[n]&&t[n].legends.push(e),t}),j);t._composition.legend={},F.forEach((function(e){var n=t._composition.legend[e.scaleType]||[];n.push(e.legend),t._composition.legend[e.scaleType]=n}));var B=Object.keys(L).reduce((function(t,e){var n=L[e],r=n.legends,i=n.config,a={width:0,height:0};return r.length>0&&(a=function(t,e,n,r){var i=t.map((function(t){return t.legend.measurement()})),a={width:0,height:0};return i.forEach((function(t){var i,o;o=Math.min(t.width,t.maxWidth),i=Math.min(t.height,t.maxHeight),"horizontal"===e.align?a.width+o>r?(a.width=r,a.height+=i):(a.width+=o,a.height=Math.max(a.height,i)):a.height+i>n?(a.height=i,a.width+=o):(a.height+=i,a.width=Math.max(a.width,o))})),"horizontal"===e.align&&(a.width=r),a}(r,i,D,R)),t[e]=a,t}),{}),z=B[LA].width+B[BA].width,H=B[HA].height+B[zA].height,W={headers:T,mappedLegends:L,canvases:[t],rows:d,columns:p,values:g,cornerMatrices:u.cornerMatrices()},V={mountSpace:{height:i,width:a},headerHeight:N,legendSpace:B,canvasWidth:R,canvasHeight:D,width:R-z,height:D-N-H,minUnitHeight:t.minUnitHeight(),minUnitWidth:t.minUnitWidth()};return{layoutConfig:n=Js(n,{classPrefix:w,showHeaders:k,border:Js(u.metaData().border,t.config().border),layoutArrangement:P,legend:S,buffer:E.thickness,pagination:M,title:C,subtitle:A,axesHeaders:O,isColumnSizeEqual:l,isRowSizeEqual:f,mount:e,priority:h,cellRenderer:v,priorityMaxWidths:y,priorityMinWidths:m}),components:W,measurement:V}},RI=(mI={},_C()(mI,TA,0),_C()(mI,"subtitle",1),_C()(mI,"columnHeader",2),_C()(mI,"topLegend",3),_C()(mI,"bottomLegend",4),_C()(mI,"leftLegend",5),_C()(mI,"rightLegend",6),_C()(mI,"verticalScrollBar",7),_C()(mI,"horizontalScrollBar",8),_C()(mI,WA,9),_C()(mI,"message",10),mI),II={0:TA,1:"subtitle",2:"columnHeader",3:"topLegend",4:"bottomLegend",5:"leftLegend",6:"rightLegend",7:"verticalScrollBar",8:"horizontalScrollBar",9:WA,10:"message"},TI=function(t){var e=bt.FieldType.DIMENSION;return t.some((function(t){return t.type()===e}))},NI=function(t){if(t.context.composition().visualGroup){var e=t.interactionPolicy(),n=e.behaviours,r=e.sideEffects;t.applyPropagationPolicy({behaviours:n,sideEffects:r})}},FI={tooltip:function(t,e){return function(t){var e=t.rowFacets,n=t.colFacets,r=t.rowProjections,i=t.colProjections;if(e.length||n.length)return!0;var a=i.flat(),o=r.flat();return!(!TI(a)&&!TI(o)||!(a.length>1||o.length>1))}(e.context.composition().visualGroup.resolver().getAllFields())?{selectionSummary:{order:1,className:"tooltip-content-container-selectionSummary-crosstab",showMultipleMeasures:!0},highlightSummary:{order:0,className:"tooltip-content-container-highlightSummary-crosstab"}}:{selectionSummary:{order:0,className:"tooltip-content-container-selectionSummary-default",showMultipleMeasures:!1},highlightSummary:{order:1,className:"tooltip-content-container-highlightSummary-default"}}},selectionBox:function(t,e){var n,r,i,a,o=e.context.composition().visualGroup.resolver().getAllFields(),c=Us(t.sideEffects,"selectionBox","persistent"),u=t.behaviours.brush.mode,s={};return void 0===c&&(r=(n=o).rowProjections,i=n.colProjections.flat(),a=r.flat(),ND(i)&&ND(a)?s.persistent=!0:s.persistent=!1),u&&(s.brush=u),s}},jI=function(t,e,n){var r=zs(e[t],e.sideEffects[t]);if(t in FI){var i=FI[t](e,n);return Js(i,r)}return r||{}},LI=function(t){var e=t.context.config().interaction,n=t.context.composition().visualGroup,r=n.resolver().getAllFields(),i=r.rowProjections,a=r.colProjections,o=i.flat(),c=a.flat(),u=c.flat().filter((function(t){return"temporal"===t.subtype()&&"continuous"===t.as()})),s=o.flat().filter((function(t){return"temporal"===t.subtype()&&"continuous"===t.as()}));if(u.length&&ND(o)||s.length&&ND(c)){var l=e.behaviours.brush,f=e.sideEffects.selectionBox;l.mode=zs(l.mode,u.length?"x":"y"),f.persistent=zs(f.persistent,!0)}t.config(Object.assign({},e,{valueParser:n.valueParser()}));var h=t.sideEffects(),d=!1;e.sideEffects.tooltip.common?(h.tooltip.enable(),d=!0):h.tooltip.disable(),function(t,e,n){var r=e.context.composition().visualGroup,i=r.matrix().geom(),a=e.sideEffects();for(var o in a){var c=a[o],u=jI(o,t,e);c.config(u)}i.forEach((function(i){var a=i.source().firebolt();a.groupFirebolt(e),a.config(Object.assign({},t,{valueParser:r.valueParser()}));var o=a.sideEffects();for(var c in o){var u=o[c],s=jI(c,t,e);u.config(s)}n&&a.sideEffects().tooltip.disable()}))}(e,t,d)},BI=function(t,e){return e.context.composition().visualGroup.matrix().geom().findUnitByPayload(t)},zI=function(t,e){return!e.canvasId||t.canvasId===e.canvasId},HI=function(t,e,n){var r=n.fields||[],i=e.fields;return t.canvasId===e.canvasId||!r.length||nf(r,i).length},WI={behaviours:{"*":zI,highlight:function(t,e,n){return!zI(t,e)||"canvas"!==t.type||(t.layerId?t.layerId===e.layerId:!t.unitId||t.unitId===e.unitId)},filter:function(t,e){return"canvas"!==t.type||t.canvasId!==e.canvasId}},sideEffects:(CI={"*":zI,selectionBox:function(t,e){return t.unitId===e.unitId},tooltip:HI,highlighter:HI},_C()(CI,v.AXIS_LABEL_HIGHLIGHTER,HI),_C()(CI,"anchors",HI),_C()(CI,"crossline",HI),CI)},VI=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(){var t;$A()(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];(t=e.call.apply(e,[this].concat(i)))._entryExitSet=new Map,t._payloads={},t.interactionPolicy(t.constructor.defaultInteractionPolicy());var o=t.context._throwback;return t._propagationDms={},o.registerChangeListener([st.MATRIX_CREATED],(function(){var e=t.context.composition().visualGroup;if(e){LI(zD()(t)),t._propagationCount=new Map;var n=e.matrix().geom().getUnits().map((function(t){return t.firebolt()}));t.childFirebolts(n),NI(zD()(t)),n.forEach((function(e){e.onPropagationDone((function(e,r,i){var a=t._propagationCount.get(e.action)||0,o=++a;t._propagationCount.set(e.action,o),o===n.length&&(t._targetUnit=BI(e,zD()(t)),t.onUnitPropagationComplete(e,r,i),t._propagationCount.set(e.action,0))}))}))}})),t}return QA()(n,[{key:"childFirebolts",value:function(t){return t?(this._childFirebolts=t,this):this._childFirebolts}},{key:"createEntryExitSet",value:function(t,e,n){return new Ux({selectionSet:e,type:t,data:n})}},{key:"onUnitPropagationComplete",value:function(t,e,n){var r=this;if(this._targetUnit){var i=this.childFirebolts(),a=t.action,o=this.config().behaviours,c=Us(o[a],"common")?function(t){return t}:function(t){return t.id()===r._targetUnit.firebolt().id()},u=i.filter(c).map((function(t){return t.getEntryExitSet(a)})).filter((function(t){return t}));this._entryExitSet[a]&&this._entryExitSet[a].dispose(!1),u.length?this._entryExitSet[a]=new Gx(u,{extraData:{},alias:"visual-group",action:a}):this._entryExitSet[a]=null,this._payloads[a]=t;var s=this._targetUnit.getLayerById(t.sourceLayer);this._targetLayer=s||this._targetUnit.layers()[0],this.dispatchSideEffects(a,t,n)}}},{key:"interactionPolicy",value:function(){return arguments.length?(this._interactionPolicy=Js(Js({},this.constructor.defaultInteractionPolicy()),(arguments.length<=0?void 0:arguments[0])||{}),NI(this),this):this._interactionPolicy}},{key:"registerSideEffects",value:function(t){for(var e in t)this._sideEffectDefinitions[t[e].formalName()]=t[e];return this.initializeSideEffects(),this}},{key:"target",value:function(){return"visual-group"}},{key:"id",value:function(){return this.context.alias()}},{key:"data",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.context.composition().visualGroup;if(t){var r=e.unitDataModels,i=e.layerDataModels,a=t;n.groupedData(a);var o=n.matrix().geom();o.forEach((function(t,e,n){t.source().firebolt().data(r[e][n],i[e][n])}));var c=this._entryExitSet;return c.forEach((function(t,e){if("filter"!==e){var n=t.mergedEnter,r=t.mergedExit;r._model&&r._model.dispose(!1),n._model&&n._model.dispose(!1),c.delete(e)}})),this}return n.getGroupByData()}},{key:"resetData",value:function(){var t=this.context.composition().visualGroup;return t.resetData(),t.matrix().geom().forEach((function(t){t.source().firebolt().resetData()})),this}},{key:"propagate",value:function(t,e,n){var r=this.context.composition().visualGroup.matrix().geom(),i=r.getAllDataModelIds(),a=r.findPlaceHolderById(n.sourceId),o=this.getPropagationIdentifiers(t,a),c=o.propIdentifiers,u=o.interpolated,s=this.getPropagationSource();this._payloads[t]=Object.assign({},e),s.propagate(e.criteria?c:null,Object.assign({},e,{action:this.getPropagationBehaviour(t),sourceAction:t,propagationSourceId:this.id(),sourceCanvas:this.context.alias(),sourceUnit:n.sourceId,applyOnSource:n.applyOnSource,sourceType:"canvas",interpolated:u}),{save:this.getPropagationBehaviour(t).includes("filter"),targetDms:[s.id()].concat(bC()(i)),isQuery:!0})}},{key:"getPropagationBehaviour",value:function(t){return this._propagationBehaviourMap[t]||t}},{key:"getPropagationSource",value:function(){return this.context.composition().visualGroup.resolver()._groupedData}},{key:"sourceCanvas",value:function(){return this.context.alias()}},{key:"getApplicableSideEffects",value:function(t,e,n){var r=this.context.config().interaction.tooltip.mode;n.propPayload=n.propPayload||e;var i=this.sideEffects();return(t=e.sideEffects||t).filter((function(t){return!(t.name===v_&&"fragmented"===r||!i[t.name])&&i[t.name].shouldApply(e,n)}))}},{key:"getEntryExitSet",value:function(t){return this._entryExitSet[t]}},{key:"getPlotPointsFromIdentifiers",value:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(t=this._targetUnit).getPlotPointsFromIdentifiers.apply(t,n.concat([this._targetLayer.id()]))}},{key:"getDrawingContext",value:function(){return this._targetUnit.getDrawingContext()}},{key:"getSourceInfo",value:function(){return Object.assign({},this._targetUnit.getSourceInfo(),{targetLayer:this._targetLayer})}},{key:"layers",value:function(){return this._targetUnit.layers()}},{key:"getPropagationIdentifiers",value:function(t,e){var n=this.config().behaviours;return function(t,e,n,r){var i,a={operator:"or",conditions:[]},o=!0;return(r.union?t:[[n]]).forEach((function(t){t.forEach((function(t){var n=t.firebolt().getPropagationIdentifiers(e);if(n){var r=n.query;i=n.interpolated,a.conditions=[].concat(bC()(a.conditions),bC()(r.conditions))}o=o&&null===n}))})),{propIdentifiers:o?null:a.conditions.length?a:null,interpolated:i}}(this.context.composition().visualGroup.resolver().units(),t,e,{union:Us(n[t],"common")})}},{key:"getPayload",value:function(t){return this._payloads[t]}},{key:"sanitizedPayload",value:function(t){var e=Object.assign({},t);return t.sideEffects&&(e.sideEffects=t.sideEffects.map((function(t){return{name:t}}))),e}},{key:"dispatchBehaviour",value:function(t,e){var n=e.criteria,r=this.data(),i=function(t,e){if(null===t)return{query:null,fields:[]};var n=t.range,r=t.dimensions,i=[],a=[];return r&&(r instanceof Array?function(){var t=r[0];a.push.apply(a,dg()(t));for(var e=[],n=function(n){t.forEach((function(t,i){e.push({field:t,value:r[n][i],operator:"eq"})}))},o=1;o<r.length;o++)n(o);i.push({operator:"and",conditions:e})}():ps(r)&&(i.push({operator:"and",conditions:Object.keys(r).map((function(t){return{field:t,value:r[t],operator:"in"}}))}),a.push.apply(a,dg()(Object.keys(r))))),n&&(a.push.apply(a,dg()(Object.keys(n))),i.push(e.getFilterRangeQuery(n))),{query:{conditions:i,operator:"and"},fields:a}}(n,this.data()),a=i.query,o=i.fields,c=void 0===o?[]:o,u=this.sanitizedPayload(e),s=this.context.composition().visualGroup.matrix().geom().getAllDataModelIds();r.propagate(a,Object.assign({},{action:[t],sourceAction:t,fields:c,propagationSourceId:this.id(),sourceType:"canvas",sourceCanvas:this.id()},u),{isQuery:!0,save:this.getPropagationBehaviour(t).includes("filter"),targetDms:[r.id()].concat(bC()(s))})}},{key:"getInteractions",value:function(){return{physicalActions:this._actions.physicalActionDefs,behaviours:this._actions.behaviourDefs,sideEffects:this._sideEffectDefinitions,behaviourEffectMap:this._behaviourEffectMap,physicalBehaviouralMap:this._actionBehaviourMap}}},{key:"getUnitDataModels",value:function(t){var e=this.context.composition().visualGroup.matrix().geom(),n=[];return e.forEach((function(e,r,i){n[r]||(n[r]=[]),n[r][i]=e.source().firebolt().getEntryExitSet(t).mergedEnter.model})),n}},{key:"getLayerDataModels",value:function(t){var e=this.context.composition().visualGroup.matrix().geom(),n=[];return e.forEach((function(e,r,i){n[r]||(n[r]=[]),n[r][i]||(n[r][i]={}),e.source().layers().forEach((function(e){var a=e.firebolt().getEntryExitSet(t).mergedEnter.model;n[r][i][e.id()]=a}))})),n}}],[{key:"defaultInteractionPolicy",value:function(){return WI}}]),n}(Lx),UI={app:{group:{},units:{},layers:{},canvas:{}},local:{canvas:{},group:{},units:{},layers:{}},interactions:{select:{entrySet:null,exitSet:null}},virtualScrolling:{scrollLeft:0,scrollTop:0,viewport:{rowStart:0,rowEnd:0,colStart:0,colEnd:0}}},GI=(AI=0,function(){return AI++}),qI=function(t){oP()(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lP()(t);if(e){var i=lP()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return uP()(this,n)}}(n);function n(t){var r,i;$A()(this,n),(i=e.call(this))._allOptions=Object.assign({},LD,MD),i._registry={},i._composition={},i._cachedProps={},i._alias=null,i._renderedResolve=null,i._renderedPromise=new Promise((function(t){i._renderedResolve=t})),i._composition.layout=new wR,i._store=new Tp(UI),i._throwback=new Tp((r={},_C()(r,st.MATRIX_CREATED,!1),_C()(r,st.ON_LAYER_DRAW,null),_C()(r,"interactionModelInitialized",!1),r));var a=o.CANVAS_LOCAL_NAMESPACE,c=Object.assign({},LD,MD,ED);return Np(zD()(i),c,i._store,{namespace:a}),i.dependencies(Object.assign({},t,i._dependencies)),i.alias("canvas-".concat(GI())),i.title("",{}),i.subtitle("",{}),i.legend({}),i.color({}),i.shape({}),i.size({}),function(t){var e=t._store,n=Object.keys(t._allOptions),r=[].concat(bC()(n),bC()(Object.keys(ED))),i=[].concat(bC()(n),bC()(Object.keys(ED))).map((function(t){return"".concat(o.CANVAS_LOCAL_NAMESPACE,".").concat(t)}));e.registerChangeListener(i,(function(){var e=!1,n=!1,i=t.data();if(i){if([AA,PA].forEach((function(r){var i=t[r]();TD(i)&&(t[r]([gt]),e=!0,n=!0)})),e&&!i.getField(gt)){var a=i.calculateVariable({name:gt,type:ym},[pt],(function(){return 1}));t.data(a)}}else n=!0;if(!n){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var s=AD(r,c);s&&t.mount()&&(CD(t),t.render())}}),!0)}(zD()(i)),i._layoutManager=new UP({className:"muze-group-container"}),i}return QA()(n,[{key:"store",value:function(){return this._store}},{key:"layout",value:function(){return arguments.length?this:this.composition().layout}},{key:"composition",value:function(){return arguments.length?this:this._composition}},{key:"done",value:function(){return this._renderedPromise}},{key:"alias",value:function(){if(arguments.length){var t=this.composition().visualGroup;return this._alias=arguments.length<=0?void 0:arguments[0],t&&t.alias(this.alias()),this}return this._alias}},{key:"firebolt",value:function(){return arguments.length?(this._firebolt=arguments.length<=0?void 0:arguments[0],this):this._firebolt}},{key:"registry",value:function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0],e=Object.assign({},t.components),n=Object.assign({},t.componentSubRegistry),r=Object.assign({},t.interactions);this._registry={components:e,componentSubRegistry:n,interactions:r},FD(this);var i=OD(this);return this._composition.visualGroup=i[0],this.composition().visualGroup.alias(this.alias()),this}return this._registry}},{key:"dependencies",value:function(){return arguments.length?(this._dependencies=arguments.length<=0?void 0:arguments[0],this):this._dependencies}},{key:"lifeCycle",value:function(t){var e=this.dependencies().lifeCycleManager;return t?(e.register(t),this):e}},{key:"legend",value:function(){return arguments.length?this:this.composition().legend}},{key:"once",value:function(t){return this.dependencies().lifeCycleManager.retrieve(t)}},{key:"render",value:function(){var t,e=this.mount(),n=this.dependencies().lifeCycleManager,r=this.composition().visualGroup;(t=this._store).lockModel(),t.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".scrollLeft"),0),t.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".scrollTop"),0),t.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.rowStart"),0),t.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.rowEnd"),0),t.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.colStart"),0),t.commit("".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".viewport.colEnd"),0),t.unlockModel(),xf.endMeasure("initTime"),xf.startMeasure("layoutTime");var i=DI(this,e);n.notify({client:this,action:"beforedraw"}),function(t,e){var n=e.components,r=e.layoutConfig,i=e.measurement,a=n.rows,o=n.columns,c=n.values,u=n.cornerMatrices,s=u.topLeft,l=u.topRight,f=u.bottomLeft,h=u.bottomRight;a&&o&&t.measurement(i).config(r).matrices({top:[s,o[0],l],center:[a[0],c,a[1]],bottom:[f,o[1],h]}).triggerReflow()}(this.layout(),i),r.matrix().geom().forEach((function(t){t.source().layers().forEach((function(t){t.postLayout()}))})),r.matrix().clearExtendedAxisDomainCache(),r.matrix().extendAxisDomainsIfNeeded(),this._layoutManager.dimension({height:i.measurement.canvasHeight,width:i.measurement.canvasWidth}),this._layoutManager.renderAt(e),xf.endMeasure("layoutTime");var a,c,u,s,l,f,h=function(t,e){var n=t._layoutManager,r=t.layout(),i=RI.grid,a=SI(t,r,e),o=Object.keys(RI).map((function(t){return a[t]}));return o[i]&&function(t,e){var n=RI.verticalScrollBar,r=RI.grid,i=t[RI.horizontalScrollBar],a=t[n],o=t[r],c=new MI({store:e._store}),u={};a&&(u.vertical=a),i&&(u.horizontal=i),c.scrollBarComponents(u).attachedComponents({grid:o}),e.composition().hScrollBar=i,e.composition().vScrollBar=a,[i,a].forEach((function(t){t&&t.manager(c)})),o.scrollBarManager(c)}(o,t),o.forEach((function(t,e){if(!t){var r=II[e];n.removeComponent(r)}})),n.registerComponents(o).compute(),function(t){t.forEach((function(t){t&&t.attachListener()}))}(o),{componentWrappers:o}}(this,i).componentWrappers;this._componentWrappers=h,c=(a=this._layoutManager).getComponent(WA),u=a.getComponent("legend"),s=c&&c.getBoundBox(),l=this.composition().visualGroup.matrix().geom(),f=hp("#".concat(a.getRootNodeId())).node(),u&&u.setComponentInfo({rootNode:f}),l.forEach((function(t){t.valueOf().parentContainerInf({el:f,dimensions:s})})),function(t){for(var e=0,n=t.xAxes()||[],r=0;r<n.length;r++){var i=n[r].renderConfig().labels.rotation;if(i&&0!==i)return void(e=i)}e&&n.forEach((function(t){t.renderConfig({labels:{rotation:e}}),t.smartTicks(t.setTickConfig())}))}(this)}},{key:"xAxes",value:function(){return this.composition().visualGroup.getAxes("x")}},{key:"yAxes",value:function(){return this.composition().visualGroup.getAxes("y")}},{key:"getRetinalAxes",value:function(){return this.composition().visualGroup.getAxes("retinal")}},{key:"mount",value:function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0];return"string"==typeof(arguments.length<=0?void 0:arguments[0])&&(t=hp(arguments.length<=0?void 0:arguments[0]).node()),this._mount=t,this}return this._mount}},{key:"dispose",value:function(){var t=this.composition(),e=t.columnHeader,n=t.layout,r=t.legend,i=t.visualGroup;this.firebolt().dispose(),i.remove(),e&&e.remove(),n.remove(),this._layoutManager.removeAllComponents(),Object.values(r).forEach((function(t){return t.forEach((function(t){return t.dispose()}))}))}}],[{key:"withSettings",value:function(t,e,r){var i=new n(r);for(var a in t)i[a](t[a]);i.registry(e);var c,u=e.interactions;return i.firebolt(new VI(i,{behavioural:Object.assign({},u.behaviours.get()),physical:Object.assign({},u.physicalActions.get()),physicalBehaviouralMap:Object.assign({},u.physicalBehaviouralMap.get())},Object.assign({},u.sideEffects.get()),Object.assign({},u.behaviourEffectMap.get()))),(c=i)._store.registerChangeListener(["".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".scrollLeft"),"".concat(o.VIRTUAL_SCROLLING_NAMESPACE,".scrollTop"),"".concat(o.GROUP_GLOBAL_NAMESPACE,".domain.x"),"".concat(o.GROUP_GLOBAL_NAMESPACE,".domain.y")],(function(){if(c.mount()){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0][1],i=e[1][1],a=e[2][1],o=e[3][1],u=c._componentWrappers.find((function(t){return t instanceof bD})),s=c._prevDomainX===a&&c._prevDomainY===o;u.updateScrollableCompsContent(r,i,!s),ID(c),c._prevDomainX=e[2][1],c._prevDomainY=e[3][1]}}),!1),i}},{key:"formalName",value:function(){return"canvas"}}]),n}(kR),YI=(PI={},_C()(PI,pC.formalName(),pC),_C()(PI,fE.formalName(),fE),PI),XI={cells:YR,layers:IS},$I={components:function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YI,n=Object.assign({},e);return{register:function(e){var r=e.formalName();return n[r]=e,t},get:function(){return n}}}(YI),cells:YR(),layers:IS(),interactions:nw},KI=(n(111),Np),QI=eg,ZI=Ks,JI=sg,tT=xt,eT={},nT=$I.components,rT=function(t,e){t.forEach((function(t){e.register(t)}))},iT=function(){var t=N()(j.a.mark((function t(){var e,n,r,i,a,o,c,u,s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tT;case 2:for(s in e=t.sent,n=KI({},LD),r=I()(n,2),i=r[0],a=r[1],o=Object.assign({},$I.components.get()),c=Object.assign({},XI),u={},c)u[s]=c[s]($I[s].get());return i.canvas=function(){xf.startMeasure("initTime");var t=a.serialize(),e=qI.withSettings(t,{components:o,componentSubRegistry:u,interactions:iP.registry()},i.globalDependencies());return ZI(a,e,Object.keys(t)),e},i.globalDependencies=function(){return eT.smartlabel||(eT.smartlabel=new QI(1,"body")),{smartlabel:eT.smartlabel,lifeCycleManager:new JI,DataStore:e}},i.settings=function(){return a.serialize()},i.registry=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length?(e.forEach((function(t){var e=t.formalName();e in nT&&(o[e]=t)})),i):o},i.cellRegistry=function(){for(var t=u.cellRegistry,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length?(rT(n,t),i):t.get()},i.layerRegistry=function(){for(var t=u.layerRegistry,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length?(rT(n,t),i):t.get()},t.abrupt("return",i);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();iT.registry=$I,iT.Components={VisualLayer:{layers:{BaseLayer:bw,LineLayer:kk,TextLayer:Pk,TickLayer:wS,PointLayer:Hk,SimpleLayer:Jg,AreaLayer:fk,ArcLayer:wk},helpers:zS,enums:_,layerMixins:HS},VisualUnit:{constructor:fE,helpers:w,enums:M,UnitFireBolt:$M},VisualGroup:{constructor:pC,Encoders:C,encoderHelpers:O,groupUtils:E,enums:f},Canvas:{constructor:qI},Firebolt:{constructor:Lx}};var aT={sideEffects:y,standards:{SurrogateSideEffect:E_,SpawnableSideEffect:O_,GenericSideEffect:M_}},oT={behaviouralActions:g,standards:{GenericBehaviour:Jx,PersistentBehaviour:s_,VolatileBehaviour:t_}};iT.DataStore=bt,iT.DataModel=ot,iT.version=gC.version,iT.SideEffects=aT,iT.ActionModel=iP,iT.layerFactory=qw,iT.Operators=D,iT.Behaviours=oT,iT.utils=c;var cT=iT;e.default=cT}]).default}}]);